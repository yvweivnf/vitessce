{"ast":null,"code":"import { getMarkPropOrConfig, signalOrValueRef } from '../../common';\nimport { wrapCondition } from './conditional';\nimport * as ref from './valueref';\n/**\n * Return encode for non-positional channels with scales. (Text doesn't have scale.)\n */\n\nexport function nonPosition(channel, model) {\n  var opt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var markDef = model.markDef,\n      encoding = model.encoding,\n      config = model.config;\n  var vgChannel = opt.vgChannel;\n  var defaultRef = opt.defaultRef,\n      defaultValue = opt.defaultValue;\n\n  if (defaultRef === undefined) {\n    // prettier-ignore\n    defaultValue !== null && defaultValue !== void 0 ? defaultValue : defaultValue = getMarkPropOrConfig(channel, markDef, config, {\n      vgChannel: vgChannel,\n      ignoreVgConfig: true\n    });\n\n    if (defaultValue !== undefined) {\n      defaultRef = signalOrValueRef(defaultValue);\n    }\n  }\n\n  var channelDef = encoding[channel];\n  return wrapCondition(model, channelDef, vgChannel !== null && vgChannel !== void 0 ? vgChannel : channel, function (cDef) {\n    return ref.midPoint({\n      channel: channel,\n      channelDef: cDef,\n      markDef: markDef,\n      config: config,\n      scaleName: model.scaleName(channel),\n      scale: model.getScaleComponent(channel),\n      stack: null,\n      defaultRef: defaultRef\n    });\n  });\n}","map":{"version":3,"sources":["../../../../../src/compile/mark/encode/nonposition.ts"],"names":[],"mappings":"AAIA,SAAQ,mBAAR,EAA6B,gBAA7B,QAAoD,cAApD;AAEA,SAAQ,aAAR,QAA4B,eAA5B;AACA,OAAO,KAAK,GAAZ,MAAqB,YAArB;AAEA;;;;AAGA,OAAM,SAAU,WAAV,CACJ,OADI,EAEJ,KAFI,EAOE;AAAA,MAJN,GAIM,uEAAF,EAAE;AAAA,MAEC,OAFD,GAE8B,KAF9B,CAEC,OAFD;AAAA,MAEU,QAFV,GAE8B,KAF9B,CAEU,QAFV;AAAA,MAEoB,MAFpB,GAE8B,KAF9B,CAEoB,MAFpB;AAAA,MAGC,SAHD,GAGc,GAHd,CAGC,SAHD;AAAA,MAID,UAJC,GAI2B,GAJ3B,CAID,UAJC;AAAA,MAIW,YAJX,GAI2B,GAJ3B,CAIW,YAJX;;AAMN,MAAI,UAAU,KAAK,SAAnB,EAA8B;AAC5B;AACA,IAAA,YAAY,KAAA,IAAZ,IAAA,YAAY,KAAA,KAAA,CAAZ,GAAA,YAAA,GAAA,YAAY,GAAK,mBAAmB,CAAC,OAAD,EAAU,OAAV,EAAmB,MAAnB,EAA2B;AAAC,MAAA,SAAS,EAAT,SAAD;AAAY,MAAA,cAAc,EAAE;AAA5B,KAA3B,CAApC;;AAEA,QAAI,YAAY,KAAK,SAArB,EAAgC;AAC9B,MAAA,UAAU,GAAG,gBAAgB,CAAC,YAAD,CAA7B;AACD;AACF;;AAED,MAAM,UAAU,GAAG,QAAQ,CAAC,OAAD,CAA3B;AAEA,SAAO,aAAa,CAAC,KAAD,EAAQ,UAAR,EAAoB,SAAS,KAAA,IAAT,IAAA,SAAS,KAAA,KAAA,CAAT,GAAA,SAAA,GAAa,OAAjC,EAA0C,UAAA,IAAI,EAAG;AACnE,WAAO,GAAG,CAAC,QAAJ,CAAa;AAClB,MAAA,OAAO,EAAP,OADkB;AAElB,MAAA,UAAU,EAAE,IAFM;AAGlB,MAAA,OAAO,EAAP,OAHkB;AAIlB,MAAA,MAAM,EAAN,MAJkB;AAKlB,MAAA,SAAS,EAAE,KAAK,CAAC,SAAN,CAAgB,OAAhB,CALO;AAMlB,MAAA,KAAK,EAAE,KAAK,CAAC,iBAAN,CAAwB,OAAxB,CANW;AAOlB,MAAA,KAAK,EAAE,IAPW;AAQlB,MAAA,UAAU,EAAV;AARkB,KAAb,CAAP;AAUD,GAXmB,CAApB;AAYD","sourceRoot":"","sourcesContent":["import { getMarkPropOrConfig, signalOrValueRef } from '../../common';\nimport { wrapCondition } from './conditional';\nimport * as ref from './valueref';\n/**\n * Return encode for non-positional channels with scales. (Text doesn't have scale.)\n */\nexport function nonPosition(channel, model, opt = {}) {\n    const { markDef, encoding, config } = model;\n    const { vgChannel } = opt;\n    let { defaultRef, defaultValue } = opt;\n    if (defaultRef === undefined) {\n        // prettier-ignore\n        defaultValue !== null && defaultValue !== void 0 ? defaultValue : (defaultValue = getMarkPropOrConfig(channel, markDef, config, { vgChannel, ignoreVgConfig: true }));\n        if (defaultValue !== undefined) {\n            defaultRef = signalOrValueRef(defaultValue);\n        }\n    }\n    const channelDef = encoding[channel];\n    return wrapCondition(model, channelDef, vgChannel !== null && vgChannel !== void 0 ? vgChannel : channel, cDef => {\n        return ref.midPoint({\n            channel,\n            channelDef: cDef,\n            markDef,\n            config,\n            scaleName: model.scaleName(channel),\n            scale: model.getScaleComponent(channel),\n            stack: null,\n            defaultRef\n        });\n    });\n}\n//# sourceMappingURL=nonposition.js.map"]},"metadata":{},"sourceType":"module"}