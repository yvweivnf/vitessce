{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import{getConfig,listConfigs}from'./api';import Welcome from'./Welcome';import Warning from'./Warning';import Vitessce from'./Vitessce';import'../css/index.scss';import'../../node_modules/react-grid-layout/css/styles.css';import'../../node_modules/react-resizable/css/styles.css';function AwaitResponse(props){var response=props.response,theme=props.theme;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var responseRef=useRef();useEffect(function(){response.then(function(c){responseRef.current=c;setIsLoading(false);});},[response]);return!isLoading?React.createElement(responseRef.current):/*#__PURE__*/React.createElement(Warning,{title:\"Loading...\",theme:theme});}function preformattedDetails(response){return\"\\n    ok: \".concat(response.ok,\"\\n    status: \").concat(response.status,\"\\n    statusText: \").concat(response.statusText,\"\\n    redirected: \").concat(response.redirected,\"\\n    type: \").concat(response.type,\"\\n    url: \").concat(response.url);// TODO: headers\n}function checkResponse(response,theme,debug){if(!response.ok){return Promise.resolve(function(){return/*#__PURE__*/React.createElement(Warning,{title:\"Fetch response not OK\",preformatted:preformattedDetails(response),theme:theme});});}return response.text().then(function(text){try{var config=JSON.parse(text);return Promise.resolve(function(){return/*#__PURE__*/React.createElement(Vitessce,{config:config,theme:theme// eslint-disable-next-line no-console\n,onConfigChange:debug?console.log:undefined,validateOnConfigChange:debug});});}catch(e){return Promise.resolve(function(){return/*#__PURE__*/React.createElement(Warning,{title:\"Error parsing JSON\",preformatted:preformattedDetails(response),unformatted:\"\".concat(e.message,\": \").concat(text),theme:theme});});}});}/**\n * Use the theme provided if it is valid, otherwise fall back to the 'dark' theme.\n * @param {string} theme A potentially invalid theme name.\n * @returns {string} A valid theme name.\n */function validateTheme(theme){return['light','dark'].includes(theme)?theme:'dark';}/**\n * Convenience function for creating the minimal Vitessce demo and demo listing\n * components based on the current URL parameters.\n * @param {object} params\n * @param {number|null} params.rowHeight The row height to pass to the Vitessce grid.\n * Optional. By default, null.\n * @returns A component, either <Welcome/> or <Vitessce/> depending on the URL params.\n */export function createApp(params){var _ref=params||{},_ref$rowHeight=_ref.rowHeight,rowHeight=_ref$rowHeight===void 0?null:_ref$rowHeight;var urlParams=new URLSearchParams(window.location.search);var datasetId=urlParams.get('dataset');var debug=urlParams.get('debug')==='true';var datasetUrl=urlParams.get('url');var showAll=urlParams.get('show')==='all';var theme=validateTheme(urlParams.get('theme'));if(datasetId){var config=getConfig(datasetId);return/*#__PURE__*/React.createElement(Vitessce,{config:config,rowHeight:rowHeight,theme:theme// eslint-disable-next-line no-console\n,onConfigChange:debug?console.log:undefined,validateOnConfigChange:debug});}if(datasetUrl){var responsePromise=fetch(datasetUrl).then(function(response){return checkResponse(response,theme,debug);}).catch(function(error){return Promise.resolve(function(){return/*#__PURE__*/React.createElement(Warning,{title:\"Error fetching\",unformatted:error.message,theme:theme});});});return/*#__PURE__*/React.createElement(AwaitResponse,{response:responsePromise,theme:theme});}var configs=listConfigs(showAll);return/*#__PURE__*/React.createElement(Welcome,{configs:configs,theme:theme});}","map":{"version":3,"sources":["C:/Users/wkuo/Documents/vitessce-forked-v1.2.2/vitessce/src/app/app.js"],"names":["React","useEffect","useRef","useState","getConfig","listConfigs","Welcome","Warning","Vitessce","AwaitResponse","props","response","theme","isLoading","setIsLoading","responseRef","then","c","current","createElement","preformattedDetails","ok","status","statusText","redirected","type","url","checkResponse","debug","Promise","resolve","text","config","JSON","parse","console","log","undefined","e","message","validateTheme","includes","createApp","params","rowHeight","urlParams","URLSearchParams","window","location","search","datasetId","get","datasetUrl","showAll","responsePromise","fetch","catch","error","configs"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { getConfig, listConfigs } from './api';\nimport Welcome from './Welcome';\nimport Warning from './Warning';\nimport Vitessce from './Vitessce';\n\nimport '../css/index.scss';\nimport '../../node_modules/react-grid-layout/css/styles.css';\nimport '../../node_modules/react-resizable/css/styles.css';\n\nfunction AwaitResponse(props) {\n  const {\n    response,\n    theme,\n  } = props;\n  const [isLoading, setIsLoading] = useState(true);\n  const responseRef = useRef();\n  useEffect(() => {\n    response.then((c) => {\n      responseRef.current = c;\n      setIsLoading(false);\n    });\n  }, [response]);\n  return (!isLoading ? React.createElement(responseRef.current) : <Warning title=\"Loading...\" theme={theme} />);\n}\n\nfunction preformattedDetails(response) {\n  return `\n    ok: ${response.ok}\n    status: ${response.status}\n    statusText: ${response.statusText}\n    redirected: ${response.redirected}\n    type: ${response.type}\n    url: ${response.url}`; // TODO: headers\n}\n\n\nfunction checkResponse(response, theme, debug) {\n  if (!response.ok) {\n    return Promise.resolve(\n      () => (\n        <Warning\n          title=\"Fetch response not OK\"\n          preformatted={preformattedDetails(response)}\n          theme={theme}\n        />\n      ),\n    );\n  }\n  return response.text().then((text) => {\n    try {\n      const config = JSON.parse(text);\n      return Promise.resolve(() => (\n        <Vitessce\n          config={config}\n          theme={theme}\n          // eslint-disable-next-line no-console\n          onConfigChange={debug ? console.log : undefined}\n          validateOnConfigChange={debug}\n        />\n      ));\n    } catch (e) {\n      return Promise.resolve(() => (\n        <Warning\n          title=\"Error parsing JSON\"\n          preformatted={preformattedDetails(response)}\n          unformatted={`${e.message}: ${text}`}\n          theme={theme}\n        />\n      ));\n    }\n  });\n}\n\n/**\n * Use the theme provided if it is valid, otherwise fall back to the 'dark' theme.\n * @param {string} theme A potentially invalid theme name.\n * @returns {string} A valid theme name.\n */\nfunction validateTheme(theme) {\n  return (['light', 'dark'].includes(theme) ? theme : 'dark');\n}\n\n/**\n * Convenience function for creating the minimal Vitessce demo and demo listing\n * components based on the current URL parameters.\n * @param {object} params\n * @param {number|null} params.rowHeight The row height to pass to the Vitessce grid.\n * Optional. By default, null.\n * @returns A component, either <Welcome/> or <Vitessce/> depending on the URL params.\n */\nexport function createApp(params) {\n  const { rowHeight = null } = params || {};\n  const urlParams = new URLSearchParams(window.location.search);\n  const datasetId = urlParams.get('dataset');\n  const debug = urlParams.get('debug') === 'true';\n  const datasetUrl = urlParams.get('url');\n  const showAll = urlParams.get('show') === 'all';\n  const theme = validateTheme(urlParams.get('theme'));\n\n  if (datasetId) {\n    const config = getConfig(datasetId);\n    return (\n      <Vitessce\n        config={config}\n        rowHeight={rowHeight}\n        theme={theme}\n        // eslint-disable-next-line no-console\n        onConfigChange={(debug ? console.log : undefined)}\n        validateOnConfigChange={debug}\n      />\n    );\n  }\n  if (datasetUrl) {\n    const responsePromise = fetch(datasetUrl)\n      .then(response => checkResponse(response, theme, debug))\n      .catch(error => Promise.resolve(() => (\n        <Warning\n          title=\"Error fetching\"\n          unformatted={error.message}\n          theme={theme}\n        />\n      )));\n    return (\n      <AwaitResponse response={responsePromise} theme={theme} />\n    );\n  }\n  const configs = listConfigs(showAll);\n  return (<Welcome configs={configs} theme={theme} />);\n}\n"]},"metadata":{},"sourceType":"module"}