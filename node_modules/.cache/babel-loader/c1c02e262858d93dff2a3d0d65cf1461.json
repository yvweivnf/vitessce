{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { applyPredictor } from '../predictor';\n\nvar BaseDecoder = /*#__PURE__*/function () {\n  function BaseDecoder() {\n    _classCallCheck(this, BaseDecoder);\n  }\n\n  _createClass(BaseDecoder, [{\n    key: \"decode\",\n    value: function () {\n      var _decode = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(fileDirectory, buffer) {\n        var decoded, predictor, isTiled, tileWidth, tileHeight;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.decodeBlock(buffer);\n\n              case 2:\n                decoded = _context.sent;\n                predictor = fileDirectory.Predictor || 1;\n\n                if (!(predictor !== 1)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                isTiled = !fileDirectory.StripOffsets;\n                tileWidth = isTiled ? fileDirectory.TileWidth : fileDirectory.ImageWidth;\n                tileHeight = isTiled ? fileDirectory.TileLength : fileDirectory.RowsPerStrip || fileDirectory.ImageLength;\n                return _context.abrupt(\"return\", applyPredictor(decoded, predictor, tileWidth, tileHeight, fileDirectory.BitsPerSample, fileDirectory.PlanarConfiguration));\n\n              case 9:\n                return _context.abrupt(\"return\", decoded);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function decode(_x, _x2) {\n        return _decode.apply(this, arguments);\n      }\n\n      return decode;\n    }()\n  }]);\n\n  return BaseDecoder;\n}();\n\nexport { BaseDecoder as default };","map":{"version":3,"sources":["C:/Users/wkuo/Documents/vitessce-forked-v1.2.2/vitessce/node_modules/geotiff/src/compression/basedecoder.js"],"names":["applyPredictor","BaseDecoder","fileDirectory","buffer","decodeBlock","decoded","predictor","Predictor","isTiled","StripOffsets","tileWidth","TileWidth","ImageWidth","tileHeight","TileLength","RowsPerStrip","ImageLength","BitsPerSample","PlanarConfiguration"],"mappings":";;;;AAAA,SAASA,cAAT,QAA+B,cAA/B;;IAEqBC,W;;;;;;;;8FACNC,a,EAAeC,M;;;;;;;uBACJ,KAAKC,WAAL,CAAiBD,MAAjB,C;;;AAAhBE,gBAAAA,O;AACAC,gBAAAA,S,GAAYJ,aAAa,CAACK,SAAd,IAA2B,C;;sBACzCD,SAAS,KAAK,C;;;;;AACVE,gBAAAA,O,GAAU,CAACN,aAAa,CAACO,Y;AACzBC,gBAAAA,S,GAAYF,OAAO,GAAGN,aAAa,CAACS,SAAjB,GAA6BT,aAAa,CAACU,U;AAC9DC,gBAAAA,U,GAAaL,OAAO,GAAGN,aAAa,CAACY,UAAjB,GACxBZ,aAAa,CAACa,YAAd,IAA8Bb,aAAa,CAACc,W;iDAEvChB,cAAc,CACnBK,OADmB,EACVC,SADU,EACCI,SADD,EACYG,UADZ,EACwBX,aAAa,CAACe,aADtC,EAEnBf,aAAa,CAACgB,mBAFK,C;;;iDAKhBb,O;;;;;;;;;;;;;;;;;;;;;SAfUJ,W","sourcesContent":["import { applyPredictor } from '../predictor';\n\nexport default class BaseDecoder {\n  async decode(fileDirectory, buffer) {\n    const decoded = await this.decodeBlock(buffer);\n    const predictor = fileDirectory.Predictor || 1;\n    if (predictor !== 1) {\n      const isTiled = !fileDirectory.StripOffsets;\n      const tileWidth = isTiled ? fileDirectory.TileWidth : fileDirectory.ImageWidth;\n      const tileHeight = isTiled ? fileDirectory.TileLength : (\n        fileDirectory.RowsPerStrip || fileDirectory.ImageLength\n      );\n      return applyPredictor(\n        decoded, predictor, tileWidth, tileHeight, fileDirectory.BitsPerSample,\n        fileDirectory.PlanarConfiguration,\n      );\n    }\n    return decoded;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}