{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nvar _defaultSpecifiers, _localGet, _localInv, _utcGet, _utcInv, _timeIntervals, _utcIntervals;\n\nimport { array, error, hasOwnProperty, extend, peek, toSet, constant, zero, one, span } from 'vega-util';\nimport { timeDay, timeWeek, utcDay, utcWeek, timeYear, timeMonth, timeHour, timeMinute, timeSecond, timeMillisecond, utcYear, utcMonth, utcHour, utcMinute, utcSecond, utcMillisecond } from 'd3-time';\nimport { bisector, tickStep } from 'd3-array';\nvar YEAR = 'year';\nvar QUARTER = 'quarter';\nvar MONTH = 'month';\nvar WEEK = 'week';\nvar DATE = 'date';\nvar DAY = 'day';\nvar DAYOFYEAR = 'dayofyear';\nvar HOURS = 'hours';\nvar MINUTES = 'minutes';\nvar SECONDS = 'seconds';\nvar MILLISECONDS = 'milliseconds';\nvar TIME_UNITS = [YEAR, QUARTER, MONTH, WEEK, DATE, DAY, DAYOFYEAR, HOURS, MINUTES, SECONDS, MILLISECONDS];\nvar UNITS = TIME_UNITS.reduce(function (o, u, i) {\n  return o[u] = 1 + i, o;\n}, {});\n\nfunction timeUnits(units) {\n  var u = array(units).slice(),\n      m = {}; // check validity\n\n  if (!u.length) error('Missing time unit.');\n  u.forEach(function (unit) {\n    if (hasOwnProperty(UNITS, unit)) {\n      m[unit] = 1;\n    } else {\n      error(\"Invalid time unit: \".concat(unit, \".\"));\n    }\n  });\n  var numTypes = (m[WEEK] || m[DAY] ? 1 : 0) + (m[QUARTER] || m[MONTH] || m[DATE] ? 1 : 0) + (m[DAYOFYEAR] ? 1 : 0);\n\n  if (numTypes > 1) {\n    error(\"Incompatible time units: \".concat(units));\n  } // ensure proper sort order\n\n\n  u.sort(function (a, b) {\n    return UNITS[a] - UNITS[b];\n  });\n  return u;\n}\n\nvar defaultSpecifiers = (_defaultSpecifiers = {}, _defineProperty(_defaultSpecifiers, YEAR, '%Y '), _defineProperty(_defaultSpecifiers, QUARTER, 'Q%q '), _defineProperty(_defaultSpecifiers, MONTH, '%b '), _defineProperty(_defaultSpecifiers, DATE, '%d '), _defineProperty(_defaultSpecifiers, WEEK, 'W%U '), _defineProperty(_defaultSpecifiers, DAY, '%a '), _defineProperty(_defaultSpecifiers, DAYOFYEAR, '%j '), _defineProperty(_defaultSpecifiers, HOURS, '%H:00'), _defineProperty(_defaultSpecifiers, MINUTES, '00:%M'), _defineProperty(_defaultSpecifiers, SECONDS, ':%S'), _defineProperty(_defaultSpecifiers, MILLISECONDS, '.%L'), _defineProperty(_defaultSpecifiers, \"\".concat(YEAR, \"-\").concat(MONTH), '%Y-%m '), _defineProperty(_defaultSpecifiers, \"\".concat(YEAR, \"-\").concat(MONTH, \"-\").concat(DATE), '%Y-%m-%d '), _defineProperty(_defaultSpecifiers, \"\".concat(HOURS, \"-\").concat(MINUTES), '%H:%M'), _defaultSpecifiers);\n\nfunction timeUnitSpecifier(units, specifiers) {\n  var s = extend({}, defaultSpecifiers, specifiers),\n      u = timeUnits(units),\n      n = u.length;\n  var fmt = '',\n      start = 0,\n      end,\n      key;\n\n  for (start = 0; start < n;) {\n    for (end = u.length; end > start; --end) {\n      key = u.slice(start, end).join('-');\n\n      if (s[key] != null) {\n        fmt += s[key];\n        start = end;\n        break;\n      }\n    }\n  }\n\n  return fmt.trim();\n}\n\nvar t0 = new Date();\n\nfunction localYear(y) {\n  t0.setFullYear(y);\n  t0.setMonth(0);\n  t0.setDate(1);\n  t0.setHours(0, 0, 0, 0);\n  return t0;\n}\n\nfunction dayofyear(d) {\n  return localDayOfYear(new Date(d));\n}\n\nfunction week(d) {\n  return localWeekNum(new Date(d));\n}\n\nfunction localDayOfYear(d) {\n  return timeDay.count(localYear(d.getFullYear()) - 1, d);\n}\n\nfunction localWeekNum(d) {\n  return timeWeek.count(localYear(d.getFullYear()) - 1, d);\n}\n\nfunction localFirst(y) {\n  return localYear(y).getDay();\n}\n\nfunction localDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    var date = new Date(-1, m, d, H, M, S, L);\n    date.setFullYear(y);\n    return date;\n  }\n\n  return new Date(y, m, d, H, M, S, L);\n}\n\nfunction utcdayofyear(d) {\n  return utcDayOfYear(new Date(d));\n}\n\nfunction utcweek(d) {\n  return utcWeekNum(new Date(d));\n}\n\nfunction utcDayOfYear(d) {\n  var y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcDay.count(y - 1, d);\n}\n\nfunction utcWeekNum(d) {\n  var y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcWeek.count(y - 1, d);\n}\n\nfunction utcFirst(y) {\n  t0.setTime(Date.UTC(y, 0, 1));\n  return t0.getUTCDay();\n}\n\nfunction utcDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    var date = new Date(Date.UTC(-1, m, d, H, M, S, L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n\n  return new Date(Date.UTC(y, m, d, H, M, S, L));\n}\n\nfunction floor(units, step, get, inv, newDate) {\n  var s = step || 1,\n      b = peek(units),\n      _ = function _(unit, p, key) {\n    key = key || unit;\n    return getUnit(get[key], inv[key], unit === b && s, p);\n  };\n\n  var t = new Date(),\n      u = toSet(units),\n      y = u[YEAR] ? _(YEAR) : constant(2012),\n      m = u[MONTH] ? _(MONTH) : u[QUARTER] ? _(QUARTER) : zero,\n      d = u[WEEK] && u[DAY] ? _(DAY, 1, WEEK + DAY) : u[WEEK] ? _(WEEK, 1) : u[DAY] ? _(DAY, 1) : u[DATE] ? _(DATE, 1) : u[DAYOFYEAR] ? _(DAYOFYEAR, 1) : one,\n      H = u[HOURS] ? _(HOURS) : zero,\n      M = u[MINUTES] ? _(MINUTES) : zero,\n      S = u[SECONDS] ? _(SECONDS) : zero,\n      L = u[MILLISECONDS] ? _(MILLISECONDS) : zero;\n  return function (v) {\n    t.setTime(+v);\n    var year = y(t);\n    return newDate(year, m(t), d(t, year), H(t), M(t), S(t), L(t));\n  };\n}\n\nfunction getUnit(f, inv, step, phase) {\n  var u = step <= 1 ? f : phase ? function (d, y) {\n    return phase + step * Math.floor((f(d, y) - phase) / step);\n  } : function (d, y) {\n    return step * Math.floor(f(d, y) / step);\n  };\n  return inv ? function (d, y) {\n    return inv(u(d, y), y);\n  } : u;\n} // returns the day of the year based on week number, day of week,\n// and the day of the week for the first day of the year\n\n\nfunction weekday(week, day, firstDay) {\n  return day + week * 7 - (firstDay + 6) % 7;\n} // -- LOCAL TIME --\n\n\nvar localGet = (_localGet = {}, _defineProperty(_localGet, YEAR, function (d) {\n  return d.getFullYear();\n}), _defineProperty(_localGet, QUARTER, function (d) {\n  return Math.floor(d.getMonth() / 3);\n}), _defineProperty(_localGet, MONTH, function (d) {\n  return d.getMonth();\n}), _defineProperty(_localGet, DATE, function (d) {\n  return d.getDate();\n}), _defineProperty(_localGet, HOURS, function (d) {\n  return d.getHours();\n}), _defineProperty(_localGet, MINUTES, function (d) {\n  return d.getMinutes();\n}), _defineProperty(_localGet, SECONDS, function (d) {\n  return d.getSeconds();\n}), _defineProperty(_localGet, MILLISECONDS, function (d) {\n  return d.getMilliseconds();\n}), _defineProperty(_localGet, DAYOFYEAR, function (d) {\n  return localDayOfYear(d);\n}), _defineProperty(_localGet, WEEK, function (d) {\n  return localWeekNum(d);\n}), _defineProperty(_localGet, WEEK + DAY, function (d, y) {\n  return weekday(localWeekNum(d), d.getDay(), localFirst(y));\n}), _defineProperty(_localGet, DAY, function (d, y) {\n  return weekday(1, d.getDay(), localFirst(y));\n}), _localGet);\nvar localInv = (_localInv = {}, _defineProperty(_localInv, QUARTER, function (q) {\n  return 3 * q;\n}), _defineProperty(_localInv, WEEK, function (w, y) {\n  return weekday(w, 0, localFirst(y));\n}), _localInv);\n\nfunction timeFloor(units, step) {\n  return floor(units, step || 1, localGet, localInv, localDate);\n} // -- UTC TIME --\n\n\nvar utcGet = (_utcGet = {}, _defineProperty(_utcGet, YEAR, function (d) {\n  return d.getUTCFullYear();\n}), _defineProperty(_utcGet, QUARTER, function (d) {\n  return Math.floor(d.getUTCMonth() / 3);\n}), _defineProperty(_utcGet, MONTH, function (d) {\n  return d.getUTCMonth();\n}), _defineProperty(_utcGet, DATE, function (d) {\n  return d.getUTCDate();\n}), _defineProperty(_utcGet, HOURS, function (d) {\n  return d.getUTCHours();\n}), _defineProperty(_utcGet, MINUTES, function (d) {\n  return d.getUTCMinutes();\n}), _defineProperty(_utcGet, SECONDS, function (d) {\n  return d.getUTCSeconds();\n}), _defineProperty(_utcGet, MILLISECONDS, function (d) {\n  return d.getUTCMilliseconds();\n}), _defineProperty(_utcGet, DAYOFYEAR, function (d) {\n  return utcDayOfYear(d);\n}), _defineProperty(_utcGet, WEEK, function (d) {\n  return utcWeekNum(d);\n}), _defineProperty(_utcGet, DAY, function (d, y) {\n  return weekday(1, d.getUTCDay(), utcFirst(y));\n}), _defineProperty(_utcGet, WEEK + DAY, function (d, y) {\n  return weekday(utcWeekNum(d), d.getUTCDay(), utcFirst(y));\n}), _utcGet);\nvar utcInv = (_utcInv = {}, _defineProperty(_utcInv, QUARTER, function (q) {\n  return 3 * q;\n}), _defineProperty(_utcInv, WEEK, function (w, y) {\n  return weekday(w, 0, utcFirst(y));\n}), _utcInv);\n\nfunction utcFloor(units, step) {\n  return floor(units, step || 1, utcGet, utcInv, utcDate);\n}\n\nvar timeIntervals = (_timeIntervals = {}, _defineProperty(_timeIntervals, YEAR, timeYear), _defineProperty(_timeIntervals, QUARTER, timeMonth.every(3)), _defineProperty(_timeIntervals, MONTH, timeMonth), _defineProperty(_timeIntervals, WEEK, timeWeek), _defineProperty(_timeIntervals, DATE, timeDay), _defineProperty(_timeIntervals, DAY, timeDay), _defineProperty(_timeIntervals, DAYOFYEAR, timeDay), _defineProperty(_timeIntervals, HOURS, timeHour), _defineProperty(_timeIntervals, MINUTES, timeMinute), _defineProperty(_timeIntervals, SECONDS, timeSecond), _defineProperty(_timeIntervals, MILLISECONDS, timeMillisecond), _timeIntervals);\nvar utcIntervals = (_utcIntervals = {}, _defineProperty(_utcIntervals, YEAR, utcYear), _defineProperty(_utcIntervals, QUARTER, utcMonth.every(3)), _defineProperty(_utcIntervals, MONTH, utcMonth), _defineProperty(_utcIntervals, WEEK, utcWeek), _defineProperty(_utcIntervals, DATE, utcDay), _defineProperty(_utcIntervals, DAY, utcDay), _defineProperty(_utcIntervals, DAYOFYEAR, utcDay), _defineProperty(_utcIntervals, HOURS, utcHour), _defineProperty(_utcIntervals, MINUTES, utcMinute), _defineProperty(_utcIntervals, SECONDS, utcSecond), _defineProperty(_utcIntervals, MILLISECONDS, utcMillisecond), _utcIntervals);\n\nfunction timeInterval(unit) {\n  return timeIntervals[unit];\n}\n\nfunction utcInterval(unit) {\n  return utcIntervals[unit];\n}\n\nfunction offset(ival, date, step) {\n  return ival ? ival.offset(date, step) : undefined;\n}\n\nfunction timeOffset(unit, date, step) {\n  return offset(timeInterval(unit), date, step);\n}\n\nfunction utcOffset(unit, date, step) {\n  return offset(utcInterval(unit), date, step);\n}\n\nfunction sequence(ival, start, stop, step) {\n  return ival ? ival.range(start, stop, step) : undefined;\n}\n\nfunction timeSequence(unit, start, stop, step) {\n  return sequence(timeInterval(unit), start, stop, step);\n}\n\nfunction utcSequence(unit, start, stop, step) {\n  return sequence(utcInterval(unit), start, stop, step);\n}\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\nvar Milli = [YEAR, MONTH, DATE, HOURS, MINUTES, SECONDS, MILLISECONDS],\n    Seconds = Milli.slice(0, -1),\n    Minutes = Seconds.slice(0, -1),\n    Hours = Minutes.slice(0, -1),\n    Day = Hours.slice(0, -1),\n    Week = [YEAR, WEEK],\n    Month = [YEAR, MONTH],\n    Year = [YEAR];\nvar intervals = [[Seconds, 1, durationSecond], [Seconds, 5, 5 * durationSecond], [Seconds, 15, 15 * durationSecond], [Seconds, 30, 30 * durationSecond], [Minutes, 1, durationMinute], [Minutes, 5, 5 * durationMinute], [Minutes, 15, 15 * durationMinute], [Minutes, 30, 30 * durationMinute], [Hours, 1, durationHour], [Hours, 3, 3 * durationHour], [Hours, 6, 6 * durationHour], [Hours, 12, 12 * durationHour], [Day, 1, durationDay], [Week, 1, durationWeek], [Month, 1, durationMonth], [Month, 3, 3 * durationMonth], [Year, 1, durationYear]];\n\nfunction bin(opt) {\n  var ext = opt.extent,\n      max = opt.maxbins || 40,\n      target = Math.abs(span(ext)) / max;\n  var i = bisector(function (i) {\n    return i[2];\n  }).right(intervals, target),\n      units,\n      step;\n\n  if (i === intervals.length) {\n    units = Year, step = tickStep(ext[0] / durationYear, ext[1] / durationYear, max);\n  } else if (i) {\n    i = intervals[target / intervals[i - 1][2] < intervals[i][2] / target ? i - 1 : i];\n    units = i[0];\n    step = i[1];\n  } else {\n    units = Milli;\n    step = Math.max(tickStep(ext[0], ext[1], max), 1);\n  }\n\n  return {\n    units: units,\n    step: step\n  };\n}\n\nexport { DATE, DAY, DAYOFYEAR, HOURS, MILLISECONDS, MINUTES, MONTH, QUARTER, SECONDS, TIME_UNITS, WEEK, YEAR, dayofyear, bin as timeBin, timeFloor, timeInterval, timeOffset, timeSequence, timeUnitSpecifier, timeUnits, utcFloor, utcInterval, utcOffset, utcSequence, utcdayofyear, utcweek, week };","map":{"version":3,"sources":["C:/Users/wkuo/Documents/vitessce-forked-v1.2.2/vitessce/node_modules/vega-time/build/vega-time.module.js"],"names":["array","error","hasOwnProperty","extend","peek","toSet","constant","zero","one","span","timeDay","timeWeek","utcDay","utcWeek","timeYear","timeMonth","timeHour","timeMinute","timeSecond","timeMillisecond","utcYear","utcMonth","utcHour","utcMinute","utcSecond","utcMillisecond","bisector","tickStep","YEAR","QUARTER","MONTH","WEEK","DATE","DAY","DAYOFYEAR","HOURS","MINUTES","SECONDS","MILLISECONDS","TIME_UNITS","UNITS","reduce","o","u","i","timeUnits","units","slice","m","length","forEach","unit","concat","numTypes","sort","a","b","defaultSpecifiers","timeUnitSpecifier","specifiers","s","n","fmt","start","end","key","join","trim","t0","Date","localYear","y","setFullYear","setMonth","setDate","setHours","dayofyear","d","localDayOfYear","week","localWeekNum","count","getFullYear","localFirst","getDay","localDate","H","M","S","L","date","utcdayofyear","utcDayOfYear","utcweek","utcWeekNum","UTC","getUTCFullYear","utcFirst","setTime","getUTCDay","utcDate","setUTCFullYear","floor","step","get","inv","newDate","_","p","getUnit","t","v","year","f","phase","Math","weekday","day","firstDay","localGet","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","localInv","q","w","timeFloor","utcGet","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","utcInv","utcFloor","timeIntervals","every","utcIntervals","timeInterval","utcInterval","offset","ival","undefined","timeOffset","utcOffset","sequence","stop","range","timeSequence","utcSequence","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","Milli","Seconds","Minutes","Hours","Day","Week","Month","Year","intervals","bin","opt","ext","extent","max","maxbins","target","abs","right","timeBin"],"mappings":"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","sourcesContent":["import { array, error, hasOwnProperty, extend, peek, toSet, constant, zero, one, span } from 'vega-util';\nimport { timeDay, timeWeek, utcDay, utcWeek, timeYear, timeMonth, timeHour, timeMinute, timeSecond, timeMillisecond, utcYear, utcMonth, utcHour, utcMinute, utcSecond, utcMillisecond } from 'd3-time';\nimport { bisector, tickStep } from 'd3-array';\n\nconst YEAR = 'year';\nconst QUARTER = 'quarter';\nconst MONTH = 'month';\nconst WEEK = 'week';\nconst DATE = 'date';\nconst DAY = 'day';\nconst DAYOFYEAR = 'dayofyear';\nconst HOURS = 'hours';\nconst MINUTES = 'minutes';\nconst SECONDS = 'seconds';\nconst MILLISECONDS = 'milliseconds';\nconst TIME_UNITS = [YEAR, QUARTER, MONTH, WEEK, DATE, DAY, DAYOFYEAR, HOURS, MINUTES, SECONDS, MILLISECONDS];\nconst UNITS = TIME_UNITS.reduce((o, u, i) => (o[u] = 1 + i, o), {});\nfunction timeUnits(units) {\n  const u = array(units).slice(),\n        m = {}; // check validity\n\n  if (!u.length) error('Missing time unit.');\n  u.forEach(unit => {\n    if (hasOwnProperty(UNITS, unit)) {\n      m[unit] = 1;\n    } else {\n      error(\"Invalid time unit: \".concat(unit, \".\"));\n    }\n  });\n  const numTypes = (m[WEEK] || m[DAY] ? 1 : 0) + (m[QUARTER] || m[MONTH] || m[DATE] ? 1 : 0) + (m[DAYOFYEAR] ? 1 : 0);\n\n  if (numTypes > 1) {\n    error(\"Incompatible time units: \".concat(units));\n  } // ensure proper sort order\n\n\n  u.sort((a, b) => UNITS[a] - UNITS[b]);\n  return u;\n}\nconst defaultSpecifiers = {\n  [YEAR]: '%Y ',\n  [QUARTER]: 'Q%q ',\n  [MONTH]: '%b ',\n  [DATE]: '%d ',\n  [WEEK]: 'W%U ',\n  [DAY]: '%a ',\n  [DAYOFYEAR]: '%j ',\n  [HOURS]: '%H:00',\n  [MINUTES]: '00:%M',\n  [SECONDS]: ':%S',\n  [MILLISECONDS]: '.%L',\n  [\"\".concat(YEAR, \"-\").concat(MONTH)]: '%Y-%m ',\n  [\"\".concat(YEAR, \"-\").concat(MONTH, \"-\").concat(DATE)]: '%Y-%m-%d ',\n  [\"\".concat(HOURS, \"-\").concat(MINUTES)]: '%H:%M'\n};\nfunction timeUnitSpecifier(units, specifiers) {\n  const s = extend({}, defaultSpecifiers, specifiers),\n        u = timeUnits(units),\n        n = u.length;\n  let fmt = '',\n      start = 0,\n      end,\n      key;\n\n  for (start = 0; start < n;) {\n    for (end = u.length; end > start; --end) {\n      key = u.slice(start, end).join('-');\n\n      if (s[key] != null) {\n        fmt += s[key];\n        start = end;\n        break;\n      }\n    }\n  }\n\n  return fmt.trim();\n}\n\nconst t0 = new Date();\n\nfunction localYear(y) {\n  t0.setFullYear(y);\n  t0.setMonth(0);\n  t0.setDate(1);\n  t0.setHours(0, 0, 0, 0);\n  return t0;\n}\n\nfunction dayofyear(d) {\n  return localDayOfYear(new Date(d));\n}\nfunction week(d) {\n  return localWeekNum(new Date(d));\n}\nfunction localDayOfYear(d) {\n  return timeDay.count(localYear(d.getFullYear()) - 1, d);\n}\nfunction localWeekNum(d) {\n  return timeWeek.count(localYear(d.getFullYear()) - 1, d);\n}\nfunction localFirst(y) {\n  return localYear(y).getDay();\n}\nfunction localDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    const date = new Date(-1, m, d, H, M, S, L);\n    date.setFullYear(y);\n    return date;\n  }\n\n  return new Date(y, m, d, H, M, S, L);\n}\nfunction utcdayofyear(d) {\n  return utcDayOfYear(new Date(d));\n}\nfunction utcweek(d) {\n  return utcWeekNum(new Date(d));\n}\nfunction utcDayOfYear(d) {\n  const y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcDay.count(y - 1, d);\n}\nfunction utcWeekNum(d) {\n  const y = Date.UTC(d.getUTCFullYear(), 0, 1);\n  return utcWeek.count(y - 1, d);\n}\nfunction utcFirst(y) {\n  t0.setTime(Date.UTC(y, 0, 1));\n  return t0.getUTCDay();\n}\nfunction utcDate(y, m, d, H, M, S, L) {\n  if (0 <= y && y < 100) {\n    const date = new Date(Date.UTC(-1, m, d, H, M, S, L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n\n  return new Date(Date.UTC(y, m, d, H, M, S, L));\n}\n\nfunction floor(units, step, get, inv, newDate) {\n  const s = step || 1,\n        b = peek(units),\n        _ = (unit, p, key) => {\n    key = key || unit;\n    return getUnit(get[key], inv[key], unit === b && s, p);\n  };\n\n  const t = new Date(),\n        u = toSet(units),\n        y = u[YEAR] ? _(YEAR) : constant(2012),\n        m = u[MONTH] ? _(MONTH) : u[QUARTER] ? _(QUARTER) : zero,\n        d = u[WEEK] && u[DAY] ? _(DAY, 1, WEEK + DAY) : u[WEEK] ? _(WEEK, 1) : u[DAY] ? _(DAY, 1) : u[DATE] ? _(DATE, 1) : u[DAYOFYEAR] ? _(DAYOFYEAR, 1) : one,\n        H = u[HOURS] ? _(HOURS) : zero,\n        M = u[MINUTES] ? _(MINUTES) : zero,\n        S = u[SECONDS] ? _(SECONDS) : zero,\n        L = u[MILLISECONDS] ? _(MILLISECONDS) : zero;\n  return function (v) {\n    t.setTime(+v);\n    const year = y(t);\n    return newDate(year, m(t), d(t, year), H(t), M(t), S(t), L(t));\n  };\n}\n\nfunction getUnit(f, inv, step, phase) {\n  const u = step <= 1 ? f : phase ? (d, y) => phase + step * Math.floor((f(d, y) - phase) / step) : (d, y) => step * Math.floor(f(d, y) / step);\n  return inv ? (d, y) => inv(u(d, y), y) : u;\n} // returns the day of the year based on week number, day of week,\n// and the day of the week for the first day of the year\n\n\nfunction weekday(week, day, firstDay) {\n  return day + week * 7 - (firstDay + 6) % 7;\n} // -- LOCAL TIME --\n\n\nconst localGet = {\n  [YEAR]: d => d.getFullYear(),\n  [QUARTER]: d => Math.floor(d.getMonth() / 3),\n  [MONTH]: d => d.getMonth(),\n  [DATE]: d => d.getDate(),\n  [HOURS]: d => d.getHours(),\n  [MINUTES]: d => d.getMinutes(),\n  [SECONDS]: d => d.getSeconds(),\n  [MILLISECONDS]: d => d.getMilliseconds(),\n  [DAYOFYEAR]: d => localDayOfYear(d),\n  [WEEK]: d => localWeekNum(d),\n  [WEEK + DAY]: (d, y) => weekday(localWeekNum(d), d.getDay(), localFirst(y)),\n  [DAY]: (d, y) => weekday(1, d.getDay(), localFirst(y))\n};\nconst localInv = {\n  [QUARTER]: q => 3 * q,\n  [WEEK]: (w, y) => weekday(w, 0, localFirst(y))\n};\nfunction timeFloor(units, step) {\n  return floor(units, step || 1, localGet, localInv, localDate);\n} // -- UTC TIME --\n\nconst utcGet = {\n  [YEAR]: d => d.getUTCFullYear(),\n  [QUARTER]: d => Math.floor(d.getUTCMonth() / 3),\n  [MONTH]: d => d.getUTCMonth(),\n  [DATE]: d => d.getUTCDate(),\n  [HOURS]: d => d.getUTCHours(),\n  [MINUTES]: d => d.getUTCMinutes(),\n  [SECONDS]: d => d.getUTCSeconds(),\n  [MILLISECONDS]: d => d.getUTCMilliseconds(),\n  [DAYOFYEAR]: d => utcDayOfYear(d),\n  [WEEK]: d => utcWeekNum(d),\n  [DAY]: (d, y) => weekday(1, d.getUTCDay(), utcFirst(y)),\n  [WEEK + DAY]: (d, y) => weekday(utcWeekNum(d), d.getUTCDay(), utcFirst(y))\n};\nconst utcInv = {\n  [QUARTER]: q => 3 * q,\n  [WEEK]: (w, y) => weekday(w, 0, utcFirst(y))\n};\nfunction utcFloor(units, step) {\n  return floor(units, step || 1, utcGet, utcInv, utcDate);\n}\n\nconst timeIntervals = {\n  [YEAR]: timeYear,\n  [QUARTER]: timeMonth.every(3),\n  [MONTH]: timeMonth,\n  [WEEK]: timeWeek,\n  [DATE]: timeDay,\n  [DAY]: timeDay,\n  [DAYOFYEAR]: timeDay,\n  [HOURS]: timeHour,\n  [MINUTES]: timeMinute,\n  [SECONDS]: timeSecond,\n  [MILLISECONDS]: timeMillisecond\n};\nconst utcIntervals = {\n  [YEAR]: utcYear,\n  [QUARTER]: utcMonth.every(3),\n  [MONTH]: utcMonth,\n  [WEEK]: utcWeek,\n  [DATE]: utcDay,\n  [DAY]: utcDay,\n  [DAYOFYEAR]: utcDay,\n  [HOURS]: utcHour,\n  [MINUTES]: utcMinute,\n  [SECONDS]: utcSecond,\n  [MILLISECONDS]: utcMillisecond\n};\nfunction timeInterval(unit) {\n  return timeIntervals[unit];\n}\nfunction utcInterval(unit) {\n  return utcIntervals[unit];\n}\n\nfunction offset(ival, date, step) {\n  return ival ? ival.offset(date, step) : undefined;\n}\n\nfunction timeOffset(unit, date, step) {\n  return offset(timeInterval(unit), date, step);\n}\nfunction utcOffset(unit, date, step) {\n  return offset(utcInterval(unit), date, step);\n}\n\nfunction sequence(ival, start, stop, step) {\n  return ival ? ival.range(start, stop, step) : undefined;\n}\n\nfunction timeSequence(unit, start, stop, step) {\n  return sequence(timeInterval(unit), start, stop, step);\n}\nfunction utcSequence(unit, start, stop, step) {\n  return sequence(utcInterval(unit), start, stop, step);\n}\n\nconst durationSecond = 1000,\n      durationMinute = durationSecond * 60,\n      durationHour = durationMinute * 60,\n      durationDay = durationHour * 24,\n      durationWeek = durationDay * 7,\n      durationMonth = durationDay * 30,\n      durationYear = durationDay * 365;\nconst Milli = [YEAR, MONTH, DATE, HOURS, MINUTES, SECONDS, MILLISECONDS],\n      Seconds = Milli.slice(0, -1),\n      Minutes = Seconds.slice(0, -1),\n      Hours = Minutes.slice(0, -1),\n      Day = Hours.slice(0, -1),\n      Week = [YEAR, WEEK],\n      Month = [YEAR, MONTH],\n      Year = [YEAR];\nconst intervals = [[Seconds, 1, durationSecond], [Seconds, 5, 5 * durationSecond], [Seconds, 15, 15 * durationSecond], [Seconds, 30, 30 * durationSecond], [Minutes, 1, durationMinute], [Minutes, 5, 5 * durationMinute], [Minutes, 15, 15 * durationMinute], [Minutes, 30, 30 * durationMinute], [Hours, 1, durationHour], [Hours, 3, 3 * durationHour], [Hours, 6, 6 * durationHour], [Hours, 12, 12 * durationHour], [Day, 1, durationDay], [Week, 1, durationWeek], [Month, 1, durationMonth], [Month, 3, 3 * durationMonth], [Year, 1, durationYear]];\nfunction bin (opt) {\n  const ext = opt.extent,\n        max = opt.maxbins || 40,\n        target = Math.abs(span(ext)) / max;\n  let i = bisector(i => i[2]).right(intervals, target),\n      units,\n      step;\n\n  if (i === intervals.length) {\n    units = Year, step = tickStep(ext[0] / durationYear, ext[1] / durationYear, max);\n  } else if (i) {\n    i = intervals[target / intervals[i - 1][2] < intervals[i][2] / target ? i - 1 : i];\n    units = i[0];\n    step = i[1];\n  } else {\n    units = Milli;\n    step = Math.max(tickStep(ext[0], ext[1], max), 1);\n  }\n\n  return {\n    units,\n    step\n  };\n}\n\nexport { DATE, DAY, DAYOFYEAR, HOURS, MILLISECONDS, MINUTES, MONTH, QUARTER, SECONDS, TIME_UNITS, WEEK, YEAR, dayofyear, bin as timeBin, timeFloor, timeInterval, timeOffset, timeSequence, timeUnitSpecifier, timeUnits, utcFloor, utcInterval, utcOffset, utcSequence, utcdayofyear, utcweek, week };\n"]},"metadata":{},"sourceType":"module"}