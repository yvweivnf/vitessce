{"ast":null,"code":"import { getVgPositionChannel } from '../../../channel';\nimport * as log from '../../../log';\nimport { isSignalRef } from '../../../vega.schema';\nimport { getMarkPropOrConfig } from '../../common';\nvar ALIGNED_X_CHANNEL = {\n  left: 'x',\n  center: 'xc',\n  right: 'x2'\n};\nvar BASELINED_Y_CHANNEL = {\n  top: 'y',\n  middle: 'yc',\n  bottom: 'y2'\n};\nexport function vgAlignedPositionChannel(channel, markDef, config) {\n  var defaultAlign = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'middle';\n\n  if (channel === 'radius' || channel === 'theta') {\n    return getVgPositionChannel(channel);\n  }\n\n  var alignChannel = channel === 'x' ? 'align' : 'baseline';\n  var align = getMarkPropOrConfig(alignChannel, markDef, config);\n  var alignExcludingSignal;\n\n  if (isSignalRef(align)) {\n    log.warn(log.message.rangeMarkAlignmentCannotBeExpression(alignChannel));\n    alignExcludingSignal = undefined;\n  } else {\n    alignExcludingSignal = align;\n  }\n\n  if (channel === 'x') {\n    return ALIGNED_X_CHANNEL[alignExcludingSignal || (defaultAlign === 'top' ? 'left' : 'center')];\n  } else {\n    return BASELINED_Y_CHANNEL[alignExcludingSignal || defaultAlign];\n  }\n}","map":{"version":3,"sources":["../../../../../src/compile/mark/encode/position-align.ts"],"names":[],"mappings":"AACA,SAAQ,oBAAR,QAAmC,kBAAnC;AAEA,OAAO,KAAK,GAAZ,MAAqB,cAArB;AAEA,SAAQ,WAAR,QAA2C,sBAA3C;AACA,SAAQ,mBAAR,QAAkC,cAAlC;AAEA,IAAM,iBAAiB,GAAmC;AACxD,EAAA,IAAI,EAAE,GADkD;AAExD,EAAA,MAAM,EAAE,IAFgD;AAGxD,EAAA,KAAK,EAAE;AAHiD,CAA1D;AAMA,IAAM,mBAAmB,GAAG;AAC1B,EAAA,GAAG,EAAE,GADqB;AAE1B,EAAA,MAAM,EAAE,IAFkB;AAG1B,EAAA,MAAM,EAAE;AAHkB,CAA5B;AAMA,OAAM,SAAU,wBAAV,CACJ,OADI,EAEJ,OAFI,EAGJ,MAHI,EAIqC;AAAA,MAAzC,YAAyC,uEAAR,QAAQ;;AAEzC,MAAI,OAAO,KAAK,QAAZ,IAAwB,OAAO,KAAK,OAAxC,EAAiD;AAC/C,WAAO,oBAAoB,CAAC,OAAD,CAA3B;AACD;;AACD,MAAM,YAAY,GAAG,OAAO,KAAK,GAAZ,GAAkB,OAAlB,GAA4B,UAAjD;AACA,MAAM,KAAK,GAAG,mBAAmB,CAAC,YAAD,EAAe,OAAf,EAAwB,MAAxB,CAAjC;AAEA,MAAI,oBAAJ;;AAEA,MAAI,WAAW,CAAC,KAAD,CAAf,EAAwB;AACtB,IAAA,GAAG,CAAC,IAAJ,CAAS,GAAG,CAAC,OAAJ,CAAY,oCAAZ,CAAiD,YAAjD,CAAT;AACA,IAAA,oBAAoB,GAAG,SAAvB;AACD,GAHD,MAGO;AACL,IAAA,oBAAoB,GAAG,KAAvB;AACD;;AAED,MAAI,OAAO,KAAK,GAAhB,EAAqB;AACnB,WAAO,iBAAiB,CAAC,oBAAoB,KAAK,YAAY,KAAK,KAAjB,GAAyB,MAAzB,GAAkC,QAAvC,CAArB,CAAxB;AACD,GAFD,MAEO;AACL,WAAO,mBAAmB,CAAC,oBAAoB,IAAI,YAAzB,CAA1B;AACD;AACF","sourceRoot":"","sourcesContent":["import { getVgPositionChannel } from '../../../channel';\nimport * as log from '../../../log';\nimport { isSignalRef } from '../../../vega.schema';\nimport { getMarkPropOrConfig } from '../../common';\nconst ALIGNED_X_CHANNEL = {\n    left: 'x',\n    center: 'xc',\n    right: 'x2'\n};\nconst BASELINED_Y_CHANNEL = {\n    top: 'y',\n    middle: 'yc',\n    bottom: 'y2'\n};\nexport function vgAlignedPositionChannel(channel, markDef, config, defaultAlign = 'middle') {\n    if (channel === 'radius' || channel === 'theta') {\n        return getVgPositionChannel(channel);\n    }\n    const alignChannel = channel === 'x' ? 'align' : 'baseline';\n    const align = getMarkPropOrConfig(alignChannel, markDef, config);\n    let alignExcludingSignal;\n    if (isSignalRef(align)) {\n        log.warn(log.message.rangeMarkAlignmentCannotBeExpression(alignChannel));\n        alignExcludingSignal = undefined;\n    }\n    else {\n        alignExcludingSignal = align;\n    }\n    if (channel === 'x') {\n        return ALIGNED_X_CHANNEL[alignExcludingSignal || (defaultAlign === 'top' ? 'left' : 'center')];\n    }\n    else {\n        return BASELINED_Y_CHANNEL[alignExcludingSignal || defaultAlign];\n    }\n}\n//# sourceMappingURL=position-align.js.map"]},"metadata":{},"sourceType":"module"}