{"ast":null,"code":"import { openArray } from 'zarr';\nimport AbstractTwoStepLoader from './AbstractTwoStepLoader';\nimport LoaderResult from './LoaderResult';\nexport default class MatrixZarrLoader extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n\n    this.attrs = this.dataSource.getJson('.zattrs');\n    return this.attrs;\n  }\n\n  loadArr() {\n    const {\n      store\n    } = this.dataSource;\n\n    if (this.arr) {\n      return this.arr;\n    }\n\n    this.arr = openArray({\n      store,\n      path: '/',\n      mode: 'r'\n    }).then(z => new Promise(resolve => {\n      z.getRaw([null, null]).then(resolve);\n    }));\n    return this.arr;\n  }\n\n  load() {\n    return Promise.all([this.loadAttrs(), this.loadArr()]).then(data => Promise.resolve(new LoaderResult(data, null)));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/wkuo/Documents/vitessce-forked-v1.2.2/vitessce/src/loaders/MatrixZarrLoader.js"],"names":["openArray","AbstractTwoStepLoader","LoaderResult","MatrixZarrLoader","loadAttrs","attrs","dataSource","getJson","loadArr","store","arr","path","mode","then","z","Promise","resolve","getRaw","load","all","data"],"mappings":"AAAA,SAASA,SAAT,QAA0B,MAA1B;AACA,OAAOC,qBAAP,MAAkC,yBAAlC;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AAEA,eAAe,MAAMC,gBAAN,SAA+BF,qBAA/B,CAAqD;AAClEG,EAAAA,SAAS,GAAG;AACV,QAAI,KAAKC,KAAT,EAAgB;AACd,aAAO,KAAKA,KAAZ;AACD;;AACD,SAAKA,KAAL,GAAa,KAAKC,UAAL,CAAgBC,OAAhB,CAAwB,SAAxB,CAAb;AACA,WAAO,KAAKF,KAAZ;AACD;;AAEDG,EAAAA,OAAO,GAAG;AACR,UAAM;AAAEC,MAAAA;AAAF,QAAY,KAAKH,UAAvB;;AACA,QAAI,KAAKI,GAAT,EAAc;AACZ,aAAO,KAAKA,GAAZ;AACD;;AACD,SAAKA,GAAL,GAAWV,SAAS,CAAC;AAAES,MAAAA,KAAF;AAASE,MAAAA,IAAI,EAAE,GAAf;AAAoBC,MAAAA,IAAI,EAAE;AAA1B,KAAD,CAAT,CAA2CC,IAA3C,CAAgDC,CAAC,IAAI,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AACvFF,MAAAA,CAAC,CAACG,MAAF,CAAS,CAAC,IAAD,EAAO,IAAP,CAAT,EACGJ,IADH,CACQG,OADR;AAED,KAH+D,CAArD,CAAX;AAIA,WAAO,KAAKN,GAAZ;AACD;;AAEDQ,EAAAA,IAAI,GAAG;AACL,WAAOH,OAAO,CACXI,GADI,CACA,CAAC,KAAKf,SAAL,EAAD,EAAmB,KAAKI,OAAL,EAAnB,CADA,EAEJK,IAFI,CAECO,IAAI,IAAIL,OAAO,CAACC,OAAR,CAAgB,IAAId,YAAJ,CAAiBkB,IAAjB,EAAuB,IAAvB,CAAhB,CAFT,CAAP;AAGD;;AAzBiE","sourcesContent":["import { openArray } from 'zarr';\nimport AbstractTwoStepLoader from './AbstractTwoStepLoader';\nimport LoaderResult from './LoaderResult';\n\nexport default class MatrixZarrLoader extends AbstractTwoStepLoader {\n  loadAttrs() {\n    if (this.attrs) {\n      return this.attrs;\n    }\n    this.attrs = this.dataSource.getJson('.zattrs');\n    return this.attrs;\n  }\n\n  loadArr() {\n    const { store } = this.dataSource;\n    if (this.arr) {\n      return this.arr;\n    }\n    this.arr = openArray({ store, path: '/', mode: 'r' }).then(z => new Promise((resolve) => {\n      z.getRaw([null, null])\n        .then(resolve);\n    }));\n    return this.arr;\n  }\n\n  load() {\n    return Promise\n      .all([this.loadAttrs(), this.loadArr()])\n      .then(data => Promise.resolve(new LoaderResult(data, null)));\n  }\n}\n"]},"metadata":{},"sourceType":"module"}