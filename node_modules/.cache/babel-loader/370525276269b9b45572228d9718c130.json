{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _createForOfIteratorHelper from \"C:\\\\Users\\\\wkuo\\\\Documents\\\\vitessce-forked-v1.2.2\\\\vitessce\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport { isArray, isString, isObject } from 'vega-util';\nvar name = \"vega-tooltip\";\nvar version$1 = \"0.27.0\";\nvar description = \"A tooltip plugin for Vega-Lite and Vega visualizations.\";\nvar keywords = [\"vega-lite\", \"vega\", \"tooltip\"];\nvar repository = {\n  type: \"git\",\n  url: \"https://github.com/vega/vega-tooltip.git\"\n};\nvar author = {\n  name: \"UW Interactive Data Lab\",\n  url: \"https://idl.cs.washington.edu\"\n};\nvar collaborators = [\"Dominik Moritz\", \"Sira Horradarn\", \"Zening Qu\", \"Kanit Wongsuphasawat\", \"Yuri Astrakhan\", \"Jeffrey Heer\"];\nvar license = \"BSD-3-Clause\";\nvar bugs = {\n  url: \"https://github.com/vega/vega-tooltip/issues\"\n};\nvar homepage = \"https://github.com/vega/vega-tooltip#readme\";\nvar main = \"build/vega-tooltip.js\";\nvar module = \"build/vega-tooltip.module.js\";\nvar unpkg = \"build/vega-tooltip.min.js\";\nvar jsdelivr = \"build/vega-tooltip.min.js\";\nvar types = \"build/vega-tooltip.module.d.ts\";\nvar files = [\"src\", \"build\", \"types\"];\nvar scripts = {\n  prebuild: \"yarn clean && yarn build:style\",\n  build: \"rollup -c\",\n  \"build:style\": \"./build-style.sh\",\n  clean: \"rimraf build && rimraf src/style.ts\",\n  \"copy:data\": \"rsync -r node_modules/vega-datasets/data/* examples/data\",\n  \"copy:build\": \"rsync -r build/* examples/build\",\n  \"deploy:gh\": \"yarn build && yarn copy:build && gh-pages -d examples && yarn clean\",\n  prepublishOnly: \"yarn clean && yarn build\",\n  preversion: \"yarn lint && yarn test\",\n  serve: \"browser-sync start -s -f build examples --serveStatic examples\",\n  start: \"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'\",\n  pretest: \"yarn build:style\",\n  test: \"beemo jest\",\n  \"test:inspect\": \"node --inspect-brk ./node_modules/.bin/jest --runInBand\",\n  prepare: \"beemo create-config && yarn copy:data\",\n  prettierbase: \"beemo prettier '*.{css,scss,html}'\",\n  eslintbase: \"beemo eslint .\",\n  format: \"yarn eslintbase --fix && yarn prettierbase --write\",\n  lint: \"yarn eslintbase && yarn prettierbase --check\",\n  release: \"yarn run prebuild && yarn build && auto shipit\"\n};\nvar devDependencies = {\n  \"@auto-it/conventional-commits\": \"^10.30.0\",\n  \"@auto-it/first-time-contributor\": \"^10.30.0\",\n  \"@rollup/plugin-json\": \"^4.1.0\",\n  \"@rollup/plugin-node-resolve\": \"^13.0.0\",\n  \"@wessberg/rollup-plugin-ts\": \"^1.3.8\",\n  auto: \"^10.30.0\",\n  \"browser-sync\": \"^2.26.14\",\n  concurrently: \"^6.0.0\",\n  \"gh-pages\": \"^3.1.0\",\n  \"node-sass\": \"^6.0.0\",\n  path: \"^0.12.7\",\n  rollup: \"^2.39.1\",\n  \"rollup-plugin-bundle-size\": \"^1.0.3\",\n  \"rollup-plugin-terser\": \"^7.0.2\",\n  typescript: \"~4.3.2\",\n  \"vega-datasets\": \"^2.2.0\",\n  \"vega-lite-dev-config\": \"^0.18.0\",\n  \"vega-typings\": \"^0.21.0\"\n};\nvar dependencies = {\n  \"vega-util\": \"^1.16.0\"\n};\nvar pkg = {\n  name: name,\n  version: version$1,\n  description: description,\n  keywords: keywords,\n  repository: repository,\n  author: author,\n  collaborators: collaborators,\n  license: license,\n  bugs: bugs,\n  homepage: homepage,\n  main: main,\n  module: module,\n  unpkg: unpkg,\n  jsdelivr: jsdelivr,\n  types: types,\n  files: files,\n  scripts: scripts,\n  devDependencies: devDependencies,\n  dependencies: dependencies\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n/**\n * Format the value to be shown in the tooltip.\n *\n * @param value The value to show in the tooltip.\n * @param valueToHtml Function to convert a single cell value to an HTML string\n */\n\n\nfunction formatValue(value, valueToHtml, maxDepth) {\n  if (isArray(value)) {\n    return \"[\".concat(value.map(function (v) {\n      return valueToHtml(isString(v) ? v : stringify(v, maxDepth));\n    }).join(', '), \"]\");\n  }\n\n  if (isObject(value)) {\n    var content = '';\n\n    var _a = value,\n        title = _a.title,\n        image = _a.image,\n        rest = __rest(_a, [\"title\", \"image\"]);\n\n    if (title) {\n      content += \"<h2>\".concat(valueToHtml(title), \"</h2>\");\n    }\n\n    if (image) {\n      content += \"<img src=\\\"\".concat(valueToHtml(image), \"\\\">\");\n    }\n\n    var keys = Object.keys(rest);\n\n    if (keys.length > 0) {\n      content += '<table>';\n\n      var _iterator = _createForOfIteratorHelper(keys),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var key = _step.value;\n          var val = rest[key]; // ignore undefined properties\n\n          if (val === undefined) {\n            continue;\n          }\n\n          if (isObject(val)) {\n            val = stringify(val, maxDepth);\n          }\n\n          content += \"<tr><td class=\\\"key\\\">\".concat(valueToHtml(key), \":</td><td class=\\\"value\\\">\").concat(valueToHtml(val), \"</td></tr>\");\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      content += \"</table>\";\n    }\n\n    return content || '{}'; // show empty object if there are no properties\n  }\n\n  return valueToHtml(value);\n}\n\nfunction replacer(maxDepth) {\n  var stack = [];\n  return function (key, value) {\n    if (typeof value !== 'object' || value === null) {\n      return value;\n    }\n\n    var pos = stack.indexOf(this) + 1;\n    stack.length = pos;\n\n    if (stack.length > maxDepth) {\n      return '[Object]';\n    }\n\n    if (stack.indexOf(value) >= 0) {\n      return '[Circular]';\n    }\n\n    stack.push(value);\n    return value;\n  };\n}\n/**\n * Stringify any JS object to valid JSON\n */\n\n\nfunction stringify(obj, maxDepth) {\n  return JSON.stringify(obj, replacer(maxDepth));\n} // generated with build-style.sh\n\n\nvar defaultStyle = \"#vg-tooltip-element {\\n  visibility: hidden;\\n  padding: 8px;\\n  position: fixed;\\n  z-index: 1000;\\n  font-family: sans-serif;\\n  font-size: 11px;\\n  border-radius: 3px;\\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\\n  /* The default theme is the light theme. */\\n  background-color: rgba(255, 255, 255, 0.95);\\n  border: 1px solid #d9d9d9;\\n  color: black; }\\n  #vg-tooltip-element.visible {\\n    visibility: visible; }\\n  #vg-tooltip-element h2 {\\n    margin-top: 0;\\n    margin-bottom: 10px;\\n    font-size: 13px; }\\n  #vg-tooltip-element img {\\n    max-width: 200px;\\n    max-height: 200px; }\\n  #vg-tooltip-element table {\\n    border-spacing: 0; }\\n    #vg-tooltip-element table tr {\\n      border: none; }\\n      #vg-tooltip-element table tr td {\\n        overflow: hidden;\\n        text-overflow: ellipsis;\\n        padding-top: 2px;\\n        padding-bottom: 2px; }\\n        #vg-tooltip-element table tr td.key {\\n          color: #808080;\\n          max-width: 150px;\\n          text-align: right;\\n          padding-right: 4px; }\\n        #vg-tooltip-element table tr td.value {\\n          display: block;\\n          max-width: 300px;\\n          max-height: 7em;\\n          text-align: left; }\\n  #vg-tooltip-element.dark-theme {\\n    background-color: rgba(32, 32, 32, 0.9);\\n    border: 1px solid #f5f5f5;\\n    color: white; }\\n    #vg-tooltip-element.dark-theme td.key {\\n      color: #bfbfbf; }\\n\";\nvar EL_ID = 'vg-tooltip-element';\nvar DEFAULT_OPTIONS = {\n  /**\n   * X offset.\n   */\n  offsetX: 10,\n\n  /**\n   * Y offset.\n   */\n  offsetY: 10,\n\n  /**\n   * ID of the tooltip element.\n   */\n  id: EL_ID,\n\n  /**\n   * ID of the tooltip CSS style.\n   */\n  styleId: 'vega-tooltip-style',\n\n  /**\n   * The name of the theme. You can use the CSS class called [THEME]-theme to style the tooltips.\n   *\n   * There are two predefined themes: \"light\" (default) and \"dark\".\n   */\n  theme: 'light',\n\n  /**\n   * Do not use the default styles provided by Vega Tooltip. If you enable this option, you need to use your own styles. It is not necessary to disable the default style when using a custom theme.\n   */\n  disableDefaultStyle: false,\n\n  /**\n   * HTML sanitizer function that removes dangerous HTML to prevent XSS.\n   *\n   * This should be a function from string to string. You may replace it with a formatter such as a markdown formatter.\n   */\n  sanitize: escapeHTML,\n\n  /**\n   * The maximum recursion depth when printing objects in the tooltip.\n   */\n  maxDepth: 2,\n\n  /**\n   * A function to customize the rendered HTML of the tooltip.\n   * @param value A value string, or object of value strings keyed by field\n   * @param sanitize The `sanitize` function from `options.sanitize`\n   * @returns {string} The returned string will become the `innerHTML` of the tooltip element\n   */\n  formatTooltip: formatValue\n};\n/**\n * Escape special HTML characters.\n *\n * @param value A value to convert to string and HTML-escape.\n */\n\nfunction escapeHTML(value) {\n  return String(value).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\n\nfunction createDefaultStyle(id) {\n  // Just in case this id comes from a user, ensure these is no security issues\n  if (!/^[A-Za-z]+[-:.\\w]*$/.test(id)) {\n    throw new Error('Invalid HTML ID');\n  }\n\n  return defaultStyle.toString().replace(EL_ID, id);\n}\n/**\n * Position the tooltip\n *\n * @param event The mouse event.\n * @param tooltipBox\n * @param offsetX Horizontal offset.\n * @param offsetY Vertical offset.\n */\n\n\nfunction calculatePosition(event, tooltipBox, offsetX, offsetY) {\n  var x = event.clientX + offsetX;\n\n  if (x + tooltipBox.width > window.innerWidth) {\n    x = +event.clientX - offsetX - tooltipBox.width;\n  }\n\n  var y = event.clientY + offsetY;\n\n  if (y + tooltipBox.height > window.innerHeight) {\n    y = +event.clientY - offsetY - tooltipBox.height;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n}\n/**\n * The tooltip handler class.\n */\n\n\nvar Handler = /*#__PURE__*/function () {\n  /**\n   * Create the tooltip handler and initialize the element and style.\n   *\n   * @param options Tooltip Options\n   */\n  function Handler(options) {\n    _classCallCheck(this, Handler);\n\n    this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n    var elementId = this.options.id;\n    this.el = null; // bind this to call\n\n    this.call = this.tooltipHandler.bind(this); // prepend a default stylesheet for tooltips to the head\n\n    if (!this.options.disableDefaultStyle && !document.getElementById(this.options.styleId)) {\n      var style = document.createElement('style');\n      style.setAttribute('id', this.options.styleId);\n      style.innerHTML = createDefaultStyle(elementId);\n      var head = document.head;\n\n      if (head.childNodes.length > 0) {\n        head.insertBefore(style, head.childNodes[0]);\n      } else {\n        head.appendChild(style);\n      }\n    }\n  }\n  /**\n   * The tooltip handler function.\n   */\n\n\n  _createClass(Handler, [{\n    key: \"tooltipHandler\",\n    value: function tooltipHandler(handler, event, item, value) {\n      // console.log(handler, event, item, value);\n      var _a; // append a div element that we use as a tooltip unless it already exists\n\n\n      this.el = document.getElementById(this.options.id);\n\n      if (!this.el) {\n        this.el = document.createElement('div');\n        this.el.setAttribute('id', this.options.id);\n        this.el.classList.add('vg-tooltip');\n        document.body.appendChild(this.el);\n      }\n\n      var tooltipContainer = (_a = document.fullscreenElement) !== null && _a !== void 0 ? _a : document.body;\n      tooltipContainer.appendChild(this.el); // hide tooltip for null, undefined, or empty string values\n\n      if (value == null || value === '') {\n        this.el.classList.remove('visible', \"\".concat(this.options.theme, \"-theme\"));\n        return;\n      } // set the tooltip content\n\n\n      this.el.innerHTML = this.options.formatTooltip(value, this.options.sanitize, this.options.maxDepth); // make the tooltip visible\n\n      this.el.classList.add('visible', \"\".concat(this.options.theme, \"-theme\"));\n\n      var _calculatePosition = calculatePosition(event, this.el.getBoundingClientRect(), this.options.offsetX, this.options.offsetY),\n          x = _calculatePosition.x,\n          y = _calculatePosition.y;\n\n      this.el.setAttribute('style', \"top: \".concat(y, \"px; left: \").concat(x, \"px\"));\n    }\n  }]);\n\n  return Handler;\n}();\n\nvar version = pkg.version;\n/**\n * Create a tooltip handler and register it with the provided view.\n *\n * @param view The Vega view.\n * @param opt Tooltip options.\n */\n\nfunction index(view, opt) {\n  var handler = new Handler(opt);\n  view.tooltip(handler.call).run();\n  return handler;\n}\n\nexport { DEFAULT_OPTIONS, Handler, calculatePosition, createDefaultStyle, index as default, escapeHTML, formatValue, replacer, stringify, version };","map":{"version":3,"sources":["C:/Users/wkuo/Documents/vitessce-forked-v1.2.2/vitessce/node_modules/vega-tooltip/build/vega-tooltip.module.js"],"names":["isArray","isString","isObject","name","version$1","description","keywords","repository","type","url","author","collaborators","license","bugs","homepage","main","module","unpkg","jsdelivr","types","files","scripts","prebuild","build","clean","prepublishOnly","preversion","serve","start","pretest","test","prepare","prettierbase","eslintbase","format","lint","release","devDependencies","auto","concurrently","path","rollup","typescript","dependencies","pkg","version","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","formatValue","value","valueToHtml","maxDepth","map","v","stringify","join","content","_a","title","image","rest","keys","key","val","undefined","replacer","stack","pos","push","obj","JSON","defaultStyle","EL_ID","DEFAULT_OPTIONS","offsetX","offsetY","id","styleId","theme","disableDefaultStyle","sanitize","escapeHTML","formatTooltip","String","replace","createDefaultStyle","Error","toString","calculatePosition","event","tooltipBox","x","clientX","width","window","innerWidth","y","clientY","height","innerHeight","Handler","options","assign","elementId","el","tooltipHandler","bind","document","getElementById","style","createElement","setAttribute","innerHTML","head","childNodes","insertBefore","appendChild","handler","item","classList","add","body","tooltipContainer","fullscreenElement","remove","getBoundingClientRect","index","view","opt","tooltip","run","default"],"mappings":"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","sourcesContent":["import { isArray, isString, isObject } from 'vega-util';\n\nvar name = \"vega-tooltip\";\nvar version$1 = \"0.27.0\";\nvar description = \"A tooltip plugin for Vega-Lite and Vega visualizations.\";\nvar keywords = [\n\t\"vega-lite\",\n\t\"vega\",\n\t\"tooltip\"\n];\nvar repository = {\n\ttype: \"git\",\n\turl: \"https://github.com/vega/vega-tooltip.git\"\n};\nvar author = {\n\tname: \"UW Interactive Data Lab\",\n\turl: \"https://idl.cs.washington.edu\"\n};\nvar collaborators = [\n\t\"Dominik Moritz\",\n\t\"Sira Horradarn\",\n\t\"Zening Qu\",\n\t\"Kanit Wongsuphasawat\",\n\t\"Yuri Astrakhan\",\n\t\"Jeffrey Heer\"\n];\nvar license = \"BSD-3-Clause\";\nvar bugs = {\n\turl: \"https://github.com/vega/vega-tooltip/issues\"\n};\nvar homepage = \"https://github.com/vega/vega-tooltip#readme\";\nvar main = \"build/vega-tooltip.js\";\nvar module = \"build/vega-tooltip.module.js\";\nvar unpkg = \"build/vega-tooltip.min.js\";\nvar jsdelivr = \"build/vega-tooltip.min.js\";\nvar types = \"build/vega-tooltip.module.d.ts\";\nvar files = [\n\t\"src\",\n\t\"build\",\n\t\"types\"\n];\nvar scripts = {\n\tprebuild: \"yarn clean && yarn build:style\",\n\tbuild: \"rollup -c\",\n\t\"build:style\": \"./build-style.sh\",\n\tclean: \"rimraf build && rimraf src/style.ts\",\n\t\"copy:data\": \"rsync -r node_modules/vega-datasets/data/* examples/data\",\n\t\"copy:build\": \"rsync -r build/* examples/build\",\n\t\"deploy:gh\": \"yarn build && yarn copy:build && gh-pages -d examples && yarn clean\",\n\tprepublishOnly: \"yarn clean && yarn build\",\n\tpreversion: \"yarn lint && yarn test\",\n\tserve: \"browser-sync start -s -f build examples --serveStatic examples\",\n\tstart: \"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'\",\n\tpretest: \"yarn build:style\",\n\ttest: \"beemo jest\",\n\t\"test:inspect\": \"node --inspect-brk ./node_modules/.bin/jest --runInBand\",\n\tprepare: \"beemo create-config && yarn copy:data\",\n\tprettierbase: \"beemo prettier '*.{css,scss,html}'\",\n\teslintbase: \"beemo eslint .\",\n\tformat: \"yarn eslintbase --fix && yarn prettierbase --write\",\n\tlint: \"yarn eslintbase && yarn prettierbase --check\",\n\trelease: \"yarn run prebuild && yarn build && auto shipit\"\n};\nvar devDependencies = {\n\t\"@auto-it/conventional-commits\": \"^10.30.0\",\n\t\"@auto-it/first-time-contributor\": \"^10.30.0\",\n\t\"@rollup/plugin-json\": \"^4.1.0\",\n\t\"@rollup/plugin-node-resolve\": \"^13.0.0\",\n\t\"@wessberg/rollup-plugin-ts\": \"^1.3.8\",\n\tauto: \"^10.30.0\",\n\t\"browser-sync\": \"^2.26.14\",\n\tconcurrently: \"^6.0.0\",\n\t\"gh-pages\": \"^3.1.0\",\n\t\"node-sass\": \"^6.0.0\",\n\tpath: \"^0.12.7\",\n\trollup: \"^2.39.1\",\n\t\"rollup-plugin-bundle-size\": \"^1.0.3\",\n\t\"rollup-plugin-terser\": \"^7.0.2\",\n\ttypescript: \"~4.3.2\",\n\t\"vega-datasets\": \"^2.2.0\",\n\t\"vega-lite-dev-config\": \"^0.18.0\",\n\t\"vega-typings\": \"^0.21.0\"\n};\nvar dependencies = {\n\t\"vega-util\": \"^1.16.0\"\n};\nvar pkg = {\n\tname: name,\n\tversion: version$1,\n\tdescription: description,\n\tkeywords: keywords,\n\trepository: repository,\n\tauthor: author,\n\tcollaborators: collaborators,\n\tlicense: license,\n\tbugs: bugs,\n\thomepage: homepage,\n\tmain: main,\n\tmodule: module,\n\tunpkg: unpkg,\n\tjsdelivr: jsdelivr,\n\ttypes: types,\n\tfiles: files,\n\tscripts: scripts,\n\tdevDependencies: devDependencies,\n\tdependencies: dependencies\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\n/**\n * Format the value to be shown in the tooltip.\n *\n * @param value The value to show in the tooltip.\n * @param valueToHtml Function to convert a single cell value to an HTML string\n */\nfunction formatValue(value, valueToHtml, maxDepth) {\n    if (isArray(value)) {\n        return `[${value.map((v) => valueToHtml(isString(v) ? v : stringify(v, maxDepth))).join(', ')}]`;\n    }\n    if (isObject(value)) {\n        let content = '';\n        const _a = value, { title, image } = _a, rest = __rest(_a, [\"title\", \"image\"]);\n        if (title) {\n            content += `<h2>${valueToHtml(title)}</h2>`;\n        }\n        if (image) {\n            content += `<img src=\"${valueToHtml(image)}\">`;\n        }\n        const keys = Object.keys(rest);\n        if (keys.length > 0) {\n            content += '<table>';\n            for (const key of keys) {\n                let val = rest[key];\n                // ignore undefined properties\n                if (val === undefined) {\n                    continue;\n                }\n                if (isObject(val)) {\n                    val = stringify(val, maxDepth);\n                }\n                content += `<tr><td class=\"key\">${valueToHtml(key)}:</td><td class=\"value\">${valueToHtml(val)}</td></tr>`;\n            }\n            content += `</table>`;\n        }\n        return content || '{}'; // show empty object if there are no properties\n    }\n    return valueToHtml(value);\n}\nfunction replacer(maxDepth) {\n    const stack = [];\n    return function (key, value) {\n        if (typeof value !== 'object' || value === null) {\n            return value;\n        }\n        const pos = stack.indexOf(this) + 1;\n        stack.length = pos;\n        if (stack.length > maxDepth) {\n            return '[Object]';\n        }\n        if (stack.indexOf(value) >= 0) {\n            return '[Circular]';\n        }\n        stack.push(value);\n        return value;\n    };\n}\n/**\n * Stringify any JS object to valid JSON\n */\nfunction stringify(obj, maxDepth) {\n    return JSON.stringify(obj, replacer(maxDepth));\n}\n\n// generated with build-style.sh\nvar defaultStyle = `#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n`;\n\nconst EL_ID = 'vg-tooltip-element';\nconst DEFAULT_OPTIONS = {\n    /**\n     * X offset.\n     */\n    offsetX: 10,\n    /**\n     * Y offset.\n     */\n    offsetY: 10,\n    /**\n     * ID of the tooltip element.\n     */\n    id: EL_ID,\n    /**\n     * ID of the tooltip CSS style.\n     */\n    styleId: 'vega-tooltip-style',\n    /**\n     * The name of the theme. You can use the CSS class called [THEME]-theme to style the tooltips.\n     *\n     * There are two predefined themes: \"light\" (default) and \"dark\".\n     */\n    theme: 'light',\n    /**\n     * Do not use the default styles provided by Vega Tooltip. If you enable this option, you need to use your own styles. It is not necessary to disable the default style when using a custom theme.\n     */\n    disableDefaultStyle: false,\n    /**\n     * HTML sanitizer function that removes dangerous HTML to prevent XSS.\n     *\n     * This should be a function from string to string. You may replace it with a formatter such as a markdown formatter.\n     */\n    sanitize: escapeHTML,\n    /**\n     * The maximum recursion depth when printing objects in the tooltip.\n     */\n    maxDepth: 2,\n    /**\n     * A function to customize the rendered HTML of the tooltip.\n     * @param value A value string, or object of value strings keyed by field\n     * @param sanitize The `sanitize` function from `options.sanitize`\n     * @returns {string} The returned string will become the `innerHTML` of the tooltip element\n     */\n    formatTooltip: formatValue,\n};\n/**\n * Escape special HTML characters.\n *\n * @param value A value to convert to string and HTML-escape.\n */\nfunction escapeHTML(value) {\n    return String(value).replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\nfunction createDefaultStyle(id) {\n    // Just in case this id comes from a user, ensure these is no security issues\n    if (!/^[A-Za-z]+[-:.\\w]*$/.test(id)) {\n        throw new Error('Invalid HTML ID');\n    }\n    return defaultStyle.toString().replace(EL_ID, id);\n}\n\n/**\n * Position the tooltip\n *\n * @param event The mouse event.\n * @param tooltipBox\n * @param offsetX Horizontal offset.\n * @param offsetY Vertical offset.\n */\nfunction calculatePosition(event, tooltipBox, offsetX, offsetY) {\n    let x = event.clientX + offsetX;\n    if (x + tooltipBox.width > window.innerWidth) {\n        x = +event.clientX - offsetX - tooltipBox.width;\n    }\n    let y = event.clientY + offsetY;\n    if (y + tooltipBox.height > window.innerHeight) {\n        y = +event.clientY - offsetY - tooltipBox.height;\n    }\n    return { x, y };\n}\n\n/**\n * The tooltip handler class.\n */\nclass Handler {\n    /**\n     * Create the tooltip handler and initialize the element and style.\n     *\n     * @param options Tooltip Options\n     */\n    constructor(options) {\n        this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        const elementId = this.options.id;\n        this.el = null;\n        // bind this to call\n        this.call = this.tooltipHandler.bind(this);\n        // prepend a default stylesheet for tooltips to the head\n        if (!this.options.disableDefaultStyle && !document.getElementById(this.options.styleId)) {\n            const style = document.createElement('style');\n            style.setAttribute('id', this.options.styleId);\n            style.innerHTML = createDefaultStyle(elementId);\n            const head = document.head;\n            if (head.childNodes.length > 0) {\n                head.insertBefore(style, head.childNodes[0]);\n            }\n            else {\n                head.appendChild(style);\n            }\n        }\n    }\n    /**\n     * The tooltip handler function.\n     */\n    tooltipHandler(handler, event, item, value) {\n        // console.log(handler, event, item, value);\n        var _a;\n        // append a div element that we use as a tooltip unless it already exists\n        this.el = document.getElementById(this.options.id);\n        if (!this.el) {\n            this.el = document.createElement('div');\n            this.el.setAttribute('id', this.options.id);\n            this.el.classList.add('vg-tooltip');\n            document.body.appendChild(this.el);\n        }\n        const tooltipContainer = (_a = document.fullscreenElement) !== null && _a !== void 0 ? _a : document.body;\n        tooltipContainer.appendChild(this.el);\n        // hide tooltip for null, undefined, or empty string values\n        if (value == null || value === '') {\n            this.el.classList.remove('visible', `${this.options.theme}-theme`);\n            return;\n        }\n        // set the tooltip content\n        this.el.innerHTML = this.options.formatTooltip(value, this.options.sanitize, this.options.maxDepth);\n        // make the tooltip visible\n        this.el.classList.add('visible', `${this.options.theme}-theme`);\n        const { x, y } = calculatePosition(event, this.el.getBoundingClientRect(), this.options.offsetX, this.options.offsetY);\n        this.el.setAttribute('style', `top: ${y}px; left: ${x}px`);\n    }\n}\n\nconst version = pkg.version;\n/**\n * Create a tooltip handler and register it with the provided view.\n *\n * @param view The Vega view.\n * @param opt Tooltip options.\n */\nfunction index (view, opt) {\n    const handler = new Handler(opt);\n    view.tooltip(handler.call).run();\n    return handler;\n}\n\nexport { DEFAULT_OPTIONS, Handler, calculatePosition, createDefaultStyle, index as default, escapeHTML, formatValue, replacer, stringify, version };\n"]},"metadata":{},"sourceType":"module"}