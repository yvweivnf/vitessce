{"version":3,"file":"index.cjs.js","sources":["../src/ZarrMultivecDataFetcher.js"],"sourcesContent":["import { HTTPStore, openArray, slice } from 'zarr';\n\nfunction multivecChunksToTileDenseArray(chunks, tileShape, isRow) {\n  // Allocate a Float32Array for the tile (with length tile_size).\n  const fullTileLength = (isRow ? tileShape[1] : tileShape[0] * tileShape[1]);\n  const fullTileArray = new Float32Array(fullTileLength);\n\n  // Fill in the data for each sample and chunk.\n  let offset = 0;\n  if(isRow) {\n    // Single row, no need to iterate over samples.\n    for (const chunk of chunks) {\n      const chunkData = chunk.data;\n      fullTileArray.set(chunkData, offset);\n      offset += chunkData.length;\n    }\n  } else {\n    // Multi-row, need to iterate over samples.\n    const numSamples = tileShape[0];\n    for (let sampleI = 0; sampleI < numSamples; sampleI++) {\n      for (const chunk of chunks) {\n        const chunkData = chunk.data[sampleI];\n        fullTileArray.set(chunkData, offset);\n        offset += chunkData.length;\n      }\n    }\n  }\n  \n  return fullTileArray;\n}\n\nconst ZarrMultivecDataFetcher = function ZarrMultivecDataFetcher(HGC, ...args) {\n\n  if (!new.target) {\n        throw new Error(\n          'Uncaught TypeError: Class constructor cannot be invoked without \"new\"',\n        );\n    }\n\n    const { slugid } = HGC.libraries;\n    const {\n      absToChr,\n      parseChromsizesRows,\n      genomicRangeToChromosomeChunks,\n      DenseDataExtrema1D,\n      minNonZero,\n      maxNonZero,\n    } = HGC.utils;\n\n    class ZarrMultivecDataFetcherClass {\n        constructor(dataConfig) {\n            this.dataConfig = dataConfig;\n            this.trackUid = slugid.nice();\n        \n            if (dataConfig.url) {\n              // console.assert(dataConfig.url.endsWith('.zarr'));\n              // S3 bucket must have a CORS policy to allow reading from any origin.\n              this.store = new HTTPStore(dataConfig.url, { supportedMethods: ['GET'] });\n            }\n\n            if(dataConfig.row !== undefined) {\n              this.row = dataConfig.row;\n            }\n        }\n\n        tilesetInfo(callback) {\n            this.tilesetInfoLoading = true;\n        \n            // Use the tileset_info stored as JSON in file.zarr/.zattrs\n            return this.store\n              .getItem('.zattrs')\n              .then(bytes => {\n                const decoder = new TextDecoder('utf-8');\n                const json = JSON.parse(decoder.decode(bytes));\n                return json;\n              })\n              .then(attrs => {\n                this.tilesetInfoLoading = false;\n\n                const chromSizes = attrs.multiscales.map(d => ([d.name, d.metadata.chromsize]));\n                \n                const finalChrom = attrs.multiscales[attrs.multiscales.length - 1];\n                const maxPos = finalChrom.metadata.chromoffset + finalChrom.metadata.chromsize;\n                const tileSize = attrs.shape[1];\n                const retVal = {\n                  ...attrs,\n                  shape: [attrs.shape[1], attrs.shape[0]],\n                  chromSizes,\n                  tile_size: tileSize,\n                  max_width: maxPos,\n                  min_pos: [0],\n                  max_pos: [maxPos],\n                  max_zoom: Math.ceil(Math.log(maxPos / tileSize) / Math.log(2)),\n                };\n        \n                if (callback) {\n                  callback(retVal);\n                }\n        \n                return retVal;\n              })\n              .catch(err => {\n                this.tilesetInfoLoading = false;\n        \n                if (callback) {\n                  callback({\n                    error: `Error parsing zarr multivec: ${err}`,\n                  });\n                }\n              });\n          }\n        \n          fetchTilesDebounced(receivedTiles, tileIds) {\n            const tiles = {};\n        \n            const validTileIds = [];\n            const tilePromises = [];\n        \n            for (const tileId of tileIds) {\n              const parts = tileId.split('.');\n              const z = parseInt(parts[0], 10);\n              const x = parseInt(parts[1], 10);\n        \n              if (Number.isNaN(x) || Number.isNaN(z)) {\n                console.warn('Invalid tile zoom or position:', z, x);\n                continue;\n              }\n        \n              validTileIds.push(tileId);\n              tilePromises.push(this.tile(z, x, tileId));\n            }\n        \n            Promise.all(tilePromises).then(values => {\n              for (let i = 0; i < values.length; i++) {\n                const validTileId = validTileIds[i];\n                tiles[validTileId] = values[i];\n                tiles[validTileId].tilePositionId = validTileId;\n              }\n              receivedTiles(tiles);\n            });\n            return tiles;\n          }\n        \n          tile(z, x, tileId) {\n            const { store } = this;\n            return this.tilesetInfo().then(tsInfo => {\n              // const multiscales = tsInfo.multiscales;\n        \n              // Adapted from clodius.tiles.multivec.get_single_tile\n              // Reference: https://github.com/higlass/clodius/blob/develop/clodius/tiles/multivec.py#L66\n        \n              // z is the index of the resolution that should be selected.\n              // Resolution is size of each bin (except for the last bin in each chromosome).\n              const resolution = +tsInfo.resolutions[z];\n              const tileSize = +tsInfo.tile_size;\n              const binSize = resolution;\n        \n              // Where in the data does the tile start and end?\n              const tileStart = x * tileSize * resolution;\n              const tileEnd = tileStart + tileSize * resolution;\n        \n              // chromSizes is an array of \"tuples\" [ [\"chr1\", 1000], ... ]\n              const chromSizes = tsInfo.chromSizes;\n        \n              // Adapted from clodius.tiles.multivec.get_tile\n              // Reference: https://github.com/higlass/clodius/blob/develop/clodius/tiles/multivec.py#L110\n\n              const chromInfo = parseChromsizesRows(chromSizes);\n              const [chrStart, chrStartPos] = absToChr(tileStart, chromInfo);\n              const [chrEnd, chrEndPos] = absToChr(tileEnd, chromInfo);\n              const genomicStart = { chr: chrStart, pos: chrStartPos };\n              const genomicEnd = { chr: chrEnd, pos: chrEndPos };\n        \n              // Using the [genomicStart, genomicEnd] range, get an array of \"chromosome chunks\",\n              // where each chunk range starts and ends with the same chromosome.\n              // Start a new chromosome chunk at each chromosome boundary.\n              const chrChunks = genomicRangeToChromosomeChunks(\n                chromSizes,\n                genomicStart,\n                genomicEnd,\n                binSize,\n                tileSize,\n              );\n        \n              // Get the zarr data for each chromosome chunk,\n              // since data for each chromosome is stored in a separate zarr array.\n              return Promise.all(\n                chrChunks.map(([chrName, zStart, zEnd]) => {\n                  return openArray({\n                    store,\n                    path: `/chromosomes/${chrName}/${resolution}/`,\n                    mode: 'r',\n                  }).then(arr => (this.row !== undefined\n                    ? arr.getRaw([this.row, slice(zStart, zEnd)])\n                    : arr.get([null, slice(zStart, zEnd)])\n                  ));\n                }),\n              ).then(chunks => {\n                const dense = multivecChunksToTileDenseArray(chunks, [tsInfo.shape[1], tsInfo.shape[0]], this.row !== undefined);\n                return Promise.resolve({\n                  dense,\n                  denseDataExtrema: new DenseDataExtrema1D(dense),\n                  dtype: 'float32',\n                  min_value: Math.min.apply(null, dense),\n                  max_value: Math.max.apply(null, dense),\n                  minNonZero: minNonZero(dense),\n                  maxNonZero: maxNonZero(dense),\n                  server: null,\n                  size: 1,\n                  shape: tsInfo.shape,\n                  tileId,\n                  tilePos: [x],\n                  tilePositionId: tileId,\n                  tilesetUid: null,\n                  zoomLevel: z,\n                });\n              });\n            });\n        }\n    } // end class\n    return new ZarrMultivecDataFetcherClass(...args);\n} // end function wrapper\n\n\nZarrMultivecDataFetcher.config = {\n    type: 'zarr-multivec',\n};\n\nexport default ZarrMultivecDataFetcher;\n"],"names":["multivecChunksToTileDenseArray","chunks","tileShape","isRow","fullTileLength","fullTileArray","Float32Array","offset","chunk","chunkData","data","set","length","numSamples","sampleI","ZarrMultivecDataFetcher","HGC","Error","slugid","libraries","utils","absToChr","parseChromsizesRows","genomicRangeToChromosomeChunks","DenseDataExtrema1D","minNonZero","maxNonZero","ZarrMultivecDataFetcherClass","dataConfig","trackUid","nice","url","store","HTTPStore","supportedMethods","row","undefined","callback","tilesetInfoLoading","getItem","then","bytes","decoder","TextDecoder","json","JSON","parse","decode","attrs","chromSizes","multiscales","map","d","name","metadata","chromsize","finalChrom","maxPos","chromoffset","tileSize","shape","retVal","tile_size","max_width","min_pos","max_pos","max_zoom","Math","ceil","log","err","error","receivedTiles","tileIds","tiles","validTileIds","tilePromises","tileId","parts","split","z","parseInt","x","Number","isNaN","console","warn","push","tile","Promise","all","values","i","validTileId","tilePositionId","tilesetInfo","tsInfo","resolution","resolutions","binSize","tileStart","tileEnd","chromInfo","chrStart","chrStartPos","chrEnd","chrEndPos","genomicStart","chr","pos","genomicEnd","chrChunks","chrName","zStart","zEnd","openArray","path","mode","arr","getRaw","slice","get","dense","resolve","denseDataExtrema","dtype","min_value","min","apply","max_value","max","server","size","tilePos","tilesetUid","zoomLevel","args","config","type"],"mappings":"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"}