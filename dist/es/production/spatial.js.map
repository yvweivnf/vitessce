{"version":3,"sources":["../webpack/bootstrap","app/constants.js","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","utils.js","app/state/hooks.js","layers/heatmap-constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"@luma.gl/constants\"","../external \"lodash/isEqual\"","../external \"@deck.gl/core\"","components/hooks.js","../external \"@material-ui/core/styles\"","components/sets/constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/DatasetNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","components/sets/utils.js","../external \"@material-ui/core/TableCell\"","components/data-hooks.js","components/sets/cell-set-utils.js","layers/constants.js","app/state/coordination.js","../external \"@deck.gl/layers\"","components/classNames.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/spatial/constants.js","../external \"zustand\"","../external \"lodash/debounce\"","loaders/errors/AbstractLoaderError.js","../external \"lodash/range\"","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../external \"zustand/shallow\"","../external \"@material-ui/core/TableRow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","app/constant-relationships.js","app/plugins.js","../external \"@material-ui/core/Slider\"","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","components/shared-plot-options/styles.js","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/Paper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../external \"@luma.gl/core\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","../external \"mathjs\"","../external \"@material-ui/core/Popper\"","components/shared-mui/styles.js","../external \"math.gl\"","components/shared-plot-options/OptionSelect.js","../external \"d3-array\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"@turf/helpers\"","components/layer-controller/utils.js","../external \"uuid/v4\"","../external \"deck.gl\"","../external \"nebula.gl\"","../external \"@material-ui/core/Select\"","../external \"@material-ui/core/Checkbox\"","layers/bitmask-layer-shaders.js","layers/BitmaskLayer.js","components/spatial/utils.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../external \"lodash/isNil\"","../external \"tinycolor2\"","components/tooltip/Tooltip2D.js","components/tooltip/TooltipContent.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","layers/HeatmapCompositeTextLayer.js","components/shared-plot-options/OptionsContainer.js","components/tooltip/styles.js","components/tooltip/Tooltip.js","components/interpolate-colors.js","../external \"@turf/centroid\"","../external \"concaveman\"","../external \"@nebula.gl/edit-modes\"","layers/PixelatedBitmapLayer.js","layers/heatmap-bitmap-layer-shaders.js","layers/HeatmapBitmapLayer.js","../external \"d3-quadtree\"","layer-extensions/ScaledExpressionExtension/shader-module.js","layer-extensions/ScaledExpressionExtension/ScaledExpressionExtension.js","layer-extensions/ScaledExpressionExtension/index.js","layer-extensions/SelectionExtension/shader-module.js","layer-extensions/SelectionExtension/SelectionExtension.js","layer-extensions/SelectionExtension/index.js","layer-extensions/index.js","../external \"@material-ui/core/Box\"","../external \"@material-ui/core/Table\"","../external \"@material-ui/core/TableBody\"","../external \"@material-ui/core/TableContainer\"","components/shared-spatial-scatterplot/quadtree.js","components/shared-plot-options/CellColorEncodingOption.js","assets/tools/near_me.svg","assets/tools/selection_rectangle.svg","assets/tools/selection_lasso.svg","components/shared-spatial-scatterplot/ToolMenu.js","components/shared-spatial-scatterplot/cursor.js","components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js","layers/SelectionLayer.js","layers/selection-utils.js","layers/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","components/spatial/Spatial.js","../external \"@deck.gl/extensions\"","../external \"@turf/boolean-within\"","../external \"@turf/boolean-contains\"","../external \"@turf/boolean-overlap\"","../external \"@turf/boolean-point-in-polygon\"","../external \"@nebula.gl/layers\"","../external \"short-number\"","../external \"regenerator-runtime\"","components/spatial/SpatialOptions.js","components/spatial/SpatialTooltipSubscriber.js","components/spatial/SpatialSubscriber.js","components/spatial/index.js"],"names":["Component","DESCRIPTION","STATUS","GENES","CELL_SETS","SCATTERPLOT","SPATIAL","HEATMAP","LAYER_CONTROLLER","CELL_SET_SIZES","GENOMIC_PROFILES","CELL_SET_EXPRESSION","EXPRESSION_HISTOGRAM","GATING","DataType","CELLS","EXPRESSION_MATRIX","MOLECULES","NEIGHBORHOODS","RASTER","FileType","CELLS_JSON","CELL_SETS_JSON","EXPRESSION_MATRIX_ZARR","GENOMIC_PROFILES_ZARR","MOLECULES_JSON","NEIGHBORHOODS_JSON","RASTER_JSON","RASTER_OME_ZARR","CLUSTERS_JSON","GENES_JSON","ANNDATA_CELL_SETS_ZARR","ANNDATA_CELLS_ZARR","ANNDATA_EXPRESSION_MATRIX_ZARR","CoordinationType","DATASET","OBS_TYPE","FEATURE_TYPE","FEATURE_VALUE_TYPE","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_OBS_SET_POLYGONS_VISIBLE","EMBEDDING_OBS_SET_LABELS_VISIBLE","EMBEDDING_OBS_SET_LABEL_SIZE","EMBEDDING_OBS_RADIUS","EMBEDDING_OBS_RADIUS_MODE","EMBEDDING_OBS_OPACITY","EMBEDDING_OBS_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","OBS_FILTER","OBS_HIGHLIGHT","OBS_SET_SELECTION","OBS_SET_HIGHLIGHT","OBS_SET_COLOR","FEATURE_FILTER","FEATURE_HIGHLIGHT","FEATURE_SELECTION","FEATURE_VALUE_COLORMAP","FEATURE_VALUE_TRANSFORM","FEATURE_VALUE_COLORMAP_RANGE","OBS_COLOR_ENCODING","SPATIAL_IMAGE_LAYER","SPATIAL_SEGMENTATION_LAYER","SPATIAL_POINT_LAYER","SPATIAL_NEIGHBORHOOD_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_OBS_SETS","MOLECULE_HIGHLIGHT","GATING_FEATURE_SELECTION_X","GATING_FEATURE_SELECTION_Y","FEATURE_VALUE_TRANSFORM_COEFFICIENT","fromEntries","iterable","reduce","obj","key","val","Object","assign","pluralize","singular","plural","count","capitalize","word","charAt","toUpperCase","slice","getLongestString","strings","prevLongest","currentValue","length","getNextScope","prevScopes","chars","nextCharIndices","next","r","forEach","charIndex","unshift","increment","i","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","Array","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","uid","newLayout","layout","filter","c","changeLayout","newComponentProps","newProps","useComponentLayout","component","scopes","coordinationScopes","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","map","undefined","shallow","setters","useMemo","setterName","setterFunc","useDatasetUids","datasetScopes","datasetUids","datasetScopesArr","datasetScope","useMultiDatasetCoordination","datasetValues","parameterSpace","parameterScope","console","error","datasetSetters","AUXILIARY_COORDINATION_TYPES_MAP","spatialImageLayer","mapCoordinationScopes","newCoordinationScopes","keys","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","TILE_SIZE","DATA_TEXTURE_SIZE","MIN_ROW_AGG","MAX_ROW_AGG","COLOR_BAR_SIZE","AXIS_LABEL_TEXT_SIZE","AXIS_TITLE_TEXT_SIZE","AXIS_MIN_SIZE","AXIS_MAX_SIZE","AXIS_MARGIN","AXIS_PADDING","THEME_TO_TEXT_COLOR","dark","light","AXIS_FONT_FAMILY","PIXELATED_TEXTURE_PARAMETERS","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","theme","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateTracksHover","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","getStatsForResolution","resolution","height","width","depth","depthDownsampled","max","totalBytes","canLoadResolution","maxHeapSize","window","performance","memory","jsHeapSizeLimit","maxSize","getWindowDimensions","innerWidth","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellIndex","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","AbstractLoaderError","LoaderNotFoundError","DatasetNotFoundError","datasetUid","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","warnInConsole","initCoordinationSpace","initialValues","defaultCoordinationValues","getDefaultCoordinationValues","initialValue","shouldInit","equal","useDescription","dataset","description","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialSegmentationLayer","DEFAULT_CELLS_LAYER","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","a","spatialPointLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","generateKey","uuidv4","nodeToSet","currNode","flatMap","nodeToHeight","newLevel","childrenHeights","getNodeLength","acc","curr","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","splice","treeToUnion","checkedPaths","nodeSets","h","hEl","treeToIntersection","treeToComplement","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","concavity","Infinity","hullCoords","concaveman","centroidCoords","centroid","geometry","coordinates","hull","treeToSetSizesBySetNames","filterNode","filterPath","treeToExpectedCheckedLevel","lzn","levelZeroPath","range","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","nodeColorArray","getCellSetPolygons","params","cellSetSelection","GLSL_COLORMAPS","GLSL_COLORMAP_DEFAULT","COLORMAP_SHADER_PLACEHOLDER","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","DEFAULT_LAYER_TYPE_ORDERING","Error","LoadingIndicator","useStyles","makeStyles","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","FILE_TYPE_DATA_TYPE_MAPPING","PLUGINS_KEY","PLUGIN_VIEW_TYPES_KEY","PLUGIN_COORDINATION_TYPES_KEY","PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY","PLUGIN_FILE_TYPES_KEY","PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY","PLUGIN_CONVENIENCE_FILE_TYPES_KEY","PLUGINS","registerPluginCoordinationType","typeName","defaultValue","registerPluginViewType","viewType","viewSubscriberReactComponent","coordinationTypes","pluginTypesPerView","registerPluginFileType","fileTypeName","dataTypeName","dataLoaderClass","dataSourceClass","registerPluginConvenienceFileType","expansionFunction","getPluginViewTypes","getPluginViewType","getPluginCoordinationTypes","getPluginCoordinationTypeDefaults","getPluginCoordinationTypesForViewType","getPluginFileTypes","getPluginConvenienceFileTypes","getDataTypeForPluginFileType","fileType","getLoaderClassesForPluginFileType","getExpansionFunctionForPluginConvenienceFileType","getFileTypes","getCoordinationTypes","getComponentCoordinationTypes","getFileTypeDataTypeMapping","getConvenienceFileTypes","box","boxSizing","checkbox","padding","slider","minWidth","sliderValueLabel","primaryBackground","tableContainer","overflowX","labelCell","inputCell","select","fontSize","selectRoot","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","placement","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","maxHeight","position","left","top","textAlign","muiTheme","createTheme","type","primary","grey","secondary","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","OptionSelect","classesProp","root","getSingleSelectionStats2D","getRaster","selectionStats","getChannelStats","domain","contrastLimits","getSingleSelectionStats3D","lowResSource","sizeZ","z","raster0","rasterMid","rasterTop","stats0","statsMid","statsTop","min","getSingleSelectionStats","getStats","getMultiSelectionStats","selections","Promise","all","stats","domains","stat","sliders","getPhysicalSizeScalingMatrix","physicalSizes","x","y","ratio","Matrix4","scale","identity","getBoundingCube","physicalSizeScalingMatrix","xSlice","ySlice","zSlice","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","format","toExponential","vs","fs","padWithDefault","padWidth","defaultProps","hoveredCell","compare","cellColorData","BitmaskLayer","modules","project32","picking","defines","oldProps","changeFlags","setColorTexture","cellTexHeight","cellTexWidth","expressionTex","dataToTexture","setState","gl","context","model","delete","_getModel","getAttributeManager","invalidateAll","colorTex","Texture2D","mipmaps","RGB","dataFormat","UNSIGNED_BYTE","opts","uniforms","channelsVisible","colorScaleLo","colorScaleHi","isExpressionMode","textures","setUniforms","hovered","colorTexHeight","colorTexWidth","uColorScaleRange","uIsExpressionMode","draw","isWebGL2On","isWebGL2","Float32Array","R32F","LUMINANCE","RED","FLOAT","XRLayer","layerName","square","sortLayers","layers","sort","getDefaultGlobalSelection","globalIndices","dim","buildDefaultSelection","globalSelection","firstNonGlobalDimension","isInterleaved","lastDimSize","initializeLayerChannels","defaultSelection","colors","channel","getMetaWithTransformMatrices","imageMeta","imageLoaders","sources","metadata","translate","some","minPhysicalSize","hasZPhyscialSize","unit","replace","imageMetaWithTransform","divide","newMeta","toArray","initializeRasterLayersAndChannels","rasterLayers","rasterRenderLayers","usePhysicalSizeScaling","nextImageMetaAndLayers","autoImageLayerDefPromises","layer","loaderCreator","layerIndex","autoImageLayerDefPromise","channels","resolve","isBitmask","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","useRaster","initialTargetX","initialTargetY","initialTargetZ","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","xy","cellCoordinates","xExtent","extent","yExtent","xRange","yRange","getViewExtentFromPolygonExtents","extents","polygonExtentsX","poly","polygonExtentsY","log2","getLayerLoaderTuple","VolumeLayer","Layer","MultiscaleImageLayer","ImageLayer","renderSubBitmaskLayers","tile","bbox","right","bottom","v","base","bounds","tileSize","channelData","tileId","Tooltip2D","parentUuid","sourceUuid","parentWidth","parentHeight","isTooltipVisible","crosshairWidth","TooltipContent","HeatmapCompositeTextLayer","axisTopLabelData","matrixLeft","matrixWidth","viewWidth","targetX","targetY","axisTopTitle","cellWidth","axisOffsetTop","scaleFactor","hideTopLabels","showAxisTopLabels","axisLabelTop","TextLayer","getText","getPosition","getTextAnchor","getColor","getSize","getAngle","fontFamily","updateTriggers","cellColorLabelsData","axisOffsetLeft","transpose","axisLabelLeft","getAlignmentBaseline","axisLeftLabelData","matrixTop","matrixHeight","viewHeight","axisLeftTitle","cellHeight","hideLeftLabels","showAxisLeftLabels","axis","_renderAxisLeftLayers","_renderAxisTopLayers","_renderCornerLayers","CompositeLayer","OptionsContainer","table","tooltipAnchor","pointerEvents","userSelect","tooltipContent","outline","borderCollapse","Tooltip","placementX","setPlacementX","placementY","setPlacementY","flipX","flipY","style","schemeRdBu","schemePlasma","rgbSpline","spline","t","basis","innerBasis","t1","v0","v1","v2","v3","t2","t3","interpolateRgbBasis","interpolateSequentialMulti","interpolateRdBu","interpolatePlasma","getCellColors","cellColorEncoding","expressionDataAttrs","geneExpColormap","cellColor","BitmapLayer","async","desaturate","tintColor","PixelatedBitmapLayer","textureParameters","vertexShader","fragmentShader","aggSizeX","aggSizeY","HeatmapBitmapLayer","shaders","extensions","extension","_mergeShaders","getShaders","call","fragmentShaderWithColormap","_getShaders","args","loadTexture","bitmapTexture","uBitmapTexture","uTextureSize","uAggSize","inject","getSelectionState","ScaledExpressionExtension","module","models","topModel","sideModel","_getModels","attributeManager","getCurrentLayer","isComposite","add","expressionValue","transition","accessor","divisor","attributes","settings","m","LayerExtension","extensionName","SelectionExtension","isSelected","instanced","createCellsQuadTree","cellsEntries","getCellCoords","quadtree","addAll","CellColorEncodingOption","observationsLabelNice","handleColorEncodingChange","IconButton","alt","onClick","isActive","inactive","active","ToolMenu","setActiveTool","activeTool","visibleTools","pan","selectRectangle","selectLasso","SELECTION_TYPE","RECTANGLE","POLYGON","getCursorWithTool","getCursor","interactionState","isDragging","AbstractSpatialOrScatterplot","tool","viewport","onViewStateChange","bind","onInitializeViewInfo","onWebGLInitialized","onToolChange","nextViewState","viewState","setViewState","spatialAxisFixed","onToolChangeProp","coordinate","sourceLayer","cellHighlight","hasBitmask","content","layerZoomScale","round","dataCoords","coords","hoverData","String","updateViewInfo","project","positionX","positionY","layerProps","hideTools","getLayers","showCellSelectionTools","cellsLayer","showPanTool","useDevicePixels","OrbitView","controller","orbitAxis","OrthographicView","dragPan","PureComponent","EDIT_TYPE_ADD","EDIT_TYPE_CLEAR","ClickableDrawRectangleMode","onEdit","editType","DrawRectangleMode","ClickableDrawPolygonByDraggingMode","DrawPolygonByDraggingMode","MODE_MAP","selectionType","layerIds","onSelect","EMPTY_DATA","features","LAYER_ID_GEOJSON","PASS_THROUGH_PROPS","SelectionLayer","cellsQuadTree","flippedCoordinates","selectedPolygon","turfPolygon","pickingInfos","visit","x0","y0","x1","y1","nodePoints","nodePolygon","nodePolygonContainsSelectedPolygon","booleanContains","nodePolygonWithinSelectedPolygon","booleanWithin","nodePolygonOverlapsSelectedPolgyon","booleanOverlap","booleanPointInPolygon","mode","ViewMode","inheritedProps","EditableGeoJsonLayer","getSubLayerProps","modeConfig","dragToDraw","selectedFeatureIndexes","updatedData","_selectPolygonObjects","_subLayerProps","guides","pointType","ScatterplotLayer","radiusScale","getLineWidth","radiusMinPixels","radiusMaxPixels","getPointRadius","getBaseLayerId","layerId","getSelectedLayerId","getSelectionLayers","updateCellsSelection","cellBaseLayerId","editHandlePointRadius","cellIds","cellObj","getTentativeFillColor","getTentativeLineColor","getTentativeLineDashArray","lineWidthMinPixels","lineWidthMaxPixels","getEditHandlePointColor","getEditHandlePointRadius","editHandlePointRadiusScale","editHandlePointRadiusMinPixels","editHandlePointRadiusMaxPixels","overlayBaseProps","rest","overlay","getFillColor","getLineColor","getFilterValue","DataFilterExtension","filterSize","filterRange","CELLS_LAYER_ID","MOLECULES_LAYER_ID","NEIGHBORHOODS_LAYER_ID","defaultGetCellCoords","makeDefaultGetCellPolygon","cellEntry","makeDefaultGetCellColors","cellColors","get","makeDefaultGetCellIsSelected","cellSelectionSet","Set","has","Spatial","moleculesEntries","moleculesLayer","neighborhoodsLayer","imageLayers","layerLoaderSelections","randomColorData","_","random","expression","onUpdateCellsData","onUpdateCellsLayer","onUpdateMoleculesData","onUpdateMoleculesLayer","onUpdateNeighborhoodsData","onUpdateNeighborhoodsLayer","onUpdateImages","layerDef","cellFilter","getCellIsSelected","getCellColor","getCellPolygon","onCellClick","lineWidthScale","geneExpressionColormapRange","geneExpressionColormap","filteredCellsEntries","flipYTooltip","PolygonLayer","getPolygon","setMoleculeHighlight","getMoleculeColor","getMoleculePosition","getRadius","getNeighborhoodPolygon","neighborhoodsEntry","neighborhood","neighborhoodsEntries","ScaleBarLayer","rawLayerDef","nextLoaderSelection","prevLoaderSelection","useTransparentColor","visibilities","renderSubLayers","excludeBackground","onViewportLoad","layerLoader","AdditiveColormapExtension","ColorPaletteExtension","rasterLayersCallbacks","use3dIndex","createImageLayer","createScaleBarLayer","createSelectionLayers","createCellsLayer","molecule","createMoleculesLayer","createNeighborhoodsLayer","createImageLayers","prevProps","viewInfoDidUpdate","shallowDiff","propName","forceUpdate","onUpdateCellColors","onUpdateExpressionData","SpatialWrapper","forwardRef","useToggleStyles","createStyles","cameraLabel","button","ToggleFixedAxisButton","setSpatialAxisFixed","SpatialOptions","setGeneExpressionColormap","setGeneExpressionColormapRange","canShowExpressionOptions","canShowColorEncodingOption","canShow3DOptions","handleGeneExpressionColormapChange","handleColormapRangeChange","handleColormapRangeChangeDebounced","cmap","valueLabel","SpatialTooltipSubscriber","getCellInfo","SPATIAL_DATA_TYPES","SpatialSubscriber","observationsLabelOverride","observationsPluralLabelOverride","subobservationsLabelOverride","subobservationsPluralLabelOverride","disableTooltip","disable3d","globalDisable3d","spatial","spatialZoom","spatialTargetX","spatialTargetY","targetZ","spatialTargetZ","rotationX","spatialRotationX","rotationY","spatialRotationY","rotationZ","spatialRotationZ","rotationOrbit","spatialRotationOrbit","spatialOrbitAxis","obsFilter","obsHighlight","geneSelection","featureSelection","obsSetSelection","obsSetColor","obsColorEncoding","additionalObsSets","featureValueColormap","featureValueColormapRange","setZoom","setSpatialZoom","setTargetX","setSpatialTargetX","setTargetY","setSpatialTargetY","setTargetZ","setSpatialTargetZ","setRotationX","setSpatialRotationX","setRotationOrbit","setSpatialRotationOrbit","setOrbitAxis","setSpatialOrbitAxis","setRasterLayers","setSpatialImageLayer","setCellsLayer","setSpatialSegmentationLayer","setMoleculesLayer","setSpatialPointLayer","setNeighborhoodsLayer","setSpatialNeighborhoodLayer","setCellFilter","setObsFilter","setObsSetSelection","setObsHighlight","setObsSetColor","setObsColorEncoding","setAdditionalObsSets","setFeatureValueColormap","setFeatureValueColormapRange","layerController","canPassInCellsLayer","mergedCellSets","setCellSelectionProp","shiftedExpressionDataForBitmask","maxId","newZoom","newRotationX","newRotationOrbit","newOrbitAxis","subtitle","hasExpressionData","hasCellsData","canLoad3DLayers","res"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;;;;GAKO,GAAMA,UAAS,CAAG,CACvBC,WAAW,CAAE,aADU,CAEvBC,MAAM,CAAE,QAFe,CAGvBC,KAAK,CAAE,OAHgB,CAIvBC,SAAS,CAAE,UAJY,CAKvBC,WAAW,CAAE,aALU,CAMvBC,OAAO,CAAE,SANc,CAOvBC,OAAO,CAAE,SAPc,CAQvBC,gBAAgB,CAAE,iBARK,CASvBC,cAAc,CAAE,cATO,CAUvBC,gBAAgB,CAAE,iBAVK,CAWvBC,mBAAmB,CAAE,mBAXE,CAYvBC,oBAAoB,CAAE,qBAZC,CAavBC,MAAM,CAAE,QAbe,CAAlB,CAgBA,GAAMC,SAAQ,CAAG,CACtBC,KAAK,CAAE,OADe,CAEtBX,SAAS,CAAE,WAFW,CAGtBY,iBAAiB,CAAE,mBAHG,CAItBN,gBAAgB,CAAE,kBAJI,CAKtBO,SAAS,CAAE,WALW,CAMtBC,aAAa,CAAE,eANO,CAOtBC,MAAM,CAAE,QAPc,CAAjB,CAWA,GAAMC,SAAQ,CAAG,CACtBC,UAAU,CAAE,YADU,CAEtBC,cAAc,CAAE,gBAFM,CAGtBC,sBAAsB,CAAE,wBAHF,CAItBC,qBAAqB,CAAE,uBAJD,CAKtBC,cAAc,CAAE,gBALM,CAMtBC,kBAAkB,CAAE,oBANE,CAOtBC,WAAW,CAAE,aAPS,CAQtBC,eAAe,CAAE,iBARK,CAStBC,aAAa,CAAE,eATO,CAUtBC,UAAU,CAAE,YAVU,CAWtBC,sBAAsB,CAAE,wBAXF,CAYtBC,kBAAkB,CAAE,oBAZE,CAatBC,8BAA8B,CAAE,gCAbV,CAAjB,CAgBP;;;GAIO,GAAMC,iBAAgB,CAAG,CAC9BC,OAAO,CAAE,SADqB,CAE9B;AACAC,QAAQ,CAAE,SAHoB,CAI9BC,YAAY,CAAE,aAJgB,CAK9BC,kBAAkB,CAAE,kBALU,CAM9B;AACAC,cAAc,CAAE,eAPc,CAQ9BC,cAAc,CAAE,eARc,CAS9BC,kBAAkB,CAAE,mBATU,CAU9BC,kBAAkB,CAAE,kBAVU,CAW9BC,kBAAkB,CAAE,kBAXU,CAY9BC,kBAAkB,CAAE,kBAZU,CAa9BC,kCAAkC,CAAE,gCAbN,CAc9BC,gCAAgC,CAAE,8BAdJ,CAe9BC,4BAA4B,CAAE,0BAfA,CAgB9BC,oBAAoB,CAAE,oBAhBQ,CAiB9BC,yBAAyB,CAAE,wBAjBG,CAkB9BC,qBAAqB,CAAE,qBAlBO,CAmB9BC,0BAA0B,CAAE,yBAnBE,CAoB9BC,YAAY,CAAE,aApBgB,CAqB9BC,gBAAgB,CAAE,iBArBY,CAsB9BC,gBAAgB,CAAE,gBAtBY,CAuB9BC,gBAAgB,CAAE,gBAvBY,CAwB9BC,gBAAgB,CAAE,gBAxBY,CAyB9BC,kBAAkB,CAAE,kBAzBU,CA0B9BC,kBAAkB,CAAE,kBA1BU,CA2B9BC,kBAAkB,CAAE,kBA3BU,CA4B9BC,sBAAsB,CAAE,sBA5BM,CA6B9BC,kBAAkB,CAAE,kBA7BU,CA8B9BC,kBAAkB,CAAE,kBA9BU,CA+B9BC,cAAc,CAAE,cA/Bc,CAgC9BC,cAAc,CAAE,cAhCc,CAiC9BC,gBAAgB,CAAE,gBAjCY,CAkC9BC,gBAAgB,CAAE,gBAlCY,CAmC9BC,UAAU,CAAE,WAnCkB,CAoC9BC,aAAa,CAAE,cApCe,CAqC9BC,iBAAiB,CAAE,iBArCW,CAsC9BC,iBAAiB,CAAE,iBAtCW,CAuC9BC,aAAa,CAAE,aAvCe,CAwC9BC,cAAc,CAAE,eAxCc,CAyC9BC,iBAAiB,CAAE,kBAzCW,CA0C9BC,iBAAiB,CAAE,kBA1CW,CA2C9BC,sBAAsB,CAAE,sBA3CM,CA4C9BC,uBAAuB,CAAE,uBA5CK,CA6C9BC,4BAA4B,CAAE,2BA7CA,CA8C9BC,kBAAkB,CAAE,kBA9CU,CA+C9BC,mBAAmB,CAAE,mBA/CS,CAgD9BC,0BAA0B,CAAE,0BAhDE,CAiD9BC,mBAAmB,CAAE,mBAjDS,CAkD9BC,0BAA0B,CAAE,0BAlDE,CAmD9BC,cAAc,CAAE,cAnDc,CAoD9BC,cAAc,CAAE,cApDc,CAqD9BC,gBAAgB,CAAE,gBArDY,CAsD9BC,gBAAgB,CAAE,gBAtDY,CAuD9BC,mBAAmB,CAAE,mBAvDS,CAwD9B;AACAC,kBAAkB,CAAE,mBAzDU,CA0D9BC,0BAA0B,CAAE,yBA1DE,CA2D9BC,0BAA0B,CAAE,yBA3DE,CA4D9BC,mCAAmC,CAAE,kCA5DP,CAAzB,C;;;;;;ACpDP,kC;;;;;;;ACAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;ACbe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc;AACtB,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,C;;;;;;;;;;;;AClCkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;;;;;;;;;;ACNA,gC,CAEA;AACO,QAASC,YAAT,CAAqBC,QAArB,CAA+B,CACpC,MAAO,6MAAIA,QAAJ,EACJC,MADI,CACG,SAACC,GAAD,UAAWC,IAAX,MAAQ,CAAR,EAAmBC,GAAnB,MAAgB,CAAhB,QAA6BC,OAAM,CAACC,MAAP,CAAcJ,GAAd,6MAAsBC,GAAtB,CAA4BC,GAA5B,EAA7B,EADH,CACoE,EADpE,CAAP,CAED,CAED;;;;;;;GAQO,QAASG,UAAT,CAAmBC,QAAnB,CAA6BC,MAA7B,CAAqCC,KAArC,CAA4C,CACjD,MAAQA,MAAK,GAAK,CAAV,CAAcF,QAAd,CAAyBC,MAAjC,CACD,CAED;;;;GAKO,QAASE,WAAT,CAAoBC,IAApB,CAA0B,CAC/B,MAAOA,KAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,WAAf,GAA+BF,IAAI,CAACG,KAAL,CAAW,CAAX,CAAtC,CACD,CAED;;;;GAKO,QAASC,iBAAT,CAA0BC,OAA1B,CAAmC,CACxC,MAAOA,QAAO,CAAChB,MAAR,CACL,SAACiB,WAAD,CAAcC,YAAd,QACED,YAAW,CAACE,MAAZ,CAAqBD,YAAY,CAACC,MAAlC,CAA2CF,WAA3C,CAAyDC,YAD3D,EADK,CAAP,CAKD,CAED;;;;;;;;;GAUO,QAASE,aAAT,CAAsBC,UAAtB,CAAkC,CACvC;AACA,GAAMC,MAAK,CAAG,4BAAd,CACA;AACA;AACA;AACA,GAAMC,gBAAe,CAAG,CAAC,CAAD,CAAxB,CAEA;AACA;AACA;AACA,QAASC,KAAT,EAAgB,CACd,GAAMC,EAAC,CAAG,EAAV,CACAF,eAAe,CAACG,OAAhB,CAAwB,SAACC,SAAD,CAAe,CACrCF,CAAC,CAACG,OAAF,CAAUN,KAAK,CAACK,SAAD,CAAf,EACD,CAFD,EAGA,GAAIE,UAAS,CAAG,IAAhB,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGP,eAAe,CAACJ,MAApC,CAA4CW,CAAC,EAA7C,CAAiD,CAC/C,GAAM3B,IAAG,CAAG,EAAEoB,eAAe,CAACO,CAAD,CAA7B,CACA,GAAI3B,GAAG,EAAImB,KAAK,CAACH,MAAjB,CAAyB,CACvBI,eAAe,CAACO,CAAD,CAAf,CAAqB,CAArB,CACD,CAFD,IAEO,CACLD,SAAS,CAAG,KAAZ,CACA,MACD,CACF,CACD,GAAIA,SAAJ,CAAe,CACbN,eAAe,CAACQ,IAAhB,CAAqB,CAArB,EACD,CACD,MAAON,EAAC,CAACO,IAAF,CAAO,EAAP,CAAP,CACD,CAED,GAAIC,UAAJ,CACA,EAAG,CACDA,SAAS,CAAGT,IAAI,EAAhB,CACD,CAFD,MAESH,UAAU,CAACa,QAAX,CAAoBD,SAApB,CAFT,EAGA,MAAOA,UAAP,CACD,CAED;;;;;;GAOO,QAASE,oBAAT,CAA6BC,MAA7B,CAAqCC,KAArC,CAA4C,IACzCC,KADyC,CAChCF,MADgC,CACzCE,IADyC,CAEjD,GAAMC,OAAM,CAAGC,KAAK,CAACC,OAAN,CAAcH,IAAd,EAAsBA,IAAI,CAAED,KAAK,EAAIC,IAAI,CAACnB,MAAL,CAAc,CAAzB,CAA1B,CAAyDmB,IAAxE,CACA,MAAOC,OAAP,CACD,CAED;;;GAIO,QAASG,MAAT,CAAeN,MAAf,CAAuB,CAC5B,GAAMG,OAAM,CAAGJ,mBAAmB,CAACC,MAAD,CAAlC,CAD4B,GAEpBO,MAFoB,CAEKJ,MAFL,CAEpBI,KAFoB,CAEbC,KAFa,CAEKL,MAFL,CAEbK,KAFa,CAENC,MAFM,CAEKN,MAFL,CAENM,MAFM,CAG5B,GAAMC,YAAW,CAAGH,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAzB,CACA,MAAQD,YAAW,GAAK,CAAjB,EAAuBF,KAAK,GAAK,OAAxC,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GD;AACA;mBAKII,sDAAa,E,CAHLC,uB,gBAAVC,Q,CACUC,uB,gBAAVC,Q,CACaC,0B,gBAAbC,W,CAGK,GAAMC,mBAAkB,CAAGN,uBAA3B,CACA,GAAMO,mBAAkB,CAAGL,uBAA3B,CACA,GAAMM,sBAAqB,CAAGJ,0BAA9B,C,oBAKHL,sDAAa,E,CAFLU,sB,iBAAVR,Q,CACUS,sB,iBAAVP,Q,CAGK,GAAMQ,kBAAiB,CAAGF,sBAA1B,CACA,GAAMG,kBAAiB,CAAGF,sBAA1B,CAGP;;;;;;GAOO,GAAMG,sBAAqB,CAAG,QAAxBA,sBAAwB,SAAMC,+CAAM,CAAC,SAAAC,GAAG,QAAK,CACxD;AACA;AACA;AACAC,UAAU,CAAE,IAJ4C,CAKxD;AACA;AACAC,OAAO,CAAE,IAP+C,CAQxD;AACA;AACAC,aAAa,CAAE,uBAAAF,UAAU,QAAID,IAAG,CAAC,CAAEC,UAAU,CAAVA,UAAF,CAAD,CAAP,EAV+B,CAWxDG,UAAU,CAAE,oBAAAF,OAAO,QAAIF,IAAG,CAAC,CAAEE,OAAO,CAAPA,OAAF,CAAD,CAAP,EAXqC,CAYxDG,oBAAoB,CAAE,uCAAGC,UAAH,MAAGA,SAAH,CAAcC,KAAd,MAAcA,KAAd,CAAqBC,KAArB,MAAqBA,KAArB,OAAiCR,IAAG,CAAC,SAAAS,KAAK,QAAK,CACnER,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERS,iBAAiB,CAAC,2MACbD,KAAK,CAACR,UAAN,CAAiBS,iBADL,6MAEdJ,SAFc,4MAGVG,KAAK,CAACR,UAAN,CAAiBS,iBAAjB,CAAmCJ,SAAnC,CAHU,6MAIZC,KAJY,CAIJC,KAJI,IAFT,EADyD,CAAL,EAAN,CAApC,EAZkC,CAwBxDG,eAAe,CAAE,yBAAAC,GAAG,QAAIZ,IAAG,CAAC,SAACS,KAAD,CAAW,CACrC,GAAMI,UAAS,CAAGJ,KAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBC,MAAxB,CAA+B,SAAAC,CAAC,QAAIA,EAAC,CAACJ,GAAF,GAAUA,GAAd,EAAhC,CAAlB,CACA,MAAO,CACLX,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERa,MAAM,CAAED,SAFA,EADL,CAAP,CAMD,CAR0B,CAAP,EAxBoC,CAiCxDI,YAAY,CAAE,sBAAAC,iBAAiB,QAAIlB,IAAG,CAAC,SAACS,KAAD,CAAW,CAChD,GAAMI,UAAS,CAAGJ,KAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBhE,KAAxB,EAAlB,CACAoE,iBAAiB,CAACxD,OAAlB,CAA0B,eAAmB,4NAAjBI,CAAiB,UAAdqD,QAAc,UAC3CN,SAAS,CAAC/C,CAAD,CAAT,4MACK+C,SAAS,CAAC/C,CAAD,CADd,IAEKqD,QAFL,EAID,CALD,EAMA,MAAO,CACLlB,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERa,MAAM,CAAED,SAFA,EADL,CAAP,CAMD,CAdqC,CAAP,EAjCyB,CAAL,EAAJ,CAAZ,EAA9B,CAkDP;;;;GAKO,GAAMO,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,SAAD,CAAYC,MAAZ,CAAoBC,kBAApB,QAA2C/B,mBAAkB,CAC7F,SAAAiB,KAAK,QAAIA,MAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBC,MAAxB,CAA+B,SAAAS,CAAC,QAAIA,EAAC,CAACH,SAAF,GAAgBA,SAApB,EAAhC,EAA+DN,MAA/D,CACP,SAAAS,CAAC,QAAIF,OAAM,CAACG,KAAP,CAAa,SAAAlB,KAAK,QAAIiB,EAAC,CAACD,kBAAF,CAAqBhB,KAArB,IACjBgB,kBAAkB,CAAChB,KAAD,CADL,EAAlB,CAAJ,EADM,CAAJ,EADwF,CAA7D,EAA3B,CAOP;;;;;;;;;;;GAYO,GAAMmB,qBAAoB,CAAG,QAAvBA,qBAAuB,SAAM3B,+CAAM,CAAC,SAAAC,GAAG,QAAK,CACvD2B,cAAc,CAAE,IADuC,CAEvDtB,oBAAoB,CAAE,wCAAGC,UAAH,OAAGA,SAAH,CAAcC,KAAd,OAAcA,KAAd,CAAqBC,KAArB,OAAqBA,KAArB,OAAiCR,IAAG,CAAC,SAAAS,KAAK,QAAK,CACnEkB,cAAc,CAAC,2MACVlB,KAAK,CAACkB,cADG,6MAEXrB,SAFW,6MAGTC,KAHS,CAGDC,KAHC,GADqD,CAAL,EAAN,CAApC,EAFiC,CAAL,EAAJ,CAAZ,EAA7B,CAYP;;;;;GAMA,GAAMoB,cAAa,CAAG7B,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACnC;AACA;AACA;AACA6B,cAAc,CAAE,IAJmB,CAKnCC,iBAAiB,CAAE,2BAAAD,cAAc,QAAI7B,IAAG,CAAC,CAAE6B,cAAc,CAAdA,cAAF,CAAD,CAAP,EALE,CAAL,EAAJ,CAA5B,CAQA;;;;GAKA,GAAME,aAAY,CAAGhC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CAClC;AACA;AACAgC,OAAO,CAAE,IAHyB,CAIlCC,UAAU,CAAE,oBAAAD,OAAO,QAAIhC,IAAG,CAAC,CAAEgC,OAAO,CAAPA,OAAF,CAAD,CAAP,EAJe,CAAL,EAAJ,CAA3B,CAOA;;;;;GAMA,GAAME,iBAAgB,CAAGnC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACtC;AACA;AACA;AACAmC,QAAQ,CAAE,EAJ4B,CAKtCC,oBAAoB,CAAE,8BAACC,IAAD,CAAOF,QAAP,QAAoBnC,IAAG,CAAC,SAAAS,KAAK,QAAK,CACtD0B,QAAQ,CAAC,2MACJ1B,KAAK,CAAC0B,QADH,6MAELE,IAFK,CAEEF,QAFF,EAD8C,CAAL,EAAN,CAAvB,EALgB,CAAL,EAAJ,CAA/B,CAaA;;;;;GAMA,GAAMG,iBAAgB,CAAGvC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACtCuC,WAAW,CAAE,EADyB,CAEtCC,oBAAoB,CAAE,sCAAMxC,IAAG,CAAC,SAAAS,KAAK,QAAK,CACxC8B,WAAW,CAAE9B,KAAK,CAAC8B,WAAN,CAAoB,CADO,CAAL,EAAN,CAAT,EAFgB,CAAL,EAAJ,CAA/B,CAOA;;;;;;;;;;;;;;;GAgBO,QAASE,gBAAT,CAAyBC,UAAzB,CAAqCnB,kBAArC,CAAyD,CAC9D,GAAMlB,qBAAoB,CAAGb,kBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA/C,CAEA,GAAMsC,OAAM,CAAGnD,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACnCC,kBADmC,CACbD,KAAK,CAACR,UADO,CACnCS,iBADmC,CAE3C,MAAO5E,mEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC/C,GAAII,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAME,MAAK,CAAGE,iBAAiB,CAACJ,SAAD,CAAjB,CAA6BiB,kBAAkB,CAACjB,SAAD,CAA/C,CAAd,CACA,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CATgC,CAS9BC,sDAT8B,CAAjC,CAWA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CACtE,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAM4C,WAAU,CAAG,QAAbA,WAAa,CAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CAC/CC,SAAS,CAATA,SAD+C,CAE/CC,KAAK,CAAEgB,kBAAkB,CAACjB,SAAD,CAFsB,CAG/CE,KAAK,CAALA,KAH+C,CAAD,CAAxB,EAAxB,CAKA,MAAO,CAACyC,UAAD,CAAaC,UAAb,CAAP,CACF;AACC,CATyC,CAAD,CAAjB,EAAD,CASlB,CAACR,UAAD,CAAanB,kBAAb,CATkB,CAAvB,CAWA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED;;;;GAKO,QAASI,eAAT,CAAwB5B,kBAAxB,CAA4C,CACjD,GAAMjB,UAAS,CAAGlI,mEAAgB,CAACC,OAAnC,CACA,GAAM+K,cAAa,CAAG7B,kBAAkB,CAACjB,SAAD,CAAxC,CAEA;AACA,GAAM+C,YAAW,CAAG7D,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACxCC,kBADwC,CAClBD,KAAK,CAACR,UADY,CACxCS,iBADwC,CAEhD;AACA,GAAM4C,iBAAgB,CAAG9E,KAAK,CAACC,OAAN,CAAc2E,aAAd,EAA+BA,aAA/B,CAA+C,CAACA,aAAD,CAAxE,CACA,MAAOtH,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CACxD,GAAI7C,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAME,MAAK,CAAGE,iBAAiB,CAACJ,SAAD,CAAjB,CAA6BiD,YAA7B,CAAd,CACA,MAAO,CAACA,YAAD,CAAe/C,KAAf,CAAP,CACD,CACD,MAAO,CAAC+C,YAAD,CAAeV,SAAf,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CAXqC,CAWnCC,sDAXmC,CAAtC,CAaA,MAAOO,YAAP,CACD,CAED;;;;;;;;;GAUO,QAASG,4BAAT,CAAqCd,UAArC,CAAiDnB,kBAAjD,CAAqE,CAC1E,GAAMlB,qBAAoB,CAAGb,kBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA/C,CAEA,GAAM+C,cAAa,CAAG7B,kBAAkB,CAACnJ,mEAAgB,CAACC,OAAlB,CAAxC,CAEA;AACA,GAAMiL,iBAAgB,CAAG9E,KAAK,CAACC,OAAN,CAAc2E,aAAd,EAA+BA,aAA/B,CAA+C,CAACA,aAAD,CAAxE,CAEA,GAAMT,OAAM,CAAGnD,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACnCC,kBADmC,CACbD,KAAK,CAACR,UADO,CACnCS,iBADmC,CAE3C,MAAO5E,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CACxD,GAAME,cAAa,CAAG3H,kEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC9D,GAAII,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAIE,MAAJ,CACA,GAAMkD,eAAc,CAAGhD,iBAAiB,CAACJ,SAAD,CAAxC,CACA,GAAMqD,eAAc,CAAGpC,kBAAkB,CAACjB,SAAD,CAAzC,CACA,GAAI,MAAOqD,eAAP,GAA0B,QAA9B,CAAwC,CACtCnD,KAAK,CAAGkD,cAAc,CAACC,cAAc,CAACJ,YAAD,CAAf,CAAtB,CACD,CAFD,IAEO,IAAI,MAAOI,eAAP,GAA0B,QAA9B,CAAwC,CAC7CnD,KAAK,CAAGkD,cAAc,CAACC,cAAD,CAAtB,CACD,CAFM,IAEA,CACLC,OAAO,CAACC,KAAR,kCAAwCvD,SAAxC,wCACD,CACD,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CAfiC,CAAD,CAAjC,CAgBA,MAAO,CAACU,YAAD,CAAeE,aAAf,CAAP,CACD,CAlBkB,CAAD,CAAlB,CAmBD,CArBgC,CAqB9BX,sDArB8B,CAAjC,CAuBA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CAC/E,GAAMO,eAAc,CAAGhI,kEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC/D,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAI4C,WAAJ,CACA,GAAMS,eAAc,CAAGpC,kBAAkB,CAACjB,SAAD,CAAzC,CACA,GAAI,MAAOqD,eAAP,GAA0B,QAA9B,CAAwC,CACtCT,UAAU,CAAG,oBAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CACzCC,SAAS,CAATA,SADyC,CAEzCC,KAAK,CAAEoD,cAAc,CAACJ,YAAD,CAFoB,CAGzC/C,KAAK,CAALA,KAHyC,CAAD,CAAxB,EAAlB,CAKD,CAND,IAMO,IAAI,MAAOmD,eAAP,GAA0B,QAA9B,CAAwC,CAC7CT,UAAU,CAAG,oBAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CACzCC,SAAS,CAATA,SADyC,CAEzCC,KAAK,CAAEoD,cAFkC,CAGzCnD,KAAK,CAALA,KAHyC,CAAD,CAAxB,EAAlB,CAKD,CANM,IAMA,CACLoD,OAAO,CAACC,KAAR,kCAAwCvD,SAAxC,wCACD,CACD,MAAO,CAAC2C,UAAD,CAAaC,UAAb,CAAP,CACD,CApBkC,CAAD,CAAlC,CAqBA,MAAO,CAACK,YAAD,CAAeO,cAAf,CAAP,CACF;AACC,CAxByC,CAAD,CAAjB,EAAD,CAwBlB,CAACpB,UAAD,CAAanB,kBAAb,CAxBkB,CAAvB,CA0BA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED,GAAMgB,iCAAgC,CAAG,CACvCC,iBAAiB,CAAE,CAAC,uBAAD,CAA0B,2BAA1B,CADoB,CAAzC,CAIA;;;;;;;GAQA,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAwB,CAAC1C,kBAAD,CAAwB,CACpD,GAAM2C,sBAAqB,CAAG,EAA9B,CACA9H,MAAM,CAAC+H,IAAP,CAAY5C,kBAAZ,EAAgC7D,OAAhC,CAAwC,SAACxB,GAAD,CAAS,CAC/C,GAAMkI,qBAAoB,CAAGL,gCAAgC,CAAC7H,GAAD,CAAhC,EAAyC,EAAtE,CACAkI,oBAAoB,CAAC1G,OAArB,CAA6B,SAAC2G,gBAAD,CAAsB,CACjDH,qBAAqB,CAACG,gBAAgB,EAAInI,GAArB,CAArB,CAAiDqF,kBAAkB,CAACrF,GAAD,CAAnE,CACD,CAFD,EAGD,CALD,EAMA,MAAOgI,sBAAP,CACD,CATD,CAWA,GAAMI,cAAa,CAAG,QAAhBA,cAAgB,CAAA5B,UAAU,QAAIA,WAAU,CAC3CE,GADiC,CAC7B,SAAAtC,SAAS,QAAIyD,iCAAgC,CAACzD,SAAD,CAApC,EADoB,EAC6BS,MAD7B,CACoCwD,OADpC,EAC6CC,IAD7C,EAAJ,EAAhC,CAGA;;;;;;;;;;;;;;;GAgBO,QAASC,yBAAT,CAAkC/B,UAAlC,CAA8CnB,kBAA9C,CAAkE,CACvE,GAAMlB,qBAAoB,CAAGR,iBAAiB,CAAC,SAAAY,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA9C,CACA,GAAMqE,yBAAwB,CAAGT,qBAAqB,CAAC1C,kBAAD,CAAtD,CACA,GAAMoD,iBAAgB,CAAGL,aAAa,CAAC5B,UAAD,CAAtC,CACA,GAAMC,OAAM,CAAG9C,iBAAiB,CAAC,SAACY,KAAD,CAAW,IAClCkB,eADkC,CACflB,KADe,CAClCkB,cADkC,CAE1C,MAAO7F,mEAAW,CAAC6I,gBAAgB,CAAC/B,GAAjB,CAAqB,SAACtC,SAAD,CAAe,CACrD,GAAIqB,cAAc,EAAIA,cAAc,CAACrB,SAAD,CAApC,CAAiD,CAC/C,GAAME,MAAK,CAAGmB,cAAc,CAACrB,SAAD,CAAd,CAA0BoE,wBAAwB,CAACpE,SAAD,CAAlD,CAAd,CACA,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CAT+B,CAS7BC,sDAT6B,CAAhC,CAUA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAAC6I,gBAAgB,CAAC/B,GAAjB,CAAqB,SAACtC,SAAD,CAAe,CAC5E,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAM4C,WAAU,CAAG,QAAbA,WAAa,CAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CAC/CC,SAAS,CAATA,SAD+C,CAE/CC,KAAK,CAAEmE,wBAAwB,CAACpE,SAAD,CAFgB,CAG/CE,KAAK,CAALA,KAH+C,CAAD,CAAxB,EAAxB,CAKA,MAAO,CAACyC,UAAD,CAAaC,UAAb,CAAP,CACF;AACC,CATyC,CAAD,CAAjB,EAAD,CASlB,CAACR,UAAD,CAAanB,kBAAb,CATkB,CAAvB,CAWA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED;;;;;GAMO,QAAS6B,WAAT,EAAsB,CAC3B,MAAOpF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACP,OAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS2E,UAAT,EAAqB,CAC1B,MAAOrF,mBAAkB,CAAC,SAAAiB,KAAK,iDAAIA,KAAK,CAACR,UAAV,4CAAI,kBAAkBa,MAAtB,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAASgE,mBAAT,EAA8B,CACnC,MAAOtF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACE,eAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAASoE,gBAAT,EAA2B,CAChC,MAAOvF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACQ,YAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS+D,cAAT,EAAyB,CAC9B,MAAOxF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACL,UAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS6E,iBAAT,CAA0BC,kBAA1B,CAA8C,CACnD,GAAMC,iBAAgB,CAAGC,oDAAM,CAACF,kBAAkB,CAACG,QAAnB,GAA8BlF,aAA/B,CAA/B,CACA,GAAMA,cAAa,CAAGgF,gBAAgB,CAACG,OAAvC,CACA,MAAOnF,cAAP,CACD,CAED;;;;;GAMO,QAASoF,kBAAT,EAA6B,CAClC,MAAO3D,cAAa,CAAC,SAAAnB,KAAK,QAAIA,MAAK,CAACoB,cAAV,EAAN,CAApB,CACD,CAED;;;;;GAMO,QAAS2D,qBAAT,EAAgC,CACrC,MAAO5D,cAAa,CAAC,SAAAnB,KAAK,QAAIA,MAAK,CAACqB,iBAAV,EAAN,CAApB,CACD,CAED;;;;;GAMO,QAAS2D,WAAT,EAAsB,CAC3B,MAAO1D,aAAY,CAAC,SAAAtB,KAAK,QAAIA,MAAK,CAACuB,OAAV,EAAN,CAAnB,CACD,CAED;;;;;GAMO,QAAS0D,cAAT,EAAyB,CAC9B,MAAO3D,aAAY,CAAC,SAAAtB,KAAK,QAAIA,MAAK,CAACwB,UAAV,EAAN,CAAnB,CACD,CAED;;;;;GAMO,QAAS0D,qBAAT,CAA8BtD,IAA9B,CAAoC,CACzC,MAAOH,iBAAgB,CAAC0D,yDAAW,CAAC,SAAAnF,KAAK,QAAIA,MAAK,CAAC0B,QAAN,CAAeE,IAAf,CAAJ,EAAN,CAAgC,CAACA,IAAD,CAAhC,CAAZ,CAAvB,CACD,CAED;;;;;GAMO,QAASwD,wBAAT,CAAiCxD,IAAjC,CAAuC,CAC5C,GAAMyD,eAAc,CAAGV,oDAAM,CAAClD,gBAAgB,CAACmD,QAAjB,GAA4BjD,oBAA7B,CAA7B,CACA,GAAMA,qBAAoB,CAAG,QAAvBA,qBAAuB,CAAAD,QAAQ,QAAI2D,eAAc,CAACR,OAAf,CAAuBjD,IAAvB,CAA6BF,QAA7B,CAAJ,EAArC,CACA,MAAOC,qBAAP,CACD,CAED;;;;GAKO,QAAS2D,cAAT,EAAyB,CAC9B,MAAOzD,iBAAgB,CAAC,SAAA7B,KAAK,QAAIA,MAAK,CAAC8B,WAAV,EAAN,CAAvB,CACD,CAED;;;;;GAMO,QAASyD,kBAAT,EAA6B,CAClC,MAAO1D,iBAAgB,CAAC,SAAA7B,KAAK,QAAIA,MAAK,CAAC+B,oBAAV,EAAN,CAAvB,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;0BClhBoC;AAErC;AACO,GAAMyD,UAAS,CAAG,IAAlB,CACP;AACO,GAAMC,kBAAiB,CAAG,IAA1B,CACA,GAAMC,YAAW,CAAG,CAApB,CACA,GAAMC,YAAW,CAAG,EAApB,CAEA,GAAMC,eAAc,CAAG,EAAvB,CACA,GAAMC,qBAAoB,CAAG,EAA7B,CACA,GAAMC,qBAAoB,CAAG,EAA7B,CACA,GAAMC,cAAa,CAAG,EAAtB,CACA,GAAMC,cAAa,CAAG,GAAtB,CACA,GAAMC,YAAW,CAAG,CAApB,CACA,GAAMC,aAAY,CAAG,EAArB,CACA,GAAMC,oBAAmB,CAAG,CACjCC,IAAI,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAD2B,CAEjCC,KAAK,CAAE,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAF0B,CAA5B,CAIA,GAAMC,iBAAgB,CAAG,oDAAzB,CAEA,GAAMC,6BAA4B,0PAEtCC,yDAAE,CAACC,kBAFmC,CAEdD,yDAAE,CAACE,OAFW,iOAGtCF,yDAAE,CAACG,kBAHmC,CAGdH,yDAAE,CAACE,OAHW,iOAKtCF,yDAAE,CAACI,cALmC,CAKlBJ,yDAAE,CAACK,aALe,iOAMtCL,yDAAE,CAACM,cANmC,CAMlBN,yDAAE,CAACK,aANe,wBAAlC,C;;;;;;ACtBP,iBAAiB,mBAAO,CAAC,GAAqB;;;;;;;;ACA9C;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;ACJA;AAAA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbmD;AAO5C,QAASE,sBAAT,CAA+BC,eAA/B,CAAgD,CACrD,MAAOrL,OAAM,CAACsL,OAAP,CAAeD,eAAf,EAAgC7E,GAAhC,CACL,yOAAE+E,MAAF,UAAUnH,KAAV,0BAAwBmH,MAAxB,cAAmCnH,KAAnC,GADK,EAELxC,IAFK,CAEA,IAFA,CAAP,CAGD,CAEM,QAAS4J,sBAAT,CAA+BC,KAA/B,CAAsCC,YAAtC,CAAoDC,gBAApD,CAAsEjG,iBAAtE,CAAyF,CAC9F,MAAO,CACLkG,gBAAgB,CAAEC,+DAAiB,CAACC,SAD/B,CAEL5J,IAAI,CAAEuJ,KAFD,CAGLM,QAAQ,CAAE,IAHL,CAILC,aAAa,CAAE,IAJV,CAKLC,OAAO,CAAE,IALJ,CAMLC,MAAM,CAAE,IANH,CAOLC,YAAY,CAAE,CAPT,CAQLC,OAAO,CAAE,iBAACC,IAAD,CAAU,CACjB;AACA;AACA,GAAI3G,iBAAJ,CAAuB,CACrBA,iBAAiB,GAClB,CACD,GAAI2G,IAAI,CAACC,MAAT,CAAiB,0NACYD,IAAI,CAACC,MADjB,IACRC,MADQ,iBACAC,QADA,uCAEUA,QAFV,CAEPC,OAFO,CAEPA,OAFO,4BAEG,EAFH,mBAGf,GAAIf,YAAJ,CAAkB,CAChBA,YAAY,CAACN,qBAAqB,CAACqB,OAAD,CAAtB,CAAZ,CACD,CACD,GAAId,gBAAJ,CAAsB,CACpBA,gBAAgB,CAACY,MAAD,CAAhB,CACD,CACF,CATD,IASO,IAAIZ,gBAAJ,CAAsB,CAC3B;AACAA,gBAAgB,CAAC,EAAD,CAAhB,CACD,CACF,CA3BI,CAAP,CA6BD,CAEM,GAAMe,mBAAkB,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAA3B,CACA,GAAMC,oBAAmB,CAAG,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAA5B,CAEA,QAASC,gBAAT,CAAyBC,KAAzB,CAAgC,CACrC,MAAOA,MAAK,GAAK,MAAV,CAAmBH,kBAAnB,CAAwCC,mBAA/C,CACD,CAED;AACO,GAAMG,QAAO,CAAG,CACrB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CADqB,CAErB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAFqB,CAGrB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAHqB,CAIrB,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CAJqB,CAKrB,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CALqB,CAMrB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CANqB,CAOrB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAPqB,CAQrB,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CARqB,CASrB,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CATqB,CAAhB,CAYA,GAAMC,eAAc,CAAG,CAC5B,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAD4B,CAE5B,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CAF4B,CAG5B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAH4B,CAI5B,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAJ4B,CAK5B,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAL4B,CAM5B,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAN4B,CAO5B,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAP4B,CAQ5B,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAR4B,CAAvB,CAWA,GAAMC,iBAAgB,CAAG,CAC9B,SAD8B,CAE9B,OAF8B,CAG9B,OAH8B,CAI9B,KAJ8B,CAK9B,KAL8B,CAM9B,MAN8B,CAO9B,QAP8B,CAQ9B,QAR8B,CAS9B,SAT8B,CAU9B,SAV8B,CAAzB,CAaA,GAAMC,mBAAkB,CAAG,CAAEC,MAAM,CAAE,IAAV,CAA3B,CAEA,QAASC,0BAAT,CAAmCC,aAAnC,CAAkD,CACvD,MAAO,UAAAC,OAAO,QAAI7F,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,2BAA+CC,OAA/C,EAAJ,EAAd,CACD,CAEM,QAASE,kCAAT,CAA2CH,aAA3C,CAA0D,CAC/D,MAAO,UAAAI,cAAc,QAAIhG,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,mCAAuDI,cAAvD,EAAJ,EAArB,CACD,CAEM,QAASC,8BAAT,CAAuCL,aAAvC,CAAsD,CAC3D,MAAO,UAAAM,SAAS,QAAIlG,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,+BAAmDM,SAAS,CAACnB,MAA7D,EAAJ,EAAhB,CACD,CAEM,QAASoB,8BAAT,CAAuCP,aAAvC,CAAsD,CAC3D,MAAO,UAAAM,SAAS,QAAIlG,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,+BAAmDM,SAAS,CAACE,MAA7D,EAAJ,EAAhB,CACD,CAEM,QAASC,+BAAT,CAAwCT,aAAxC,CAAuD,CAC5D,MAAO,UAAAM,SAAS,QAAIlG,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,gCAAoDM,SAApD,EAAJ,EAAhB,CACD,CAEM,QAASI,4BAAT,CAAqCV,aAArC,CAAoD,CACzD,MAAO,UAAArH,QAAQ,QAAIyB,QAAO,CAAC8F,IAAR,WAAgBF,aAAhB,6BAAiDrH,QAAjD,EAAJ,EAAf,CACD,CAEM,QAASgI,6BAAT,EAAwC,CAC7C,MAAO,WAAM,CAAE,CAAf,CACD,CAGD;;;;GAKO,QAASC,eAAT,CAAwBC,GAAxB,CAA6B,CAClC,GAAMC,UAAS,CAAG,GAAIC,YAAJ,CAAgBF,GAAG,CAACG,MAAJ,CAAWC,UAA3B,CAAlB,CACA,GAAMC,OAAM,CAAG,GAAIC,WAAJ,CAAeL,SAAf,CAAf,CACAI,MAAM,CAAC1K,GAAP,CAAWqK,GAAX,EACA,MAAOK,OAAP,CACD,CAEM,QAASE,wBAAT,CAAiCC,KAAjC,CAAwCC,MAAxC,CAAgD,CACrD,GAAIhN,EAAC,CAAG,CAAR,CACA,GAAI+M,KAAJ,CAAW,CACT;AACA,MAAOA,KAAK,CAACE,IAAN,CAAW,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAF,aAAcH,MAAd,SAAuBhN,CAAvB,CAAJ,EAAZ,CAAP,CAAoD,CAClD;AACAA,CAAC,GACF,CACF,CACD,gBAAUgN,MAAV,SAAmBhN,CAAnB,EACD,CAED;;;;;;GAOO,QAASoN,iBAAT,CAA0BC,aAA1B,CAAyCC,kBAAzC,CAA6DC,YAA7D,CAA2EC,mBAA3E,CAAgGC,qBAAhG,CAAuHC,eAAvH,CAAwIC,oBAAxI,CAAqL,IAAvBX,OAAuB,2DAAd,YAAc,CAC1L,GAAMY,gCAA+B,CAAG,eAAxC,CAEA,GAAMC,wBAAuB,CAAGP,kBAAH,SAAGA,kBAAH,iBAAGA,kBAAkB,CAAEQ,IAApB,CAAyBb,IAAzB,CAC9B,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAF,GAAWS,+BAAf,EAD6B,CAAhC,CAGA,GAAMG,uBAAsB,CAAG,CAC7BC,OAAO,CAAEC,4EAAoB,CAACC,0EAAD,CAApB,CAAyCC,aADrB,CAE7BC,QAAQ,CAAEF,0EAFmB,CAG7BJ,IAAI,CAAC,4MAAMR,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EAAtD,CAHyB,CAA/B,CAMA,GAAMO,SAAQ,CAAGvB,uBAAuB,CAACe,uBAAD,SAACA,uBAAD,iBAACA,uBAAuB,CAAES,QAA1B,CAAoCtB,MAApC,CAAxC,CACA,GAAIuB,WAAU,CAAG,CAAjB,CACA,GAAIV,uBAAJ,CAA6B,CAC3BU,UAAU,CAAGV,uBAAuB,CAACS,QAAxB,CAAiCjP,MAA9C,CACAwO,uBAAuB,CAACS,QAAxB,CAAiCrO,IAAjC,CAAsC,CACpCkN,IAAI,CAAEkB,QAD8B,CAEpCnM,GAAG,CAAEmL,aAAa,CAACvI,GAAd,CAAkB,SAAA0J,CAAC,QAAI,CAACA,CAAD,CAAI,IAAJ,CAAJ,EAAnB,CAF+B,CAAtC,EAID,CAND,IAMO,CACLT,sBAAsB,CAACD,IAAvB,CAA4B7N,IAA5B,CAAiC,CAC/BkN,IAAI,CAAES,+BADyB,CAE/BU,QAAQ,CAAE,CACR,CACEnB,IAAI,CAAEkB,QADR,CAEEnM,GAAG,CAAEmL,aAAa,CAACvI,GAAd,CAAkB,SAAA0J,CAAC,QAAI,CAACA,CAAD,CAAI,IAAJ,CAAJ,EAAnB,CAFP,CADQ,CAFqB,CAAjC,EASD,CACDf,qBAAqB,CAACM,sBAAD,CAArB,CACA,GAAMU,SAAQ,CAAG,CAAC,eAAD,CAAkBJ,QAAlB,CAAjB,CACAX,eAAe,uNACTH,YAAY,EAAI,EADP,GAEb,CACEmB,IAAI,CAAED,QADR,CAEEE,KAAK,CAAEvD,OAAO,CAACmD,UAAU,CAAGnD,OAAO,CAAC/L,MAAtB,CAFhB,CAFa,GAAf,CAOAmO,mBAAmB,CAAC,CAACiB,QAAD,CAAD,CAAnB,CACAd,oBAAoB,CAAC,kBAAD,CAApB,CACD,CAEM,QAASiB,cAAT,CAAuBC,QAAvB,CAAiCvB,kBAAjC,CAAqD,CAC1D,MAAO,CACLU,OAAO,CAAEC,4EAAoB,CAACC,0EAAD,CAApB,CAAyCC,aAD7C,CAELC,QAAQ,CAAEF,0EAFL,CAGLJ,IAAI,uNACEe,QAAQ,CAAGA,QAAQ,CAACf,IAAZ,CAAmB,EAD7B,8MAEER,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EAFjD,EAHC,CAAP,CAQD,CAEM,QAASgB,uBAAT,CAAgCC,KAAhC,CAAuC,CAC5C,MAAO,WAAM,IAETC,MAFS,CAIPD,KAJO,CAETC,KAFS,CAGTrD,OAHS,CAIPoD,KAJO,CAGTpD,OAHS,CAKX,mBACE,kEAAK,SAAS,CAAEsD,gEAAhB,eACE,qEAAKD,KAAL,CADF,cAEE,sEAAMrD,OAAN,CAFF,CADF,CAMD,CAXD,CAYD,CAEM,QAASuD,WAAT,CAAoB3L,SAApB,CAA+B,CACpC,MAAO,CACL4L,UAAU,CAAE,IADP,CAELC,OAAO,CAAE7L,SAFJ,CAAP,CAID,CAGM,QAAS8L,YAAT,CAAqBC,KAArB,CAA0C,IAAdC,SAAc,2DAAH,CAAG,CAC/C,GAAID,KAAK,GAAK,CAAd,CAAiB,MAAO,SAAP,CAEjB,GAAME,EAAC,CAAG,IAAV,CACA,GAAMC,GAAE,CAAGF,QAAQ,CAAG,CAAX,CAAe,CAAf,CAAmBA,QAA9B,CACA,GAAMG,MAAK,CAAG,CAAC,OAAD,CAAU,IAAV,CAAgB,IAAhB,CAAsB,IAAtB,CAAd,CAEA,GAAM1P,EAAC,CAAG2P,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAASP,KAAT,EAAkBK,IAAI,CAACE,GAAL,CAASL,CAAT,CAA7B,CAAV,CAEA;AACA,gBAAUM,UAAU,CAAC,CAACR,KAAK,CAAGK,IAAI,CAACI,GAAL,CAASP,CAAT,CAAYxP,CAAZ,CAAT,EAAyBgQ,OAAzB,CAAiCP,EAAjC,CAAD,CAApB,aAA8DC,KAAK,CAAC1P,CAAD,CAAnE,EACD,CAEM,GAAMiQ,sBAAqB,CAAG,QAAxBA,sBAAwB,CAAC3P,MAAD,CAAS4P,UAAT,CAAwB,wBACjC5P,MAAM,CAAC4P,UAAD,CAD2B,CACnDrP,KADmD,oBACnDA,KADmD,CAC5CE,MAD4C,oBAC5CA,MAD4C,CAE3D,GAAMoP,OAAM,CAAGtP,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAApB,CACA,GAAMmP,MAAK,CAAGvP,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAnB,CACA,GAAMoP,MAAK,CAAGxP,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAnB,CACA;AACA,GAAMqP,iBAAgB,CAAGX,IAAI,CAACY,GAAL,CAAS,CAAT,CAAYF,KAAK,EAAIH,UAArB,CAAzB,CACA;AACA,GAAMM,WAAU,CAAG,EAAIL,MAAJ,CAAaC,KAAb,CAAqBE,gBAAxC,CACA,MAAO,CACLH,MAAM,CAANA,MADK,CACGC,KAAK,CAALA,KADH,CACUE,gBAAgB,CAAhBA,gBADV,CAC4BE,UAAU,CAAVA,UAD5B,CAAP,CAGD,CAZM,CAcA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAACnQ,MAAD,CAAS4P,UAAT,CAAwB,8FAGnDD,qBAAqB,CACvB3P,MADuB,CAEvB4P,UAFuB,CAH8B,CAErDM,UAFqD,uBAErDA,UAFqD,CAEzCL,MAFyC,uBAEzCA,MAFyC,CAEjCC,KAFiC,uBAEjCA,KAFiC,CAE1BE,gBAF0B,uBAE1BA,gBAF0B,CAOvD,GAAMI,YAAW,CAAG,sBAAAC,MAAM,CAACC,WAAP,kEAAoBC,MAApB,GACf,uBAAAF,MAAM,CAACC,WAAP,2FAAoBC,MAApB,sEAA4BC,eAA5B,EAA8C,CADnD,CAEA,GAAMC,QAAO,CAAGL,WAAW,EAAI,SAAC,CAAD,CAAM,EAAN,EAAY,CAA3C,CACA;AACA,MACEF,WAAU,CAAGO,OAAb,EACGZ,MAAM,EAAI,IADb,EAEGG,gBAAgB,EAAI,IAFvB,EAGGF,KAAK,EAAI,IAHZ,EAIGE,gBAAgB,CAAG,CALxB,CAOD,CAlBM,C;;;;;;;;;;;;ACjQQ;AACf;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA,GAAG;AACH;AACA;AACA,C;;ACXe;AACf;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,C;;;;;ACd+C;AACa;AAC7C;AACf,eAAe,OAAO;AACtB;AACA;;AAEA,SAAS,gDAAqB;AAC9B,C;;ACRA;AAA8C;AACoB;AACE;AACrD;AACf;AACA,gBAAgB,yCAAc;AAC9B;;AAEA,QAAQ,yBAAwB;AAChC,sBAAsB,yCAAc;AACpC;AACA,KAAK;AACL;AACA;;AAEA,WAAW,0BAAyB;AACpC;AACA,C;;;;;;;;;ACjBe;AACf;AACA;AACA;AACA;;AAEA;AACA,C;;ACPA;AAA8C;AAC/B;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,eAAc;AAChC,C;;;;;;ACdA,+C;;;;;;ACAA,2C;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;;;;ACOA,QAASU,oBAAT,EAA+B,aACsBL,MADtB,CACTP,KADS,SACrBa,UADqB,CACWd,MADX,SACFe,WADE,CAE7B,MAAO,CACLd,KAAK,CAALA,KADK,CAELD,MAAM,CAANA,MAFK,CAAP,CAID,CAEM,QAASgB,qBAAT,CAA8BC,GAA9B,CAAmC,CACxC,MAAOtJ,0DAAW,CAAC,UAAM,CACvB,GAAIsJ,GAAG,CAAC5J,OAAR,CAAiB,CACf,MAAO4J,IAAG,CAAC5J,OAAJ,CAAY6J,OAAZ,YAAwBC,sEAAxB,EAAP,CACD,CACD,MAAO,KAAP,CACD,CALiB,CAKf,CAACF,GAAD,CALe,CAAlB,CAMD,CAED;;;;GAKO,QAASG,oBAAT,EAA+B,eACYC,sDAAQ,CACtDR,mBAAmB,EADmC,CADpB,iOAC7BS,gBAD6B,eACXC,mBADW,eAKpCC,uDAAS,CAAC,UAAM,CACd,QAASC,aAAT,EAAwB,CACtBF,mBAAmB,CAACV,mBAAmB,EAApB,CAAnB,CACD,CACD,GAAMa,kBAAiB,CAAGC,sDAAQ,CAACF,YAAD,CAAe,GAAf,CAAoB,CAAEG,QAAQ,CAAE,IAAZ,CAApB,CAAlC,CAEApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACA,MAAO,kBAAMlB,OAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,CAAN,EAAP,CACD,CARQ,CAQN,EARM,CAAT,CAUA,MAAOJ,iBAAP,CACD,CAED;;;;GAKO,QAASS,gBAAT,EAA2B,CAChC,GAAMC,aAAY,CAAG7K,oDAAM,EAA3B,CADgC,eAGJkK,sDAAQ,EAHJ,kOAGzBrB,MAHyB,eAGjBiC,SAHiB,8BAINZ,sDAAQ,EAJF,kOAIzBpB,KAJyB,eAIlBiC,QAJkB,eAMhC,GAAM5N,YAAW,CAAGwD,8EAAa,EAAjC,CACA,GAAMvD,qBAAoB,CAAGwD,kFAAiB,EAA9C,CAEA;AACAyJ,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxB5N,oBAAoB,GACrB,CACD,GAAMmN,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAVQ,CAUN,CAACnN,oBAAD,CAVM,CAAT,CAYA;AACA;AACAiN,uDAAS,CAAC,UAAM,CACd,GAAI,CAACQ,YAAY,CAAC3K,OAAlB,CAA2B,OAC3B,GAAM+K,UAAS,CAAGJ,YAAY,CAAC3K,OAA/B,CACA,GAAMgL,cAAa,CAAGD,SAAS,CAACE,qBAAV,EAAtB,CACAL,SAAS,CAACI,aAAa,CAACrC,MAAf,CAAT,CACAkC,QAAQ,CAACG,aAAa,CAACpC,KAAf,CAAR,CACD,CANQ,CAMN,CAAC3L,WAAD,CANM,CAAT,CAQA,MAAO,CAAC2L,KAAD,CAAQD,MAAR,CAAgBgC,YAAhB,CAAP,CACD,CAED;;;;;GAMO,QAASO,kBAAT,EAA6B,CAClC,GAAMC,QAAO,CAAGrL,oDAAM,EAAtB,CADkC,eAGNkK,sDAAQ,EAHF,kOAG3BrB,MAH2B,eAGnBiC,SAHmB,8BAIRZ,sDAAQ,EAJA,mOAI3BpB,KAJ2B,gBAIpBiC,QAJoB,gBAMlC,GAAM5N,YAAW,CAAGwD,8EAAa,EAAjC,CACA,GAAMvD,qBAAoB,CAAGwD,kFAAiB,EAA9C,CAEA;AACAyJ,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxB5N,oBAAoB,GACrB,CACD,GAAMmN,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAVQ,CAUN,CAACnN,oBAAD,CAVM,CAAT,CAYA;AACA;AACAiN,uDAAS,CAAC,UAAM,CACd,GAAI,CAACgB,OAAO,CAACnL,OAAb,CAAsB,OADR,GAENoL,OAFM,CAEKD,OAAO,CAACnL,OAAR,CAAgBqL,IAFrB,CAEND,MAFM,CAGd,GAAME,WAAU,CAAGF,MAAM,CAACH,qBAAP,EAAnB,CACAL,SAAS,CAACU,UAAU,CAAC3C,MAAZ,CAAT,CACAkC,QAAQ,CAACS,UAAU,CAAC1C,KAAZ,CAAR,CACD,CANQ,CAMN,CAAC3L,WAAD,CANM,CAAT,CAQA,MAAO,CAAC2L,KAAD,CAAQD,MAAR,CAAgBwC,OAAhB,CAAP,CACD,CAED;;;;;;;;;;;;;;GAeO,QAASI,SAAT,CAAkBC,cAAlB,CAAkC,CACvC,GAAMC,MAAK,CAAGD,cAAd,CADuC,gBAETxB,sDAAQ,CAACyB,KAAD,CAFC,oOAEhCC,OAFgC,gBAEvBC,UAFuB,gBAIvC,GAAMC,eAAc,CAAGtL,yDAAW,CAAC,SAACuL,SAAD,CAAe,CAChDF,UAAU,CAAC,SAACG,YAAD,CAAkB,CAC3B,GAAMC,iBAAgB,CAAGD,YAAY,CAACrQ,MAAb,CAAoB,SAAAuQ,IAAI,QAAIA,KAAI,GAAKH,SAAb,EAAxB,CAAzB,CACA;AACAvN,OAAO,CAAC+J,GAAR,mBAAuBwD,SAAvB,yBAAgDE,gBAAgB,CAAClU,MAAjE,cAA4EoU,IAAI,CAACC,SAAL,CAAeH,gBAAf,CAA5E,GACA,MAAOA,iBAAP,CACD,CALS,CAAV,CAMD,CAPiC,CAO/B,CAACJ,UAAD,CAP+B,CAAlC,CASA,GAAMQ,kBAAiB,CAAG7L,yDAAW,CAAC,SAAC8L,YAAD,CAAkB,CACtDT,UAAU,CAAC,SAACG,YAAD,CAAkB,CAC3B,GAAMC,iBAAgB,uNAAOD,YAAP,GAAqBM,YAArB,EAAtB,CACA;AACA9N,OAAO,CAAC+J,GAAR,sBAA0B0D,gBAAgB,CAAClU,MAA3C,cAAsDoU,IAAI,CAACC,SAAL,CAAeH,gBAAf,CAAtD,GACA,MAAOA,iBAAP,CACD,CALS,CAAV,CAMD,CAPoC,CAOlC,CAACJ,UAAD,CAPkC,CAArC,CASA,GAAMU,gBAAe,CAAG/L,yDAAW,CAAC,UAAM,CACxCqL,UAAU,CAACF,KAAD,CAAV,CACA;AACAnN,OAAO,CAAC+J,GAAR,sBAA0BoD,KAAK,CAAC5T,MAAhC,cAA2CoU,IAAI,CAACC,SAAL,CAAeT,KAAf,CAA3C,GACD,CAJkC,CAIhC,CAACE,UAAD,CAAaF,KAAb,CAJgC,CAAnC,CAMA,GAAMa,QAAO,CAAGZ,OAAO,CAAC7T,MAAR,GAAmB,CAAnC,CAEA,MAAO,CAACyU,OAAD,CAAUV,cAAV,CAA0BO,iBAA1B,CAA6CE,eAA7C,CAAP,CACD,CAED;;;;;;;;GASO,QAASE,QAAT,EAAmB,iBACAvC,sDAAQ,CAAC,EAAD,CADR,oOACjBwC,IADiB,gBACXC,OADW,gBAGxB,GAAMC,OAAM,CAAGpM,yDAAW,CAAC,SAACqM,GAAD,CAAMhH,IAAN,CAAe,CACxC,GAAIgH,GAAJ,CAAS,CACPF,OAAO,CAAC,SAAAG,IAAI,8NAASA,IAAT,GAAe,CAAED,GAAG,CAAHA,GAAF,CAAOhH,IAAI,CAAJA,IAAP,CAAf,IAAL,CAAP,CACD,CACF,CAJyB,CAIvB,CAAC8G,OAAD,CAJuB,CAA1B,CAMA,GAAMI,UAAS,CAAGvM,yDAAW,CAAC,UAAM,CAClCmM,OAAO,CAAC,EAAD,CAAP,CACD,CAF4B,CAE1B,CAACA,OAAD,CAF0B,CAA7B,CAIA,MAAO,CAACD,IAAD,CAAOE,MAAP,CAAeG,SAAf,CAAP,CACD,CAED;;;;;;GAOO,QAASC,gCAAT,CAAyClD,GAAzC,CAA8C,iBACvBI,sDAAQ,EADe,oOAC5CrB,MAD4C,gBACpCiC,SADoC,gCAEzBZ,sDAAQ,EAFiB,oOAE5CpB,KAF4C,gBAErCiC,QAFqC,gBAInDV,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxB,GAAIlB,GAAG,CAAC5J,OAAR,CAAiB,0BAGX4J,GAAG,CAAC5J,OAAJ,CAAY6J,OAAZ,CAAoB,qBAApB,CAHW,CAECkD,eAFD,sBAEbC,YAFa,CAE+BC,cAF/B,sBAEkBC,WAFlB,CAIfrC,QAAQ,CAACoC,cAAD,CAAR,CACArC,SAAS,CAACmC,eAAD,CAAT,CACD,CACF,CACD,GAAM1C,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAhBQ,CAgBN,CAACT,GAAD,CAhBM,CAAT,CAkBA,MAAO,CAAChB,KAAD,CAAQD,MAAR,CAAP,CACD,CAEM,QAASwE,yBAAT,MAA6D,IAAzBC,MAAyB,MAAzBA,KAAyB,CAAlBC,cAAkB,MAAlBA,cAAkB,CAClE;AACA,GAAMC,UAAS,CAAG5P,qDAAO,CAAC,UAAM,CAC9B,GAAM6P,OAAM,CAAG,EAAf,CACA,GAAIH,KAAK,EAAIA,KAAK,CAACI,IAAnB,CAAyB,CACvB;AACA,IAAK,GAAIhV,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG4U,KAAK,CAACI,IAAN,CAAW3V,MAA/B,CAAuCW,CAAC,EAAxC,CAA4C,CAC1C+U,MAAM,CAACH,KAAK,CAACI,IAAN,CAAWhV,CAAX,CAAD,CAAN,CAAwBA,CAAxB,CACD,CACF,CACD,MAAO+U,OAAP,CACD,CATwB,CAStB,CAACH,KAAD,CATsB,CAAzB,CAWA;AACA;AACA,GAAMK,mBAAkB,CAAGnN,yDAAW,CAAC,SAACoN,KAAD,CAAW,CAChD,GAAMrK,OAAM,CAAGqK,KAAK,CAAC,CAAD,CAApB,CACA,GAAIJ,SAAS,EAAID,cAAb,EAA+BA,cAAc,CAAC,CAAD,CAAjD,CAAsD,CACpD,GAAMM,UAAS,CAAGL,SAAS,CAACjK,MAAD,CAA3B,CACA,GAAMxM,IAAG,CAAGwW,cAAc,CAAC,CAAD,CAAd,CAAkBM,SAAlB,CAAZ,CACA,MAAO9W,IAAP,CACD,CACD,MAAO,EAAP,CACD,CARqC,CAQnC,CAACyW,SAAD,CAAYD,cAAZ,CARmC,CAAtC,CASA,MAAOI,mBAAP,CACD,C;;;;;;AClQD,qD;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,GAAMG,oBAAmB,CAAG,MAA5B,CACA,GAAMC,eAAc,CAAG,kBAAvB,CAEA,GAAMC,uBAAsB,CAAG,KAA/B,CACA,GAAMC,kBAAiB,CAAG,UAA1B,CACA,GAAMC,kBAAiB,CAAG,GAA1B,CACP;AACA;AACO,GAAMC,iBAAgB,CAAG,IAAzB,CAEA,GAAMvH,mBAAkB,CAAG,MAA3B,CACA,GAAMD,qBAAoB,CAAG,CAClCyH,IAAI,CAAE,CACJvH,aAAa,CAAE,OADX,CAEJwH,MAAM,CAAEC,2DAFJ,CAD4B,CAA7B,CAOA,GAAMC,gBAAe,CAAG,CAC7BH,IAAI,CAAE,CACJC,MAAM,CAAEG,mEADJ,CADuB,CAAxB,C;;;;;;;ACrBP;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;GChCqBC,4C,sMACnB,+BAAYC,WAAZ,CAAyBC,eAAzB,CAA0CC,UAA1C,CAAsDC,MAAtD,CAA8D,iFAC5D,wDAAgCH,WAAhC,OACA,MAAK7I,IAAL,CAAY,uBAAZ,CAEA,MAAK6I,WAAL,CAAmBA,WAAnB,CACA,MAAKC,eAAL,CAAuBA,eAAvB,CACA,MAAKC,UAAL,CAAkBA,UAAlB,CACA,MAAKC,MAAL,CAAcA,MAAd,CAP4D,aAQ7D,C,iHAEe,IAEZH,YAFY,CAGV,IAHU,CAEZA,WAFY,CAECE,UAFD,CAGV,IAHU,CAECA,UAFD,CAEaC,MAFb,CAGV,IAHU,CAEaA,MAFb,CAIdrQ,OAAO,CAAC8F,IAAR,WACKoK,WADL,kBACyBE,UADzB,wBAEEzC,IAAI,CAACC,SAAL,CAAeyC,MAAf,CAAuB,IAAvB,CAA6B,CAA7B,CAFF,EAID,C,mCAnBgDC,sC;;GCA9BC,wC,kMACnB,6BAAYL,WAAZ,CAAyBC,eAAzB,CAA0CC,UAA1C,CAAsD,+EACpD,0DAAkCF,WAAlC,OACA,MAAK7I,IAAL,CAAY,qBAAZ,CAEA,MAAK6I,WAAL,CAAmBA,WAAnB,CACA,MAAKC,eAAL,CAAuBA,eAAvB,CACA,MAAKC,UAAL,CAAkBA,UAAlB,CANoD,aAOrD,C,+GAEe,IAEZF,YAFY,CAGV,IAHU,CAEZA,WAFY,CAECC,eAFD,CAGV,IAHU,CAECA,eAFD,CAEkBC,UAFlB,CAGV,IAHU,CAEkBA,UAFlB,CAId,GAAID,eAAe,EAAIC,UAAvB,CAAmC,CACjCpQ,OAAO,CAAC8F,IAAR,WACKoK,WADL,kBACyBE,UADzB,iDAC2ED,eAD3E,GAGD,CAJD,IAIO,CACLnQ,OAAO,CAAC8F,IAAR,WACKoK,WADL,6BAGD,CACF,C,iCAvB8CI,sC;;GCA5BE,0C,oMACnB,8BAAYC,UAAZ,CAAwB,gFACtB,2DAAmCA,UAAnC,yEACA,MAAKpJ,IAAL,CAAY,sBAAZ,CAEA,MAAKoJ,UAAL,CAAkBA,UAAlB,CAJsB,aAKvB,C,gHAEe,IAEZA,WAFY,CAGV,IAHU,CAEZA,UAFY,CAId,GAAIA,UAAJ,CAAgB,CACdzQ,OAAO,CAAC8F,IAAR,sCACgC2K,UADhC,GAGD,CAJD,IAIO,CACLzQ,OAAO,CAAC8F,IAAR,CAAa,2BAAb,EACD,CACF,C,kCAnB+CwK,sC;;ACFlD;AAAA;AAAA;AAAA;;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;ACGA;;;;;GAMO,QAASI,mBAAT,CAA4BC,KAA5B,CAAmCrY,GAAnC,CAAwCsY,QAAxC,CAAkD,CACvD,GAAID,KAAK,CAACrY,GAAN,GAAcA,GAAlB,CAAuB,CACrBqY,KAAK,CAACE,cAAN,GACAD,QAAQ,GACT,CACF,CAED;;;;GAKO,QAASE,mBAAT,CAA4BC,QAA5B,CAAsC,CAC3C,MAAOC,kDAAS,CAAC,CAAEnX,CAAC,CAAEkX,QAAQ,CAAC,CAAD,CAAb,CAAkBE,CAAC,CAAEF,QAAQ,CAAC,CAAD,CAA7B,CAAkCG,CAAC,CAAEH,QAAQ,CAAC,CAAD,CAA7C,CAAD,CAAT,CAA8DI,WAA9D,EAAP,CACD,CAED;;;;GAKO,QAASC,mBAAT,CAA4BC,WAA5B,CAAyC,CAC9C,GAAMC,SAAQ,CAAGN,iDAAS,CAACK,WAAD,CAAT,CAAuBE,KAAvB,EAAjB,CACA,MAAO,CAACD,QAAQ,CAACzX,CAAV,CAAayX,QAAQ,CAACL,CAAtB,CAAyBK,QAAQ,CAACJ,CAAlC,CAAP,CACD,CAED;;;;GAKO,QAASM,oBAAT,CAA6BtX,CAA7B,CAAgC,CACrC,GAAIA,CAAC,GAAK,CAAV,CAAa,MAAO,oBAAP,CACb,GAAIA,CAAC,EAAI,CAAT,CAAY,CACV,GAAMuX,KAAI,CAAG,QAAPA,KAAO,CAAAC,CAAC,QAAK,MAAMC,MAAN,CAAaD,CAAb,CAAL,EAAd,CACA,yBAAmBD,IAAI,CAACvX,CAAC,CAAG,CAAL,CAAvB,YACD,CACD,uCAAiCA,CAAjC,EACD,CAEM,QAAS0X,gBAAT,CAAyBC,UAAzB,CAAqCC,QAArC,CAA+C,CACpD,GAAID,UAAU,CAACtY,MAAX,EAAqBuY,QAAQ,CAACvY,MAAlC,CAA0C,CACxC,MAAOwY,sDAAO,CAACF,UAAD,CAAaC,QAAQ,CAAC5Y,KAAT,CAAe,CAAf,CAAkB2Y,UAAU,CAACtY,MAA7B,CAAb,CAAd,CACD,CACD,MAAO,MAAP,CACD,CAEM,QAASyY,cAAT,CAAuBH,UAAvB,CAAmCC,QAAnC,CAA6CG,cAA7C,CAA6D,CAClE,GAAIL,eAAe,CAACC,UAAD,CAAaC,QAAb,CAAnB,CAA2C,CACzC,4NAAWG,cAAX,8MAA8BH,QAAQ,CAAC5Y,KAAT,CAAe+Y,cAAc,CAAC1Y,MAA9B,CAA9B,GACD,CACD,MAAOuY,SAAP,CACD,CAEM,GAAMI,SAAQ,CAAG,KAAjB,CAEA,QAASC,UAAT,CAAmBvJ,IAAnB,CAAyB,CAC9B,MAAOA,KAAI,CAACxO,IAAL,CAAU8X,QAAV,CAAP,CACD,C;;;;;;ACnED,wD;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACgBA;;;;GAKA,QAASpM,KAAT,CAAc7F,KAAd,CAAqB5B,UAArB,CAAiC,CAC/BA,UAAU,CAAC4B,KAAK,CAAC4F,OAAP,CAAV,CACA7F,OAAO,CAAC8F,IAAR,CAAa7F,KAAK,CAAC4F,OAAnB,EACA,GAAI5F,KAAK,WAAYqQ,kFAArB,CAA0C,CACxCrQ,KAAK,CAACmS,aAAN,GACD,CACF,CAED;;;;;;;;;;GAWA,QAASC,sBAAT,CAA+BtT,MAA/B,CAAuCI,OAAvC,CAAgDmT,aAAhD,CAA+D,CAC7D,GAAI,CAACvT,MAAD,EAAW,CAACI,OAAhB,CAAyB,CACvB,OACD,CACD,GAAMoT,0BAAyB,CAAGC,yFAA4B,EAA9D,CACAha,MAAM,CAACsL,OAAP,CAAe/E,MAAf,EAAuBjF,OAAvB,CAA+B,cAA+B,2NAA7B2G,gBAA6B,UAAX7D,KAAW,UAC5D,GAAMyC,WAAU,cAASvG,iEAAU,CAAC2H,gBAAD,CAAnB,CAAhB,CACA,GAAMnB,WAAU,CAAGH,OAAO,CAACE,UAAD,CAA1B,CACA,GAAMoT,aAAY,CAAGH,aAAa,EAAIA,aAAa,CAAC7R,gBAAD,CAAnD,CACA,GAAMiS,WAAU,CAAGC,sDAAK,CAACF,YAAD,CAAeF,yBAAyB,CAAC9R,gBAAD,CAAxC,CAAxB,CACA,GAAIiS,UAAU,EAAIpT,UAAlB,CAA8B,CAC5BA,UAAU,CAAC1C,KAAD,CAAV,CACD,CACF,CARD,EASD,CAED;;;;;;;;GASO,QAASgW,eAAT,CAAwBtW,OAAxB,CAAiCuW,OAAjC,CAA0C,eACTnH,sDAAQ,EADC,iOACxCoH,WADwC,eAC3BC,cAD2B,eAG/ClH,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBC,WAArB,CAAkC,CAChCC,cAAc,CAACzW,OAAO,CAACuW,OAAD,CAAP,CAAiBC,WAAlB,CAAd,CACD,CAFD,IAEO,CACLC,cAAc,CAAC,IAAD,CAAd,CACD,CACH;AACC,CAXQ,CAWN,CAACzW,OAAD,CAAUuW,OAAV,CAXM,CAAT,CAaA,MAAO,CAACC,WAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;GAyBO,QAASE,aAAT,CACL1W,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBAC0BzH,sDAAQ,CAAC,EAAD,CADlC,kOACOzH,KADP,eACcmP,QADd,8BAEoC1H,sDAAQ,CAAC,CAAD,CAF5C,kOAEO2H,UAFP,eAEmBC,aAFnB,eAIA,GAAMjV,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB2H,KAA7B,CAAoC,CAClC3H,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB2H,KAAzB,CAA+BsP,IAA/B,GAAsCC,KAAtC,CAA4C,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAA7C,EAAsEqV,IAAtE,CAA2E,SAACC,OAAD,CAAa,CACtF,GAAI,CAACA,OAAL,CAAc,OADwE,GAE9EjZ,KAF8E,CAE5CiZ,OAF4C,CAE9EjZ,IAF8E,CAExE2T,GAFwE,CAE5CsF,OAF4C,CAExEtF,GAFwE,CAEnEuF,kBAFmE,CAE5CD,OAF4C,CAEnEC,kBAFmE,CAGtFR,QAAQ,CAAC1Y,IAAD,CAAR,CACA4Y,aAAa,CAAC9a,MAAM,CAAC+H,IAAP,CAAY7F,IAAZ,EAAkBnB,MAAnB,CAAb,CACA6U,MAAM,CAACC,GAAD,CAAM,OAAN,CAAN,CACA;AACA;AACA;AACA,GAAMwF,4BAA2B,0MAC/BC,wBAAwB,CAAEC,8EADK,EAE5BH,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAEEC,yBAFF,CAArB,CAIA7F,cAAc,CAAC,OAAD,CAAd,CACD,CAlBD,EAmBD,CApBD,IAoBO,CACL8F,QAAQ,CAAC,EAAD,CAAR,CACAE,aAAa,CAAC,CAAD,CAAb,CACA,GAAIL,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,OAAjC,CAA0C,IAA1C,CAAgD,IAAhD,CAAD,CAAwDxU,UAAxD,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,OAAD,CAAd,CACD,CACF,CACH;AACC,CAnCQ,CAmCN,CAAChR,OAAD,CAAUuW,OAAV,CAnCM,CAAT,CAqCA,MAAO,CAAC5O,KAAD,CAAQoP,UAAR,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;GAuBO,QAASW,gBAAT,CACL1X,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBACgCzH,sDAAQ,EADxC,kOACO3C,QADP,eACiBkL,WADjB,eAGA,GAAM5V,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,WAAzB,CAAJ,CAA2C,CACzC;AACAA,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,WAAzB,EAAsCiX,IAAtC,GAA6CC,KAA7C,CAAmD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAApD,EAA6EqV,IAA7E,CAAkF,SAACC,OAAD,CAAa,CAC7F,GAAI,CAACA,OAAL,CAAc,OAD+E,GAErFjZ,KAFqF,CAEnDiZ,OAFmD,CAErFjZ,IAFqF,CAE/E2T,GAF+E,CAEnDsF,OAFmD,CAE/EtF,GAF+E,CAE1EuF,kBAF0E,CAEnDD,OAFmD,CAE1EC,kBAF0E,CAG7FK,WAAW,CAACvZ,IAAD,CAAX,CACA0T,MAAM,CAACC,GAAD,CAAM,WAAN,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,WAAD,CAAd,CACD,CAXD,EAYD,CAdD,IAcO,CACL2G,WAAW,CAAC,IAAD,CAAX,CACA,GAAIhB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,WAAjC,CAA8C,IAA9C,CAAoD,IAApD,CAAD,CAA4DxU,UAA5D,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,WAAD,CAAd,CACD,CACF,CACH;AACC,CA5BQ,CA4BN,CAAChR,OAAD,CAAUuW,OAAV,CA5BM,CAAT,CA8BA,MAAO,CAAC9J,QAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BO,QAASmL,wBAAT,CACL5X,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBACgDzH,sDAAQ,EADxD,mOACOyI,gBADP,gBACyBC,mBADzB,gBAGA,GAAM/V,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,CAAJ,CAAmD,CACjDA,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,EAA8CiX,IAA9C,GAAqDC,KAArD,CAA2D,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAA5D,EAAqFqV,IAArF,CAA0F,SAACC,OAAD,CAAa,CACrG,GAAI,CAACA,OAAL,CAAc,OADuF,GAE7FjZ,KAF6F,CAE3DiZ,OAF2D,CAE7FjZ,IAF6F,CAEvF2T,GAFuF,CAE3DsF,OAF2D,CAEvFtF,GAFuF,CAElFuF,kBAFkF,CAE3DD,OAF2D,CAElFC,kBAFkF,mNAGhFlZ,IAHgF,IAG9FoU,KAH8F,UAGvFrI,GAHuF,UAIrG2N,mBAAmB,CAAC,CAClBC,IAAI,CAAEvF,KAAK,CAACuF,IADM,CAElBnF,IAAI,CAAEJ,KAAK,CAACI,IAFM,CAGlBoF,MAAM,CAAE7N,GAAG,CAAC/L,IAHM,CAAD,CAAnB,CAKA0T,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,mBAAD,CAAd,CACD,CAhBD,EAiBD,CAlBD,IAkBO,CACL8G,mBAAmB,CAAC,IAAD,CAAnB,CACA,GAAInB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoExU,UAApE,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAhCQ,CAgCN,CAAChR,OAAD,CAAUuW,OAAV,CAhCM,CAAT,CAkCA,MAAO,CAACsB,gBAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;GAgBO,QAASI,iBAAT,CACLjY,OADK,CAELuW,OAFK,CAGLvF,cAHK,CAIL2F,UAJK,CAKLuB,SALK,CAML3G,iBANK,CAOL,iBACgCnC,sDAAQ,EADxC,oOACO+I,QADP,gBACiBC,WADjB,gBAGA,GAAMrW,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CACD,GAAI,CAAC2B,SAAL,CAAgB,CACdlH,cAAc,CAAC,mBAAD,CAAd,CACA,OACD,CACD,GAAM9S,OAAM,CAAG8B,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,CAAf,CACA,GAAI9B,MAAJ,CAAY,CACVqT,iBAAiB,CAAC,mBAAD,CAAjB,CACA,GAAM8G,wBAAuB,CAAG,MAAOna,OAAM,CAACoa,iBAAd,GAAoC,UAApE,CACA,GAAID,uBAAJ,CAA6B,CAC3BrY,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,EACGsY,iBADH,CACqB,CAAEJ,SAAS,CAATA,SAAF,CADrB,EAEGhB,KAFH,CAES,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAFV,EAGGqV,IAHH,CAGQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAETjZ,KAFS,CAEAiZ,OAFA,CAETjZ,IAFS,CAGjBga,WAAW,CAACha,IAAD,CAAX,CACA4S,cAAc,CAAC,mBAAD,CAAd,CACD,CARH,EASD,CAVD,IAUO,CACL9S,MAAM,CAAC+Y,IAAP,GAAcC,KAAd,CAAoB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAArB,EAA8CqV,IAA9C,CAAmD,SAACC,OAAD,CAAa,CAC9D,GAAI,CAACA,OAAL,CAAc,OADgD,GAEtDjZ,KAFsD,CAE7CiZ,OAF6C,CAEtDjZ,IAFsD,oNAG5BA,IAH4B,IAGvDoU,KAHuD,WAGxCwF,MAHwC,WAG9C5Z,IAH8C,CAI9D,GAAMma,2BAA0B,CAAGL,SAAS,CAACxV,GAAV,CAAc,SAAC8V,GAAD,CAAS,CACxD,GAAMC,UAAS,CAAGjG,KAAK,CAACuF,IAAN,CAAWlZ,OAAX,CAAmB2Z,GAAnB,CAAlB,CACA,GAAME,SAAQ,CAAGlG,KAAK,CAACuF,IAAN,CAAW9a,MAA5B,CACA,GAAM0b,SAAQ,CAAGnG,KAAK,CAACI,IAAN,CAAW3V,MAA5B,CACA,GAAMwV,eAAc,CAAG,GAAIhI,WAAJ,CAAekO,QAAf,CAAvB,CACA,IAAK,GAAI5F,UAAS,CAAG,CAArB,CAAwBA,SAAS,CAAG4F,QAApC,CAA8C5F,SAAS,EAAI,CAA3D,CAA8D,CAC5DN,cAAc,CAACM,SAAD,CAAd,CAA4BiF,MAAM,CAACjF,SAAS,CAAG2F,QAAZ,CAAuBD,SAAxB,CAAlC,CACD,CACD,MAAOhG,eAAP,CACD,CATkC,CAAnC,CAUA2F,WAAW,CAACG,0BAAD,CAAX,CACAvH,cAAc,CAAC,mBAAD,CAAd,CACD,CAhBD,EAiBD,CACF,CAhCD,IAgCO,CACLoH,WAAW,CAAC,IAAD,CAAX,CACA,GAAIzB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoExU,UAApE,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAlDQ,CAkDN,CAAChR,OAAD,CAAUuW,OAAV,CAAmB2B,SAAnB,CAlDM,CAAT,CAoDA,MAAO,CAACC,QAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;GAkBO,QAASS,mBAAT,CAA4B5Y,OAA5B,CAAqCuW,OAArC,CAA8CvF,cAA9C,CAA8Dc,MAA9D,CAAsE6E,UAAtE,CAAkF,iBAC7DvH,sDAAQ,EADqD,oOAChFoD,KADgF,gBACzEqG,QADyE,gBAGvF,GAAM9W,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CACD,GAAMrY,OAAM,CAAG8B,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,CAAf,CACA,GAAI9B,MAAJ,CAAY,CACV,GAAM4a,oBAAmB,CAAG,MAAO5a,OAAM,CAAC6a,SAAd,GAA4B,UAAxD,CACA,GAAID,mBAAJ,CAAyB,CACvB5a,MAAM,CAAC6a,SAAP,GAAmB7B,KAAnB,CAAyB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAA1B,EAAmDqV,IAAnD,CAAwD,SAACC,OAAD,CAAa,CACnE,GAAI,CAACA,OAAL,CAAc,OADqD,GAE3DjZ,KAF2D,CAE7CiZ,OAF6C,CAE3DjZ,IAF2D,CAErD2T,GAFqD,CAE7CsF,OAF6C,CAErDtF,GAFqD,CAGnE8G,QAAQ,CAACza,IAAD,CAAR,CACA0T,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAf,cAAc,CAAC,mBAAD,CAAd,CACD,CAND,EAOD,CARD,IAQO,CACL9S,MAAM,CAAC+Y,IAAP,GAAcC,KAAd,CAAoB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAArB,EAA8CqV,IAA9C,CAAmD,SAACC,OAAD,CAAa,CAC9D,GAAI,CAACA,OAAL,CAAc,OADgD,GAEtDjZ,KAFsD,CAExCiZ,OAFwC,CAEtDjZ,IAFsD,CAEhD2T,GAFgD,CAExCsF,OAFwC,CAEhDtF,GAFgD,CAG9D8G,QAAQ,CAACza,IAAI,CAAC,CAAD,CAAL,CAAR,CACA0T,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAf,cAAc,CAAC,mBAAD,CAAd,CACD,CAND,EAOD,CACF,CAnBD,IAmBO,CACL6H,QAAQ,CAAC,IAAD,CAAR,CACA,GAAIlC,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoExU,UAApE,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAjCQ,CAiCN,CAAChR,OAAD,CAAUuW,OAAV,CAjCM,CAAT,CAmCA,MAAO,CAAC/D,KAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;GA0BO,QAASwG,iBAAT,CACLhZ,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBACkCzH,sDAAQ,EAD1C,oOACO6J,SADP,gBACkBC,YADlB,gCAE4C9J,sDAAQ,CAAC,CAAD,CAFpD,oOAEO+J,cAFP,gBAEuBC,iBAFvB,gCAG4ChK,sDAAQ,CAAC,CAAD,CAHpD,oOAGOiK,cAHP,gBAGuBC,iBAHvB,gBAKA,GAAMvX,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyBiZ,SAA7B,CAAwC,CACtCjZ,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyBiZ,SAAzB,CAAmChC,IAAnC,GAA0CC,KAA1C,CAAgD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAAjD,EAA0EqV,IAA1E,CAA+E,SAACC,OAAD,CAAa,CAC1F,GAAI,CAACA,OAAL,CAAc,OAD4E,GAElFjZ,KAFkF,CAEhDiZ,OAFgD,CAElFjZ,IAFkF,CAE5E2T,GAF4E,CAEhDsF,OAFgD,CAE5EtF,GAF4E,CAEvEuF,kBAFuE,CAEhDD,OAFgD,CAEvEC,kBAFuE,CAG1F4B,YAAY,CAAC9a,IAAD,CAAZ,CACAgb,iBAAiB,CAACld,MAAM,CAAC+H,IAAP,CAAY7F,IAAZ,EAAkBnB,MAAnB,CAAjB,CACAqc,iBAAiB,CAACpd,MAAM,CAACuG,MAAP,CAAcrE,IAAd,EACfsE,GADe,CACX,SAAApB,CAAC,QAAIA,EAAC,CAACrE,MAAN,EADU,EAEfnB,MAFe,CAER,SAACyd,CAAD,CAAI3E,CAAJ,QAAU2E,EAAC,CAAG3E,CAAd,EAFQ,CAES,CAFT,CAAD,CAAjB,CAGA9C,MAAM,CAACC,GAAD,CAAM,WAAN,CAAN,CACA,GAAMwF,4BAA2B,0MAC/BiC,iBAAiB,CAAEC,kFADY,EAE5BnC,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,WAAD,CAAd,CACD,CAnBD,EAoBD,CArBD,IAqBO,CACLkI,YAAY,CAAC,EAAD,CAAZ,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CACA,GAAI3C,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,WAAjC,CAA8C,IAA9C,CAAoD,IAApD,CAAD,CAA4DxU,UAA5D,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,WAAD,CAAd,CACD,CACF,CACH;AACC,CArCQ,CAqCN,CAAChR,OAAD,CAAUuW,OAAV,CArCM,CAAT,CAuCA,MAAO,CAAC0C,SAAD,CAAYE,cAAZ,CAA4BE,cAA5B,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;GAwBO,QAASK,qBAAT,CACL1Z,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBAC0CzH,sDAAQ,EADlD,oOACOuK,aADP,gBACsBC,gBADtB,gBAGA,GAAM7X,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB2Z,aAA7B,CAA4C,CAC1C3Z,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB2Z,aAAzB,CAAuC1C,IAAvC,GAA8CC,KAA9C,CAAoD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAArD,EACGqV,IADH,CACQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAETjZ,KAFS,CAEyBiZ,OAFzB,CAETjZ,IAFS,CAEH2T,GAFG,CAEyBsF,OAFzB,CAEHtF,GAFG,CAEEuF,kBAFF,CAEyBD,OAFzB,CAEEC,kBAFF,CAGjBsC,gBAAgB,CAACxb,IAAD,CAAhB,CACA0T,MAAM,CAACC,GAAD,CAAM,eAAN,CAAN,CACA,GAAMwF,4BAA2B,0MAC/BsC,wBAAwB,CAAEC,sFADK,EAE5BxC,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,eAAD,CAAd,CACD,CAhBH,EAiBD,CAlBD,IAkBO,CACL4I,gBAAgB,CAAC,EAAD,CAAhB,CACA,GAAIjD,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,eAAjC,CAAkD,IAAlD,CAAwD,IAAxD,CAAD,CAAgExU,UAAhE,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,eAAD,CAAd,CACD,CACF,CACH;AACC,CAhCQ,CAgCN,CAAChR,OAAD,CAAUuW,OAAV,CAhCM,CAAT,CAkCA,MAAO,CAACoD,aAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;GA0BO,QAASI,cAAT,CACL/Z,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBAC4BzH,sDAAQ,EADpC,oOACO4K,MADP,gBACeC,SADf,gBAEA;AACA;AACA;AACA;AALA,gBAMkD7K,sDAAQ,CAAC,EAAD,CAN1D,oOAMO8K,iBANP,gBAM0BC,oBAN1B,gCAO4C/K,sDAAQ,CAAC,EAAD,CAPpD,oOAOOgL,cAPP,gBAOuBC,iBAPvB,gBASA,GAAMtY,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,GAAII,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAI0K,mFAAJ,CAAyBqC,OAAzB,CAAD,CAAoCxU,UAApC,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,QAAD,CAAd,CACD,CACD,OACD,CAED,GAAIhR,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyBga,MAA7B,CAAqC,CACnCha,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyBga,MAAzB,CAAgC/C,IAAhC,GAAuCC,KAAvC,CAA6C,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAA9C,EAAuEqV,IAAvE,CAA4E,SAACC,OAAD,CAAa,CACvF,GAAI,CAACA,OAAL,CAAc,OADyE,GAE/EjZ,KAF+E,CAEvCiZ,OAFuC,CAE/EjZ,IAF+E,CAEpEwT,IAFoE,CAEvCyF,OAFuC,CAEzEtF,GAFyE,CAE9DuF,kBAF8D,CAEvCD,OAFuC,CAE9DC,kBAF8D,CAGvF2C,SAAS,CAAC7b,IAAD,CAAT,CACAwT,IAAI,CAACpU,OAAL,CAAa,eAAiB,4NAAfuU,GAAe,UAAVhH,IAAU,UAC5B+G,MAAM,CAACC,GAAD,CAAMhH,IAAN,CAAN,CACD,CAFD,EAJuF,GAOtEuP,iBAPsE,CAO5Blc,IAP4B,CAO/E4B,OAP+E,CAO9Cua,aAP8C,CAO5Bnc,IAP4B,CAOpDoc,IAPoD,CAQvFL,oBAAoB,CAACG,gBAAD,CAApB,CACAD,iBAAiB,CAACE,aAAD,CAAjB,CACAxE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,QAAD,CAAd,CACD,CAhBD,EAiBD,CAlBD,IAkBO,CACL;AACA;AACAmJ,oBAAoB,CAAC,EAAD,CAApB,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACA,GAAI1D,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,QAAjC,CAA2C,IAA3C,CAAiD,IAAjD,CAAD,CAAyDxU,UAAzD,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,QAAD,CAAd,CACD,CACF,CACH;AACC,CAxCQ,CAwCN,CAAChR,OAAD,CAAUuW,OAAV,CAxCM,CAAT,CAyCA,MAAO,CAACyD,MAAD,CAASE,iBAAT,CAA4BE,cAA5B,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;GAwBO,QAASK,uBAAT,CACLza,OADK,CACIuW,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBACwDzH,sDAAQ,EADhE,oOACOsL,oBADP,gBAC6BC,uBAD7B,gBAGA,GAAM5Y,WAAU,CAAGyD,8EAAa,EAAhC,CAEA+J,uDAAS,CAAC,UAAM,CACd,GAAI,CAACvP,OAAO,CAACuW,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIvW,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,kBAAzB,CAAJ,CAAkD,CAChDA,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,kBAAzB,EAA6CiX,IAA7C,GAAoDC,KAApD,CAA0D,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAIpV,UAAJ,CAAR,EAA3D,EACGqV,IADH,CACQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAETjZ,KAFS,CAEyBiZ,OAFzB,CAETjZ,IAFS,CAEH2T,GAFG,CAEyBsF,OAFzB,CAEHtF,GAFG,CAEEuF,kBAFF,CAEyBD,OAFzB,CAEEC,kBAFF,CAGjBqD,uBAAuB,CAACvc,IAAD,CAAvB,CACA0T,MAAM,CAACC,GAAD,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,kBAAD,CAAd,CACD,CAZH,EAaD,CAdD,IAcO,CACL2J,uBAAuB,CAAC,IAAD,CAAvB,CACA,GAAIhE,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,kBAAjC,CAAqD,IAArD,CAA2D,IAA3D,CAAD,CAAmExU,UAAnE,CAAJ,CACD,CAFD,IAEO,CACLiP,cAAc,CAAC,kBAAD,CAAd,CACD,CACF,CACH;AACC,CA5BQ,CA4BN,CAAChR,OAAD,CAAUuW,OAAV,CA5BM,CAAT,CA8BA,MAAO,CAACmE,oBAAD,CAAP,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5tBD,yCAcA;;;GAIA,QAASE,YAAT,EAAuB,CACrB,MAAOC,+CAAM,EAAb,CACD,CAED;;;;;GAMO,QAASC,UAAT,CAAmBC,QAAnB,CAA6B,CAClC,GAAI,CAACA,QAAL,CAAe,CACb,MAAO,EAAP,CACD,CACD,GAAI,CAACA,QAAQ,CAAC7O,QAAd,CAAwB,CACtB,MAAQ6O,SAAQ,CAACjb,GAAT,EAAgB,EAAxB,CACD,CACD,MAAOib,SAAQ,CAAC7O,QAAT,CAAkB8O,OAAlB,CAA0B,SAAAla,CAAC,QAAIga,UAAS,CAACha,CAAD,CAAb,EAA3B,CAAP,CACD,CAED;;;;;;GAOO,QAASma,aAAT,CAAsBF,QAAtB,CAA2C,IAAX5c,MAAW,2DAAH,CAAG,CAChD,GAAI,CAAC4c,QAAQ,CAAC7O,QAAd,CAAwB,CACtB,MAAO/N,MAAP,CACD,CACD,GAAM+c,SAAQ,CAAG/c,KAAK,CAAG,CAAzB,CACA,GAAMgd,gBAAe,CAAGJ,QAAQ,CAAC7O,QAAT,CAAkBxJ,GAAlB,CAAsB,SAAA5B,CAAC,QAAIma,aAAY,CAACna,CAAD,CAAIoa,QAAJ,CAAhB,EAAvB,CAAxB,CACA,MAAO3N,KAAI,CAACY,GAAL,OAAAZ,IAAI,6MAAQ4N,eAAR,UAAyBD,QAAzB,GAAX,CACD,CAED;;;;;GAMO,QAASE,cAAT,CAAuBL,QAAvB,CAAiC,CACtC,GAAI,CAACA,QAAL,CAAe,CACb,MAAO,EAAP,CACD,CACD,GAAI,CAACA,QAAQ,CAAC7O,QAAd,CAAwB,mBACtB,MAAQ,gBAAA6O,QAAQ,CAACjb,GAAT,sDAAc7C,MAAd,GAAwB,CAAhC,CACD,CACD,MAAO8d,SAAQ,CAAC7O,QAAT,CAAkBpQ,MAAlB,CAAyB,SAACuf,GAAD,CAAMC,IAAN,QAAeD,IAAG,CAAGD,aAAa,CAACE,IAAD,CAAlC,EAAzB,CAAmE,CAAnE,CAAP,CACD,CAED;;;;;;GAOA,QAASC,uBAAT,CAAgCC,IAAhC,CAAsClP,IAAtC,CAA4CmP,cAA5C,CAA4D,CAC1D,GAAMC,aAAY,CAAGpP,IAAI,CAACmP,cAAD,CAAzB,CACA,GAAID,IAAI,CAACzQ,IAAL,GAAc2Q,YAAlB,CAAgC,CAC9B,GAAID,cAAc,GAAKnP,IAAI,CAACrP,MAAL,CAAc,CAArC,CAAwC,CACtC,MAAOue,KAAP,CACD,CACD,GAAIA,IAAI,CAACtP,QAAT,CAAmB,CACjB,GAAMyP,WAAU,CAAGH,IAAI,CAACtP,QAAL,CAChBxJ,GADgB,CACZ,SAAAkZ,KAAK,QAAIL,uBAAsB,CAACK,KAAD,CAAQtP,IAAR,CAAcmP,cAAc,CAAG,CAA/B,CAA1B,EADO,EAEhB5a,MAFgB,CAETwD,OAFS,CAAnB,CAGA,GAAIsX,UAAU,CAAC1e,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAO0e,WAAU,CAAC,CAAD,CAAjB,CACD,CACF,CACF,CACD,MAAO,KAAP,CACD,CAED;;;;;GAMO,QAASE,uBAAT,CAAgCC,QAAhC,CAA0CC,cAA1C,CAA0D,CAC/D,GAAMJ,WAAU,CAAGG,QAAQ,CAACpQ,IAAT,CAChBhJ,GADgB,CACZ,SAAAsZ,aAAa,QAAIT,uBAAsB,CAACS,aAAD,CAAgBD,cAAhB,CAAgC,CAAhC,CAA1B,EADD,EAEhBlb,MAFgB,CAETwD,OAFS,CAAnB,CAGA,GAAIsX,UAAU,CAAC1e,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAO0e,WAAU,CAAC,CAAD,CAAjB,CACD,CACD,MAAO,KAAP,CACD,CAED;;;;;;;;;;;GAYO,QAASM,cAAT,CAAuBT,IAAvB,CAA6BU,SAA7B,CAAwCC,SAAxC,CAAmDC,gBAAnD,CAAqEC,QAArE,CAA+E,CACpF,GAAIC,QAAJ,CACA,GAAI,CAACD,QAAL,CAAe,CACbC,OAAO,CAAG,CAACd,IAAI,CAACzQ,IAAN,CAAV,CACD,CAFD,IAEO,CACLuR,OAAO,6MAAOD,QAAP,CAAP,CACD,CACD,GAAIH,SAAS,CAACV,IAAD,CAAOc,OAAP,CAAb,CAA8B,CAC5BF,gBAAgB,CAACve,IAAjB,CAAsBye,OAAtB,EACA,MAAOH,UAAS,CAACX,IAAD,CAAOc,OAAP,CAAhB,CACD,CACD,GAAId,IAAI,CAACtP,QAAT,CAAmB,CACjB,OAAO,2MACFsP,IADL,EAEEtP,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CAAcxJ,GAAd,CACR,SAAAkZ,KAAK,QAAIK,cAAa,CACpBL,KADoB,CACbM,SADa,CACFC,SADE,CACSC,gBADT,CAC2BE,OAAO,CAACC,MAAR,CAAe,CAACX,KAAK,CAAC7Q,IAAP,CAAf,CAD3B,CAAjB,EADG,CAFZ,GAQD,CACD,MAAOyQ,KAAP,CACD,CAED;;;;;;;;;;;GAYO,QAASgB,iBAAT,CAA0BhB,IAA1B,CAAgCU,SAAhC,CAA2CC,SAA3C,CAAsDC,gBAAtD,CAAwEC,QAAxE,CAAkF,CACvF,GAAIC,QAAJ,CACA,GAAI,CAACD,QAAL,CAAe,CACbC,OAAO,CAAG,CAACd,IAAI,CAACzQ,IAAN,CAAV,CACD,CAFD,IAEO,CACLuR,OAAO,6MAAOD,QAAP,CAAP,CACD,CACD,GAAII,QAAO,CAAGjB,IAAd,CACA,GAAIU,SAAS,CAACV,IAAD,CAAOc,OAAP,CAAb,CAA8B,CAC5BF,gBAAgB,CAACve,IAAjB,CAAsBye,OAAtB,EACAG,OAAO,CAAGN,SAAS,CAACX,IAAD,CAAOc,OAAP,CAAnB,CACD,CACD,GAAId,IAAI,CAACtP,QAAT,CAAmB,CACjB,OAAO,2MACFuQ,OADL,EAEEvQ,QAAQ,CAAEuQ,OAAO,CAACvQ,QAAR,CAAiBxJ,GAAjB,CACR,SAAAkZ,KAAK,QAAIY,iBAAgB,CACvBZ,KADuB,CAChBM,SADgB,CACLC,SADK,CACMC,gBADN,CACwBE,OAAO,CAACC,MAAR,CAAe,CAACX,KAAK,CAAC7Q,IAAP,CAAf,CADxB,CAApB,EADG,CAFZ,GAQD,CACD,MAAO0R,QAAP,CACD,CAED;;;;;GAMO,QAASC,gBAAT,CAAyB3B,QAAzB,CAAmC4B,QAAnC,CAA6C,CAClD,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,uNAAM6O,QAAQ,CAAC7O,QAAf,GAAyByQ,QAAzB,EAFV,GAID,CAED;;;;;GAMO,QAASC,iBAAT,CAA0B7B,QAA1B,CAAoC4B,QAApC,CAA8C,CACnD,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,EAAGyQ,QAAH,qNAAgB5B,QAAQ,CAAC7O,QAAzB,EAFV,GAID,CAED;;;;;;GAOO,QAAS2Q,gBAAT,CAAyB9B,QAAzB,CAAmC4B,QAAnC,CAA6CG,WAA7C,CAA0D,CAC/D,GAAMC,YAAW,CAAGze,KAAK,CAAC0e,IAAN,CAAWjC,QAAQ,CAAC7O,QAApB,CAApB,CACA6Q,WAAW,CAACE,MAAZ,CAAmBH,WAAnB,CAAgC,CAAhC,CAAmCH,QAAnC,EACA,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,CAAE6Q,WAFZ,GAID,CAED;;;;GAKO,QAASG,YAAT,CAAqBpB,QAArB,CAA+BqB,YAA/B,CAA6C,CAClD,GAAMxS,MAAK,CAAGwS,YAAY,CAACza,GAAb,CAAiB,SAAA4J,IAAI,QAAIuP,uBAAsB,CAACC,QAAD,CAAWxP,IAAX,CAA1B,EAArB,CAAd,CACA,GAAM8Q,SAAQ,CAAGzS,KAAK,CAACjI,GAAN,CAAU,SAAA8Y,IAAI,QAAIV,UAAS,CAACU,IAAD,CAAT,CAAgB9Y,GAAhB,CAAoB,yOAAE+F,MAAF,gBAAcA,OAAd,EAApB,CAAJ,EAAd,CAAjB,CACA,MAAO2U,SAAQ,CACZthB,MADI,CACG,SAACyd,CAAD,CAAI8D,CAAJ,QAAU9D,EAAC,CAACgD,MAAF,CAASc,CAAC,CAACxc,MAAF,CAAS,SAAAyc,GAAG,QAAI,CAAC/D,CAAC,CAACvb,QAAF,CAAWsf,GAAX,CAAL,EAAZ,CAAT,CAAV,EADH,CAC0DF,QAAQ,CAAC,CAAD,CAAR,EAAe,EADzE,CAAP,CAED,CAED;;;;GAKO,QAASG,mBAAT,CAA4BzB,QAA5B,CAAsCqB,YAAtC,CAAoD,CACzD,GAAMxS,MAAK,CAAGwS,YAAY,CAACza,GAAb,CAAiB,SAAA4J,IAAI,QAAIuP,uBAAsB,CAACC,QAAD,CAAWxP,IAAX,CAA1B,EAArB,CAAd,CACA,GAAM8Q,SAAQ,CAAGzS,KAAK,CAACjI,GAAN,CAAU,SAAA8Y,IAAI,QAAIV,UAAS,CAACU,IAAD,CAAT,CAAgB9Y,GAAhB,CAAoB,2OAAE+F,MAAF,gBAAcA,OAAd,EAApB,CAAJ,EAAd,CAAjB,CACA,MAAO2U,SAAQ,CACZthB,MADI,CACG,SAACyd,CAAD,CAAI8D,CAAJ,QAAUA,EAAC,CAACxc,MAAF,CAAS,SAAAyc,GAAG,QAAI/D,EAAC,CAACvb,QAAF,CAAWsf,GAAX,CAAJ,EAAZ,CAAV,EADH,CAC+CF,QAAQ,CAAC,CAAD,CAAR,EAAe,EAD9D,CAAP,CAED,CAED;;;;;GAMO,QAASI,iBAAT,CAA0B1B,QAA1B,CAAoCqB,YAApC,CAAkDtM,KAAlD,CAAyD,CAC9D,GAAM4M,aAAY,CAAGP,WAAW,CAACpB,QAAD,CAAWqB,YAAX,CAAhC,CACA,MAAOtM,MAAK,CAAChQ,MAAN,CAAa,SAAA6c,EAAE,QAAI,CAACD,YAAY,CAACzf,QAAb,CAAsB0f,EAAtB,CAAL,EAAf,CAAP,CACD,CAED;;;;;;;;;GAUO,QAASC,+BAAT,CAAwCnC,IAAxC,CAA8Crd,KAA9C,CAAqDyf,QAArD,CAAkF,IAAnBC,UAAmB,2DAAP,KAAO,CACvF,GAAI,CAACrC,IAAI,CAACtP,QAAV,CAAoB,CAClB,GAAI,CAAC2R,SAAL,CAAgB,CACd,MAAO,KAAP,CACD,CACD,MAAO,uNAAKD,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAAP,CACD,CACD,GAAI5M,KAAK,GAAK,CAAd,CAAiB,CACf,MAAO,uNAAKyf,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAAP,CACD,CACD,MAAOyQ,KAAI,CAACtP,QAAL,CACJ8O,OADI,CACI,SAAAla,CAAC,QAAI6c,+BAA8B,CAAC7c,CAAD,CAAI3C,KAAK,CAAG,CAAZ,uNAAmByf,QAAnB,GAA6BpC,IAAI,CAACzQ,IAAlC,GAAyC8S,SAAzC,CAAlC,EADL,EAEJhd,MAFI,CAEGwD,OAFH,CAAP,CAGD,CAED;;;;GAKO,QAASyZ,WAAT,CAAoBhC,QAApB,CAA8B9P,QAA9B,CAAwC,CAC7C,MAAO,CACLJ,OAAO,CAAEC,wEAAoB,CAACG,QAAD,CAApB,CAA+BD,aADnC,CAELC,QAAQ,CAARA,QAFK,CAGLN,IAAI,CAAEoQ,QAAQ,CAACpQ,IAHV,CAAP,CAKD,CAED;;;;;;;;;;GAWO,QAASqS,wBAAT,CAAiCjC,QAAjC,CAA2CkC,QAA3C,CAAqDhS,QAArD,CAA+DiS,aAA/D,CAA8ElV,KAA9E,CAAqF,CAC1F,GAAMyS,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWkC,QAAX,CAAnC,CACA,GAAME,eAAc,CAAG1B,gBAAgB,CAAChB,IAAD,CAAO,iBAAM,KAAN,EAAP,CAAmB,SAAC1Q,CAAD,CAAIqT,KAAJ,CAAc,+CACtE,GAAMC,UAAS,wBAAGH,aAAH,SAAGA,aAAH,sCAAGA,aAAa,CAAEpT,IAAf,CAAoB,SAAA/J,CAAC,QAAI2U,sDAAO,CAAC3U,CAAC,CAACwL,IAAH,CAAS6R,KAAT,CAAX,EAArB,CAAH,8CAAG,oBAAkD5R,KAArD,+DACVzD,uEAAe,CAACC,KAAD,CADpB,CAEA,OAAO,2MACF+B,CADL,EAEEyB,KAAK,CAAE6R,SAAS,CAACxhB,KAAV,CAAgB,CAAhB,CAAmB,CAAnB,CAFT,GAID,CAPsC,CAOpC,EAPoC,CAAvC,CAQA,GAAMyhB,yBAAwB,4MACzBvC,QADyB,EAE5BpQ,IAAI,CAAE,CAACwS,cAAD,CAFsB,EAA9B,CAIA,MAAO,CACLI,YAAY,CAAER,UAAU,CAACO,wBAAD,CAA2BrS,QAA3B,CADnB,CAELuS,QAAQ,CAAE/C,IAAI,CAACzQ,IAFV,CAAP,CAID,CAED;;;;;GAMO,QAASyT,cAAT,CAAuB1C,QAAvB,CAAiCkC,QAAjC,CAA2C,CAChD,GAAMxC,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWkC,QAAX,CAAnC,CACA,MAAO,CAAES,WAAW,CAAE3D,SAAS,CAACU,IAAD,CAAxB,CAAgC+C,QAAQ,CAAE/C,IAAI,CAACzQ,IAA/C,CAAP,CACD,CAED;;;;GAKO,QAAS2T,eAAT,CAAwB1S,QAAxB,CAAkC,CACvC,MAAO,CACLJ,OAAO,CAAEC,wEAAoB,CAACG,QAAD,CAApB,CAA+BD,aADnC,CAELC,QAAQ,CAARA,QAFK,CAGLN,IAAI,CAAE,EAHD,CAAP,CAKD,CAED;;;;;;GAOO,QAASiT,kBAAT,CAA2BnD,IAA3B,CAAiClP,IAAjC,CAAuCnB,YAAvC,CAAqD,wBAC1D,GAAMhN,MAAK,CAAGmO,IAAI,CAACrP,MAAL,CAAc,CAA5B,CACA,MAAO,CACL2P,KAAK,CAAE4O,IAAI,CAACzQ,IADP,CAEL6T,OAAO,CAAE/I,iEAAS,CAACvJ,IAAD,CAFb,CAGLA,IAAI,CAAJA,IAHK,CAILuS,IAAI,CAAEzD,aAAa,CAACI,IAAD,CAJd,CAKLjP,KAAK,CAAEpB,YAAF,SAAEA,YAAF,qCAAEA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASA,IAAT,CAAX,EAApB,CAAF,6CAAE,mBAAgDC,KALlD,CAMLpO,KAAK,CAALA,KANK,CAOL2gB,MAAM,CAAE,CAAC,CAACtD,IAAI,CAACtP,QAAN,EAAkBsP,IAAI,CAACtP,QAAL,CAAcjP,MAAd,GAAyB,CAA5C,GAAkDoH,OAAO,CAACmX,IAAI,CAAC1b,GAAN,CAP5D,CAQLiO,MAAM,CAAEkN,YAAY,CAACO,IAAD,CARf,CAAP,CAUD,CAED;;;;;;;;;GAUA,QAASuD,wBAAT,CAAiCC,aAAjC,CAAgDC,CAAhD,CAAkF,IAA/BC,YAA+B,2DAAjB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAiB,CAChF,MAAO,CACJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CADlD,CAEJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CAFlD,CAGJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CAHlD,CAAP,CAKD,CAED;;;;;;;;;;;;GAaO,QAASC,2BAAT,CAAoCrD,QAApC,CAA8CsD,iBAA9C,CAAiEjU,YAAjE,CAA+EpC,KAA/E,CAAsF,CAC3F,GAAIsW,gBAAe,CAAG,EAAtB,CACAD,iBAAiB,CAAC5hB,OAAlB,CAA0B,SAAC8hB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,yBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAjT,YAAY,OAAZ,EAAAA,YAAY,SAAZ,6BAAAA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAApB,mEAAuD/S,KAAvD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIAsW,eAAe,uNACVA,eADU,8MAEVE,OAAO,CAAC7c,GAAR,CAAY,2OAAE+F,MAAF,UAAU+W,IAAV,gBAAoB,CACjC/W,MADiC,CAEhCgX,mDAAK,CAACD,IAAD,CAAL,CAAcpB,SAAd,CAA0BW,uBAAuB,CAACX,SAAD,CAAYoB,IAAZ,CAFjB,CAApB,EAAZ,CAFU,EAAf,CAOD,CACF,CAhBD,EAiBA,MAAO,IAAIE,IAAJ,CAAQL,eAAR,CAAP,CACD,CAED;;;;;;;;;;;;GAaO,QAASM,wBAAT,CAAiC7D,QAAjC,CAA2CsD,iBAA3C,CAA8DQ,QAA9D,CAAwE7W,KAAxE,CAA+E,CACpF,GAAI8W,WAAU,CAAG,EAAjB,CADoF,yBAE3EjiB,CAF2E,EAGlF,GAAM0hB,YAAW,CAAGF,iBAAiB,CAACxhB,CAAD,CAArC,CACA,GAAM4d,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,oBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAwB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,wBAAAA,QAAQ,CAAE/U,IAAV,CAAe,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAAhB,yDAAmD/S,KAAnD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIA8W,UAAU,CAAGA,UAAU,CAACtD,MAAX,CAAkBgD,OAAO,CAAC7c,GAAR,CAAY,2OAAE+F,MAAF,gBAAe,CACxDqX,KAAK,CAAErX,MADiD,CAExDsC,IAAI,CAAEyQ,IAAI,CAACzQ,IAF6C,CAGxDwB,KAAK,CAAE6R,SAHiD,CAAf,EAAZ,CAAlB,CAAb,CAKD,CAhBiF,EAEpF,IAAK,GAAIxgB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGwhB,iBAAiB,CAACniB,MAAtC,CAA8CW,CAAC,EAAI,CAAnD,CAAsD,OAA7CA,CAA6C,EAerD,CACD,MAAOiiB,WAAP,CACD,CAEM,QAASE,6BAAT,CACLjE,QADK,CACKnU,KADL,CACYqY,OADZ,CACqBZ,iBADrB,CACwCjU,YADxC,CACsDpC,KADtD,CAEL,CACA,GAAMkX,gBAAe,CAAG,EAAxB,CACAb,iBAAiB,CAAC5hB,OAAlB,CAA0B,SAAC8hB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,yBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAjT,YAAY,OAAZ,EAAAA,YAAY,SAAZ,6BAAAA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAApB,mEAAuD/S,KAAvD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIA,GAAMmX,cAAa,CAAGX,OAAO,CAC1B7c,GADmB,CACf,6QAAE+F,MAAF,iBAAe,gBAClBd,KAAK,CAACc,MAAD,CADa,wCAClB,cAAe0X,QAAf,CAAwBH,OAAxB,EAAiC,CAAjC,CADkB,CAElB,kBAACrY,KAAK,CAACc,MAAD,CAAN,yCAAC,eAAe0X,QAAf,CAAwBH,OAAxB,EAAiC,CAAjC,CAAD,CAFkB,CAAf,EADe,EAKnBnf,MALmB,CAKZ,SAAAyS,IAAI,QAAIA,KAAI,CAAC/R,KAAL,CAAW,SAAA3D,CAAC,QAAI,OAAOA,EAAP,GAAa,QAAjB,EAAZ,CAAJ,EALQ,CAAtB,CAOA,GAAIsiB,aAAa,CAACjjB,MAAd,CAAuB,CAA3B,CAA8B,CAC5B,GAAMmjB,OAAM,CAAGC,uEAAqB,CAClCH,aAAa,CAACxd,GAAd,CAAkB4d,mDAAlB,CADkC,CAApC,CAGA,GAAMC,UAAS,CAAGC,QAAlB,CACA,GAAMC,WAAU,CAAGC,iDAAU,CAACR,aAAD,CAAgBK,SAAhB,CAA7B,CACA,GAAIE,UAAJ,CAAgB,CACd,GAAME,eAAc,CAAGC,qDAAQ,CAACR,MAAD,CAAR,CAAiBS,QAAjB,CAA0BC,WAAjD,CACAb,eAAe,CAACpiB,IAAhB,CAAqB,CACnByO,IAAI,CAAEgT,WADa,CAEnBvU,IAAI,CAAEuU,WAAW,CAACA,WAAW,CAACriB,MAAZ,CAAqB,CAAtB,CAFE,CAGnB8jB,IAAI,CAAEN,UAHa,CAInBlU,KAAK,CAAE6R,SAJY,CAKnBwC,QAAQ,CAAED,cALS,CAArB,EAOD,CACF,CACF,CACF,CAjCD,EAkCA,MAAOV,gBAAP,CACD,CAED;;;;;;;;;;;;GAaO,QAASe,yBAAT,CAAkClF,QAAlC,CAA4CsD,iBAA5C,CAA+DQ,QAA/D,CAAyE7W,KAAzE,CAAgF,CACrF,GAAMuE,MAAK,CAAG,EAAd,CACA8R,iBAAiB,CAAC5hB,OAAlB,CAA0B,SAAC8hB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,qBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CAAG,CAAAwB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,yBAAAA,QAAQ,CAAE/U,IAAV,CAAe,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAAhB,2DAAmD/S,KAAnD,GACbzD,uEAAe,CAACC,KAAD,CADpB,CAEAuE,KAAK,CAACzP,IAAN,CAAW,CACT7B,GAAG,CAAE4e,WAAW,EADP,CAET7P,IAAI,CAAEyQ,IAAI,CAACzQ,IAFF,CAGT8T,IAAI,CAAEU,OAAO,CAACtiB,MAHL,CAITsP,KAAK,CAAE6R,SAJE,CAAX,EAMD,CACF,CAbD,EAcA,MAAO9Q,MAAP,CACD,CAED;;;;;;GAOO,QAAS2T,WAAT,CAAoBzF,IAApB,CAA0BoC,QAA1B,CAAoCsD,UAApC,CAAgD,CACrD,GAAIzL,qDAAO,uNAAKmI,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAA2BmW,UAA3B,CAAX,CAAmD,CACjD,MAAO,KAAP,CACD,CACD,GAAI,CAAC1F,IAAI,CAACtP,QAAV,CAAoB,CAClB,MAAOsP,KAAP,CACD,CACD,OAAO,2MACFA,IADL,EAEEtP,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CAAcxJ,GAAd,CACR,SAAA5B,CAAC,QAAImgB,WAAU,CAACngB,CAAD,uNAAQ8c,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAA8BmW,UAA9B,CAAd,EADO,EAERrgB,MAFQ,CAEDwD,OAFC,CAFZ,GAMD,CAEM,QAAS8c,2BAAT,CAAoCrF,QAApC,CAA8CqB,YAA9C,CAA4D,CACjE,GAAIxK,OAAM,CAAG,IAAb,CACA,GAAImJ,QAAJ,CAAc,CACZA,QAAQ,CAACpQ,IAAT,CAAclO,OAAd,CAAsB,SAAC4jB,GAAD,CAAS,CAC7B,GAAMC,cAAa,CAAG,CAACD,GAAG,CAACrW,IAAL,CAAtB,CACA,GAAMgD,OAAM,CAAGkN,YAAY,CAACmG,GAAD,CAA3B,CACAE,mDAAK,CAACvT,MAAD,CAAL,CAAcvQ,OAAd,CAAsB,SAACI,CAAD,CAAO,CAC3B,GAAM2jB,WAAU,CAAG3jB,CAAC,CAAG,CAAvB,CACA,GAAM4jB,eAAc,CAAG7D,8BAA8B,CAACyD,GAAD,CAAMG,UAAN,CAAkB,EAAlB,CAAsB,IAAtB,CAArD,CACA,GAAI9L,qDAAO,CAAC+L,cAAD,CAAiBrE,YAAjB,CAAX,CAA2C,CACzCxK,MAAM,CAAG,CAAE0O,aAAa,CAAbA,aAAF,CAAiBE,UAAU,CAAVA,UAAjB,CAAT,CACD,CACF,CAND,EAOD,CAVD,EAWD,CACD,MAAO5O,OAAP,CACD,CAEM,QAAS8O,cAAT,CAAuBhV,QAAvB,CAAiCiV,YAAjC,CAA+C,CACpD,GAAMC,MAAK,CAAG,EAAd,CACA,GAAMC,UAAS,CAAG,EAAlB,CACA,GAAIC,YAAW,CAAG,KAAlB,CAEA,QAASC,SAAT,CAAkBtG,IAAlB,CAAwBoC,QAAxB,CAAkC,CAChC+D,KAAK,CAAC9jB,IAAN,uNAAe+f,QAAf,GAAyBpC,IAAI,CAACzQ,IAA9B,IACA,GAAIyQ,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAc1O,OAAd,CAAsB,SAAAsD,CAAC,QAAIghB,SAAQ,CAAChhB,CAAD,uNAAQ8c,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAAZ,EAAvB,EACD,CACF,CACD0B,QAAQ,CAACf,IAAT,CAAclO,OAAd,CAAsB,SAAA4jB,GAAG,QAAIU,SAAQ,CAACV,GAAD,CAAM,EAAN,CAAZ,EAAzB,EAEA,QAASW,aAAT,CAAsBvG,IAAtB,CAA4BoC,QAA5B,CAAsC,CACpCgE,SAAS,CAAC/jB,IAAV,uNAAmB+f,QAAnB,GAA6BpC,IAAI,CAACzQ,IAAlC,IACA,GAAIyQ,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAc1O,OAAd,CAAsB,SAAAsD,CAAC,QAAIghB,SAAQ,CAAChhB,CAAD,uNAAQ8c,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAAZ,EAAvB,EACD,CACF,CACD2W,YAAY,CAAChW,IAAb,CAAkBlO,OAAlB,CAA0B,SAAA4jB,GAAG,QAAIW,aAAY,CAACX,GAAD,CAAM,EAAN,CAAhB,EAA7B,EAEAQ,SAAS,CAACpkB,OAAV,CAAkB,SAACgY,QAAD,CAAc,CAC9B,GAAImM,KAAK,CAAC9W,IAAN,CAAW,SAAAoU,CAAC,QAAIxJ,sDAAO,CAACwJ,CAAD,CAAIzJ,QAAJ,CAAX,EAAZ,CAAJ,CAA2C,CACzCqM,WAAW,CAAG,IAAd,CACD,CACF,CAJD,EAKA,MAAOA,YAAP,CACD,CAEM,QAASG,uBAAT,CAAgCvV,QAAhC,CAA0CtB,YAA1C,CAAwD,CAC7D,GAAM8W,iBAAgB,6MAAQ9W,YAAY,EAAI,EAAxB,CAAtB,CACA,GAAM+W,yBAAwB,CAAGzV,QAAQ,CAACf,IAAT,CAAchJ,GAAd,CAAkB,SAAAgJ,IAAI,QAAIpN,MAAK,CAC7D0e,IADwD,CACnD,CACJ/f,MAAM,CAAEge,YAAY,CAACvP,IAAD,CAAZ,CAAqB,CAAG;AAD5B,CADmD,EAGtDyW,IAHsD,CAGjD,CAHiD,CAAJ,EAAtB,CAAjC,CAKA,QAASC,YAAT,CAAqB5G,IAArB,CAA2BoC,QAA3B,CAAqCyE,cAArC,CAAqDC,SAArD,CAAgE,CAC9D,GAAMC,MAAK,CAAGL,wBAAwB,CAACI,SAAD,CAAxB,CAAoCD,cAApC,CAAd,CACA,GAAMrE,SAAQ,uNAAOJ,QAAP,GAAiBpC,IAAI,CAACzQ,IAAtB,EAAd,CAEA,GAAMqT,UAAS,CAAG6D,gBAAgB,CAACpX,IAAjB,CAAsB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAAS0R,QAAT,CAAX,EAAvB,CAAlB,CACA,GAAI,CAACI,SAAL,CAAgB,CACd;AACA;AACA,GAAMoE,eAAc,CAAIhH,IAAI,CAACjP,KAAL,CAAaiP,IAAI,CAACjP,KAAlB,CAA0BvD,uDAAO,CAACuZ,KAAK,CAAGvZ,uDAAO,CAAC/L,MAAjB,CAAzD,CACAglB,gBAAgB,CAACpkB,IAAjB,CAAsB,CACpByO,IAAI,CAAE0R,QADc,CAEpBzR,KAAK,CAAEiW,cAFa,CAAtB,EAID,CACDN,wBAAwB,CAACI,SAAD,CAAxB,CAAoCD,cAApC,GAAuD,CAAvD,CACA,GAAI7G,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAc1O,OAAd,CAAsB,SAAAsD,CAAC,QAAIshB,YAAW,CAACthB,CAAD,CAAIkd,QAAJ,CAAcqE,cAAc,CAAG,CAA/B,CAAkCC,SAAlC,CAAf,EAAvB,EACD,CACF,CAED7V,QAAQ,CAACf,IAAT,CAAclO,OAAd,CAAsB,SAAC4jB,GAAD,CAAMkB,SAAN,QAAoBF,YAAW,CAAChB,GAAD,CAAM,EAAN,CAAU,CAAV,CAAakB,SAAb,CAA/B,EAAtB,EACA,MAAOL,iBAAP,CACD,CAEM,QAASQ,mBAAT,CAA4BC,MAA5B,CAAoC,IAEvC/a,MAFuC,CAQrC+a,MARqC,CAEvC/a,KAFuC,CAGvCqY,OAHuC,CAQrC0C,MARqC,CAGvC1C,OAHuC,CAIvCvT,QAJuC,CAQrCiW,MARqC,CAIvCjW,QAJuC,CAKvCkW,gBALuC,CAQrCD,MARqC,CAKvCC,gBALuC,CAMvCxX,YANuC,CAQrCuX,MARqC,CAMvCvX,YANuC,CAOvCpC,KAPuC,CAQrC2Z,MARqC,CAOvC3Z,KAPuC,CASzC,GAAI4Z,gBAAgB,EAAIA,gBAAgB,CAAC1lB,MAAjB,CAA0B,CAA9C,EAAmDwP,QAAnD,EAA+D9E,KAAnE,CAA0E,CACxE,MAAOoY,6BAA4B,CACjCtT,QADiC,CACvB9E,KADuB,CAChBqY,OADgB,CACP2C,gBADO,CACWxX,YADX,CACyBpC,KADzB,CAAnC,CAGD,CACD,MAAO,EAAP,CACD,C;;;;;;;;AC1oBD;AAAA;AAAA;AAAA;AACA;AACO,GAAM6Z,eAAc,CAAG,CAC5B,QAD4B,CAE5B,SAF4B,CAG5B,KAH4B,CAAvB,CAKA,GAAMC,sBAAqB,CAAG,QAA9B,CACA,GAAMC,4BAA2B,CAAG,eAApC,C;;;;;;;;;;;;gDCNP;;;;GAKO,GAAMC,4BAA2B,0PACrC7qB,mEAAgB,CAACE,QADoB,CACT,MADS,iOAErCF,mEAAgB,CAACG,YAFoB,CAEL,MAFK,iOAGrCH,mEAAgB,CAACI,kBAHoB,CAGC,YAHD,iOAIrCJ,mEAAgB,CAACM,cAJoB,CAIH,IAJG,iOAKrCN,mEAAgB,CAACO,kBALoB,CAKC,CALD,iOAMrCP,mEAAgB,CAACQ,kBANoB,CAMC,IAND,iOAOrCR,mEAAgB,CAACS,kBAPoB,CAOC,IAPD,iOAQrCT,mEAAgB,CAACU,kBARoB,CAQC,CARD,iOASrCV,mEAAgB,CAACW,kCAToB,CASiB,KATjB,iOAUrCX,mEAAgB,CAACY,gCAVoB,CAUe,KAVf,iOAWrCZ,mEAAgB,CAACa,4BAXoB,CAWW,EAXX,iOAYrCb,mEAAgB,CAACc,oBAZoB,CAYG,CAZH,iOAarCd,mEAAgB,CAACe,yBAboB,CAaQ,MAbR,iOAcrCf,mEAAgB,CAACgB,qBAdoB,CAcI,CAdJ,iOAerChB,mEAAgB,CAACiB,0BAfoB,CAeS,MAfT,iOAgBrCjB,mEAAgB,CAACkB,YAhBoB,CAgBL,IAhBK,iOAiBrClB,mEAAgB,CAACmB,gBAjBoB,CAiBD,CAjBC,iOAkBrCnB,mEAAgB,CAACoB,gBAlBoB,CAkBD,IAlBC,iOAmBrCpB,mEAAgB,CAACqB,gBAnBoB,CAmBD,IAnBC,iOAoBrCrB,mEAAgB,CAACsB,gBApBoB,CAoBD,IApBC,iOAqBrCtB,mEAAgB,CAACuB,kBArBoB,CAqBC,IArBD,iOAsBrCvB,mEAAgB,CAACwB,kBAtBoB,CAsBC,IAtBD,iOAuBrCxB,mEAAgB,CAACyB,kBAvBoB,CAuBC,IAvBD,iOAwBrCzB,mEAAgB,CAAC4B,kBAxBoB,CAwBC,KAxBD,iOAyBrC5B,mEAAgB,CAAC0B,sBAzBoB,CAyBK,CAzBL,iOA0BrC1B,mEAAgB,CAAC2B,kBA1BoB,CA0BC,GA1BD,iOA2BrC3B,mEAAgB,CAAC6C,mBA3BoB,CA2BE,IA3BF,iOA4BrC7C,mEAAgB,CAAC8C,0BA5BoB,CA4BS,IA5BT,iOA6BrC9C,mEAAgB,CAAC+C,mBA7BoB,CA6BE,IA7BF,iOA8BrC/C,mEAAgB,CAACgD,0BA9BoB,CA8BS,IA9BT,iOA+BrChD,mEAAgB,CAAC6B,cA/BoB,CA+BH,CA/BG,iOAgCrC7B,mEAAgB,CAAC8B,cAhCoB,CAgCH,CAhCG,iOAiCrC9B,mEAAgB,CAAC+B,gBAjCoB,CAiCD,CAjCC,iOAkCrC/B,mEAAgB,CAACgC,gBAlCoB,CAkCD,CAlCC,iOAmCrChC,mEAAgB,CAACyC,sBAnCoB,CAmCK,QAnCL,iOAoCrCzC,mEAAgB,CAAC2C,4BApCoB,CAoCW,CAAC,GAAD,CAAM,GAAN,CApCX,iOAqCrC3C,mEAAgB,CAAC0C,uBArCoB,CAqCM,IArCN,iOAsCrC1C,mEAAgB,CAACyD,mCAtCoB,CAsCkB,CAtClB,iOAuCrCzD,mEAAgB,CAACsC,cAvCoB,CAuCH,IAvCG,iOAwCrCtC,mEAAgB,CAACuC,iBAxCoB,CAwCA,IAxCA,iOAyCrCvC,mEAAgB,CAACwC,iBAzCoB,CAyCA,IAzCA,iOA0CrCxC,mEAAgB,CAACiC,UA1CoB,CA0CP,IA1CO,iOA2CrCjC,mEAAgB,CAACkC,aA3CoB,CA2CJ,IA3CI,iOA4CrClC,mEAAgB,CAACmC,iBA5CoB,CA4CA,IA5CA,iOA6CrCnC,mEAAgB,CAACoC,iBA7CoB,CA6CA,IA7CA,iOA8CrCpC,mEAAgB,CAACqC,aA9CoB,CA8CJ,IA9CI,iOA+CrCrC,mEAAgB,CAAC4C,kBA/CoB,CA+CC,kBA/CD,iOAgDrC5C,mEAAgB,CAACiD,cAhDoB,CAgDH,CAhDG,iOAiDrCjD,mEAAgB,CAACkD,cAjDoB,CAiDH,CAjDG,iOAkDrClD,mEAAgB,CAACmD,gBAlDoB,CAkDD,YAlDC,iOAmDrCnD,mEAAgB,CAACoD,gBAnDoB,CAmDD,YAnDC,iOAoDrCpD,mEAAgB,CAACqD,mBApDoB,CAoDE,IApDF,iOAqDrCrD,mEAAgB,CAACsD,kBArDoB,CAqDC,IArDD,iOAsDrCtD,mEAAgB,CAACuD,0BAtDoB,CAsDS,IAtDT,iOAuDrCvD,mEAAgB,CAACwD,0BAvDoB,CAuDS,IAvDT,wBAAjC,CA0DP;AACA;AACA;AACA;AACA;AACA;AACO,GAAMsnB,oCAAmC,CAAG,CACjD9qB,mEAAgB,CAAC6B,cADgC,CAEjD7B,mEAAgB,CAAC8B,cAFgC,CAGjD9B,mEAAgB,CAAC+B,gBAHgC,CAIjD/B,mEAAgB,CAACgC,gBAJgC,CAKjDhC,mEAAgB,CAACM,cALgC,CAMjDN,mEAAgB,CAACQ,kBANgC,CAOjDR,mEAAgB,CAACS,kBAPgC,CAQjDT,mEAAgB,CAACU,kBARgC,CASjDV,mEAAgB,CAACW,kCATgC,CAUjDX,mEAAgB,CAACY,gCAVgC,CAWjDZ,mEAAgB,CAACa,4BAXgC,CAYjDb,mEAAgB,CAACc,oBAZgC,CAajDd,mEAAgB,CAACgB,qBAbgC,CAA5C,CAgBP;;;;;;;KAQO,GAAM+pB,6BAA4B,0PACtCjtB,4DAAS,CAACK,WAD4B,CACd,CACvB6B,mEAAgB,CAACC,OADM,CAEvBD,mEAAgB,CAACE,QAFM,CAGvBF,mEAAgB,CAACG,YAHM,CAIvBH,mEAAgB,CAACI,kBAJM,CAKvBJ,mEAAgB,CAACK,cALM,CAMvBL,mEAAgB,CAACM,cANM,CAOvBN,mEAAgB,CAACO,kBAPM,CAQvBP,mEAAgB,CAACQ,kBARM,CASvBR,mEAAgB,CAACS,kBATM,CAUvBT,mEAAgB,CAACU,kBAVM,CAWvBV,mEAAgB,CAACW,kCAXM,CAYvBX,mEAAgB,CAACY,gCAZM,CAavBZ,mEAAgB,CAACa,4BAbM,CAcvBb,mEAAgB,CAACc,oBAdM,CAevBd,mEAAgB,CAACe,yBAfM,CAgBvBf,mEAAgB,CAACgB,qBAhBM,CAiBvBhB,mEAAgB,CAACiB,0BAjBM,CAkBvBjB,mEAAgB,CAACiC,UAlBM,CAmBvBjC,mEAAgB,CAACkC,aAnBM,CAoBvBlC,mEAAgB,CAACmC,iBApBM,CAqBvBnC,mEAAgB,CAACoC,iBArBM,CAsBvBpC,mEAAgB,CAACqC,aAtBM,CAuBvBrC,mEAAgB,CAACuC,iBAvBM,CAwBvBvC,mEAAgB,CAACwC,iBAxBM,CAyBvBxC,mEAAgB,CAACyC,sBAzBM,CA0BvBzC,mEAAgB,CAAC2C,4BA1BM,CA2BvB3C,mEAAgB,CAAC4C,kBA3BM,CA4BvB5C,mEAAgB,CAACqD,mBA5BM,CADc,iOA+BtCvF,4DAAS,CAACa,MA/B4B,CA+BnB,CAClBqB,mEAAgB,CAACC,OADC,CAElBD,mEAAgB,CAACE,QAFC,CAGlBF,mEAAgB,CAACG,YAHC,CAIlBH,mEAAgB,CAACI,kBAJC,CAKlBJ,mEAAgB,CAACK,cALC,CAMlBL,mEAAgB,CAACM,cANC,CAOlBN,mEAAgB,CAACO,kBAPC,CAQlBP,mEAAgB,CAACQ,kBARC,CASlBR,mEAAgB,CAACS,kBATC,CAUlBT,mEAAgB,CAACU,kBAVC,CAWlBV,mEAAgB,CAACW,kCAXC,CAYlBX,mEAAgB,CAACY,gCAZC,CAalBZ,mEAAgB,CAACa,4BAbC,CAclBb,mEAAgB,CAACc,oBAdC,CAelBd,mEAAgB,CAACe,yBAfC,CAgBlBf,mEAAgB,CAACgB,qBAhBC,CAiBlBhB,mEAAgB,CAACiB,0BAjBC,CAkBlBjB,mEAAgB,CAACiC,UAlBC,CAmBlBjC,mEAAgB,CAACkC,aAnBC,CAoBlBlC,mEAAgB,CAACmC,iBApBC,CAqBlBnC,mEAAgB,CAACoC,iBArBC,CAsBlBpC,mEAAgB,CAACqC,aAtBC,CAuBlBrC,mEAAgB,CAACuC,iBAvBC,CAwBlBvC,mEAAgB,CAACwC,iBAxBC,CAyBlBxC,mEAAgB,CAACyC,sBAzBC,CA0BlBzC,mEAAgB,CAAC2C,4BA1BC,CA2BlB3C,mEAAgB,CAAC4C,kBA3BC,CA4BlB5C,mEAAgB,CAACqD,mBA5BC,CA6BlBrD,mEAAgB,CAAC0C,uBA7BC,CA8BlB1C,mEAAgB,CAACyD,mCA9BC,CA+BlBzD,mEAAgB,CAACuD,0BA/BC,CAgClBvD,mEAAgB,CAACwD,0BAhCC,CA/BmB,iOAiEtC1F,4DAAS,CAACM,OAjE4B,CAiElB,CACnB4B,mEAAgB,CAACC,OADE,CAEnBD,mEAAgB,CAACE,QAFE,CAGnBF,mEAAgB,CAACG,YAHE,CAInBH,mEAAgB,CAACI,kBAJE,CAKnBJ,mEAAgB,CAACkB,YALE,CAMnBlB,mEAAgB,CAACmB,gBANE,CAOnBnB,mEAAgB,CAAC6C,mBAPE,CAQnB7C,mEAAgB,CAAC8C,0BARE,CASnB9C,mEAAgB,CAAC+C,mBATE,CAUnB/C,mEAAgB,CAACgD,0BAVE,CAWnBhD,mEAAgB,CAACoB,gBAXE,CAYnBpB,mEAAgB,CAACqB,gBAZE,CAanBrB,mEAAgB,CAACsB,gBAbE,CAcnBtB,mEAAgB,CAACuB,kBAdE,CAenBvB,mEAAgB,CAACwB,kBAfE,CAgBnBxB,mEAAgB,CAACyB,kBAhBE,CAiBnBzB,mEAAgB,CAAC0B,sBAjBE,CAkBnB1B,mEAAgB,CAAC2B,kBAlBE,CAmBnB3B,mEAAgB,CAAC4B,kBAnBE,CAoBnB5B,mEAAgB,CAACiC,UApBE,CAqBnBjC,mEAAgB,CAACkC,aArBE,CAsBnBlC,mEAAgB,CAACmC,iBAtBE,CAuBnBnC,mEAAgB,CAACoC,iBAvBE,CAwBnBpC,mEAAgB,CAACqC,aAxBE,CAyBnBrC,mEAAgB,CAACuC,iBAzBE,CA0BnBvC,mEAAgB,CAACwC,iBA1BE,CA2BnBxC,mEAAgB,CAACyC,sBA3BE,CA4BnBzC,mEAAgB,CAAC2C,4BA5BE,CA6BnB3C,mEAAgB,CAAC4C,kBA7BE,CA8BnB5C,mEAAgB,CAACqD,mBA9BE,CA+BnBrD,mEAAgB,CAACsD,kBA/BE,CAjEkB,iOAkGtCxF,4DAAS,CAACO,OAlG4B,CAkGlB,CACnB2B,mEAAgB,CAACC,OADE,CAEnBD,mEAAgB,CAACE,QAFE,CAGnBF,mEAAgB,CAACG,YAHE,CAInBH,mEAAgB,CAACI,kBAJE,CAKnBJ,mEAAgB,CAAC6B,cALE,CAMnB7B,mEAAgB,CAAC8B,cANE,CAOnB9B,mEAAgB,CAAC+B,gBAPE,CAQnB/B,mEAAgB,CAACgC,gBARE,CASnBhC,mEAAgB,CAACiC,UATE,CAUnBjC,mEAAgB,CAACkC,aAVE,CAWnBlC,mEAAgB,CAACmC,iBAXE,CAYnBnC,mEAAgB,CAACoC,iBAZE,CAanBpC,mEAAgB,CAACqC,aAbE,CAcnBrC,mEAAgB,CAACsC,cAdE,CAenBtC,mEAAgB,CAACuC,iBAfE,CAgBnBvC,mEAAgB,CAACwC,iBAhBE,CAiBnBxC,mEAAgB,CAACyC,sBAjBE,CAkBnBzC,mEAAgB,CAAC2C,4BAlBE,CAmBnB3C,mEAAgB,CAAC4C,kBAnBE,CAoBnB5C,mEAAgB,CAACqD,mBApBE,CAlGkB,iOAwHtCvF,4DAAS,CAACI,SAxH4B,CAwHhB,CACrB8B,mEAAgB,CAACC,OADI,CAErBD,mEAAgB,CAACE,QAFI,CAGrBF,mEAAgB,CAACmC,iBAHI,CAIrBnC,mEAAgB,CAACoC,iBAJI,CAKrBpC,mEAAgB,CAACqC,aALI,CAMrBrC,mEAAgB,CAAC4C,kBANI,CAOrB5C,mEAAgB,CAACqD,mBAPI,CAQrBrD,mEAAgB,CAACwC,iBARI,CAxHgB,iOAkItC1E,4DAAS,CAACS,cAlI4B,CAkIX,CAC1ByB,mEAAgB,CAACC,OADS,CAE1BD,mEAAgB,CAACE,QAFS,CAG1BF,mEAAgB,CAACmC,iBAHS,CAI1BnC,mEAAgB,CAACoC,iBAJS,CAK1BpC,mEAAgB,CAACqC,aALS,CAM1BrC,mEAAgB,CAACqD,mBANS,CAlIW,iOA0ItCvF,4DAAS,CAACE,MA1I4B,CA0InB,CAClBgC,mEAAgB,CAACC,OADC,CAElBD,mEAAgB,CAACkC,aAFC,CAGlBlC,mEAAgB,CAACuC,iBAHC,CAIlBvC,mEAAgB,CAACoC,iBAJC,CAKlBpC,mEAAgB,CAACsD,kBALC,CA1ImB,iOAiJtCxF,4DAAS,CAACG,KAjJ4B,CAiJpB,CACjB+B,mEAAgB,CAACC,OADA,CAEjBD,mEAAgB,CAACG,YAFA,CAGjBH,mEAAgB,CAACsC,cAHA,CAIjBtC,mEAAgB,CAACuC,iBAJA,CAKjBvC,mEAAgB,CAACwC,iBALA,CAMjBxC,mEAAgB,CAAC4C,kBANA,CAOjB5C,mEAAgB,CAACmC,iBAPA,CAjJoB,iOA0JtCrE,4DAAS,CAACW,mBA1J4B,CA0JN,CAC/BuB,mEAAgB,CAACC,OADc,CAE/BD,mEAAgB,CAACE,QAFc,CAG/BF,mEAAgB,CAACG,YAHc,CAI/BH,mEAAgB,CAACI,kBAJc,CAK/BJ,mEAAgB,CAACwC,iBALc,CAM/BxC,mEAAgB,CAAC0C,uBANc,CAO/B1C,mEAAgB,CAACyD,mCAPc,CAQ/BzD,mEAAgB,CAACmC,iBARc,CAS/BnC,mEAAgB,CAACoC,iBATc,CAU/BpC,mEAAgB,CAACqC,aAVc,CAW/BrC,mEAAgB,CAACqD,mBAXc,CA1JM,iOAuKtCvF,4DAAS,CAACY,oBAvK4B,CAuKL,CAChCsB,mEAAgB,CAACC,OADe,CAEhCD,mEAAgB,CAACE,QAFe,CAGhCF,mEAAgB,CAACG,YAHe,CAIhCH,mEAAgB,CAACI,kBAJe,CAKhCJ,mEAAgB,CAACwC,iBALe,CAvKK,iOA8KtC1E,4DAAS,CAACQ,gBA9K4B,CA8KT,CAC5B0B,mEAAgB,CAACC,OADW,CAE5BD,mEAAgB,CAACE,QAFW,CAG5BF,mEAAgB,CAACG,YAHW,CAI5BH,mEAAgB,CAACI,kBAJW,CAK5BJ,mEAAgB,CAAC6C,mBALW,CAM5B7C,mEAAgB,CAAC8C,0BANW,CAO5B9C,mEAAgB,CAAC+C,mBAPW,CAQ5B/C,mEAAgB,CAACgD,0BARW,CAS5BhD,mEAAgB,CAACkB,YATW,CAU5BlB,mEAAgB,CAACoB,gBAVW,CAW5BpB,mEAAgB,CAACqB,gBAXW,CAY5BrB,mEAAgB,CAACsB,gBAZW,CAa5BtB,mEAAgB,CAACuB,kBAbW,CAc5BvB,mEAAgB,CAACwB,kBAdW,CAe5BxB,mEAAgB,CAACyB,kBAfW,CAgB5BzB,mEAAgB,CAAC0B,sBAhBW,CAiB5B1B,mEAAgB,CAAC2B,kBAjBW,CA9KS,iOAiMtC7D,4DAAS,CAACU,gBAjM4B,CAiMT,CAC5BwB,mEAAgB,CAACC,OADW,CAE5BD,mEAAgB,CAACE,QAFW,CAG5BF,mEAAgB,CAACG,YAHW,CAI5BH,mEAAgB,CAACI,kBAJW,CAK5BJ,mEAAgB,CAACiD,cALW,CAM5BjD,mEAAgB,CAACkD,cANW,CAO5BlD,mEAAgB,CAACmD,gBAPW,CAQ5BnD,mEAAgB,CAACoD,gBARW,CAS5BpD,mEAAgB,CAACsC,cATW,CAU5BtC,mEAAgB,CAACuC,iBAVW,CAW5BvC,mEAAgB,CAACwC,iBAXW,CAY5BxC,mEAAgB,CAACmC,iBAZW,CAa5BnC,mEAAgB,CAACoC,iBAbW,CAc5BpC,mEAAgB,CAACqC,aAdW,CAe5BrC,mEAAgB,CAACqD,mBAfW,CAjMS,iOAkNtCvF,4DAAS,CAACC,WAlN4B,CAkNd,CACvBiC,mEAAgB,CAACC,OADM,CAEvBD,mEAAgB,CAAC6C,mBAFM,CAlNc,2OAsN9B,CACP7C,mEAAgB,CAACC,OADV,CAEPD,mEAAgB,CAACiD,cAFV,CAGPjD,mEAAgB,CAACkD,cAHV,CAIPlD,mEAAgB,CAACmD,gBAJV,CAKPnD,mEAAgB,CAACoD,gBALV,CAMPpD,mEAAgB,CAACsC,cANV,CAOPtC,mEAAgB,CAACuC,iBAPV,CAQPvC,mEAAgB,CAACwC,iBARV,CAtN8B,wBAAlC,C;;;;;;AC/FP,4C;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,GAAMwoB,iBAAgB,CAAG,kBAAzB,CACP,GAAMC,KAAI,+BAA0BD,gBAA1B,CAAV,CACO,GAAMrW,aAAY,WAAMsW,IAAN,eAAlB,CACA,GAAMC,eAAc,WAAMD,IAAN,iBAApB,CACA,GAAME,WAAU,WAAMF,IAAN,aAAhB,CACA,GAAMG,WAAU,CAAG,OAAnB,CACA,GAAMC,YAAW,WAAM1W,YAAN,WAAjB,CACA,GAAMqC,mBAAkB,CAAG,oBAA3B,C;;;;;;;ACPP;AAAe;AACf;AACA;AACA;AACA;AACA,C;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,GAAMsU,cAAa,CAAG,CAAC,GAAD,CAAM,GAAN,CAAtB,CAEA,GAAMC,2BAA0B,CAAG,SAAnC,CAEA,GAAMC,2BAA0B,CAAG,CACxCC,OAAO,CAAE,IAD+B,CAExCC,QAAQ,CAAE,IAF8B,CAGxCC,OAAO,CAAE,CAH+B,CAIxCC,UAAU,CAAEL,0BAJ4B,CAKxCM,gBAAgB,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CALsB,CAMxCC,aAAa,CAAEC,6DAAe,CAACC,QANS,CAOxCC,KAAK,CAAE,KAPiC,CAAnC,CAUA,GAAM1K,wBAAuB,CAAG,CACrCoK,OAAO,CAAE,CAD4B,CACzBO,MAAM,CAAE,EADiB,CACbT,OAAO,CAAE,IADI,CAAhC,CAGA,GAAMlM,oBAAmB,CAAG,CACjCoM,OAAO,CAAE,CADwB,CACrBO,MAAM,CAAE,EADa,CACTT,OAAO,CAAE,IADA,CACMxb,OAAO,CAAE,KADf,CAA5B,CAGA,GAAM2R,4BAA2B,CAAG,CACzC6J,OAAO,CAAE,KADgC,CAApC,CAIA,GAAMU,4BAA2B,CAAG,CACzC,WADyC,CAEzC,OAFyC,CAGzC,eAHyC,CAIzC,QAJyC,CAApC,C;;;;;;AC1BP,oC;;;;;;ACAA,4C;;;;;;;;;;ACAA;;;MAIqBrQ,oB,yBACnB,6BAAYzK,OAAZ,CAAqB,CAAC,mOACpB,KAAKA,OAAL,CAAeA,OAAf,CACD,CAED;8QACgB,CACd,KAAM,IAAI+a,MAAJ,CAAU,sDAAV,CAAN,CACD,C;;;;;;ACZH,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGe,QAASC,iBAAT,EAA4B,CACzC,mBACE,8CAAK,SAAS,CAAC,4BAAf,eACE,8CAAK,SAAS,CAAC,6BAAf,eACE,uCAAC,0BAAD,MADF,CADF,CADF,CAOD,C;;;;;;ACID,GAAMC,UAAS,CAAGC,6BAAU,CAAC,SAAA1b,KAAK,QAAK,CACrC2b,UAAU,CAAE,CACVC,MAAM,CAAE,MADE,CAEVC,UAAU,CAAE,CAFF,CAGVC,UAAU,CAAE,MAHF,CAIVtY,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcC,iBAJX,CAKVC,WAAW,CAAE,QALH,CAMVC,YAAY,CAAE,QANJ,CAOVC,YAAY,CAAE,KAPJ,CAQV,UAAW,CACTC,eAAe,CAAEpc,KAAK,CAAC+b,OAAN,CAAcM,sBADtB,CARD,CAWV,gBAAiB,CACfR,UAAU,CAAE,QADG,CAXP,CAcV,eAAgB,CACdS,WAAW,CAAE,QADC,CAdN,CAiBV,QAAS,CACPrX,KAAK,CAAE,OADA,CAEPD,MAAM,CAAE,OAFD,CAGPuX,aAAa,CAAE,QAHR,CAIPC,QAAQ,CAAE,SAJH,CAjBC,CADyB,CAyBrCC,YAAY,CAAE,CACZjZ,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcC,iBADT,CAzBuB,CAAL,EAAN,CAA5B,CA8BA,QAASU,sBAAT,MAAyC,IAARC,KAAQ,MAARA,IAAQ,CACvC,mBACE,2FACE,uCAAC,kBAAD,MADF,CAEGA,IAAI,cAAG,uCAAC,qBAAD,MAAH,cAAyB,uCAAC,uBAAD,MAFhC,CADF,CAMD,CAED,QAASC,YAAT,CAAqBhZ,KAArB,CAA4B,IAClBiZ,QADkB,CACNjZ,KADM,CAClBiZ,OADkB,eAEFxW,mCAAQ,CAAC,KAAD,CAFN,kEAEnBsW,IAFmB,eAEbG,OAFa,eAG1B,GAAMC,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,gCAAD,EACE,IAAI,CAAEkB,IADR,CAEE,OAAO,CAAEG,OAFX,CAGE,UAAU,cAAE,uCAAC,qBAAD,EAAuB,IAAI,CAAEH,IAA7B,EAHd,CAIE,eAAe,CAAEI,OAAO,CAACpB,UAJ3B,CAKE,SAAS,CAAC,YALZ,EAOGkB,OAPH,CADF,CAWD,CAED,QAASG,2BAAT,OAA8C,IAARL,KAAQ,OAARA,IAAQ,CAC5C,mBACE,2FACE,uCAAC,uBAAD,MADF,CAEGA,IAAI,cAAG,uCAAC,qBAAD,MAAH,cAAyB,uCAAC,uBAAD,MAFhC,CADF,CAMD,CAED,QAASM,gBAAT,CAAyBrZ,KAAzB,CAAgC,IACtBiF,KADsB,CACbjF,KADa,CACtBiF,IADsB,gBAENxC,mCAAQ,CAAC,KAAD,CAFF,mEAEvBsW,IAFuB,eAEjBG,OAFiB,eAG9B,GAAMC,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,gCAAD,EACE,IAAI,CAAEkB,IADR,CAEE,OAAO,CAAEG,OAFX,CAGE,UAAU,cAAE,uCAAC,0BAAD,EAA4B,IAAI,CAAEH,IAAlC,EAHd,CAIE,eAAe,CAAEI,OAAO,CAACpB,UAJ3B,CAKE,SAAS,CAAC,YALZ,EAOG9S,IAAI,CAAClP,GAAL,CAAS,mBAAGqP,IAAH,OAAGA,GAAH,CAAQhH,IAAR,OAAQA,IAAR,oBACR,uCAAC,kBAAD,EAAU,KAAK,KAAf,CAAgB,GAAG,CAAEgH,GAArB,eACE,uCAAC,cAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,IAAI,CAAEA,GAA7B,CAAkC,MAAM,CAAC,QAAzC,CAAkD,GAAG,CAAC,UAAtD,CAAiE,SAAS,CAAE+T,OAAO,CAACN,YAApF,cACYza,IADZ,CADF,CADQ,EAAT,CAPH,CADF,CAiBD,CAED,QAASkb,gBAAT,CAAyBtZ,KAAzB,CAAgC,IACtBuZ,oBADsB,CACEvZ,KADF,CACtBuZ,mBADsB,CAE9B,GAAMJ,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,oBAAD,EACE,OAAO,CAAE0B,mBADX,CAEE,IAAI,CAAC,OAFP,CAGE,SAAS,CAAEJ,OAAO,CAACpB,UAHrB,CAIE,KAAK,CAAC,OAJR,eAME,uCAAC,eAAD,MANF,CADF,CAUD,CAEc,QAASyB,UAAT,CAAmBxZ,KAAnB,CAA0B,IAErCC,MAFqC,CAInCD,KAJmC,CAErCC,KAFqC,CAE9BrE,IAF8B,CAInCoE,KAJmC,CAE9BpE,IAF8B,CAExB2D,QAFwB,CAInCS,KAJmC,CAExBT,QAFwB,CAEdka,QAFc,CAInCzZ,KAJmC,CAEdyZ,QAFc,CAEJC,SAFI,CAInC1Z,KAJmC,CAEJ0Z,SAFI,CAEOH,mBAFP,CAInCvZ,KAJmC,CAEOuZ,mBAFP,CAE4BtU,IAF5B,CAInCjF,KAJmC,CAE4BiF,IAF5B,CAGrCF,OAHqC,CAInC/E,KAJmC,CAGrC+E,OAHqC,CAG5BkU,OAH4B,CAInCjZ,KAJmC,CAG5BiZ,OAH4B,CAKvC;AACA,GAAMU,eAAc,CAAGF,QAAQ,CAAG7C,iCAAH,CAAkB8C,SAAS,CAAGhD,gCAAH,CAAgBD,oCAA1E,CACA,oBACE;AACA,2FACE,8CAAK,SAAS,CAAC,OAAf,eACE,8CAAK,SAAS,CAAC,YAAf,EACGxW,KADH,CADF,cAIE,8CAAK,SAAS,CAAC,YAAf,CAA4B,KAAK,CAAErE,IAAnC,EACGA,IADH,CAJF,cAOE,8CAAK,SAAS,CAAC,eAAf,EACIqd,OAAO,eACP,uCAAC,WAAD,EACE,OAAO,CAAEA,OADX,EAFJ,CAMGhU,IAAI,EAAIA,IAAI,CAAC3U,MAAL,CAAc,CAAtB,eACC,uCAAC,eAAD,EACE,IAAI,CAAE2U,IADR,EAPJ,cAWE,uCAAC,eAAD,EACE,mBAAmB,CAAEsU,mBADvB,EAXF,CAPF,CADF,cAwBE,8CAAK,SAAS,CAAEI,cAAhB,EACI,CAAC5U,OAAD,eAAY,uCAAC,gBAAD,MADhB,CAEGxF,QAFH,CAxBF,CA6BA;AA/BF,EAiCD,C;;;;;;;AC9JD;AAAe;AACf;;AAEA,wCAAwC,SAAS;AACjD;AACA;;AAEA;AACA,C;;;;;;ACRA,4C;;;;;;ACAA,uD;;;;;;;ACAA;AAAA;AAAkD;AACnC;AACf;AACA,oCAAoC,yEAAgB;AACpD;AACA;AACA;AACA,sFAAsF,yEAAgB;AACtG,C;;;;;;;;;;;;;;;;;;;;;;;;0BCNA;;;;GAKO,GAAMqa,4BAA2B,2FACrCnvB,6BAAQ,CAACC,UAD4B,CACfP,6BAAQ,CAACC,KADM,kEAErCK,6BAAQ,CAACE,cAF4B,CAEXR,6BAAQ,CAACV,SAFE,kEAGrCgB,6BAAQ,CAACG,sBAH4B,CAGHT,6BAAQ,CAACE,iBAHN,kEAIrCI,6BAAQ,CAACI,qBAJ4B,CAIJV,6BAAQ,CAACJ,gBAJL,kEAKrCU,6BAAQ,CAACK,cAL4B,CAKXX,6BAAQ,CAACG,SALE,kEAMrCG,6BAAQ,CAACM,kBAN4B,CAMPZ,6BAAQ,CAACI,aANF,kEAOrCE,6BAAQ,CAACO,WAP4B,CAOdb,6BAAQ,CAACK,MAPK,kEAQrCC,6BAAQ,CAACQ,eAR4B,CAQVd,6BAAQ,CAACK,MARC,kEASrCC,6BAAQ,CAACS,aAT4B,CASZf,6BAAQ,CAACE,iBATG,kEAUrCI,6BAAQ,CAACU,UAV4B,CAUfhB,6BAAQ,CAACE,iBAVM,kEAWrCI,6BAAQ,CAACW,sBAX4B,CAWHjB,6BAAQ,CAACV,SAXN,kEAYrCgB,6BAAQ,CAACY,kBAZ4B,CAYPlB,6BAAQ,CAACC,KAZF,kEAarCK,6BAAQ,CAACa,8BAb4B,CAaKnB,6BAAQ,CAACE,iBAbd,wBAAjC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACCP,GAAMwvB,YAAW,CAAG,sBAApB,CACA,GAAMC,sBAAqB,CAAG,WAA9B,CACA,GAAMC,8BAA6B,CAAG,mBAAtC,CACA,GAAMC,uCAAsC,CAAG,0BAA/C,CACA,GAAMC,sBAAqB,CAAG,WAA9B,CACA,GAAMC,uCAAsC,CAAG,yBAA/C,CACA,GAAMC,kCAAiC,CAAG,sBAA1C,CAEAvY,MAAM,CAACiY,WAAD,CAAN,CAAsB,EAAtB,CACA,GAAMO,QAAO,CAAGxY,MAAM,CAACiY,WAAD,CAAtB,CAEA;AACAO,OAAO,CAACN,qBAAD,CAAP,CAAiCM,OAAO,CAACN,qBAAD,CAAP,EAAkC,EAAnE,CACAM,OAAO,CAACL,6BAAD,CAAP,CAAyCK,OAAO,CAACL,6BAAD,CAAP,EAA0C,EAAnF,CACAK,OAAO,CAACJ,sCAAD,CAAP,CACEI,OAAO,CAACJ,sCAAD,CAAP,EAAmD,EADrD,CAGAI,OAAO,CAACH,qBAAD,CAAP,CAAiCG,OAAO,CAACH,qBAAD,CAAP,EAAkC,EAAnE,CACAG,OAAO,CAACF,sCAAD,CAAP,CACEE,OAAO,CAACF,sCAAD,CAAP,EAAmD,EADrD,CAGAE,OAAO,CAACD,iCAAD,CAAP,CAA6CC,OAAO,CAACD,iCAAD,CAAP,EAA8C,EAA3F,CAEA;;;;GAKO,QAASE,+BAAT,CAAwCC,QAAxC,CAAkDC,YAAlD,CAAgE,CACrEH,OAAO,CAACL,6BAAD,CAAP,CAAuCO,QAAvC,EAAmDC,YAAnD,CACD,CAED;;;;;GAMO,QAASC,uBAAT,CAAgCC,QAAhC,CAA0CC,4BAA1C,CAAwEC,iBAAxE,CAA2F,CAChGP,OAAO,CAACN,qBAAD,CAAP,CAA+BW,QAA/B,EAA2CC,4BAA3C,CACA;AACA,GAAME,mBAAkB,CAAGR,OAAO,CAACJ,sCAAD,CAAlC,CACA,GAAIroB,KAAK,CAACC,OAAN,CAAcgpB,kBAAkB,CAACH,QAAD,CAAhC,CAAJ,CAAiD,CAC/CE,iBAAiB,CAAC9pB,OAAlB,CAA0B,SAAC2G,gBAAD,CAAsB,CAC9C,GAAI,CAACojB,kBAAkB,CAACH,QAAD,CAAlB,CAA6BppB,QAA7B,CAAsCmG,gBAAtC,CAAL,CAA8D,CAC5DojB,kBAAkB,CAACH,QAAD,CAAlB,CAA6BvpB,IAA7B,CAAkCsG,gBAAlC,EACD,CACF,CAJD,EAKD,CAND,IAMO,CACLojB,kBAAkB,CAACH,QAAD,CAAlB,CAA+BE,iBAA/B,CACD,CACF,CAED;;;;;;GAOO,QAASE,uBAAT,CACL;AACAC,YAFK,CAESC,YAFT,CAEuBC,eAFvB,CAEwCC,eAFxC,CAGL,CACAb,OAAO,CAACH,qBAAD,CAAP,CAA+Ba,YAA/B,EAA+C,CAACG,eAAD,CAAkBD,eAAlB,CAA/C,CACAZ,OAAO,CAACF,sCAAD,CAAP,CAAgDY,YAAhD,EAAgEC,YAAhE,CACD,CAED;;;;;;GAOO,QAASG,kCAAT,CACL;AACAJ,YAFK,CAESK,iBAFT,CAGL,CACAf,OAAO,CAACD,iCAAD,CAAP,CAA2CW,YAA3C,EAA2DK,iBAA3D,CACD,CAGD;AAEO,QAASC,mBAAT,EAA8B,CACnC,MAAO7rB,OAAM,CAAC+H,IAAP,CAAY8iB,OAAO,CAACN,qBAAD,CAAnB,CAAP,CACD,CAEM,QAASuB,kBAAT,CAA2BZ,QAA3B,CAAqC,CAC1C,MAAOL,QAAO,CAACN,qBAAD,CAAP,CAA+BW,QAA/B,CAAP,CACD,CAEM,QAASa,2BAAT,EAAsC,CAC3C,MAAO/rB,OAAM,CAAC+H,IAAP,CAAY8iB,OAAO,CAACL,6BAAD,CAAnB,CAAP,CACD,CAEM,QAASwB,kCAAT,EAA6C,CAClD,MAAOnB,QAAO,CAACL,6BAAD,CAAd,CACD,CAEM,QAASyB,sCAAT,CAA+Cf,QAA/C,CAAyD,CAC9D,GAAI9oB,KAAK,CAACC,OAAN,CAAcwoB,OAAO,CAACJ,sCAAD,CAAP,CAAgDS,QAAhD,CAAd,CAAJ,CAA8E,CAC5E,MAAOL,QAAO,CAACJ,sCAAD,CAAP,CAAgDS,QAAhD,CAAP,CACD,CACD,MAAO,EAAP,CACD,CAEM,QAASgB,mBAAT,EAA8B,CACnC,MAAOlsB,OAAM,CAAC+H,IAAP,CAAY8iB,OAAO,CAACH,qBAAD,CAAnB,CAAP,CACD,CACM,QAASyB,8BAAT,EAAyC,CAC9C,MAAOnsB,OAAM,CAAC+H,IAAP,CAAY8iB,OAAO,CAACD,iCAAD,CAAnB,CAAP,CACD,CAEM,QAASwB,6BAAT,CAAsCC,QAAtC,CAAgD,CACrD,MAAOxB,QAAO,CAACF,sCAAD,CAAP,CAAgD0B,QAAhD,CAAP,CACD,CACM,QAASC,kCAAT,CAA2CD,QAA3C,CAAqD,CAC1D,MAAOxB,QAAO,CAACH,qBAAD,CAAP,CAA+B2B,QAA/B,CAAP,CACD,CACM,QAASE,iDAAT,CAA0DF,QAA1D,CAAoE,CACzE,MAAOxB,QAAO,CAACD,iCAAD,CAAP,CAA2CyB,QAA3C,CAAP,CACD,CAED;AACO,QAASG,aAAT,EAAwB,CAC7B,6DACKxsB,MAAM,CAACuG,MAAP,CAAcrL,6BAAd,CADL,+CAEKgxB,kBAAkB,EAFvB,GAID,CAEM,QAASO,qBAAT,EAAgC,CACrC,6DACKzsB,MAAM,CAACuG,MAAP,CAAcvK,qCAAd,CADL,+CAEK+vB,0BAA0B,EAF/B,GAID,CAED;AACA;AACO,QAAS/R,6BAAT,EAAwC,CAC7C,OAAO,4CACF6M,mDADL,IAEKmF,iCAAiC,EAFtC,EAID,CAED;AACA;AACO,QAASU,8BAAT,EAAyC,CAC9C,OAAO,4CACF3F,oDADL,IAEKrnB,oCAAW,CAACmsB,kBAAkB,GAAGrlB,GAArB,CAAyB,SAAA0kB,QAAQ,QAAK,CACnDA,QADmD,CAEnDe,qCAAqC,CAACf,QAAD,CAFc,CAAL,EAAjC,CAAD,CAFhB,EAOD,CAEM,QAASyB,2BAAT,EAAsC,CAC3C,OAAO,4CACFtC,2BADL,IAEK3qB,oCAAW,CAACwsB,kBAAkB,GAAG1lB,GAArB,CAAyB,SAAA6lB,QAAQ,QAAK,CACnDA,QADmD,CAEnDD,4BAA4B,CAACC,QAAD,CAFuB,CAAL,EAAjC,CAAD,CAFhB,EAOD,CAEM,QAASO,wBAAT,EAAmC,CACxC,OAAO,4CAEF/B,OAAO,CAACD,iCAAD,CAFZ,EAID,C;;;;;;ACxLD,qD;;;;;;ACAA,yD;;;;;;ACAA,qD;;;;;;;ACAA;AAAA;AAAA;AAEO,GAAMtC,UAAS,CAAGC,2EAAU,CAAC,SAAA1b,KAAK,QAAK,CAC5CggB,GAAG,CAAE,CACHC,SAAS,CAAE,YADR,CADuC,CAI5CC,QAAQ,CAAE,CACRC,OAAO,CAAE,KADD,CAER3c,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcC,iBAFb,CAGR,YAAa,CACXxY,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcC,iBADV,CAHL,CAMR,UAAW,CACThX,MAAM,CAAE,MADC,CANH,CAJkC,CAc5Cob,MAAM,CAAE,CACN5c,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcC,iBADf,CAENqE,QAAQ,CAAE,MAFJ,CAGNF,OAAO,CAAE,eAHH,CAdoC,CAmB5CG,gBAAgB,CAAE,CAChB,SAAU,CACR,SAAU,CACR9c,KAAK,CAAExD,KAAK,CAAC+b,OAAN,CAAcwE,iBADb,CADF,CADM,CAnB0B,CA0B5CC,cAAc,CAAE,CACdhE,QAAQ,CAAE,QADI,CAEdiE,SAAS,CAAE,mBAFG,CA1B4B,CA8B5CC,SAAS,CAAE,CACTP,OAAO,CAAE,kBADA,CA9BiC,CAiC5CQ,SAAS,CAAE,CACTR,OAAO,CAAE,kBADA,CAET3D,QAAQ,CAAE,SAFD,CAjCiC,CAqC5CoE,MAAM,CAAE,CACN,WAAY,CACVC,QAAQ,CAAE,SADA,CADN,CArCoC,CA0C5CC,UAAU,CAAE,CACVX,OAAO,CAAE,CADC,CAEVnb,MAAM,CAAE,MAFE,CA1CgC,CAAL,EAAN,CAA5B,C;;;;;;;ACFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUO,QAAS+b,QAAT,CAAiBnd,KAAjB,CAAwB,IACrBT,SADqB,CACRS,KADQ,CACrBT,QADqB,CAE7B,GAAM4Z,QAAO,CAAGiE,8DAAM,EAAtB,CACA,mBAAO,mEAAM,SAAS,CAAEjE,OAAO,CAACkE,IAAzB,EAAgC9d,QAAhC,CAAP,CACD,CAEM,QAAS+d,WAAT,CAAoBtd,KAApB,CAA2B,IAE9Bud,WAF8B,CAQ5Bvd,KAR4B,CAE9Bud,UAF8B,CAG9BxE,IAH8B,CAQ5B/Y,KAR4B,CAG9B+Y,IAH8B,CAI9BG,OAJ8B,CAQ5BlZ,KAR4B,CAI9BkZ,OAJ8B,CAK9B3Z,QAL8B,CAQ5BS,KAR4B,CAK9BT,QAL8B,CAM9Bie,eAN8B,CAQ5Bxd,KAR4B,CAM9Bwd,eAN8B,kBAQ5Bxd,KAR4B,CAO9Byd,SAP8B,CAO9BA,SAP8B,2BAOlB,YAPkB,kBAShC,GAAMtE,QAAO,CAAGiE,8DAAM,EAAtB,CAEA,GAAMM,UAAS,CAAGnlB,oDAAM,EAAxB,CAEA,GAAMolB,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxBzE,OAAO,CAAC,SAAA7T,IAAI,QAAI,CAACA,IAAL,EAAL,CAAP,CACD,CAFD,CAIA,GAAMuY,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB1E,OAAO,CAAC,KAAD,CAAP,CACD,CAFD,CAIA,GAAM2E,GAAE,CAAG9E,IAAI,CAAG,gBAAH,CAAsB/iB,SAArC,CAEA,GAAM8nB,oBAAmB,CAAG1b,2EAAoB,CAACsb,SAAD,CAAhD,CAEA,mBACE,kEAAK,GAAG,CAAEA,SAAV,CAAqB,SAAS,CAAEvE,OAAO,CAAC3V,SAAxC,eACE,2DAAC,mEAAD,EACE,mBAAkBqa,EADpB,CAEE,OAAO,CAAEF,WAFX,CAGE,IAAI,CAAC,OAHP,CAIE,SAAS,CAAEH,eAJb,EAMGD,UANH,CADF,cASE,2DAAC,+DAAD,EACE,EAAE,CAAEM,EADN,CAEE,IAAI,CAAE9E,IAFR,CAGE,QAAQ,CAAE2E,SAAS,EAAIA,SAAS,CAACjlB,OAHnC,CAIE,SAAS,CAAEqlB,mBAJb,CAKE,OAAO,CAAEF,WALX,CAME,SAAS,CAAEH,SANb,CAOE,UAAU,KAPZ,EASG,kBAAGM,gBAAH,MAAGA,eAAH,oBACC,2DAAC,0EAAD,EAAmB,WAAW,CAAEH,WAAhC,eACE,2DAAC,6DAAD,kBAAUG,eAAV,EAA2B,OAAO,CAAE,GAApC,gBACE,2DAAC,8DAAD,EAAO,SAAS,CAAE,CAAlB,CAAqB,SAAS,CAAE5E,OAAO,CAAC6E,KAAxC,eACE,2DAAC,iEAAD,MAAWze,QAAX,CADF,CADF,CADF,CADD,EATH,CATF,CADF,CA+BD,C;;;;;;;ACxED;AAAe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;ACNA,oD;;;;;;;;;;;;ACA8C;AAC/B;AACf;AACA,aAAa,yCAAc;AAC3B;AACA;;AAEA;AACA,C;;ACRA;AAA4C;AAC7B,SAAS,OAAI;AAC5B;AACA,IAAI,OAAI;AACR,GAAG;AACH,IAAI,OAAI;AACR,iBAAiB,cAAa;AAC9B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS,OAAI;AACb,C;;;;;;ACnBA,0C;;;;;;;;;;;;;ACAA,uD;;;;;;ACAA,4C;;;;;;;ACAA,mC;;;;;;ACAA,qD;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,GAAM6d,OAAM,CAAGtF,2EAAU,CAAC,iBAAO,CACtCkG,KAAK,CAAE,CACLC,SAAS,CAAE,GADN,CAELrF,QAAQ,CAAE,MAFL,CAD+B,CAKtCpV,SAAS,CAAE,CACT0a,QAAQ,CAAE,UADD,CAETC,IAAI,CAAE,CAFG,CAGTC,GAAG,CAAE,CAHI,CAL2B,CAUtCf,IAAI,CAAE,CACJhc,KAAK,CAAE,MADH,CAEJgd,SAAS,CAAE,QAFP,CAGJhG,WAAW,CAAE,KAHT,CAIJC,YAAY,CAAE,KAJV,CAVgC,CAAP,EAAD,CAAzB,CAkBA,GAAMgG,SAAQ,CAAG,CACtBtkB,IAAI,CAAEukB,4EAAW,CAAC,CAChBpG,OAAO,CAAE,CACPqG,IAAI,CAAE,MADC,CAEPC,OAAO,CAAEC,6DAFF,CAGPC,SAAS,CAAED,6DAHJ,CAIP/B,iBAAiB,CAAE,SAJZ,CAKPiC,0BAA0B,CAAE,SALrB,CAMPC,sBAAsB,CAAE,SANjB,CAOPC,oBAAoB,CAAE,SAPf,CAQPrG,sBAAsB,CAAE,SARjB,CASPL,iBAAiB,CAAE,SATZ,CAUP2G,oBAAoB,CAAE,SAVf,CAWPC,uBAAuB,CAAE,SAXlB,CAYPC,mBAAmB,CAAE,SAZd,CAaPC,sBAAsB,CAAE,SAbjB,CAcPC,mBAAmB,CAAE,SAdd,CADO,CAiBhBnf,KAAK,CAAE,CACLof,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CADV,CAjBS,CAAD,CADK,CAwBtBplB,KAAK,CAAEskB,4EAAW,CAAC,CACjBpG,OAAO,CAAE,CACPqG,IAAI,CAAE,OADC,CAEPC,OAAO,CAAEC,6DAFF,CAGPC,SAAS,CAAED,6DAHJ,CAIP/B,iBAAiB,CAAE,SAJZ,CAKPiC,0BAA0B,CAAE,SALrB,CAMPC,sBAAsB,CAAE,SANjB,CAOPC,oBAAoB,CAAE,SAPf,CAQPrG,sBAAsB,CAAE,SARjB,CASPL,iBAAiB,CAAE,SATZ,CAUP2G,oBAAoB,CAAE,SAVf,CAWPC,uBAAuB,CAAE,SAXlB,CAYPC,mBAAmB,CAAE,SAZd,CAaPC,sBAAsB,CAAE,SAbjB,CAcPC,mBAAmB,CAAE,SAdd,CADQ,CAiBjBnf,KAAK,CAAE,CACLof,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CADV,CAjBU,CAAD,CAxBI,CAAjB,C;;;;;;ACrBP,oC;;;;;;;;;;;;;;ACIe,QAASC,aAAT,CAAsBtf,KAAtB,CAA6B,oBACJA,KADI,CAClCmZ,OADkC,CACzBoG,WADyB,yBACX,EADW,gBAE1C,GAAMpG,QAAO,CAAGtB,iEAAS,EAAzB,CACA,mBACE,2DAAC,+DAAD,gBACE,MAAM,KADR,CAEE,gBAAgB,KAFlB,EAGM7X,KAHN,EAIE,OAAO,0MACLwf,IAAI,CAAErG,OAAO,CAAC+D,UADT,EAEFqC,WAFE,CAJT,GADF,CAWD,C;;;;;;AClBD,qC;;;;;;ACAA,6D;;;;;;ACAA,2D;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;QCGeE,0B,qgBAAf,+VAA2CluB,MAA3C,MAA2CA,MAA3C,CAAmDga,SAAnD,MAAmDA,SAAnD,CACQ9Z,IADR,CACeE,KAAK,CAACC,OAAN,CAAcL,MAAd,EAAwBA,MAAM,CAACA,MAAM,CAACjB,MAAP,CAAgB,CAAjB,CAA9B,CAAoDiB,MADnE,wBAEuBE,KAAI,CAACiuB,SAAL,CAAe,CAAEnU,SAAS,CAATA,SAAF,CAAf,CAFvB,QAEQ8B,MAFR,gBAGQsS,cAHR,CAGyBC,qEAAe,CAACvS,MAAM,CAAC5b,IAAR,CAHxC,CAIUouB,MAJV,CAI6CF,cAJ7C,CAIUE,MAJV,CAIkCrD,MAJlC,CAI6CmD,cAJ7C,CAIkBG,cAJlB,kCAKS,CAAED,MAAM,CAANA,MAAF,CAAUrD,MAAM,CAANA,MAAV,CALT,0D,oEAQeuD,0B,+DAqCf;;;;;;0cArCA,4YAA2CxuB,MAA3C,OAA2CA,MAA3C,CAAmDga,SAAnD,OAAmDA,SAAnD,CACQyU,YADR,CACuBzuB,MAAM,CAACA,MAAM,CAACjB,MAAP,CAAgB,CAAjB,CAD7B,CAEUwB,KAFV,CAE4BkuB,YAF5B,CAEUluB,KAFV,CAEiBE,MAFjB,CAE4BguB,YAF5B,CAEiBhuB,MAFjB,CAGE;AACMiuB,KAJR,CAIgBnuB,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAL,EAA+BX,MAAM,CAACjB,MAAP,CAAgB,CAJ/D,wBAKwB0vB,aAAY,CAACN,SAAb,CAAuB,CAC3CnU,SAAS,CAAC,2MAAMA,SAAP,EAAkB2U,CAAC,CAAE,CAArB,EADkC,CAAvB,CALxB,QAKQC,OALR,uCAQ0BH,aAAY,CAACN,SAAb,CAAuB,CAC7CnU,SAAS,CAAC,2MAAMA,SAAP,EAAkB2U,CAAC,CAAEtf,IAAI,CAACC,KAAL,CAAWof,KAAK,CAAG,CAAnB,CAArB,EADoC,CAAvB,CAR1B,QAQQG,SARR,wCAW0BJ,aAAY,CAACN,SAAb,CAAuB,CAC7CnU,SAAS,CAAC,2MAAMA,SAAP,EAAkB2U,CAAC,CAAEtf,IAAI,CAACY,GAAL,CAAS,CAAT,CAAYye,KAAK,CAAG,CAApB,CAArB,EADoC,CAAvB,CAX1B,SAWQI,SAXR,gBAcQC,MAdR,CAciBV,qEAAe,CAACO,OAAO,CAAC1uB,IAAT,CAdhC,CAeQ8uB,QAfR,CAemBX,qEAAe,CAACQ,SAAS,CAAC3uB,IAAX,CAflC,CAgBQ+uB,QAhBR,CAgBmBZ,qEAAe,CAACS,SAAS,CAAC5uB,IAAX,CAhBlC,kCAiBS,CACLouB,MAAM,CAAE,CACNjf,IAAI,CAAC6f,GAAL,CAASH,MAAM,CAACT,MAAP,CAAc,CAAd,CAAT,CAA2BU,QAAQ,CAACV,MAAT,CAAgB,CAAhB,CAA3B,CAA+CW,QAAQ,CAACX,MAAT,CAAgB,CAAhB,CAA/C,CADM,CAENjf,IAAI,CAACY,GAAL,CAAS8e,MAAM,CAACT,MAAP,CAAc,CAAd,CAAT,CAA2BU,QAAQ,CAACV,MAAT,CAAgB,CAAhB,CAA3B,CAA+CW,QAAQ,CAACX,MAAT,CAAgB,CAAhB,CAA/C,CAFM,CADH,CAKLrD,MAAM,CAAE,CACN5b,IAAI,CAAC6f,GAAL,CACEH,MAAM,CAACR,cAAP,CAAsB,CAAtB,CADF,CAEES,QAAQ,CAACT,cAAT,CAAwB,CAAxB,CAFF,CAGEU,QAAQ,CAACV,cAAT,CAAwB,CAAxB,CAHF,CADM,CAMNlf,IAAI,CAACY,GAAL,CACE8e,MAAM,CAACR,cAAP,CAAsB,CAAtB,CADF,CAEES,QAAQ,CAACT,cAAT,CAAwB,CAAxB,CAFF,CAGEU,QAAQ,CAACV,cAAT,CAAwB,CAAxB,CAHF,CANM,CALH,CAjBT,2D,4DA4CO,GAAMY,wBAAuB,yaAAG,iUAASnvB,MAAT,OAASA,MAAT,CAAiBga,SAAjB,OAAiBA,SAAjB,CAA4BiM,KAA5B,OAA4BA,KAA5B,CAC/BmJ,QAD+B,CACpBnJ,KAAK,CAClBuI,yBADkB,CAElBN,yBAHiC,iCAI9BkB,QAAQ,CAAC,CAAEpvB,MAAM,CAANA,MAAF,CAAUga,SAAS,CAATA,SAAV,CAAD,CAJsB,wDAAH,kBAAvBmV,wBAAuB,8CAA7B,CAOA,GAAME,uBAAsB,yaAAG,oVAASrvB,MAAT,OAASA,MAAT,CAAiBsvB,UAAjB,OAAiBA,UAAjB,CAA6BrJ,KAA7B,OAA6BA,KAA7B,wBAChBsJ,QAAO,CAACC,GAAR,CAClBF,UAAU,CAAC9qB,GAAX,CAAe,SAAAwV,SAAS,QAAImV,wBAAuB,CAAC,CAAEnvB,MAAM,CAANA,MAAF,CAAUga,SAAS,CAATA,SAAV,CAAqBiM,KAAK,CAALA,KAArB,CAAD,CAA3B,EAAxB,CADkB,CADgB,QAC9BwJ,KAD8B,gBAI9BC,OAJ8B,CAIpBD,KAAK,CAACjrB,GAAN,CAAU,SAAAmrB,IAAI,QAAIA,KAAI,CAACrB,MAAT,EAAd,CAJoB,CAK9BsB,OAL8B,CAKpBH,KAAK,CAACjrB,GAAN,CAAU,SAAAmrB,IAAI,QAAIA,KAAI,CAAC1E,MAAT,EAAd,CALoB,kCAM7B,CAAEyE,OAAO,CAAPA,OAAF,CAAWE,OAAO,CAAPA,OAAX,CAN6B,0DAAH,kBAAtBP,uBAAsB,8CAA5B,CASP;;;;GAKO,QAASQ,6BAAT,CAAsC7vB,MAAtC,CAA8C,yEAC/BA,MAD+B,SAC/BA,MAD+B,+BAC/BA,MAAM,CAAEsc,IADuB,uCAC/B,aAAcwT,aADiB,+DACA,EADA,CAC3CC,CAD2C,OAC3CA,CAD2C,CACxCC,CADwC,OACxCA,CADwC,CACrCrB,CADqC,OACrCA,CADqC,CAEnD,GAAI,CAAAoB,CAAC,OAAD,EAAAA,CAAC,SAAD,QAAAA,CAAC,CAAEpP,IAAH,IAAWqP,CAAX,SAAWA,CAAX,iBAAWA,CAAC,CAAErP,IAAd,IAAsBgO,CAAtB,SAAsBA,CAAtB,iBAAsBA,CAAC,CAAEhO,IAAzB,CAAJ,CAAmC,CACjC,GAAMuO,IAAG,CAAG7f,IAAI,CAAC6f,GAAL,CAASP,CAAC,CAAChO,IAAX,CAAiBoP,CAAC,CAACpP,IAAnB,CAAyBqP,CAAC,CAACrP,IAA3B,CAAZ,CACA,GAAMsP,MAAK,CAAG,CAACF,CAAC,CAACpP,IAAF,CAASuO,GAAV,CAAec,CAAC,CAACrP,IAAF,CAASuO,GAAxB,CAA6BP,CAAC,CAAChO,IAAF,CAASuO,GAAtC,CAAd,CACA,MAAO,IAAIgB,gDAAJ,GAAcC,KAAd,CAAoBF,KAApB,CAAP,CACD,CACD,MAAO,IAAIC,gDAAJ,GAAcE,QAAd,EAAP,CACD,CAED;;;;GAKO,QAASC,gBAAT,CAAyBrwB,MAAzB,CAAiC,CACtC,GAAMG,OAAM,CAAGC,KAAK,CAACC,OAAN,CAAcL,MAAd,EAAwBA,MAAM,CAAC,CAAD,CAA9B,CAAoCA,MAAnD,CADsC,GAE9BO,MAF8B,CAEZJ,MAFY,CAE9BI,KAF8B,CAEvBE,MAFuB,CAEZN,MAFY,CAEvBM,MAFuB,CAGtC,GAAM6vB,0BAAyB,CAAGT,4BAA4B,CAAC1vB,MAAD,CAA9D,CACA,GAAMowB,OAAM,CAAG,CAAC,CAAD,CAAID,yBAAyB,CAAC,CAAD,CAAzB,CAA+B/vB,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAxC,CAAf,CACA,GAAM6vB,OAAM,CAAG,CAAC,CAAD,CAAIF,yBAAyB,CAAC,CAAD,CAAzB,CAA+B/vB,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAxC,CAAf,CACA,GAAM8vB,OAAM,CAAG,CACb,CADa,CAEbH,yBAAyB,CAAC,EAAD,CAAzB,CAAgC/vB,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAFxB,CAAf,CAIA,MAAO,CAAC4vB,MAAD,CAASC,MAAT,CAAiBC,MAAjB,CAAP,CACD,CAEM,QAASC,iBAAT,CAA0BtuB,KAA1B,CAAiC,CACtC;AAEA,GAAMuuB,UAAS,CAAG,CAAlB,CACA,GAAIC,eAAc,CAAGD,SAArB,CAEA,gCACA,GAAI,CAACE,MAAM,CAACC,SAAP,CAAiB1uB,KAAjB,CAAL,CAA8B,CAC5B,EAAEwuB,cAAF,CACD,CAAC;AACF,GAAIxuB,KAAK,CAAG,CAAZ,CAAe,CACb,EAAEwuB,cAAF,CACD,CAAC;AACF,gCAEA,GAAMG,MAAK,CAAGC,IAAI,CAACC,YAAL,CAAkB,OAAlB,CAA2B,CACvCC,wBAAwB,CAAEN,cADa,CAEvCO,WAAW,CAAE,KAF0B,CAA3B,EAGXC,MAHW,CAGJhvB,KAHI,CAAd,CAIA,GAAI2uB,KAAK,CAAChyB,MAAN,EAAgB4xB,SAApB,CAA+B,MAAOI,MAAP,CAE/B;AACA;AACA,MAAO3uB,MAAK,CAACivB,aAAN,CAAoB,CAApB,CAAP,CACD,C;;;;;;AChID,oC;;;;;;ACAA,oC;;;;;;ACAA,sC;;;;;;ACAA,qD;;;;;;;ACAA,uD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEO,GAAMC,GAAE,ylBAAR,CAsBA,GAAMC,GAAE,4ulBAAR,C;;;;;ACxB8B;AACe;AAUpD,QAASC,eAAT,CAAwBvlB,GAAxB,CAA6B+c,YAA7B,CAA2CyI,QAA3C,CAAqD,CACnD,GAAMnlB,OAAM,8CAAOL,GAAP,CAAZ,CACA,IAAK,GAAIvM,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG+xB,QAApB,CAA8B/xB,CAAC,EAAI,CAAnC,CAAsC,CACpC4M,MAAM,CAAC3M,IAAP,CAAYqpB,YAAZ,EACD,CACD,MAAO1c,OAAP,CACD,CAED,GAAMolB,aAAY,CAAG,CACnBC,WAAW,CAAE,CAAE1E,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,IAAzB,CAA+BwvB,OAAO,CAAE,IAAxC,CADM,CAEnBC,aAAa,CAAE,CAAE5E,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,IAAzB,CAA+BwvB,OAAO,CAAE,IAAxC,CAFI,CAGnBlM,QAAQ,CAAE,CAAEuH,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAEuiB,iDAAzB,CAAgDiN,OAAO,CAAE,IAAzD,CAHS,CAInBrd,cAAc,CAAE,CAAE0Y,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,IAAzB,CAA+BwvB,OAAO,CAAE,IAAxC,CAJG,CAArB,CAOA;;;MAIqBE,0B,6VACnB;2BACa,IACHpM,SADG,CACU,KAAKjX,KADf,CACHiX,QADG,CAEX,MAAO,CACL6L,EAAE,CAAFA,EADK,CAELD,EAAE,CAAFA,EAFK,CAGLS,OAAO,CAAE,CAACC,kBAAD,CAAYC,gBAAZ,CAHJ,CAILC,OAAO,CAAC,6CACLtN,uDADI,CAC0BF,0CAAc,CAAC5kB,QAAf,CAAwB4lB,QAAxB,EAC3BA,QAD2B,CAE3Bf,iDAHC,CAJF,CAAP,CAUD,C,qDAE6C,IAAhClW,MAAgC,MAAhCA,KAAgC,CAAzB0jB,QAAyB,MAAzBA,QAAyB,CAAfC,WAAe,MAAfA,WAAe,CAC5C,+HAAkB,CAAE3jB,KAAK,CAALA,KAAF,CAAS0jB,QAAQ,CAARA,QAAT,CAAmBC,WAAW,CAAXA,WAAnB,CAAlB,EACA,GAAI3jB,KAAK,CAACojB,aAAN,GAAwBM,QAAQ,CAACN,aAArC,CAAoD,CAClD,KAAKQ,eAAL,GACD,CACD,GAAI5jB,KAAK,CAAC8F,cAAN,GAAyB4d,QAAQ,CAAC5d,cAAtC,CAAsD,iBACI,KAAK9F,KADT,CAC5C8F,cAD4C,aAC5CA,cAD4C,CAC5B+d,aAD4B,aAC5BA,aAD4B,CACbC,YADa,aACbA,YADa,CAEpD,GAAMC,cAAa,CAAG,KAAKC,aAAL,CACpBle,cADoB,CAEpBge,YAFoB,CAGpBD,aAHoB,CAAtB,CAKA,KAAKI,QAAL,CAAc,CAAEF,aAAa,CAAbA,aAAF,CAAd,EACD,CACD,GAAI/jB,KAAK,CAACiX,QAAN,GAAmByM,QAAQ,CAACzM,QAAhC,CAA0C,IAChCiN,GADgC,CACzB,KAAKC,OADoB,CAChCD,EADgC,CAExC,GAAI,KAAKtwB,KAAL,CAAWwwB,KAAf,CAAsB,CACpB,KAAKxwB,KAAL,CAAWwwB,KAAX,CAAiBC,MAAjB,GACD,CACD;AACA,KAAKJ,QAAL,CAAc,CAAEG,KAAK,CAAE,KAAKE,SAAL,CAAeJ,EAAf,CAAT,CAAd,EAEA,KAAKK,mBAAL,GAA2BC,aAA3B,GACD,CACF,C,yDAEiB,kCAKZ,KAAKxkB,KALO,CAECvO,IAFD,cAEd2xB,aAFc,CAGChiB,MAHD,cAGdyiB,aAHc,CAIAxiB,KAJA,cAIdyiB,YAJc,CAMhB,GAAMW,SAAQ,CAAG,GAAIC,oCAAJ,CAAc,KAAKP,OAAL,CAAaD,EAA3B,CAA+B,CAC9C7iB,KAAK,CAALA,KAD8C,CAE9CD,MAAM,CAANA,MAF8C,CAG9C;AACA3P,IAAI,CAAJA,IAJ8C,CAK9C;AACAkzB,OAAO,CAAE,KANqC,CAO9C9uB,UAAU,uEAEPuE,mBAAE,CAACC,kBAFI,CAEiBD,mBAAE,CAACE,OAFpB,wDAGPF,mBAAE,CAACG,kBAHI,CAGiBH,mBAAE,CAACE,OAHpB,wDAKPF,mBAAE,CAACI,cALI,CAKaJ,mBAAE,CAACK,aALhB,wDAMPL,mBAAE,CAACM,cANI,CAMaN,mBAAE,CAACK,aANhB,cAPoC,CAe9CkoB,MAAM,CAAEvoB,mBAAE,CAACwqB,GAfmC,CAgB9CC,UAAU,CAAEzqB,mBAAE,CAACwqB,GAhB+B,CAiB9CpG,IAAI,CAAEpkB,mBAAE,CAAC0qB,aAjBqC,CAA/B,CAAjB,CAmBA,KAAKb,QAAL,CAAc,CAAEQ,QAAQ,CAARA,QAAF,CAAd,EACD,C,kCAEIM,I,CAAM,IACDC,SADC,CACYD,IADZ,CACDC,QADC,kBAQL,KAAKhlB,KARA,CAGPilB,eAHO,cAGPA,eAHO,CAIP/B,WAJO,cAIPA,WAJO,CAKPgC,YALO,cAKPA,YALO,CAMPC,YANO,cAMPA,YANO,CAOPC,gBAPO,cAOPA,gBAPO,iBAWL,KAAKxxB,KAXA,CAUPyxB,QAVO,aAUPA,QAVO,CAUGjB,KAVH,aAUGA,KAVH,CAUUK,QAVV,aAUUA,QAVV,CAUoBV,aAVpB,aAUoBA,aAVpB,CAYT;AACA,GAAIsB,QAAQ,EAAIjB,KAAZ,EAAqBK,QAAzB,CAAmC,CACjCL,KAAK,CACFkB,WADH,CAEI/1B,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBw1B,QAAlB,2CACEO,OAAO,CAAErC,WAAW,EAAI,CAD1B,CAEEuB,QAAQ,CAARA,QAFF,CAGEV,aAAa,CAAbA,aAHF,CAIEyB,cAAc,CAAEf,QAAQ,CAACrjB,MAJ3B,CAKEqkB,aAAa,CAAEhB,QAAQ,CAACpjB,KAL1B,CAME4jB,eAAe,CAAElC,cAAc,CAC7BkC,eAD6B,CAE7B,KAF6B,CAG7B;AACA,EAAIA,eAAe,CAAC30B,MAJS,CANjC,CAYEo1B,gBAAgB,CAAE,CAACR,YAAD,CAAeC,YAAf,CAZpB,CAaEQ,iBAAiB,CAAEP,gBAbrB,EAcKC,QAdL,EAFJ,EAmBGO,IAnBH,GAoBD,CACF,CAED;;yDAGcn0B,I,CAAM4P,K,CAAOD,M,CAAQ,kBACjC,GAAMykB,WAAU,CAAGC,0CAAQ,CAAC,KAAK3B,OAAL,CAAaD,EAAd,CAA3B,CACA,MAAO,IAAIQ,oCAAJ,CAAc,KAAKP,OAAL,CAAaD,EAA3B,CAA+B,CACpC7iB,KAAK,CAALA,KADoC,CAEpCD,MAAM,CAANA,MAFoC,CAGpC;AACA3P,IAAI,CAAE,GAAIs0B,aAAJ,CAAiBt0B,IAAjB,CAJ8B,CAKpC;AACAkzB,OAAO,CAAE,KAN2B,CAOpC9uB,UAAU,yEAEPuE,mBAAE,CAACC,kBAFI,CAEiBD,mBAAE,CAACE,OAFpB,yDAGPF,mBAAE,CAACG,kBAHI,CAGiBH,mBAAE,CAACE,OAHpB,yDAKPF,mBAAE,CAACI,cALI,CAKaJ,mBAAE,CAACK,aALhB,yDAMPL,mBAAE,CAACM,cANI,CAMaN,mBAAE,CAACK,aANhB,eAP0B,CAepCkoB,MAAM,CAAEkD,UAAU,CAAGzrB,mBAAE,CAAC4rB,IAAN,CAAa5rB,mBAAE,CAAC6rB,SAfE,CAgBpCpB,UAAU,CAAEgB,UAAU,CAAGzrB,mBAAE,CAAC8rB,GAAN,CAAY9rB,mBAAE,CAAC6rB,SAhBD,CAiBpCzH,IAAI,CAAEpkB,mBAAE,CAAC+rB,KAjB2B,CAA/B,CAAP,CAmBD,C,0BAnIuCC,e,EAqI1C/C,yBAAY,CAACgD,SAAb,CAAyB,cAAzB,CACAhD,yBAAY,CAACJ,YAAb,CAA4BA,YAA5B,C;;;;;;;;;;;;;;ACpKA,gCAsBO,QAASqD,OAAT,CAAgBhF,CAAhB,CAAmBC,CAAnB,CAAsB3wB,CAAtB,CAAyB,CAC9B,MAAO,CAAC,CAAC0wB,CAAD,CAAIC,CAAC,CAAG3wB,CAAR,CAAD,CAAa,CAAC0wB,CAAC,CAAG1wB,CAAL,CAAQ2wB,CAAR,CAAb,CAAyB,CAACD,CAAD,CAAIC,CAAC,CAAG3wB,CAAR,CAAzB,CAAqC,CAAC0wB,CAAC,CAAG1wB,CAAL,CAAQ2wB,CAAR,CAArC,CAAP,CACD,CAED;;;;;;;;;GAUO,QAASgF,WAAT,CAAoBC,MAApB,CAA4B,CACjC,MAAOA,OAAM,CAACC,IAAP,CAAY,SAAC7Z,CAAD,CAAI3E,CAAJ,QACjByP,iDAA2B,CAACxlB,OAA5B,CAAoC0a,CAAC,CAAC4R,IAAtC,EAA8C9G,gDAA2B,CAACxlB,OAA5B,CAAoC+V,CAAC,CAACuW,IAAtC,CAD7B,EAAZ,CAAP,CAGD,CAED;;;;GAKA,QAASkI,0BAAT,CAAmCh1B,MAAnC,CAA2C,CACzC,GAAMi1B,cAAa,CAAGj1B,MAAM,CAACM,MAAP,CACnBkC,MADmB,CACZ,SAAA0yB,GAAG,QAAI/P,mCAAa,CAACxlB,QAAd,CAAuBu1B,GAAvB,CAAJ,EADS,CAAtB,CAEA,GAAMrb,UAAS,CAAG,EAAlB,CACAob,aAAa,CAAC91B,OAAd,CAAsB,SAAC+1B,GAAD,CAAS,CAC7Brb,SAAS,CAACqb,GAAD,CAAT,CAAiBhmB,IAAI,CAACC,KAAL,CACf,CAACnP,MAAM,CAACI,KAAP,CAAaJ,MAAM,CAACM,MAAP,CAAcE,OAAd,CAAsB00B,GAAtB,CAAb,GAA4C,CAA7C,EAAkD,CADnC,CAAjB,CAGD,CAJD,EAKA,MAAOrb,UAAP,CACD,CAED;;;;;GAMA,QAASsb,sBAAT,CAA+Bn1B,MAA/B,CAAuC,CACrC,GAAM6Z,UAAS,CAAG,EAAlB,CACA,GAAMub,gBAAe,CAAGJ,yBAAyB,CAACh1B,MAAD,CAAjD,CACA;AACA,GAAMq1B,wBAAuB,CAAGr1B,MAAM,CAACM,MAAP,CAAckC,MAAd,CAC9B,SAAA0yB,GAAG,QAAI,CAAC/P,kCAAa,CAACxlB,QAAd,CAAuBu1B,GAAvB,CAAD,EACFl1B,MAAM,CAACI,KAAP,CAAaJ,MAAM,CAACM,MAAP,CAAcE,OAAd,CAAsB00B,GAAtB,CAAb,CADF,EAD2B,EAG9B,CAH8B,CAAhC,CAIA,IAAK,GAAI31B,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG2P,IAAI,CAAC6f,GAAL,CAAS,CAAT,CAAY/uB,MAAM,CAACI,KAAP,CAC9BJ,MAAM,CAACM,MAAP,CAAcE,OAAd,CAAsB60B,uBAAtB,CAD8B,CAAZ,CAApB,CAEI91B,CAAC,EAAI,CAFT,CAEY,CACVsa,SAAS,CAACra,IAAV,uFAEK61B,uBAFL,CAE+B91B,CAF/B,EAGO61B,eAHP,GAMD,CACD,MAAOvb,UAAP,CACD,CAED;;GAGO,QAASyb,cAAT,CAAuBl1B,KAAvB,CAA8B,CACnC,GAAMm1B,YAAW,CAAGn1B,KAAK,CAACA,KAAK,CAACxB,MAAN,CAAe,CAAhB,CAAzB,CACA,MAAO22B,YAAW,GAAK,CAAhB,EAAqBA,WAAW,GAAK,CAA5C,CACD,CAED;;;;;;GAOO,QAAeC,wBAAtB,gE,iJAAO,iBAAuC31B,MAAvC,CAA+CimB,KAA/C,oLACCxR,MADD,CACU,EADV,CAECtU,MAFD,CAEUJ,4CAAmB,CAACC,MAAD,CAF7B,CAGL;AACI41B,gBAJC,CAIkBN,qBAAqB,CAACn1B,MAAD,CAJvC,CAKLy1B,gBAAgB,CAAGH,aAAa,CAACt1B,MAAM,CAACI,KAAR,CAAb,CACf,CAAC,4CAAKq1B,gBAAgB,CAAC,CAAD,CAAtB,EAA2BhzB,CAAC,CAAE,CAA9B,GADe,CACsBgzB,gBADzC,CALK,sBAOevG,iEAAsB,CAAC,CACzCrvB,MAAM,CAAEA,MAAM,CAACE,IAD0B,CACpBovB,UAAU,CAAEsG,gBADQ,CACU3P,KAAK,CAALA,KADV,CAAD,CAPrC,QAOCwJ,KAPD,eAWCC,OAXD,CAWWpvB,8BAAK,CAACN,MAAD,CAAL,CACZ,CAAC,CAAC,CAAD,CAAI,GAAJ,CAAD,CAAW,CAAC,CAAD,CAAI,GAAJ,CAAX,CAAqB,CAAC,CAAD,CAAI,GAAJ,CAArB,CADY,CAEZyvB,KAAK,CAACC,OAbL,CAcCmG,MAdD,CAcUv1B,8BAAK,CAACN,MAAD,CAAL,CACX,CAAC,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAAD,CAAc,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CAAd,CAA2B,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAA3B,CADW,CAEX,IAhBC,CAiBC4vB,OAjBD,CAiBWtvB,8BAAK,CAACN,MAAD,CAAL,CACZ,CAAC,CAAC,CAAD,CAAI,GAAJ,CAAD,CAAW,CAAC,CAAD,CAAI,GAAJ,CAAX,CAAqB,CAAC,CAAD,CAAI,GAAJ,CAArB,CADY,CAEZyvB,KAAK,CAACG,OAnBL,CAqBLgG,gBAAgB,CAACt2B,OAAjB,CAAyB,SAAC0a,SAAD,CAAYta,CAAZ,CAAkB,CACzC,GAAM4uB,OAAM,CAAGoB,OAAO,CAAChwB,CAAD,CAAtB,CACA,GAAMurB,OAAM,CAAG2E,OAAO,CAAClwB,CAAD,CAAtB,CACA,GAAMo2B,QAAO,CAAG,CACd9b,SAAS,CAATA,SADc,CAEd;AACA3L,KAAK,CAAEwnB,MAAM,CAAGA,MAAM,CAACn2B,CAAD,CAAT,CACTk2B,gBAAgB,CAAC72B,MAAjB,GAA4B,CAA5B,CACEgM,0CAAc,CAACrL,CAAD,CADhB,CACsB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CALZ,CAMd+lB,OAAO,CAAE,IANK,CAOdwF,MAAM,CAAEA,MAAM,EAAIqD,MAPJ,CAAhB,CASA7Z,MAAM,CAAC9U,IAAP,CAAYm2B,OAAZ,EACD,CAbD,EArBK,gCAmCErhB,MAnCF,yD,0DAsCP,QAASshB,6BAAT,CAAsCC,SAAtC,CAAiDC,YAAjD,CAA+D,CAC7D;AACA,GAAMC,QAAO,CAAGD,YAAY,CAACzxB,GAAb,CAAiB,SAAAxE,MAAM,QAAID,6CAAmB,CAACC,MAAD,CAAvB,EAAvB,CAAhB,CACA,GACEg2B,SAAS,CAACxxB,GAAV,CAAc,SAAA8X,IAAI,6HAAI,CAAAA,IAAI,OAAJ,EAAAA,IAAI,SAAJ,wBAAAA,IAAI,CAAE6Z,QAAN,+EAAgBlY,SAAhB,sEAA2BnE,MAA3B,IACjBwC,IADiB,SACjBA,IADiB,kCACjBA,IAAI,CAAE6Z,QADW,iEACjB,gBAAgBlY,SADC,gDACjB,sBAA2BkS,KADV,IAEjB7T,IAFiB,SAEjBA,IAFiB,kCAEjBA,IAAI,CAAE6Z,QAFW,iEAEjB,gBAAgBlY,SAFC,gDAEjB,sBAA2BmY,SAFV,CAAJ,EAAlB,EAE2CC,IAF3C,CAEgDlwB,OAFhD,GAGG+vB,OAAO,CAAC7yB,KAAR,CACD,SAAAlD,MAAM,mFAAI,gBAACA,MAAM,CAACmc,IAAR,8DAAC,aAAawT,aAAd,gDAAC,sBAA4BC,CAA7B,GAAkC,iBAAC5vB,MAAM,CAACmc,IAAR,+DAAC,cAAawT,aAAd,gDAAC,sBAA4BE,CAA7B,CAAtC,EADL,CAJL,CAOE,CACA,MAAOgG,UAAP,CACD,CACD;AACA,GAAMM,gBAAe,CAAGJ,OAAO,CAACt4B,MAAR,CAAe,SAACuf,GAAD,CAAMhd,MAAN,CAAiB,wHACtD,GAAMo2B,iBAAgB,gBAAGp2B,MAAM,CAACmc,IAAV,+DAAG,cAAawT,aAAhB,wEAAG,sBAA4BnB,CAA/B,iDAAG,uBAA+BhO,IAAxD,CACA,GAAMvR,MAAK,CAAG,CACZonB,gCAAI,CAAC,yBAAGr2B,MAAM,CAACmc,IAAV,wCAAG,cAAawT,aAAb,CAA2BC,CAA3B,CAA6BpP,IAAhC,4BAAwCxgB,MAAM,CAACmc,IAA/C,wCAAwC,cAAawT,aAAb,CAA2BC,CAA3B,CAA6ByG,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CADQ,CAEZD,gCAAI,CAAC,yBAAGr2B,MAAM,CAACmc,IAAV,wCAAG,cAAawT,aAAb,CAA2BE,CAA3B,CAA6BrP,IAAhC,4BAAwCxgB,MAAM,CAACmc,IAA/C,wCAAwC,cAAawT,aAAb,CAA2BE,CAA3B,CAA6BwG,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CAFQ,CAAd,CAIA,GAAIF,gBAAJ,CAAsB,iCACpBnnB,KAAK,CAACzP,IAAN,CAAW62B,gCAAI,CAAC,yBAAGr2B,MAAM,CAACmc,IAAV,wCAAG,cAAawT,aAAb,CAA2BnB,CAA3B,CAA6BhO,IAAhC,4BAAwCxgB,MAAM,CAACmc,IAA/C,wCAAwC,cAAawT,aAAb,CAA2BnB,CAA3B,CAA6B6H,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CAAf,EACD,CACDtZ,GAAG,CAAC,CAAD,CAAH,CAAUA,GAAG,CAAC,CAAD,CAAH,GAAW1Y,SAAX,EAAwBmtB,mCAAO,CAACxiB,KAAK,CAAC,CAAD,CAAN,CAAW+N,GAAG,CAAC,CAAD,CAAd,CAAP,GAA8B,CAAC,CAAxD,CAA6D/N,KAAK,CAAC,CAAD,CAAlE,CAAwE+N,GAAG,CAAC,CAAD,CAApF,CACAA,GAAG,CAAC,CAAD,CAAH,CAAUA,GAAG,CAAC,CAAD,CAAH,GAAW1Y,SAAX,EAAwBmtB,mCAAO,CAACxiB,KAAK,CAAC,CAAD,CAAN,CAAW+N,GAAG,CAAC,CAAD,CAAd,CAAP,GAA8B,CAAC,CAAxD,CAA6D/N,KAAK,CAAC,CAAD,CAAlE,CAAwE+N,GAAG,CAAC,CAAD,CAApF,CACAA,GAAG,CAAC,CAAD,CAAH,CAAUA,GAAG,CAAC,CAAD,CAAH,GAAW1Y,SAAX,EAAwBmtB,mCAAO,CAACxiB,KAAK,CAAC,CAAD,CAAN,CAAW+N,GAAG,CAAC,CAAD,CAAd,CAAP,GAA8B,CAAC,CAAxD,CAA6D/N,KAAK,CAAC,CAAD,CAAlE,CAAwE+N,GAAG,CAAC,CAAD,CAApF,CACA,MAAOA,IAAP,CACD,CAbuB,CAarB,EAbqB,CAAxB,CAcA,GAAMuZ,uBAAsB,CAAGV,SAAS,CAACxxB,GAAV,CAAc,SAAC8X,IAAD,CAAOpF,CAAP,CAAa,6HACxD,GAAM/W,OAAM,CAAG+1B,OAAO,CAAChf,CAAD,CAAtB,CACA,GAAMqf,iBAAgB,iBAAGp2B,MAAM,CAACmc,IAAV,gEAAG,eAAawT,aAAhB,wEAAG,sBAA4BnB,CAA/B,iDAAG,uBAA+BhO,IAAxD,CACA,GAAMvR,MAAK,CAAG,CACZonB,gCAAI,CAAC,0BAAGr2B,MAAM,CAACmc,IAAV,yCAAG,eAAawT,aAAb,CAA2BC,CAA3B,CAA6BpP,IAAhC,6BAAwCxgB,MAAM,CAACmc,IAA/C,yCAAwC,eAAawT,aAAb,CAA2BC,CAA3B,CAA6ByG,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CADQ,CAEZD,gCAAI,CAAC,0BAAGr2B,MAAM,CAACmc,IAAV,yCAAG,eAAawT,aAAb,CAA2BE,CAA3B,CAA6BrP,IAAhC,6BAAwCxgB,MAAM,CAACmc,IAA/C,yCAAwC,eAAawT,aAAb,CAA2BE,CAA3B,CAA6BwG,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CAFQ,CAAd,CAIA,GAAIF,gBAAJ,CAAsB,mCACpBnnB,KAAK,CAACzP,IAAN,CAAW62B,gCAAI,CAAC,0BAAGr2B,MAAM,CAACmc,IAAV,yCAAG,eAAawT,aAAb,CAA2BnB,CAA3B,CAA6BhO,IAAhC,6BAAwCxgB,MAAM,CAACmc,IAA/C,yCAAwC,eAAawT,aAAb,CAA2BnB,CAA3B,CAA6B6H,IAArE,EAA4EC,OAA5E,CAAoF,GAApF,CAAyF,GAAzF,CAAD,CAAf,EACD,CACD;AACA,GAAMtG,MAAK,CAAG/gB,KAAK,CAAC5K,GAAN,CAAU,SAAC9E,CAAD,CAAIwP,CAAJ,QAAUynB,mCAAM,CAACj3B,CAAD,CAAI42B,eAAe,CAACpnB,CAAD,CAAnB,CAAhB,EAAV,CAAd,CACA;AACA,GAAI,CAACihB,KAAK,CAAC,CAAD,CAAV,CAAe,CACbA,KAAK,CAAC,CAAD,CAAL,CAAW,CAAX,CACD,CACD;AACA,GAAI5Y,iBAAO,CAAC4Y,KAAD,CAAQ,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAR,CAAX,CAA+B,CAC7B,MAAO7T,KAAP,CACD,CACD;AACA,GAAMxC,OAAM,CAAG,GAAIoW,6BAAJ,GAAcC,KAAd,8CAAwBA,KAAxB,EAAf,CACA,GAAMyG,QAAO,6CAAQta,IAAR,CAAb,CACAsa,OAAO,CAACT,QAAR,6CACKS,OAAO,CAACT,QADb,EAEE;AACAlY,SAAS,CAAE,CAAEnE,MAAM,CAAEA,MAAM,CAAC+c,OAAP,EAAV,CAHb,GAKA,MAAOD,QAAP,CACD,CA7B8B,CAA/B,CA8BA,MAAOF,uBAAP,CACD,CAED;;;;;;;;;GAUO,QAAeI,kCAAtB,+EAuEA;;;;;;;;;;;;wKAvEO,kBACLC,YADK,CAELC,kBAFK,CAGLC,sBAHK,yTAKC7a,gBALD,CAKoB,EALpB,CAMD8a,sBANC,CAMwB,EANxB,CAOCC,yBAPD,CAO6B,EAP7B,CASL;AACA;AAVK,uBAWiB5H,QAAO,CAACC,GAAR,CAAYuH,YAAY,CAACvyB,GAAb,CAAiB,SAAA4yB,KAAK,QAAIA,MAAK,CAACC,aAAN,EAAJ,EAAtB,CAAZ,CAXjB,QAWCv1B,OAXD,gBAaL,IAASpC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGq3B,YAAY,CAACh4B,MAAjC,CAAyCW,CAAC,EAA1C,CAA8C,CACtC03B,KADsC,CAC9BL,YAAY,CAACr3B,CAAD,CADkB,CAEtCM,MAFsC,CAE7B8B,OAAO,CAACpC,CAAD,CAFsB,CAG5C0c,gBAAgB,CAAC1c,CAAD,CAAhB,CAAsBM,MAAtB,CACAk3B,sBAAsB,CAACx3B,CAAD,CAAtB,CAA4B03B,KAA5B,CACD,CACD,GAAIH,sBAAJ,CAA4B,CAC1BC,sBAAsB,CAAGnB,4BAA4B,CAACmB,sBAAD,CAAyB9a,gBAAzB,CAArD,CACD,CACD;AACA,GAAI,CAAC4a,kBAAL,CAAyB,CACvB;AACMM,UAFiB,CAEJjoB,IAAI,CAACC,KAAL,CAAWynB,YAAY,CAACh4B,MAAb,CAAsB,CAAjC,CAFI,CAGjBiB,OAHiB,CAGRoc,gBAAgB,CAACkb,UAAD,CAHR,CAIjBC,wBAJiB,CAIU5B,uBAAuB,CAAC31B,OAAD,CAAvB,CAC9BkZ,IAD8B,CACzB,SAAAse,QAAQ,8HAAIjI,QAAO,CAACkI,OAAR,2CAChBxK,IAAI,CAAE,wBAAAiK,sBAAsB,CAACI,UAAD,CAAtB,8FAAoCnB,QAApC,wEAA8CuB,SAA9C,EAA0D,SAA1D,CAAsE,QAD5D,CAEhBrT,KAAK,CAAEiT,UAFS,EAGb9R,+CAHa,EAIhBgS,QAAQ,CAAEA,QAAQ,CAAChzB,GAAT,CAAa,SAACsxB,OAAD,CAAU5e,CAAV,qDAClB4e,OADkB,IAEjBoB,sBAAsB,CAACI,UAAD,CAAtB,CAAmCE,QAAnC,CACAN,sBAAsB,CAACI,UAAD,CAAtB,CAAmCE,QAAnC,CAA4CtgB,CAA5C,CADA,CACiD,EAHhC,GAAb,CAJM,CAShBygB,WAAW,yBAAET,sBAAsB,CAACI,UAAD,CAAxB,yEAAE,uBAAoCnB,QAAtC,yEAAE,uBAA8ClY,SAAhD,iDAAE,uBAAyDnE,MATtD,CAUhB+L,gBAAgB,CAAEyR,UAAU,CAAG,CAAb,CAAiB,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAjB,CAA6B,IAV/B,GAAJ,EADiB,CAJV,CAiBvBH,yBAAyB,CAACx3B,IAA1B,CAA+B43B,wBAA/B,EACD,CAlBD,IAkBO,CACL;AACMK,2BAFD,CAE+BZ,kBAAkB,CACnDxyB,GADiC,CAC7B,SAAAqzB,SAAS,QAAId,aAAY,CAACe,SAAb,CAAuB,SAAAC,KAAK,QAAIA,MAAK,CAAClrB,IAAN,GAAegrB,SAAnB,EAA5B,CAAJ,EADoB,CAF/B,sBAIIn4B,EAJJ,EAKH,GAAM43B,WAAU,CAAGM,2BAA2B,CAACl4B,EAAD,CAA9C,CACA,GAAMM,OAAM,CAAGoc,gBAAgB,CAACkb,UAAD,CAA/B,CACA,GAAMC,yBAAwB,CAAG5B,uBAAuB,CAAC31B,MAAD,CACtD;AAD+B,CAE9BkZ,IAF8B,CAEzB,SAAAse,QAAQ,gIAAIjI,QAAO,CAACkI,OAAR,2CAChBxK,IAAI,CAAE,yBAAAiK,sBAAsB,CAACI,UAAD,CAAtB,gGAAoCnB,QAApC,wEAA8CuB,SAA9C,EAA0D,SAA1D,CAAsE,QAD5D,CAEhBrT,KAAK,CAAEiT,UAFS,EAGb9R,+CAHa,EAIhBgS,QAAQ,CAAEA,QAAQ,CAAChzB,GAAT,CAAa,SAACsxB,OAAD,CAAU5e,CAAV,qDAClB4e,OADkB,IAEjBoB,sBAAsB,CAACI,UAAD,CAAtB,CAAmCE,QAAnC,CACAN,sBAAsB,CAACI,UAAD,CAAtB,CAAmCE,QAAnC,CAA4CtgB,CAA5C,CADA,CACiD,EAHhC,GAAb,CAJM,CAShB0O,UAAU,CAAE,SATI,CAUhB+R,WAAW,yBAAET,sBAAsB,CAACI,UAAD,CAAxB,yEAAE,uBAAoCnB,QAAtC,0EAAE,uBAA8ClY,SAAhD,kDAAE,wBAAyDnE,MAVtD,CAWhB+L,gBAAgB,CAAEnmB,EAAC,CAAG,CAAJ,CAAQ,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAR,CAAoB,IAXtB,GAAJ,EAFiB,CAAjC,CAeAy3B,yBAAyB,CAACx3B,IAA1B,CAA+B43B,wBAA/B,EAtBG,EAIL,IAAS73B,EAAT,CAAa,CAAb,CAAgBA,EAAC,CAAGk4B,2BAA2B,CAAC74B,MAAhD,CAAwDW,EAAC,EAAzD,CAA6D,OAApDA,EAAoD,EAmB5D,CACF,CAjEI,wBAmE4B6vB,QAAO,CAACC,GAAR,CAAY2H,yBAAZ,CAnE5B,SAmECa,kBAnED,iDAoEE,CAACA,kBAAD,CAAqB5b,gBAArB,CAAuC8a,sBAAvC,CApEF,2D,oEAoFA,QAASe,oBAAT,MAIJ,IAHDC,kBAGC,MAHDA,iBAGC,CAHkBC,iBAGlB,MAHkBA,iBAGlB,CAHqCC,uBAGrC,MAHqCA,uBAGrC,CAFDC,oBAEC,MAFDA,oBAEC,CAFqBC,oBAErB,MAFqBA,oBAErB,CAF2CC,0BAE3C,MAF2CA,0BAE3C,CADDpd,cACC,MADDA,cACC,CACD,GAAMqd,MAAK,CAAG,EAAd,CACA,GAAIH,oBAAoB,CAAG,CAA3B,CAA8B,CAC5B,GAAII,KAAI,WAAMJ,oBAAN,aAA8Bn6B,kCAAS,CAACo6B,oBAAD,CAAuBC,0BAAvB,CAAmDF,oBAAnD,CAAvC,CAAR,CACA,GAAIld,cAAc,CAAG,CAArB,CAAwB,CACtBsd,IAAI,gBAAWC,+BAAW,CAACvd,cAAD,CAAtB,cAAJ,CACD,CACDqd,KAAK,CAAC74B,IAAN,CAAW84B,IAAX,EACD,CACD,GAAIP,iBAAiB,CAAG,CAAxB,CAA2B,CACzBM,KAAK,CAAC74B,IAAN,WAAcu4B,iBAAd,aAAmCh6B,kCAAS,CAACi6B,iBAAD,CAAoBC,uBAApB,CAA6CF,iBAA7C,CAA5C,GACD,CACD,MAAOM,MAAK,CAAC54B,IAAN,CAAW,IAAX,CAAP,CACD,CAEM,QAAS+4B,yBAAT,OAOJ,IAND7oB,MAMC,OANDA,KAMC,CALDD,MAKC,OALDA,MAKC,CAJDpG,KAIC,OAJDA,KAIC,CAHDuS,iBAGC,OAHDA,iBAGC,CAFD4c,SAEC,OAFDA,SAEC,CADD3S,KACC,OADDA,KACC,CACD,GAAI4S,eAAc,CAAG,CAACvW,QAAtB,CACA,GAAIwW,eAAc,CAAG,CAACxW,QAAtB,CACA,GAAIyW,eAAc,CAAG,CAACzW,QAAtB,CACA,GAAI0W,YAAW,CAAG,CAAC1W,QAAnB,CACA;AACA,GAAM2W,YAAW,CAAGhT,KAAK,CAAG,GAAH,CAAS,GAAlC,CACA,GAAMiT,WAAU,CAAGl7B,MAAM,CAACuG,MAAP,CAAckF,KAAd,CAAnB,CACA,GAAIuS,iBAAiB,CAACjd,MAAlB,CAA2B,CAA3B,EAAgC65B,SAApC,CAA+C,CAC7C,IAAK,GAAIl5B,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGsc,iBAAiB,CAACjd,MAAtC,CAA8CW,CAAC,EAAI,CAAnD,CAAsD,CACpD,GAAMy5B,SAAQ,CAAG,CAAEtpB,MAAM,CAANA,MAAF,CAAUC,KAAK,CAALA,KAAV,CAAjB,CADoD,0BAETspB,0CAA0B,CACnEpd,iBAAiB,CAACtc,CAAD,CAAjB,CAAqBQ,IAD8C,CAEnEi5B,QAFmE,CAGnEF,WAHmE,CAInEhT,KAJmE,CAFjB,CAE5CoT,MAF4C,uBAE5CA,MAF4C,CAE9BC,gBAF8B,uBAEpCC,IAFoC,CAQpD,GAAIF,MAAM,CAAC,CAAD,CAAN,CAAYR,cAAhB,CAAgC,CAC9B;AACAA,cAAc,CAAGQ,MAAM,CAAC,CAAD,CAAvB,CACAL,WAAW,CAAGM,gBAAd,CACD,CACD,GAAID,MAAM,CAAC,CAAD,CAAN,CAAYP,cAAhB,CAAgC,CAC9B;AACAA,cAAc,CAAGO,MAAM,CAAC,CAAD,CAAvB,CACAL,WAAW,CAAGM,gBAAd,CACD,CACD,GAAID,MAAM,CAAC,CAAD,CAAN,CAAYN,cAAhB,CAAgC,CAC9B;AACAA,cAAc,CAAGM,MAAM,CAAC,CAAD,CAAvB,CACAL,WAAW,CAAGM,gBAAd,CACD,CAJD,IAIO,CACLP,cAAc,CAAG,IAAjB,CACD,CACF,CACF,CA3BD,IA2BO,IAAIG,UAAU,CAACn6B,MAAX,CAAoB,CAC7B;AACA;AAFS,EAGNm6B,UAAU,CAAC,CAAD,CAAV,CAAcM,EAHR,EAIN,CAACZ,SAJC,CAIU,CACf,GAAMa,gBAAe,CAAGP,UAAU,CAAC10B,GAAX,CAAe,SAAA5B,CAAC,QAAIA,EAAC,CAAC42B,EAAN,EAAhB,CAAxB,CACA,GAAIE,QAAO,CAAGC,oCAAM,CAACF,eAAD,CAAkB,SAAA72B,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAnB,CAApB,CACA,GAAIg3B,QAAO,CAAGD,oCAAM,CAACF,eAAD,CAAkB,SAAA72B,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAnB,CAApB,CACA,GAAIi3B,OAAM,CAAGH,OAAO,CAAC,CAAD,CAAP,CAAaA,OAAO,CAAC,CAAD,CAAjC,CACA,GAAII,OAAM,CAAGF,OAAO,CAAC,CAAD,CAAP,CAAaA,OAAO,CAAC,CAAD,CAAjC,CACA,GAAMG,gCAA+B,CAAG,QAAlCA,gCAAkC,CAAAC,OAAO,QAAI,CACjD3qB,IAAI,CAAC6f,GAAL,OAAA7f,IAAI,8CAAQ2qB,OAAO,CAACx1B,GAAR,CAAY,SAAA9E,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAb,CAAR,EAD6C,CAEjD2P,IAAI,CAACY,GAAL,OAAAZ,IAAI,8CAAQ2qB,OAAO,CAACx1B,GAAR,CAAY,SAAA9E,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAb,CAAR,EAF6C,CAAJ,EAA/C,CAIA,GAAIm6B,MAAM,GAAK,CAAf,CAAkB,CAChB;AACA;AACA,GAAMI,gBAAe,CAAGf,UAAU,CAAC10B,GAAX,CAAe,SAAA4Q,IAAI,QAAIukB,qCAAM,CAACvkB,IAAI,CAAC8kB,IAAN,CAAY,SAAAx6B,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAb,CAAV,EAAnB,CAAxB,CACAg6B,OAAO,CAAGK,+BAA+B,CAACE,eAAD,CAAzC,CACAJ,MAAM,CAAGH,OAAO,CAAC,CAAD,CAAP,CAAaA,OAAO,CAAC,CAAD,CAA7B,CACD,CACD,GAAII,MAAM,GAAK,CAAf,CAAkB,CAChB;AACA;AACA,GAAMK,gBAAe,CAAGjB,UAAU,CAAC10B,GAAX,CAAe,SAAA4Q,IAAI,QAAIukB,qCAAM,CAACvkB,IAAI,CAAC8kB,IAAN,CAAY,SAAAx6B,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAAb,CAAV,EAAnB,CAAxB,CACAk6B,OAAO,CAAGG,+BAA+B,CAACI,eAAD,CAAzC,CACAL,MAAM,CAAGF,OAAO,CAAC,CAAD,CAAP,CAAaA,OAAO,CAAC,CAAD,CAA7B,CACD,CACDf,cAAc,CAAGa,OAAO,CAAC,CAAD,CAAP,CAAaG,MAAM,CAAG,CAAvC,CACAf,cAAc,CAAGc,OAAO,CAAC,CAAD,CAAP,CAAaE,MAAM,CAAG,CAAvC,CACAf,cAAc,CAAG,IAAjB,CACAC,WAAW,CAAG3pB,IAAI,CAAC+qB,IAAL,CAAU/qB,IAAI,CAAC6f,GAAL,CAASpf,KAAK,CAAG+pB,MAAjB,CAAyBhqB,MAAM,CAAGiqB,MAAlC,CAAV,EAAuDb,WAArE,CACD,CAhCM,IAgCA,CACL,MAAO,CACLJ,cAAc,CAAE,IADX,CACiBC,cAAc,CAAE,IADjC,CACuCC,cAAc,CAAE,IADvD,CAC6DC,WAAW,CAAE,IAD1E,CAAP,CAGD,CACD,MAAO,CACLH,cAAc,CAAdA,cADK,CACWC,cAAc,CAAdA,cADX,CAC2BE,WAAW,CAAXA,WAD3B,CACwCD,cAAc,CAAdA,cADxC,CAAP,CAGD,CAED;;;;GAKO,QAASsB,oBAAT,CAA6Bn6B,IAA7B,CAAmC+lB,KAAnC,CAA0C,CAC/C,GAAMjmB,OAAM,CAAKI,KAAK,CAACC,OAAN,CAAcH,IAAd,GAAuBA,IAAI,CAACnB,MAAL,CAAc,CAAtC,EAA4C,CAACqB,KAAK,CAACC,OAAN,CAAcH,IAAd,CAA9C,CACXA,IADW,CACJA,IAAI,CAAC,CAAD,CADf,CAEA,GAAI+lB,KAAJ,CAAW,CACT,MAAO,CAACqU,mBAAD,CAAcl6B,KAAK,CAACC,OAAN,CAAcL,MAAd,EAAwBA,MAAxB,CAAiC,CAACA,MAAD,CAA/C,CAAP,CACD,CACD,GAAMu6B,MAAK,CAAIn6B,KAAK,CAACC,OAAN,CAAcH,IAAd,GAAuBA,IAAI,CAACnB,MAAL,CAAc,CAAtC,CAA2Cy7B,4BAA3C,CAAkEC,kBAAhF,CACA,MAAO,CAACF,KAAD,CAAQv6B,MAAR,CAAP,CACD,CAGM,QAAS06B,uBAAT,CAAgCjsB,KAAhC,CAAuC,iBAQxCA,KAAK,CAACksB,IARkC,8BAE1CC,IAF0C,CAGxChO,IAHwC,kBAGxCA,IAHwC,CAGlCC,GAHkC,kBAGlCA,GAHkC,CAG7BgO,KAH6B,kBAG7BA,KAH6B,CAGtBC,MAHsB,kBAGtBA,MAHsB,CAK1C/K,CAL0C,aAK1CA,CAL0C,CAM1CC,CAN0C,aAM1CA,CAN0C,CAO1CrB,CAP0C,aAO1CA,CAP0C,IAU1CzuB,KAV0C,CAWxCuO,KAXwC,CAU1CvO,IAV0C,CAUpCosB,EAVoC,CAWxC7d,KAXwC,CAUpC6d,EAVoC,CAUhCtsB,MAVgC,CAWxCyO,KAXwC,CAUhCzO,MAVgC,CAY5C;AACA,GAAI,CAAC4sB,IAAD,CAAOkO,MAAP,CAAeD,KAAf,CAAsBhO,GAAtB,EAA2BwJ,IAA3B,CAAgC,SAAA0E,CAAC,QAAIA,EAAC,CAAG,CAAR,EAAjC,GAA+C,CAAC76B,IAApD,CAA0D,CACxD,MAAO,KAAP,CACD,CACD,GAAM86B,KAAI,CAAGh7B,MAAM,CAAC,CAAD,CAAnB,CAhB4C,0BAiBpBA,MAAM,CAAC,CAAD,CAAN,CAAUO,KAAV,CAAgB7B,KAAhB,CAAsB,CAAC,CAAvB,CAjBoB,0FAiBrCmR,MAjBqC,2BAiB7BC,KAjB6B,2BAkB5C;AACA;AACA;AACA;AACA,GAAMmrB,OAAM,CAAG,CACbrO,IADa,CAEb1sB,IAAI,CAAC2P,MAAL,CAAcmrB,IAAI,CAACE,QAAnB,CAA8BrrB,MAA9B,CAAuCirB,MAF1B,CAGb56B,IAAI,CAAC4P,KAAL,CAAakrB,IAAI,CAACE,QAAlB,CAA6BprB,KAA7B,CAAqC+qB,KAHxB,CAIbhO,GAJa,CAAf,CAMA,MAAO,IAAIiF,0BAAJ,CAAiBrjB,KAAjB,CAAwB,CAC7B0sB,WAAW,CAAEj7B,IADgB,CAE7B;AACA;AACA;AACA;AACA+6B,MAAM,CAANA,MAN6B,CAO7B3O,EAAE,qBAAe2O,MAAf,aAAyB3O,EAAzB,CAP2B,CAQ7B8O,MAAM,CAAE,CAAErL,CAAC,CAADA,CAAF,CAAKC,CAAC,CAADA,CAAL,CAAQrB,CAAC,CAADA,CAAR,CARqB,CAAxB,CAAP,CAUD,C;;;;;;ACncD,6D;;;;;;ACAA,mD;;;;;;ACAA,wD;;;;;;ACAA,qD;;;;;;ACAA,+D;;;;;;ACAA,uD;;;;;;ACAA,gE;;;;;;ACAA,mD;;;;;;ACAA,4C;;;;;;ACAA,yC;;;;;;;ACAA,uC;;;;;;;ACAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;GAae,QAAS0M,UAAT,CAAmB5sB,KAAnB,CAA0B,IAErC6sB,WAFqC,CASnC7sB,KATmC,CAErC6sB,UAFqC,CAGrCC,UAHqC,CASnC9sB,KATmC,CAGrC8sB,UAHqC,CAIrCxL,CAJqC,CASnCthB,KATmC,CAIrCshB,CAJqC,CAKrCC,CALqC,CASnCvhB,KATmC,CAKrCuhB,CALqC,CAMrCwL,WANqC,CASnC/sB,KATmC,CAMrC+sB,WANqC,CAOrCC,YAPqC,CASnChtB,KATmC,CAOrCgtB,YAPqC,CAQrCztB,QARqC,CASnCS,KATmC,CAQrCT,QARqC,CAUvC;AACA,GAAI+hB,CAAC,CAAG,CAAJ,EAASA,CAAC,CAAGyL,WAAb,EAA4BxL,CAAC,CAAG,CAAhC,EAAqCA,CAAC,CAAGyL,YAA7C,CAA2D,CACzD,MAAO,KAAP,CACD,CACD;AACA,GAAMC,iBAAgB,CAAIJ,UAAU,GAAKC,UAAzC,CACA,GAAMI,eAAc,CAAG,CAAvB,CACA,mBACE,sHACGD,gBAAgB,cACf,2DAAC,wDAAD,EACE,CAAC,CAAE3L,CADL,CAEE,CAAC,CAAEC,CAFL,CAGE,WAAW,CAAEwL,WAHf,CAIE,YAAY,CAAEC,YAJhB,EAMGztB,QANH,CADe,cAUf,sHACG+hB,CAAC,GAAK,IAAN,cACC,kEACE,SAAS,CAAC,yBADZ,CAEE,KAAK,CAAE,CACLnD,IAAI,WAAKmD,CAAC,CAAG4L,cAAc,CAAG,CAA1B,MADC,CAEL9O,GAAG,CAAE,CAFA,CAGL/c,KAAK,WAAK6rB,cAAL,MAHA,CAIL9rB,MAAM,WAAK4rB,YAAL,MAJD,CAFT,EADD,CAUG,IAXN,CAYGzL,CAAC,GAAK,IAAN,cACC,kEACE,SAAS,CAAC,yBADZ,CAEE,KAAK,CAAE,CACLpD,IAAI,CAAE,CADD,CAELC,GAAG,WAAKmD,CAAC,CAAG2L,cAAc,CAAG,CAA1B,MAFE,CAGL7rB,KAAK,WAAK0rB,WAAL,MAHA,CAIL3rB,MAAM,WAAK8rB,cAAL,MAJD,CAFT,EADD,CAUG,IAtBN,CAXJ,CADF,CAuCD,C;;;;;;;;;;;ACtEc,QAASC,eAAT,CAAwBntB,KAAxB,CAA+B,IAE1CpE,KAF0C,CAGxCoE,KAHwC,CAE1CpE,IAF0C,CAK5C,mBACE,qFACE,wEACGrM,MAAM,CAACsL,OAAP,CAAee,IAAf,EAAqB7F,GAArB,CAAyB,yOAAE1G,GAAF,UAAOsE,KAAP,6BACxB,iEAAI,GAAG,CAAEtE,GAAT,eACE,qEAAKA,GAAL,CADF,cAEE,qEAAKsE,KAAL,CAFF,CADwB,EAAzB,CADH,CADF,CADF,CAYD,C;;;;;;;;;ACnBc;AACf;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA,C;;ACbA;AAA0E;AAC3D;AACf;AACA,eAAe,6BAA4B;AAC3C;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;AClBA,yCACmE;AACtB;GAUxBy5B,0B,ulCACI,iBAKjB,KAAKptB,KALY,CAEnBqtB,gBAFmB,aAEnBA,gBAFmB,CAEDC,UAFC,aAEDA,UAFC,CAEWjsB,KAFX,aAEWA,KAFX,CAEkBksB,WAFlB,aAEkBA,WAFlB,CAE+BC,SAF/B,aAE+BA,SAF/B,CAE0CpxB,KAF1C,aAE0CA,KAF1C,CAGnBqxB,OAHmB,aAGnBA,OAHmB,CAGVC,OAHU,aAGVA,OAHU,CAGDC,YAHC,aAGDA,YAHC,CAGaC,SAHb,aAGaA,SAHb,CAGwBC,aAHxB,aAGwBA,aAHxB,CAGuCC,WAHvC,aAGuCA,WAHvC,CAInBC,aAJmB,aAInBA,aAJmB,CAMrB,GAAMC,kBAAiB,CAAGJ,SAAS,EAAIn0B,+EAAvC,CACA,GAAMw0B,aAAY,CAAGP,OAAO,CAAG,CAACG,aAAa,CAAGh0B,sEAAjB,EAAgC,CAAhC,CAAoCi0B,WAAnE,CACA,MAAOC,cAAa,CAAG,EAAH,CAAQ,CAC1B,GAAIG,0DAAJ,CAAc,CACZrQ,EAAE,CAAE,eADQ,CAEZ1iB,gBAAgB,CAAEC,+DAAiB,CAACC,SAFxB,CAGZ5J,IAAI,CAAE47B,gBAHM,CAIZc,OAAO,CAAE,iBAAA1uB,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAJE,CAKZ2uB,WAAW,CAAE,qBAAA3uB,CAAC,QAAI,CAAC6tB,UAAU,CAAI,CAAC7tB,CAAC,CAAC,CAAD,CAAD,CAAO,GAAR,EAAe4B,KAAhB,CAAyBksB,WAAvC,CAAoDU,YAApD,CAAJ,EALF,CAMZI,aAAa,CAAE,OANH,CAOZC,QAAQ,CAAE,0BAAMv0B,+EAAmB,CAACqC,KAAD,CAAzB,EAPE,CAQZmyB,OAAO,CAAGP,iBAAiB,CAAGv0B,+EAAH,CAA0B,CARzC,CASZ+0B,QAAQ,CAAE,EATE,CAUZC,UAAU,CAAEv0B,2EAVA,CAWZw0B,cAAc,CAAE,CACdN,WAAW,CAAE,CAACH,YAAD,CAAeX,UAAf,CAA2BC,WAA3B,CAAwCC,SAAxC,CADC,CAEde,OAAO,CAAE,CAACP,iBAAD,CAFK,CAGdM,QAAQ,CAAE,CAAClyB,KAAD,CAHI,CAXJ,CAAd,CAD0B,CAkB1B,GAAI8xB,0DAAJ,CAAc,CACZrQ,EAAE,CAAE,cADQ,CAEZ1iB,gBAAgB,CAAEC,+DAAiB,CAACC,SAFxB,CAGZ5J,IAAI,CAAE,CAAC,CAAEwO,KAAK,CAAE0tB,YAAT,CAAD,CAHM,CAIZQ,OAAO,CAAE,iBAAA1uB,CAAC,QAAIA,EAAC,CAACQ,KAAN,EAJE,CAKZmuB,WAAW,CAAE,CAACX,OAAD,CAAUC,OAAV,CALD,CAMZW,aAAa,CAAE,QANH,CAOZC,QAAQ,CAAE,0BAAMv0B,+EAAmB,CAACqC,KAAD,CAAzB,EAPE,CAQZmyB,OAAO,CAAG,CAACP,iBAAD,CAAqBt0B,+EAArB,CAA4C,CAR1C,CASZ80B,QAAQ,CAAE,CATE,CAUZC,UAAU,CAAEv0B,2EAVA,CAWZw0B,cAAc,CAAE,CACdH,OAAO,CAAE,CAACP,iBAAD,CADK,CAEdM,QAAQ,CAAE,CAAClyB,KAAD,CAFI,CAXJ,CAAd,CAlB0B,CAA5B,CAmCD,C,iEAEqB,kBAIhB,KAAK4D,KAJW,CAElB5D,KAFkB,cAElBA,KAFkB,CAEXqxB,OAFW,cAEXA,OAFW,CAEFC,OAFE,cAEFA,OAFE,CAEOG,aAFP,cAEOA,aAFP,CAEsBC,WAFtB,cAEsBA,WAFtB,CAGlBa,mBAHkB,cAGlBA,mBAHkB,CAGGC,cAHH,cAGGA,cAHH,CAGmBC,SAHnB,cAGmBA,SAHnB,CAKpB,GAAMZ,aAAY,CAAGP,OAAO,CAAG,CAACG,aAAa,CAAGh0B,sEAAjB,EAAgC,CAAhC,CAAoCi0B,WAAnE,CACA,GAAMgB,cAAa,CAAGrB,OAAO,CAAG,CAACmB,cAAc,CAAG/0B,sEAAlB,EAAiC,CAAjC,CAAqCi0B,WAArE,CACA,MAAOa,oBAAmB,CAAC54B,GAApB,CAAwB,SAAAtE,IAAI,QACjC,IAAIy8B,0DAAJ,CAAc,CACZrQ,EAAE,0BAAoBpsB,IAAI,CAAC,CAAD,CAAxB,CADU,CAEZ0J,gBAAgB,CAAEC,+DAAiB,CAACC,SAFxB,CAGZ5J,IAAI,CAAE,CAACA,IAAD,CAHM,CAIZ08B,OAAO,CAAE,iBAAA1uB,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAJE,CAKZ4uB,aAAa,CAAGQ,SAAS,CAAG,KAAH,CAAW,OALxB,CAMZE,oBAAoB,CAAE,KANV,CAOZT,QAAQ,CAAE,0BAAMv0B,+EAAmB,CAACqC,KAAD,CAAzB,EAPE,CAQZmyB,OAAO,CAAE90B,+EARG,CASZ20B,WAAW,CAAE,qBAAA3uB,CAAC,QAAI,CACfovB,SAAS,CACNC,aADM,CAENrB,OAAO,CACL,CAAC,CAAC,CAACkB,mBAAmB,CAACr+B,MAArB,CAA8BmP,CAAC,CAAC,CAAD,CAAD,CAAO,CAAtC,EAA2CjG,yEAA3C,CAA4DK,sEAA7D,EACA,CADA,CACIi0B,WALM,CAOfe,SAAS,CACNnB,OAAO,CACL,CAAC,CAAC,CAACiB,mBAAmB,CAACr+B,MAArB,CAA8BmP,CAAC,CAAC,CAAD,CAAD,CAAO,CAAtC,EAA2CjG,yEAA3C,CAA4DK,sEAA7D,EACA,CADA,CACIi0B,WAHA,CAING,YAXY,CAAJ,EATF,CAuBZO,QAAQ,CAAGK,SAAS,CAAG,CAAH,CAAO,EAvBf,CAwBZJ,UAAU,CAAEv0B,2EAxBA,CAAd,CADiC,EAA5B,CAAP,CA4BD,C,qEAEuB,kBAKlB,KAAK8F,KALa,CAEpBgvB,iBAFoB,cAEpBA,iBAFoB,CAEDC,SAFC,cAEDA,SAFC,CAEU7tB,MAFV,cAEUA,MAFV,CAEkB8tB,YAFlB,cAEkBA,YAFlB,CAGpBC,UAHoB,cAGpBA,UAHoB,CAGR/yB,KAHQ,cAGRA,KAHQ,CAGDgzB,aAHC,cAGDA,aAHC,CAGc3B,OAHd,cAGcA,OAHd,CAGuBC,OAHvB,cAGuBA,OAHvB,CAGgC2B,UAHhC,cAGgCA,UAHhC,CAG4CT,cAH5C,cAG4CA,cAH5C,CAIpBd,WAJoB,cAIpBA,WAJoB,CAIPwB,cAJO,cAIPA,cAJO,CAMtB,GAAMC,mBAAkB,CAAGF,UAAU,EAAI51B,+EAAzC,CACA,GAAMq1B,cAAa,CAAGrB,OAAO,CAAG,CAACmB,cAAc,CAAG/0B,sEAAlB,EAAiC,CAAjC,CAAqCi0B,WAArE,CACA,MAAOwB,eAAc,CAAG,EAAH,CAAQ,CAC3B,GAAIpB,0DAAJ,CAAc,CACZrQ,EAAE,CAAE,gBADQ,CAEZ1iB,gBAAgB,CAAEC,+DAAiB,CAACC,SAFxB,CAGZ5J,IAAI,CAAEu9B,iBAHM,CAIZb,OAAO,CAAE,iBAAA1uB,CAAC,QAAIA,EAAC,CAAC,CAAD,CAAL,EAJE,CAKZ2uB,WAAW,CAAE,qBAAA3uB,CAAC,QAAI,CAACqvB,aAAD,CAAgBG,SAAS,CAAI,CAACxvB,CAAC,CAAC,CAAD,CAAD,CAAO,GAAR,EAAe2B,MAAhB,CAA0B8tB,YAAtD,CAAJ,EALF,CAMZb,aAAa,CAAE,KANH,CAOZC,QAAQ,CAAE,0BAAMv0B,+EAAmB,CAACqC,KAAD,CAAzB,EAPE,CAQZmyB,OAAO,CAAGgB,kBAAkB,CAAG91B,+EAAH,CAA0B,CAR1C,CASZ+0B,QAAQ,CAAE,CATE,CAUZC,UAAU,CAAEv0B,2EAVA,CAWZw0B,cAAc,CAAE,CACdN,WAAW,CAAE,CAACU,aAAD,CAAgBG,SAAhB,CAA2BC,YAA3B,CAAyCC,UAAzC,CADC,CAEdZ,OAAO,CAAE,CAACgB,kBAAD,CAFK,CAGdjB,QAAQ,CAAE,CAAClyB,KAAD,CAHI,CAXJ,CAAd,CAD2B,CAkB3B,GAAI8xB,0DAAJ,CAAc,CACZrQ,EAAE,CAAE,eADQ,CAEZ1iB,gBAAgB,CAAEC,+DAAiB,CAACC,SAFxB,CAGZ5J,IAAI,CAAE,CAAC,CAAEwO,KAAK,CAAEmvB,aAAT,CAAD,CAHM,CAIZjB,OAAO,CAAE,iBAAA1uB,CAAC,QAAIA,EAAC,CAACQ,KAAN,EAJE,CAKZmuB,WAAW,CAAE,CAACX,OAAD,CAAUC,OAAV,CALD,CAMZW,aAAa,CAAE,QANH,CAOZC,QAAQ,CAAE,0BAAMv0B,+EAAmB,CAACqC,KAAD,CAAzB,EAPE,CAQZmyB,OAAO,CAAG,CAACgB,kBAAD,CAAsB71B,+EAAtB,CAA6C,CAR3C,CASZ80B,QAAQ,CAAE,EATE,CAUZC,UAAU,CAAEv0B,2EAVA,CAWZw0B,cAAc,CAAE,CACdH,OAAO,CAAE,CAACgB,kBAAD,CADK,CAEdjB,QAAQ,CAAE,CAAClyB,KAAD,CAFI,CAXJ,CAAd,CAlB2B,CAA7B,CAmCD,C,mDAEc,IACLozB,KADK,CACI,KAAKxvB,KADT,CACLwvB,IADK,CAEb,GAAIA,IAAI,GAAK,MAAb,CAAqB,CACnB,MAAO,MAAKC,qBAAL,EAAP,CACD,CACD,GAAID,IAAI,GAAK,KAAb,CAAoB,CAClB,MAAO,MAAKE,oBAAL,EAAP,CACD,CACD,GAAIF,IAAI,GAAK,QAAb,CAAuB,CACrB,MAAO,MAAKG,mBAAL,EAAP,CACD,CACD,MAAO,EAAP,CACD,C,uCA5IoDC,4D,EA+IvDxC,yBAAyB,CAAC/G,SAA1B,CAAsC,2BAAtC,C;;;;;;;AC3JA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOe,QAASwJ,iBAAT,CAA0B7vB,KAA1B,CAAiC,IAE5CT,SAF4C,CAG1CS,KAH0C,CAE5CT,QAF4C,CAK9C,GAAM4Z,QAAO,CAAGtB,iEAAS,EAAzB,CAEA,mBACE,2DAAC,4DAAD,EAAK,SAAS,CAAEsB,OAAO,CAACiD,GAAxB,eACE,2DAAC,uEAAD,EAAgB,SAAS,CAAEjD,OAAO,CAACyD,cAAnC,eACE,2DAAC,8DAAD,EAAO,SAAS,CAAEzD,OAAO,CAAC2W,KAA1B,CAAiC,IAAI,CAAC,OAAtC,eACE,2DAAC,kEAAD,MACGvwB,QADH,CADF,CADF,CADF,CADF,CAWD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBM,GAAM6d,OAAM,CAAGtF,6BAAU,CAAC,iBAAO,CACtCiY,aAAa,CAAE,CACb7R,QAAQ,CAAE,UADG,CAEb7c,KAAK,CAAE,KAFM,CAGbD,MAAM,CAAE,KAHK,CAIb4uB,aAAa,CAAE,MAJF,CAKbC,UAAU,CAAE,MALC,CADuB,CAQtCC,cAAc,CAAE,CACdhZ,OAAO,CAAE,GADK,CAEdqF,OAAO,CAAE,KAFK,CAGdyT,aAAa,CAAE,MAHD,CAId,uDAAwD,CACtD/S,QAAQ,CAAE,KAD4C,CAEtD/F,OAAO,CAAE,GAF6C,CAGtDiZ,OAAO,CAAE,CAH6C,CAItD5T,OAAO,CAAE,OAJ6C,CAJ1C,CAUd,UAAW,CACT6T,cAAc,CAAE,UADP,CAVG,CARsB,CAAP,EAAD,CAAzB,C;;;ACIQ,QAASC,QAAT,CAAiBrwB,KAAjB,CAAwB,IAEnCshB,EAFmC,CAOjCthB,KAPiC,CAEnCshB,CAFmC,CAGnCC,CAHmC,CAOjCvhB,KAPiC,CAGnCuhB,CAHmC,CAInCwL,WAJmC,CAOjC/sB,KAPiC,CAInC+sB,WAJmC,CAKnCC,YALmC,CAOjChtB,KAPiC,CAKnCgtB,YALmC,CAMnCztB,QANmC,CAOjCS,KAPiC,CAMnCT,QANmC,CAQrC,GAAM8C,IAAG,CAAG9J,iCAAM,EAAlB,CACA,GAAM4gB,QAAO,CAAGiE,MAAM,EAAtB,CATqC,cAUD3a,mCAAQ,CAAC,OAAD,CAVP,kEAU9B6tB,UAV8B,eAUlBC,aAVkB,8BAWD9tB,mCAAQ,CAAC,QAAD,CAXP,mEAW9B+tB,UAX8B,eAWlBC,aAXkB,eAarC,GAAM3S,oBAAmB,CAAG1b,6CAAoB,CAACC,GAAD,CAAhD,CAEA;AACAO,oCAAS,CAAC,UAAM,CACd,GAAIP,GAAG,EAAIA,GAAG,CAAC5J,OAAf,CAAwB,CACtB,GAAMi4B,MAAK,CAAIpP,CAAC,CAAGyL,WAAW,CAAG,CAAjC,CACA,GAAM4D,MAAK,CAAIpP,CAAC,CAAGyL,YAAY,CAAG,CAAlC,CACAuD,aAAa,CAACG,KAAK,CAAG,KAAH,CAAW,OAAjB,CAAb,CACAD,aAAa,CAACE,KAAK,CAAG,KAAH,CAAW,QAAjB,CAAb,CACAtuB,GAAG,CAAC5J,OAAJ,CAAYm4B,KAAZ,CAAkBzS,IAAlB,WAA4BmD,CAAC,EAAIoP,KAAK,CAAG,CAAC,EAAJ,CAAS,CAAlB,CAA7B,OACAruB,GAAG,CAAC5J,OAAJ,CAAYm4B,KAAZ,CAAkBxS,GAAlB,WAA2BmD,CAAC,EAAIoP,KAAK,CAAG,CAAC,EAAJ,CAAS,CAAlB,CAA5B,OACD,CACF,CATQ,CASN,CAACrP,CAAD,CAAIC,CAAJ,CAAOwL,WAAP,CAAoBC,YAApB,CATM,CAAT,CAWA,mBACE,8CACE,GAAG,CAAE3qB,GADP,CAEE,SAAS,CAAE8W,OAAO,CAAC4W,aAFrB,EAIG1tB,GAAG,EAAIA,GAAG,CAAC5J,OAAX,cACC,uCAAC,gBAAD,EACE,IAAI,KADN,CAEE,QAAQ,CAAE4J,GAAG,CAAC5J,OAFhB,CAGE,SAAS,CAAEqlB,mBAHb,CAIE,UAAU,KAJZ,CAKE,SAAS,WAAK0S,UAAL,aAAmBF,UAAnB,CALX,eAOE,uCAAC,eAAD,EAAO,SAAS,CAAE,CAAlB,CAAqB,SAAS,CAAEnX,OAAO,CAAC+W,cAAxC,EACG3wB,QADH,CAPF,CADD,CAYG,IAhBN,CADF,CAoBD,C;;;;;;;;;ACrDD;AAAA;AAAA;AAAA;AAAA,sC,CACA,sCAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,GAAMsxB,WAAU,CAAG,CAAC,CAAC,GAAD,CAAM,CAAN,CAAS,EAAT,CAAD,CAAe,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAAf,CAA8B,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAA9B,CAA6C,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAA7C,CAA8D,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAA9D,CAA+E,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAA/E,CAAgG,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAhG,CAAiH,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAjH,CAAkI,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAAlI,CAAkJ,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAAlJ,CAAkK,CAAC,CAAD,CAAI,EAAJ,CAAQ,EAAR,CAAlK,CAAnB,CACA;AACA,GAAMC,aAAY,CAAG,CAAC,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAD,CAAe,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAf,CAA6B,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7B,CAA2C,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3C,CAAyD,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzD,CAAuE,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvE,CAAqF,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAArF,CAAmG,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAnG,CAAiH,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAjH,CAA+H,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA/H,CAA6I,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7I,CAA2J,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3J,CAAyK,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzK,CAAuL,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvL,CAAqM,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAArM,CAAmN,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAnN,CAAiO,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAjO,CAA+O,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA/O,CAA6P,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7P,CAA2Q,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3Q,CAAyR,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzR,CAAuS,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvS,CAAqT,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAArT,CAAmU,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAnU,CAAiV,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAjV,CAA+V,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA/V,CAA6W,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7W,CAA2X,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3X,CAAyY,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzY,CAAuZ,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvZ,CAAqa,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAra,CAAmb,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAnb,CAAic,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAjc,CAA+c,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA/c,CAA6d,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7d,CAA2e,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3e,CAAyf,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzf,CAAugB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvgB,CAAqhB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAArhB,CAAmiB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAniB,CAAijB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAjjB,CAA+jB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA/jB,CAA6kB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA7kB,CAA2lB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAA3lB,CAAymB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAzmB,CAAunB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAvnB,CAAqoB,CAAC,EAAD,CAAK,CAAL,CAAQ,GAAR,CAAroB,CAAmpB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAnpB,CAAkqB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAlqB,CAAirB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAjrB,CAAgsB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAhsB,CAA+sB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA/sB,CAA8tB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA9tB,CAA6uB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA7uB,CAA4vB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA5vB,CAA2wB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA3wB,CAA0xB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA1xB,CAAyyB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAzyB,CAAwzB,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAxzB,CAAu0B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAv0B,CAAs1B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAt1B,CAAq2B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAr2B,CAAo3B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAp3B,CAAm4B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAn4B,CAAk5B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAl5B,CAAi6B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAj6B,CAAg7B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAAh7B,CAA+7B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA/7B,CAA88B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA98B,CAA69B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA79B,CAA4+B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA5+B,CAA2/B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA3/B,CAA0gC,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAA1gC,CAAyhC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzhC,CAAyiC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAziC,CAAyjC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzjC,CAAykC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzkC,CAAylC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzlC,CAAymC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzmC,CAAynC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAznC,CAAyoC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzoC,CAAypC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzpC,CAAyqC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzqC,CAAyrC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzrC,CAAysC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzsC,CAAytC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAztC,CAAyuC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzuC,CAAyvC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzvC,CAAywC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzwC,CAAyxC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzxC,CAAyyC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzyC,CAAyzC,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzzC,CAAy0C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz0C,CAAy1C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz1C,CAAy2C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz2C,CAAy3C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz3C,CAAy4C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz4C,CAAy5C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz5C,CAAy6C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz6C,CAAy7C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz7C,CAAy8C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz8C,CAAy9C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz9C,CAAy+C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz+C,CAAy/C,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz/C,CAAygD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzgD,CAAyhD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzhD,CAAyiD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAziD,CAAyjD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzjD,CAAykD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzkD,CAAylD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzlD,CAAymD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzmD,CAAynD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAznD,CAAyoD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzoD,CAAypD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzpD,CAAyqD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzqD,CAAyrD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzrD,CAAysD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzsD,CAAytD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAztD,CAAyuD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzuD,CAAyvD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzvD,CAAywD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzwD,CAAyxD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzxD,CAAyyD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzyD,CAAyzD,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzzD,CAAy0D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz0D,CAAy1D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz1D,CAAy2D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz2D,CAAy3D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz3D,CAAy4D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz4D,CAAy5D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz5D,CAAy6D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz6D,CAAy7D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz7D,CAAy8D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz8D,CAAy9D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz9D,CAAy+D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz+D,CAAy/D,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAz/D,CAAygE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzgE,CAAyhE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzhE,CAAyiE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAziE,CAAyjE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzjE,CAAykE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzkE,CAAylE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzlE,CAAymE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzmE,CAAynE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAznE,CAAyoE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzoE,CAAypE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzpE,CAAyqE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzqE,CAAyrE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzrE,CAAysE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzsE,CAAytE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAztE,CAAyuE,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CAAzuE,CAAyvE,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAAzvE,CAAwwE,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CAAxwE,CAAuxE,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvxE,CAAuyE,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvyE,CAAuzE,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvzE,CAAu0E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv0E,CAAu1E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv1E,CAAu2E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv2E,CAAu3E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv3E,CAAu4E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv4E,CAAu5E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv5E,CAAu6E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv6E,CAAu7E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv7E,CAAu8E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv8E,CAAu9E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv9E,CAAu+E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv+E,CAAu/E,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv/E,CAAugF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvgF,CAAuhF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvhF,CAAuiF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAviF,CAAujF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvjF,CAAukF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvkF,CAAulF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvlF,CAAumF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvmF,CAAunF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvnF,CAAuoF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvoF,CAAupF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvpF,CAAuqF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvqF,CAAurF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvrF,CAAusF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvsF,CAAutF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvtF,CAAuuF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvuF,CAAuvF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvvF,CAAuwF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvwF,CAAuxF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvxF,CAAuyF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvyF,CAAuzF,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvzF,CAAu0F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv0F,CAAu1F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv1F,CAAu2F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv2F,CAAu3F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv3F,CAAu4F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv4F,CAAu5F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv5F,CAAu6F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv6F,CAAu7F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv7F,CAAu8F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv8F,CAAu9F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv9F,CAAu+F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv+F,CAAu/F,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv/F,CAAugG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvgG,CAAuhG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvhG,CAAuiG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAviG,CAAujG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvjG,CAAukG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvkG,CAAulG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvlG,CAAumG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvmG,CAAunG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvnG,CAAuoG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvoG,CAAupG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvpG,CAAuqG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvqG,CAAurG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvrG,CAAusG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvsG,CAAutG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvtG,CAAuuG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvuG,CAAuvG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvvG,CAAuwG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvwG,CAAuxG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvxG,CAAuyG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvyG,CAAuzG,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvzG,CAAu0G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv0G,CAAu1G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv1G,CAAu2G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv2G,CAAu3G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv3G,CAAu4G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv4G,CAAu5G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv5G,CAAu6G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv6G,CAAu7G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv7G,CAAu8G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv8G,CAAu9G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv9G,CAAu+G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv+G,CAAu/G,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv/G,CAAugH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvgH,CAAuhH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvhH,CAAuiH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAviH,CAAujH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvjH,CAAukH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvkH,CAAulH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvlH,CAAumH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvmH,CAAunH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvnH,CAAuoH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvoH,CAAupH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvpH,CAAuqH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvqH,CAAurH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvrH,CAAusH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvsH,CAAutH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvtH,CAAuuH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvuH,CAAuvH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvvH,CAAuwH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvwH,CAAuxH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvxH,CAAuyH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvyH,CAAuzH,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAvzH,CAAu0H,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv0H,CAAu1H,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv1H,CAAu2H,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv2H,CAAu3H,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CAAv3H,CAArB,CAEA;AACA,QAASC,UAAT,CAAmBC,MAAnB,CAA2B,CACzB,MAAO,UAAC5J,MAAD,CAAY,CACjB,GAAMjpB,EAAC,CAAGipB,MAAM,CAAC92B,MAAjB,CACA,GAAIM,EAAC,CAAG,GAAIe,MAAJ,CAAUwM,CAAV,CAAR,CACA,GAAI6J,EAAC,CAAG,GAAIrW,MAAJ,CAAUwM,CAAV,CAAR,CACA,GAAI8J,EAAC,CAAG,GAAItW,MAAJ,CAAUwM,CAAV,CAAR,CACA,GAAIlN,EAAJ,CAAO,GACL2O,MADK,CAEP;AACA,IAAK3O,CAAC,CAAG,CAAT,CAAYA,CAAC,CAAGkN,CAAhB,CAAmB,EAAElN,CAArB,CAAwB,CACtB2O,KAAK,CAAG,CAACwnB,MAAM,CAACn2B,CAAD,CAAN,CAAU,CAAV,CAAD,CAAem2B,MAAM,CAACn2B,CAAD,CAAN,CAAU,CAAV,CAAf,CAA6Bm2B,MAAM,CAACn2B,CAAD,CAAN,CAAU,CAAV,CAA7B,CAAR,CACAL,CAAC,CAACK,CAAD,CAAD,CAAO2O,KAAK,CAAC,CAAD,CAAL,EAAY,CAAnB,CACAoI,CAAC,CAAC/W,CAAD,CAAD,CAAO2O,KAAK,CAAC,CAAD,CAAL,EAAY,CAAnB,CACAqI,CAAC,CAAChX,CAAD,CAAD,CAAO2O,KAAK,CAAC,CAAD,CAAL,EAAY,CAAnB,CACD,CACDhP,CAAC,CAAGogC,MAAM,CAACpgC,CAAD,CAAV,CACAoX,CAAC,CAAGgpB,MAAM,CAAChpB,CAAD,CAAV,CACAC,CAAC,CAAG+oB,MAAM,CAAC/oB,CAAD,CAAV,CACA,MAAO,UAAAgpB,CAAC,QAAI,CAACrgC,CAAC,CAACqgC,CAAD,CAAF,CAAOjpB,CAAC,CAACipB,CAAD,CAAR,CAAahpB,CAAC,CAACgpB,CAAD,CAAd,CAAJ,EAAR,CACD,CAlBD,CAmBD,CAED;AACA,QAASC,MAAT,CAAep7B,MAAf,CAAuB,CACrB,QAASq7B,WAAT,CAAoBC,EAApB,CAAwBC,EAAxB,CAA4BC,EAA5B,CAAgCC,EAAhC,CAAoCC,EAApC,CAAwC,CACtC,GAAMC,GAAE,CAAGL,EAAE,CAAGA,EAAhB,CAAoB,GAClBM,GAAE,CAAGD,EAAE,CAAGL,EADQ,CAEpB,MAAO,CAAC,CAAC,EAAI,EAAIA,EAAR,CAAa,EAAIK,EAAjB,CAAsBC,EAAvB,EAA6BL,EAA7B,CACA,CAAC,EAAI,EAAII,EAAR,CAAa,EAAIC,EAAlB,EAAwBJ,EADxB,CAEA,CAAC,EAAI,EAAIF,EAAR,CAAa,EAAIK,EAAjB,CAAsB,EAAIC,EAA3B,EAAiCH,EAFjC,CAGAG,EAAE,CAAGF,EAHN,EAGY,CAHnB,CAID,CAED,GAAMrzB,EAAC,CAAGrI,MAAM,CAACxF,MAAP,CAAgB,CAA1B,CACA,MAAO,UAAC2gC,CAAD,CAAO,CACZ,GAAMhgC,EAAC,CAAGggC,CAAC,EAAI,CAAL,CAAUA,CAAC,CAAG,CAAd,CAAmBA,CAAC,EAAI,CAAL,EAAUA,CAAC,CAAG,CAAJ,CAAO9yB,CAAC,CAAG,CAArB,EAA0ByC,IAAI,CAACC,KAAL,CAAWowB,CAAC,CAAG9yB,CAAf,CAAvD,CACA,GAAMmzB,GAAE,CAAGx7B,MAAM,CAAC7E,CAAD,CAAjB,CACA,GAAMsgC,GAAE,CAAGz7B,MAAM,CAAC7E,CAAC,CAAG,CAAL,CAAjB,CACA,GAAMogC,GAAE,CAAGpgC,CAAC,CAAG,CAAJ,CAAQ6E,MAAM,CAAC7E,CAAC,CAAG,CAAL,CAAd,CAAwB,EAAIqgC,EAAJ,CAASC,EAA5C,CACA,GAAMC,GAAE,CAAGvgC,CAAC,CAAGkN,CAAC,CAAG,CAAR,CAAYrI,MAAM,CAAC7E,CAAC,CAAG,CAAL,CAAlB,CAA4B,EAAIsgC,EAAJ,CAASD,EAAhD,CACA,MAAOH,WAAU,CAAC,CAACF,CAAC,CAAGhgC,CAAC,CAAGkN,CAAT,EAAcA,CAAf,CAAkBkzB,EAAlB,CAAsBC,EAAtB,CAA0BC,EAA1B,CAA8BC,EAA9B,CAAjB,CACD,CAPD,CAQD,CAGD;AACA,GAAMG,oBAAmB,CAAGZ,SAAS,CAACG,KAAD,CAArC,CAEA,QAASU,2BAAT,CAAoCjd,KAApC,CAA2C,CACzC,GAAMxW,EAAC,CAAGwW,KAAK,CAACrkB,MAAhB,CACA,MAAO,UAAA2gC,CAAC,QAAItc,MAAK,CAAC/T,IAAI,CAACY,GAAL,CAAS,CAAT,CAAYZ,IAAI,CAAC6f,GAAL,CAAStiB,CAAC,CAAG,CAAb,CAAgByC,IAAI,CAACC,KAAL,CAAWowB,CAAC,CAAG9yB,CAAf,CAAhB,CAAZ,CAAD,CAAT,EAAR,CACD,CAEM,GAAM0zB,gBAAe,CAAGF,mBAAmB,CAACd,UAAD,CAA3C,CACA,GAAMiB,kBAAiB,CAAGF,0BAA0B,CAACd,YAAD,CAApD,CAGP;;;;;;;;;;;GAYO,QAASiB,cAAT,CAAuBhc,MAAvB,CAA+B,IAElCic,kBAFkC,CAQhCjc,MARgC,CAElCic,iBAFkC,CAGlClsB,cAHkC,CAQhCiQ,MARgC,CAGlCjQ,cAHkC,CAIlChG,QAJkC,CAQhCiW,MARgC,CAIlCjW,QAJkC,CAIxBkW,gBAJwB,CAQhCD,MARgC,CAIxBC,gBAJwB,CAKlCxX,YALkC,CAQhCuX,MARgC,CAKlCvX,YALkC,CAMlCyzB,mBANkC,CAQhClc,MARgC,CAMlCkc,mBANkC,CAOlC71B,KAPkC,CAQhC2Z,MARgC,CAOlC3Z,KAPkC,CASpC,GAAI41B,iBAAiB,GAAK,eAAtB,EAAyClsB,cAAzC,EAA2DmsB,mBAA/D,CAAoF,CAClF;AACA,GAAMC,gBAAe,CAAGJ,iBAAxB,CACA,GAAM1K,OAAM,CAAG,GAAIrU,IAAJ,EAAf,CACA,IAAK,GAAI9hB,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG6U,cAAc,CAACxV,MAAnC,CAA2CW,CAAC,EAAI,CAAhD,CAAmD,CACjD,GAAM0C,MAAK,CAAGmS,cAAc,CAAC7U,CAAD,CAA5B,CACA,GAAMkhC,UAAS,CAAGD,eAAe,CAACv+B,KAAK,CAAG,GAAT,CAAjC,CACAyzB,MAAM,CAACj0B,GAAP,CAAW8+B,mBAAmB,CAAChsB,IAApB,CAAyBhV,CAAzB,CAAX,CAAwCkhC,SAAxC,EACD,CACD,MAAO/K,OAAP,CACD,CAAC,GAAI4K,iBAAiB,GAAK,kBAAtB,EAA4Chc,gBAA5C,EAAgElW,QAApE,CAA8E,CAC9E;AACA;AACA;AACA;AACA,MAAO0S,gGAA0B,CAAC1S,QAAD,CAAWkW,gBAAX,CAA6BxX,YAA7B,CAA2CpC,KAA3C,CAAjC,CACD,CACD,MAAO,IAAI2W,IAAJ,EAAP,CACD,C;;;;;;ACjHD,2C;;;;;;ACAA,uC;;;;;;ACAA,kD;;;;;;;;;;;;;;;;;;;ACA+C;AACC;AAIhD;AACA,GAAMkQ,aAAY,4MACbmP,2DAAW,CAACnP,YADC,EAEhBqG,KAAK,CAAE,CAAE9K,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,IAAzB,CAA+B0+B,KAAK,CAAE,IAAtC,CAFS,CAGhB7F,MAAM,CAAE,CAAEhO,IAAI,CAAE,OAAR,CAAiB7qB,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAxB,CAAsCwvB,OAAO,CAAE,IAA/C,CAHQ,CAIhBmP,UAAU,CAAE,CACV9T,IAAI,CAAE,QADI,CACMiC,GAAG,CAAE,CADX,CACcjf,GAAG,CAAE,CADnB,CACsB7N,KAAK,CAAE,CAD7B,CAJI,CAOhByjB,gBAAgB,CAAE,CAAEoH,IAAI,CAAE,OAAR,CAAiB7qB,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAxB,CAPF,CAQhB4+B,SAAS,CAAE,CAAE/T,IAAI,CAAE,OAAR,CAAiB7qB,KAAK,CAAE,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAxB,CARK,EAAlB,C,GAWqB6+B,qB,8iCACJ,IACLlJ,MADK,CACK,KAAKtpB,KADV,CACLspB,KADK,CAEb,MAAO,IAAI8I,4DAAJ,CAAgB,KAAKpyB,KAArB,CAA4B,CACjC6d,EAAE,WAAK,KAAK7d,KAAL,CAAW6d,EAAhB,YAD+B,CAEjCyL,KAAK,CAALA,KAFiC,CAGjCmJ,iBAAiB,CAAEt4B,uFAHc,CAA5B,CAAP,CAKD,C,kCAR+Cy1B,4D,EAWlD4C,oBAAoB,CAACnM,SAArB,CAAiC,sBAAjC,CACAmM,oBAAoB,CAACvP,YAArB,CAAoCA,YAApC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;;;GAIO,GAAMyP,aAAY,wmBAAlB,CA0BP;;;;;GAMO,GAAMC,eAAc,8hmBAApB,C;;;ACtC8B;AAC8B;AACpB;AAU/C,GAAM1P,aAAY,CAAG,CACnBqG,KAAK,CAAE,CAAE9K,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,IAAzB,CAA+B0+B,KAAK,CAAE,IAAtC,CADY,CAEnBpb,QAAQ,CAAE,CAAEuH,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAEuiB,0CAAzB,CAAgDiN,OAAO,CAAE,IAAzD,CAFS,CAGnBqJ,MAAM,CAAE,CAAEhO,IAAI,CAAE,OAAR,CAAiB7qB,KAAK,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAxB,CAAsCwvB,OAAO,CAAE,IAA/C,CAHW,CAInByP,QAAQ,CAAE,CAAEpU,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CAJS,CAKnB0P,QAAQ,CAAE,CAAErU,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CALS,CAMnB+B,YAAY,CAAE,CAAE1G,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CANK,CAOnBgC,YAAY,CAAE,CAAE3G,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CAPK,CAArB,CASA;;;MAIqB2P,sC,oYACnB;;;;;MAMA;2BACYC,O,CAAS,gBACnB,KAAK/yB,KAAL,CAAWgzB,UAAX,CAAsBniC,OAAtB,CAA8B,SAACoiC,SAAD,CAAe,CAC3C;AACAF,OAAO,CAAGG,8BAAa,CACrBH,OADqB,CAErBE,SAAS,CAACE,UAAV,CAAqBC,IAArB,CAA0B,KAA1B,CAAgCH,SAAhC,CAFqB,CAAvB,CAID,CAND,EAOA,MAAOF,QAAP,CACD,CAED;;oDAGa,IACH9b,SADG,CACU,KAAKjX,KADf,CACHiX,QADG,CAEX,GAAMoc,2BAA0B,CAAGpd,mCAAc,CAAC5kB,QAAf,CAAwB4lB,QAAxB,EAC/B0b,cAAc,CAAC3K,OAAf,CAAuB7R,gDAAvB,CAAoDc,QAApD,CAD+B,CAE/B0b,cAAc,CAAC3K,OAAf,CACA7R,gDADA,CAEAD,0CAFA,CAFJ,CAMA;AACA,MAAO,MAAKod,WAAL,CAAiB,CACtBzQ,EAAE,CAAE6P,YADkB,CAEtB5P,EAAE,CAAEuQ,0BAFkB,CAGtB/P,OAAO,CAAE,CAACC,kBAAD,CAAYC,gBAAZ,CAHa,CAAjB,CAAP,CAKD,C,gDAEW+P,I,CAAM,CAChB,qIAAkBA,IAAlB,EACA,KAAKC,WAAL,CAAiB,KAAKxzB,KAAL,CAAWspB,KAA5B,EAFgB,GAGRtpB,MAHQ,CAGYuzB,IAHZ,CAGRvzB,KAHQ,CAGD0jB,QAHC,CAGY6P,IAHZ,CAGD7P,QAHC,CAIhB,GAAI1jB,KAAK,CAACiX,QAAN,GAAmByM,QAAQ,CAACzM,QAAhC,CAA0C,0BAChCiN,GADgC,CACzB,KAAKC,OADoB,CAChCD,EADgC,CAExC;AACA,wBAAKtwB,KAAL,CAAWwwB,KAAX,8DAAkBC,MAAlB,GACA;AACA,KAAKzwB,KAAL,CAAWwwB,KAAX,CAAmB,KAAKE,SAAL,CAAeJ,EAAf,CAAnB,CACA,KAAKK,mBAAL,GAA2BC,aAA3B,GACD,CACF,CAED;;;;;uCAMKO,I,CAAM,IACDC,SADC,CACYD,IADZ,CACDC,QADC,iBAEwB,KAAKpxB,KAF7B,CAED6/B,aAFC,aAEDA,aAFC,CAEcrP,KAFd,aAEcA,KAFd,iBAKL,KAAKpkB,KALA,CAIP4yB,QAJO,aAIPA,QAJO,CAIGC,QAJH,aAIGA,QAJH,CAIa3N,YAJb,aAIaA,YAJb,CAI2BC,YAJ3B,aAI2BA,YAJ3B,CAOT;AACA,GAAIsO,aAAa,EAAIrP,KAArB,CAA4B,CAC1BA,KAAK,CACFkB,WADH,CAEI/1B,MAAM,CAACC,MAAP,CAAc,EAAd,CAAkBw1B,QAAlB,CAA4B,CAC1B0O,cAAc,CAAED,aADU,CAE1BE,YAAY,CAAE,CAACv6B,sCAAD,CAAYA,sCAAZ,CAFY,CAG1Bw6B,QAAQ,CAAE,CAAChB,QAAD,CAAWC,QAAX,CAHgB,CAI1BnN,gBAAgB,CAAE,CAACR,YAAD,CAAeC,YAAf,CAJQ,CAA5B,CAFJ,EASGS,IATH,GAUD,CACF,CAED;;;;;;qDAOY0D,K,CAAO,IACTpF,GADS,CACF,KAAKC,OADH,CACTD,EADS,CAGjB,GAAI,KAAKtwB,KAAL,CAAW6/B,aAAf,CAA8B,CAC5B,KAAK7/B,KAAL,CAAW6/B,aAAX,CAAyBpP,MAAzB,GACD,CAED,GAAIiF,KAAK,WAAY5E,oCAArB,CAAgC,CAC9B,KAAKT,QAAL,CAAc,CACZwP,aAAa,CAAEnK,KADH,CAAd,EAGD,CAJD,IAIO,IAAIA,KAAJ,CAAW,CAChB,KAAKrF,QAAL,CAAc,CACZwP,aAAa,CAAE,GAAI/O,oCAAJ,CAAcR,EAAd,CAAkB,CAC/BzyB,IAAI,CAAE63B,KADyB,CAE/B3E,OAAO,CAAE,KAFsB,CAG/B9uB,UAAU,CAAEsE,yDAHmB,CAI/B;AACA;AACA;AACAwoB,MAAM,CAAEvoB,mBAAE,CAAC6rB,SAPoB,CAQ/BpB,UAAU,CAAEzqB,mBAAE,CAAC6rB,SARgB,CAS/BzH,IAAI,CAAEpkB,mBAAE,CAAC0qB,aATsB,CAU/BzjB,KAAK,CAAEjI,sCAVwB,CAW/BgI,MAAM,CAAEhI,sCAXuB,CAAlB,CADH,CAAd,EAeD,CACF,C,gCAnH6Cg5B,sB,EAqHhDU,qCAAkB,CAACzM,SAAnB,CAA+B,oBAA/B,CACAyM,qCAAkB,CAAC7P,YAAnB,CAAkCA,YAAlC,C;;;;;;;;;AC/IA,wC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEA;;;;;GAMA,GAAMJ,GAAE,ojfAAR,CA0BA,GAAMgR,OAAM,CAAG,CACb,qWADa,CAAf,CAUe,mDACbz1B,IAAI,CAAE,mBADO,CAEbykB,EAAE,CAAFA,EAFa,CAGbgR,MAAM,CAANA,MAHa,CAAf,E;;AC5CA,yC,CACA,sDAMA,GAAM5Q,aAAY,CAAG,CACnBhM,QAAQ,CAAE,CAAEuH,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAEuiB,0CAAzB,CAAgDiN,OAAO,CAAE,IAAzD,CADS,CAEnB+B,YAAY,CAAE,CAAE1G,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CAFK,CAGnBgC,YAAY,CAAE,CAAE3G,IAAI,CAAE,QAAR,CAAkB7qB,KAAK,CAAE,GAAzB,CAA8BwvB,OAAO,CAAE,IAAvC,CAHK,CAInBiC,gBAAgB,CAAE,KAJC,CAKnBlf,kBAAkB,CAAE,CAAEsY,IAAI,CAAE,UAAR,CAAoB7qB,KAAK,CAAE,CAA3B,CALD,CAMnBmgC,iBAAiB,CAAE,CAAEtV,IAAI,CAAE,UAAR,CAAoB7qB,KAAK,CAAE,GAA3B,CANA,CAArB,C,GASqBogC,oD,ucACN,IACH9c,SADG,CACU,KAAKjX,KADf,CACHiX,QADG,CAEX,MAAO,CACLqM,OAAO,CAAE,CAAC0Q,aAAD,CADJ,CAELvQ,OAAO,CAAC,6CACLtN,gDADI,CAC0BF,mCAAc,CAAC5kB,QAAf,CAAwB4lB,QAAxB,EAC3BA,QAD2B,CAE3Bf,0CAHC,CAFF,CAAP,CAQD,C,qDAEgC,IAAnBlW,MAAmB,MAAnBA,KAAmB,CAAZ0jB,QAAY,MAAZA,QAAY,CAC/B,GAAI1jB,KAAK,CAACiX,QAAN,GAAmByM,QAAQ,CAACzM,QAAhC,CAA0C,IAChCiN,GADgC,CACzB,KAAKC,OADoB,CAChCD,EADgC,CAExC;AACA,GAAI,KAAKtwB,KAAL,CAAWwwB,KAAf,CAAsB,uBACpB;AACA,wBAAKxwB,KAAL,CAAWwwB,KAAX,8DAAkBC,MAAlB,GACA,KAAKzwB,KAAL,CAAWwwB,KAAX,CAAmB,KAAKE,SAAL,CAAeJ,EAAf,CAAnB,CACD,CAJD,IAIO,CACL;AACA,GAAI,KAAKtwB,KAAL,CAAWqgC,MAAf,CAAuB,wBACrB;AACA,yBAAKrgC,KAAL,CAAWqgC,MAAX,gEAAmBpjC,OAAnB,CAA2B,SAAAuzB,KAAK,QAAIA,MAAJ,SAAIA,KAAJ,iBAAIA,KAAK,CAAEC,MAAP,EAAJ,EAAhC,EACD,CACD,GAAI,KAAKzwB,KAAL,CAAWsgC,QAAf,CAAyB,0BACtB;AACA,2BAAKtgC,KAAL,CAAWsgC,QAAX,oEAAqB7P,MAArB,GACF,CACD,GAAI,KAAKzwB,KAAL,CAAWugC,SAAf,CAA0B,2BACvB;AACA,4BAAKvgC,KAAL,CAAWugC,SAAX,sEAAsB9P,MAAtB,GACF,CACD,GAAI,KAAK+P,UAAT,CAAqB,CACnB,KAAKnQ,QAAL,CAAc,KAAKmQ,UAAL,CAAgB,KAAKjQ,OAAL,CAAaD,EAA7B,CAAd,EACD,CACF,CACD,GAAMmQ,iBAAgB,CAAG,KAAK9P,mBAAL,EAAzB,CACA,GAAI8P,gBAAJ,CAAsB,CACpB,KAAK9P,mBAAL,GAA2BC,aAA3B,GACD,CACF,CACF,C,yDAEiB,CAChB,GAAMmE,MAAK,CAAG,KAAK2L,eAAL,EAAd,CACA;AACA,GAAI3L,KAAK,CAAC4L,WAAV,CAAuB,CACrB,OACD,CACD,GAAMF,iBAAgB,CAAG,KAAK9P,mBAAL,EAAzB,CACA,GAAI8P,gBAAJ,CAAsB,CACpB;AACA;AACAA,gBAAgB,CAACG,GAAjB,CAAqB,CACnBC,eAAe,CAAE,CACfjW,IAAI,CAAEpkB,mBAAE,CAAC+rB,KADM,CAEfjU,IAAI,CAAE,CAFS,CAGfwiB,UAAU,CAAE,IAHG,CAIfC,QAAQ,CAAE,oBAJK,CAKfpa,YAAY,CAAE,CALC,CAMf;AACA;AACA;AACAqa,OAAO,CAAErlC,MAAM,CAACuG,MAAP,CAAcu+B,gBAAgB,CAACQ,UAA/B,EAA2C,CAA3C,EAA8CC,QAA9C,CAAuDF,OATjD,CADE,CAArB,EAaD,CACF,C,mCAEM,iBAKD,KAAK50B,KALJ,CAEHklB,YAFG,aAEHA,YAFG,CAGHC,YAHG,aAGHA,YAHG,CAIHC,gBAJG,aAIHA,gBAJG,iBAQD,KAAKxxB,KARJ,CAOHsgC,QAPG,aAOHA,QAPG,CAOOC,SAPP,aAOOA,SAPP,CAOkBF,MAPlB,aAOkBA,MAPlB,CAO0B7P,KAP1B,aAO0BA,KAP1B,CASL,GAAMY,SAAQ,CAAG,CACfU,gBAAgB,CAAE,CAACR,YAAD,CAAeC,YAAf,CADH,CAEfQ,iBAAiB,CAAEP,gBAFJ,CAAjB,CAIA;AACA;AACAhB,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAEkB,WAAP,CAAmBN,QAAnB,EAEA;AACA;AACAiP,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEpjC,OAAR,CAAgB,SAAAkkC,CAAC,QAAIA,EAAC,CAACzP,WAAF,CAAcN,QAAd,CAAJ,EAAjB,EACA;AACAkP,QAAQ,OAAR,EAAAA,QAAQ,SAAR,QAAAA,QAAQ,CAAE5O,WAAV,CAAsBN,QAAtB,EACA;AACAmP,SAAS,OAAT,EAAAA,SAAS,SAAT,QAAAA,SAAS,CAAE7O,WAAX,CAAuBN,QAAvB,EACD,C,uCAhGoDgQ,uB,EAmGvDjB,mDAAyB,CAACkB,aAA1B,CAA0C,2BAA1C,CACAlB,mDAAyB,CAAC9Q,YAA1B,CAAyCA,YAAzC,C;;AClHe8Q,kIAAf,E;;ACAA,GAAMlR,iBAAE,kCAAR,CAIA,GAAMgR,qBAAM,CAAG,CACb,iLADa,CAIb,gUAJa,CAAf,CAae,sEACbz1B,IAAI,CAAE,WADO,CAEbykB,EAAE,CAAFA,gBAFa,CAGbgR,MAAM,CAANA,oBAHa,CAAf,E;;ACnBA,yC,CACA,sD,GAKqBqB,sC,yYACnB;2BACa,CACX,MAAO,CACL5R,OAAO,CAAE,CAAC0Q,gCAAD,CADJ,CAAP,CAGD,C,wDAEe7P,O,CAAS8O,S,CAAW,CAClC,GAAMoB,iBAAgB,CAAG,KAAK9P,mBAAL,EAAzB,CACA,GAAI8P,gBAAJ,CAAsB,CACpBA,gBAAgB,CAACG,GAAjB,CAAqB,CACnBW,UAAU,CAAE,CACV3W,IAAI,CAAEpkB,mBAAE,CAAC+rB,KADC,CAEVjU,IAAI,CAAE,CAFI,CAGVwiB,UAAU,CAAE,IAHF,CAIVC,QAAQ,CAAE,mBAJA,CAKVpa,YAAY,CAAE,CALJ,CAMV;AACA;AACAqa,OAAO,CAAExS,MAAM,CAAC6Q,SAAS,CAAClO,IAAV,CAAeqQ,SAAhB,CARL,CADO,CAArB,EAYD,CACF,C,gCAxB6CJ,uB,EA2BhDE,qCAAkB,CAACD,aAAnB,CAAmC,oBAAnC,C;;AC/BeC,6GAAf,E;;ACFA;AAAA;;;;;;;ACAA,kD;;;;;;ACAA,oD;;;;;;ACAA,wD;;;;;;ACAA,6D;;;;;;;;;;ACAA;AAAA;AAAA;AAEA;;;;;;;GAQO,QAASG,oBAAT,CAA6BC,YAA7B,CAA2CC,aAA3C,CAA0D,CAC/D;AACA;AACA;AACA;AACA;AACA,GAAI,CAACD,YAAD,EAAiB,CAACA,YAAY,CAAChlC,MAA/B,EAAyC,CAACilC,aAAa,CAACD,YAAY,CAAC,CAAD,CAAZ,CAAgB,CAAhB,CAAD,CAA3D,CAAiF,CAC/E;AACA,MAAO,KAAP,CACD,CACD,GAAMv2B,KAAI,CAAGy2B,4DAAQ,GAClBlU,CADU,CACR,SAAA7hB,CAAC,QAAI81B,cAAa,CAAC91B,CAAC,CAAC,CAAD,CAAF,CAAb,CAAoB,CAApB,CAAJ,EADO,EAEV8hB,CAFU,CAER,SAAA9hB,CAAC,QAAI81B,cAAa,CAAC91B,CAAC,CAAC,CAAD,CAAF,CAAb,CAAoB,CAApB,CAAJ,EAFO,EAGVg2B,MAHU,CAGHH,YAHG,CAAb,CAIA,MAAOv2B,KAAP,CACD,C;;;;;;;ACzBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOe,QAAS22B,wBAAT,CAAiC11B,KAAjC,CAAwC,IAEnD0pB,kBAFmD,CAKjD1pB,KALiD,CAEnD0pB,iBAFmD,CAGnDsI,iBAHmD,CAKjDhyB,KALiD,CAGnDgyB,iBAHmD,CAInDpzB,oBAJmD,CAKjDoB,KALiD,CAInDpB,oBAJmD,CAOrD,GAAMua,QAAO,CAAGtB,iEAAS,EAAzB,CAEA,GAAM8d,sBAAqB,CAAG9lC,iEAAU,CAAC65B,iBAAD,CAAxC,CAEA,QAASkM,0BAAT,CAAmCluB,KAAnC,CAA0C,CACxC9I,oBAAoB,CAAC8I,KAAK,CAACkjB,MAAN,CAAaj3B,KAAd,CAApB,CACD,CAED,mBACE,2DAAC,iEAAD,mBACE,2DAAC,kEAAD,EAAW,SAAS,CAAEwlB,OAAO,CAAC2D,SAA9B,CAAyC,OAAO,CAAC,4BAAjD,EACG6Y,qBADH,mBADF,cAIE,2DAAC,kEAAD,EAAW,SAAS,CAAExc,OAAO,CAAC4D,SAA9B,eACE,2DAAC,6DAAD,EACE,SAAS,CAAE5D,OAAO,CAAC6D,MADrB,CAEE,KAAK,CAAEgV,iBAFT,CAGE,QAAQ,CAAE4D,yBAHZ,CAIE,UAAU,CAAE,CACV/X,EAAE,CAAE,4BADM,CAJd,eAQE,qEAAQ,KAAK,CAAC,kBAAd,cARF,cASE,qEAAQ,KAAK,CAAC,eAAd,oBATF,CADF,CAJF,CADF,CAoBD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1CD,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE3T,qDAAqD,+BAA+B,8DAA8D,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,0DAA0D,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B,yBAAyB,gCAAmB;AAC5C;AACA;AACA,CAAC;;AAED,yBAAyB,gCAAmB;AAC5C;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,gCAAmB;AACzC;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG;AACH;;AAEA,iBAAiB,6BAAgB;AACjC,sBAAsB,gCAAmB;AACzC;AACA,GAAG;AACH,CAAC;AACc,iEAAuB,sCAAsC,EAAC;;;ACvC7E,SAAS,2BAAQ,IAAI,CAAC,2BAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,2BAAQ,wBAAwB;;AAE3T,SAAS,2CAAwB,oBAAoB,+BAA+B,cAAc,gDAA6B,mBAAmB,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,SAAS,gDAA6B,oBAAoB,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B,IAAI,wBAAK,gBAAgB,gCAAmB;AAC5C;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,cAAc,2CAAwB;;AAEtC,sBAAsB,gCAAmB,QAAQ,2BAAQ;AACzD;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG,iBAAiB,wBAAK;AACzB;;AAEA,IAAI,8BAAU,GAAG,6BAAgB;AACjC,sBAAsB,gCAAmB,wBAAwB,2BAAQ;AACzE;AACA,GAAG;AACH,CAAC;AACc,6EAAuB,kDAAkD,EAAC;;;AClCzF,SAAS,uBAAQ,IAAI,CAAC,uBAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,uBAAQ,wBAAwB;;AAE3T,SAAS,uCAAwB,oBAAoB,+BAA+B,cAAc,4CAA6B,mBAAmB,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,SAAS,4CAA6B,oBAAoB,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B;AACA;AACA;AACA;AACA,cAAc,uCAAwB;;AAEtC,sBAAsB,gCAAmB,QAAQ,uBAAQ;AACzD;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG,8BAA8B,gCAAmB;AACpD;AACA,GAAG,eAAe,gCAAmB;AACrC;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEA,IAAI,0BAAU,GAAG,6BAAgB;AACjC,sBAAsB,gCAAmB,oBAAoB,uBAAQ;AACrE;AACA,GAAG;AACH,CAAC;AACc,yEAAuB,8CAA8C,EAAC;;;AChC9E,QAASgY,WAAT,CAAoB71B,KAApB,CAA2B,IAE9B81B,IAF8B,CAG5B91B,KAH4B,CAE9B81B,GAF8B,CAEzBC,OAFyB,CAG5B/1B,KAH4B,CAEzB+1B,OAFyB,CAEhBC,QAFgB,CAG5Bh2B,KAH4B,CAEhBg2B,QAFgB,CAENz2B,QAFM,CAG5BS,KAH4B,CAENT,QAFM,CAIhC,GAAM02B,SAAQ,CAAG,qCAAjB,CACA,GAAMC,OAAM,WAAMD,QAAN,WAAZ,CACA,mBACE,iDACE,SAAS,CAAED,QAAQ,CAAGE,MAAH,CAAYD,QADjC,CAEE,OAAO,CAAEF,OAFX,CAGE,IAAI,CAAC,QAHP,CAIE,KAAK,CAAED,GAJT,EAMGv2B,QANH,CADF,CAUD,CAEc,QAAS42B,SAAT,CAAkBn2B,KAAlB,CAAyB,IAEpCo2B,cAFoC,CAKlCp2B,KALkC,CAEpCo2B,aAFoC,CAGpCC,UAHoC,CAKlCr2B,KALkC,CAGpCq2B,UAHoC,qBAKlCr2B,KALkC,CAIpCs2B,YAJoC,CAIpCA,YAJoC,8BAIrB,CAAEC,GAAG,CAAE,IAAP,CAAaC,eAAe,CAAE,IAA9B,CAAoCC,WAAW,CAAE,IAAjD,CAJqB,qBAMtC,mBACE,8CAAK,SAAS,CAAC,MAAf,EACGH,YAAY,CAACC,GAAb,eACD,uCAAC,UAAD,EACE,GAAG,CAAC,cADN,CAEE,OAAO,CAAE,yBAAMH,cAAa,CAAC,IAAD,CAAnB,EAFX,CAGE,QAAQ,CAAEC,UAAU,GAAK,IAH3B,eAIC,uCAAC,UAAD,MAJD,CAFF,CASGC,YAAY,CAACE,eAAb,cACC,uCAAC,UAAD,EACE,GAAG,CAAC,kBADN,CAEE,OAAO,CAAE,yBAAMJ,cAAa,CAACM,qCAAc,CAACC,SAAhB,CAAnB,EAFX,CAGE,QAAQ,CAAEN,UAAU,GAAKK,qCAAc,CAACC,SAH1C,eAIC,uCAAC,8BAAD,MAJD,CADD,CAOG,IAhBN,CAiBGL,YAAY,CAACG,WAAb,cACC,uCAAC,UAAD,EACE,GAAG,CAAC,cADN,CAEE,OAAO,CAAE,yBAAML,cAAa,CAACM,qCAAc,CAACE,OAAhB,CAAnB,EAFX,CAGE,QAAQ,CAAEP,UAAU,GAAKK,qCAAc,CAACE,OAH1C,eAIC,uCAAC,0BAAD,MAJD,CADD,CAOG,IAxBN,CADF,CA4BD,C;;;;;AC1DM,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,SAAM,WAAN,EAA1B,CACA,GAAMC,UAAS,CAAG,QAAZA,UAAY,CAAAC,gBAAgB,QAAKA,iBAAgB,CAACC,UAAjB,CAC1C,UAD0C,CAC7B,SADwB,EAAlC,C;;;ACKP;;;;;MAMqBC,0D,wMACnB,sCAAYj3B,KAAZ,CAAmB,wFACjB,uBAAMA,KAAN,EAEA,MAAKpM,KAAL,CAAa,CACXswB,EAAE,CAAE,IADO,CAEXgT,IAAI,CAAE,IAFK,CAAb,CAKA,MAAKC,QAAL,CAAgB,IAAhB,CAEA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,yDAAzB,CACA,MAAKC,oBAAL,CAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,yDAA5B,CACA,MAAKE,kBAAL,CAA0B,MAAKA,kBAAL,CAAwBF,IAAxB,yDAA1B,CACA,MAAKG,YAAL,CAAoB,MAAKA,YAAL,CAAkBH,IAAlB,yDAApB,CACA,MAAK17B,OAAL,CAAe,MAAKA,OAAL,CAAa07B,IAAb,yDAAf,CAdiB,aAelB,CAED;;;;;;;yIAQgD,IAAjBI,cAAiB,MAA5BC,SAA4B,iBAG1C,KAAK13B,KAHqC,CAE5C23B,YAF4C,aAE5CA,YAF4C,CAE9BD,SAF8B,aAE9BA,SAF8B,CAEnBlR,MAFmB,aAEnBA,MAFmB,CAEXoR,gBAFW,aAEXA,gBAFW,CAI9C,GAAMpgB,MAAK,CAAGgP,MAAH,SAAGA,MAAH,iBAAGA,MAAM,CAAEoB,IAAR,CAAa,SAAAjzB,CAAC,QAAIA,EAAC,CAAC6iB,KAAN,EAAd,CAAd,CACAmgB,YAAY,CAAC,4CACRF,aADO,EAEV;AACA7M,MAAM,CAAEgN,gBAAgB,EAAIpgB,KAApB,CAA4BkgB,SAAS,CAAC9M,MAAtC,CAA+C6M,aAAa,CAAC7M,MAH3D,GAAZ,CAKD,CAED;;;;;6EAMmC,IAAZuM,SAAY,OAAZA,QAAY,CACjC,KAAKA,QAAL,CAAgBA,QAAhB,CACD,CAED;;;;;mEAMmBjT,E,CAAI,CACrB,KAAKD,QAAL,CAAc,CAAEC,EAAE,CAAFA,EAAF,CAAd,EACD,CAED;;;;;uDAMagT,I,CAAM,IACKW,iBADL,CAC0B,KAAK73B,KAD/B,CACTw3B,YADS,CAEjB,KAAKvT,QAAL,CAAc,CAAEiT,IAAI,CAAJA,IAAF,CAAd,EACA,GAAIW,gBAAJ,CAAsB,CACpBA,gBAAgB,CAACX,IAAD,CAAhB,CACD,CACF,CAED;;;;;MAMA;6CACY,CACV,MAAO,EAAP,CACD,CAED;wCACQt7B,I,CAAM,IAEVk8B,WAFU,CAGRl8B,IAHQ,CAEVk8B,UAFU,CAEenP,KAFf,CAGR/sB,IAHQ,CAEEm8B,WAFF,CAEsB7L,IAFtB,CAGRtwB,IAHQ,CAEsBswB,IAFtB,kBAMR,KAAKlsB,KANG,CAKV9E,gBALU,cAKVA,gBALU,CAKQ88B,aALR,cAKQA,aALR,CAKuB/iC,iBALvB,cAKuBA,iBALvB,CAK0CuxB,MAL1C,cAK0CA,MAL1C,CAOZ,GAAMyR,WAAU,CAAG,CAACzR,MAAM,EAAI,EAAX,EAAeoB,IAAf,CAAoB,SAAAjzB,CAAC,QAAIA,EAAC,CAAC6pB,IAAF,GAAW,SAAf,EAArB,CAAnB,CACA,GAAI,CAACtjB,gBAAD,EAAqB,CAACgxB,IAA1B,CAAgC,CAC9B,MAAO,KAAP,CACD,CACD,GAAI,CAACvD,KAAD,EAAU,CAACmP,UAAf,CAA2B,CACzB,GAAIE,aAAa,EAAIC,UAArB,CAAiC,CAC/B/8B,gBAAgB,CAAC,IAAD,CAAhB,CACD,CACD,MAAO,KAAP,CACD,CAhBW,GAiBJg9B,QAjBI,CAiBiBhM,IAjBjB,CAiBJgM,OAjBI,CAiBK/L,IAjBL,CAiBiBD,IAjBjB,CAiBKC,IAjBL,CAiBWjM,CAjBX,CAiBiBgM,IAjBjB,CAiBWhM,CAjBX,CAkBZ,GAAI,CAACgY,OAAL,CAAc,CACZ,GAAIF,aAAa,EAAIC,UAArB,CAAiC,CAC/B/8B,gBAAgB,CAAC,IAAD,CAAhB,CACD,CACD,MAAO,KAAP,CACD,CAvBW,GAwBJzJ,KAxBI,CAwBoBymC,OAxBpB,CAwBJzmC,IAxBI,CAwBE4P,KAxBF,CAwBoB62B,OAxBpB,CAwBE72B,KAxBF,CAwBSD,MAxBT,CAwBoB82B,OAxBpB,CAwBS92B,MAxBT,IA0BV+c,KA1BU,CA2BRgO,IA3BQ,CA0BVhO,IA1BU,CA0BJiO,KA1BI,CA2BRD,IA3BQ,CA0BJC,KA1BI,CA0BGhO,GA1BH,CA2BR+N,IA3BQ,CA0BG/N,GA1BH,CA0BQiO,MA1BR,CA2BRF,IA3BQ,CA0BQE,MA1BR,CA4BZ,GAAMG,OAAM,CAAG,CACbrO,IADa,CAEb1sB,IAAI,CAAC2P,MAAL,CAAcunB,KAAK,CAAC8D,QAApB,CAA+BrrB,MAA/B,CAAwCirB,MAF3B,CAGb56B,IAAI,CAAC4P,KAAL,CAAasnB,KAAK,CAAC8D,QAAnB,CAA8BprB,KAA9B,CAAsC+qB,KAHzB,CAIbhO,GAJa,CAAf,CAMA,GAAI,CAAC3sB,IAAL,CAAW,CACT,GAAIumC,aAAa,EAAIC,UAArB,CAAiC,CAC/B/8B,gBAAgB,CAAC,IAAD,CAAhB,CACD,CACD,MAAO,KAAP,CACD,CACD;AACA,GAAIytB,KAAK,CAAC9K,EAAN,CAASxsB,QAAT,CAAkB,SAAlB,CAAJ,CAAkC,CAChC;AACA,GAAM8mC,eAAc,CAAGv3B,IAAI,CAACY,GAAL,CACrB,CADqB,UAErB,CAFqB,CAEhBZ,IAAI,CAACw3B,KAAL,CAAW,CAAClY,CAAZ,CAFgB,EAAvB,CAIA,GAAMmY,WAAU,CAAG,CACjBz3B,IAAI,CAACC,KAAL,CAAW,CAACi3B,UAAU,CAAC,CAAD,CAAV,CAAgBtL,MAAM,CAAC,CAAD,CAAvB,EAA8B2L,cAAzC,CADiB,CAEjBv3B,IAAI,CAACC,KAAL,CAAW,CAACi3B,UAAU,CAAC,CAAD,CAAV,CAAgBtL,MAAM,CAAC,CAAD,CAAvB,EAA8B2L,cAAzC,CAFiB,CAAnB,CAIA,GAAMG,OAAM,CAAGD,UAAU,CAAC,CAAD,CAAV,CAAgBh3B,KAAhB,CAAwBg3B,UAAU,CAAC,CAAD,CAAjD,CACA,GAAME,UAAS,CAAG9mC,IAAI,CAACsE,GAAL,CAAS,SAAA0J,CAAC,QAAIA,EAAC,CAAC64B,MAAD,CAAL,EAAV,CAAlB,CACA,GAAMx8B,OAAM,CAAGy8B,SAAS,CAACr6B,IAAV,CAAe,SAAAjN,CAAC,QAAIA,EAAC,CAAG,CAAR,EAAhB,CAAf,CACA,GAAI6K,MAAM,GAAKsmB,MAAM,CAAC4V,aAAD,CAArB,CAAsC,CACpC,GAAI/iC,iBAAJ,CAAuB,CACrBA,iBAAiB,GAClB,CACD;AACAiG,gBAAgB,CAACY,MAAM,CAAG08B,MAAM,CAAC18B,MAAD,CAAT,CAAoB,IAA3B,CAAhB,CACD,CACF,CACF,CAED;;;;;iEAMkBy5B,a,CAAe,kBACS,KAAKv1B,KADd,CACvBy4B,cADuB,cACvBA,cADuB,CACPz9B,KADO,cACPA,KADO,CACAxF,IADA,cACAA,IADA,IAEvB2hC,SAFuB,CAEV,IAFU,CAEvBA,QAFuB,CAG/B,GAAIsB,cAAc,EAAItB,QAAtB,CAAgC,CAC9BsB,cAAc,CAAC,CACbjjC,IAAI,CAAJA,IADa,CAEbkjC,OAAO,CAAE,iBAAC58B,MAAD,CAAY,CACnB,GAAM6K,KAAI,CAAG3L,KAAK,CAACc,MAAD,CAAlB,CACA,GAAI,oBAC6By5B,aAAa,CAAC5uB,IAAD,CAD1C,4EACKgyB,SADL,oBACgBC,SADhB,oBAEF,MAAOzB,SAAQ,CAACuB,OAAT,CAAiB,CAACC,SAAD,CAAYC,SAAZ,CAAjB,CAAP,CACD,CAAC,MAAOpuB,CAAP,CAAU,CACV,MAAO,CAAC,IAAD,CAAO,IAAP,CAAP,CACD,CACF,CAVY,CAAD,CAAd,CAYD,CACF,CAED;;oEAGqB,CAEpB,CAED;;;4CAIS,kBAGH,KAAKxK,KAHF,CAEL4D,OAFK,cAELA,OAFK,CAEI8zB,SAFJ,cAEIA,SAFJ,CAEeliC,IAFf,cAEeA,IAFf,CAE6BqjC,UAF7B,cAEqBrS,MAFrB,CAEyCsS,SAFzC,cAEyCA,SAFzC,iBAIc,KAAKllC,KAJnB,CAICswB,EAJD,aAICA,EAJD,CAIKgT,IAJL,aAIKA,IAJL,CAKP,GAAM1Q,OAAM,CAAG,KAAKuS,SAAL,EAAf,CACA,GAAMvhB,MAAK,CAAG,CAACqhB,UAAU,EAAI,EAAf,EAAmBjR,IAAnB,CAAwB,SAAAjzB,CAAC,QAAIA,EAAC,CAAC6iB,KAAN,EAAzB,CAAd,CAEA,GAAMwhB,uBAAsB,CAAG,KAAKC,UAAL,GAAoB,IAApB,EACzB,KAAK3D,YAAL,CAAkBhlC,MAAlB,EAA4B,KAAKglC,YAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwBvK,EAD1D,CAEA,GAAMmO,YAAW,CAAG,KAAKD,UAAL,GAAoB,IAApB,EAA4BJ,UAAU,CAACxP,SAAX,CAAqB,SAAA10B,CAAC,QAAIA,EAAC,CAAC6pB,IAAF,GAAW,SAAX,EAAwB7pB,CAAC,CAAC6pB,IAAF,GAAW,QAAvC,EAAtB,GAA0E,CAA1H,CACA;AACA;AACA;AACA,GAAM2a,gBAAe,CAAG,KAAK7D,YAAL,CAAkBhlC,MAAlB,CAA2B,MAA3B,EAAqC,CAACknB,KAA9D,CAEA,mBACE,2FACE,uCAAC,QAAD,EACE,UAAU,CAAE0f,IADd,CAEE,aAAa,CAAE,KAAKM,YAFtB,CAGE,YAAY,CAAE,CACZjB,GAAG,CAAE2C,WAAW,EAAI,CAACJ,SADT,CAEZtC,eAAe,CAAEwC,sBAAsB,EAAI,CAACF,SAFhC,CAGZrC,WAAW,CAAEuC,sBAAsB,EAAI,CAACF,SAH5B,CAHhB,EADF,cAUE,uCAAC,0BAAD,EACE,EAAE,0BAAoBtjC,IAApB,CADJ,CAEE,GAAG,CAAEoO,OAFP,CAGE,KAAK,CAAE,CACL4T,KAAK,CACD,GAAI4hB,+BAAJ,CAAc,CAAEvb,EAAE,CAAE,OAAN,CAAewb,UAAU,CAAE,IAA3B,CAAiCC,SAAS,CAAE,GAA5C,CAAd,CADC,CAED,GAAIC,sCAAJ,CAAqB,CACrB1b,EAAE,CAAE,OADiB,CAArB,CAHC,CAMJ;AATL,CAUE,MAAM,CACJqG,EAAE,EAAIwT,SAAS,CAAC9M,MAAV,CAAiB36B,KAAjB,CAAuB,CAAvB,CAA0B,CAA1B,EAA6B2E,KAA7B,CAAmC,SAAA3D,CAAC,QAAI,OAAOA,EAAP,GAAa,QAAjB,EAApC,CAAN,CACIu1B,MADJ,CAEI,EAbR,CAeE,SAAS,CAAEhqB,mCAfb,CAgBE,kBAAkB,CAAE,KAAK+6B,kBAhB3B,CAiBE,iBAAiB,CAAE,KAAKH,iBAjB1B,CAkBE,SAAS,CAAEM,SAlBb,CAmBE,eAAe,CAAEyB,eAnBnB,CAoBE,UAAU,CAAEjC,IAAI,CAAG,CAAEsC,OAAO,CAAE,KAAX,CAAH,CAAwB,IApB1C,CAqBE,SAAS,CAAEtC,IAAI,CAAGL,iBAAH,CAAuBC,SArBxC,CAsBE,OAAO,CAAE,KAAKn7B,OAtBhB,EAwBG,KAAK27B,oBAxBR,CAVF,CADF,CAuCD,C,0CA/OuDmC,gC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;cCZ1D,sD,CACA,yC,CACA;AACA;AAYA,GAAMC,cAAa,CAAG,YAAtB,CACA,GAAMC,gBAAe,CAAG,eAAxB,CAEA;AACA;GACMC,0C,wbACJ;2BACYlyB,K,CAAO1H,K,CAAO,CACxBA,KAAK,CAAC65B,MAAN,CAAa,CAAEC,QAAQ,CAAEH,eAAZ,CAAb,EACD,C,wCAJsCI,gC,KAOnCC,kD,weACJ;2BACYtyB,K,CAAO1H,K,CAAO,CACxBA,KAAK,CAAC65B,MAAN,CAAa,CAAEC,QAAQ,CAAEH,eAAZ,CAAb,EACD,C,gDAJ8CM,wC,EAOjD,GAAMC,SAAQ,mEACXxD,qCAAc,CAACC,SADJ,CACgBiD,yCADhB,sDAEXlD,qCAAc,CAACE,OAFJ,CAEcoD,iDAFd,YAAd,CAKA,GAAM/W,aAAY,CAAG,CACnBkX,aAAa,CAAEzD,qCAAc,CAACC,SADX,CAEnByD,QAAQ,CAAE,EAFS,CAGnBC,QAAQ,CAAE,mBAAM,CAAE,CAHC,CAArB,CAMA,GAAMC,WAAU,CAAG,CACjB9b,IAAI,CAAE,mBADW,CAEjB+b,QAAQ,CAAE,EAFO,CAAnB,CAKA,GAAMC,iBAAgB,CAAG,mBAAzB,CAEA,GAAMC,mBAAkB,CAAG,CACzB,gBADyB,CAEzB,oBAFyB,CAGzB,oBAHyB,CAIzB,gBAJyB,CAKzB,kBALyB,CAMzB,gBANyB,CAOzB,kBAPyB,CAQzB,sBARyB,CASzB,sBATyB,CAUzB,mBAVyB,CAWzB,cAXyB,CAYzB,cAZyB,CAazB,gBAbyB,CAczB,cAdyB,CAezB,kBAfyB,CAgBzB,2BAhByB,CAiBzB,uBAjByB,CAkBzB,uBAlByB,CAmBzB,uBAnByB,CAoBzB,4BApByB,CAqBzB,gCArByB,CAsBzB,gCAtByB,CAuBzB,yBAvByB,CAwBzB,0BAxByB,CAyBzB,cAzByB,CAA3B,C,GA4BqBC,8B,uaACGvmB,W,CAAa,iBAM7B,KAAKnU,KANwB,CAE/Bq6B,QAF+B,aAE/BA,QAF+B,CAG/B9E,aAH+B,aAG/BA,aAH+B,CAI/BoF,aAJ+B,aAI/BA,aAJ+B,CAK/BhK,KAL+B,aAK/BA,KAL+B,CAQjC,GAAMiK,mBAAkB,CAAIjK,KAAK,CAC7Bxc,WAAW,CAACpe,GAAZ,CAAgB,SAAA01B,IAAI,QAAIA,KAAI,CAAC11B,GAAL,CAAS,SAAAuc,CAAC,QAAK,CAACA,CAAC,CAAC,CAAD,CAAF,CAAO,CAACA,CAAC,CAAC,CAAD,CAAT,CAAL,EAAV,CAAJ,EAApB,CAD6B,CAE7B6B,WAFJ,CAIA;AACA,GAAM0mB,gBAAe,CAAGC,2BAAW,CAACF,kBAAD,CAAnC,CAEA;AACA,GAAMG,aAAY,CAAG,EAArB,CAEA;AACA;AACA;AACA;AACAJ,aAAa,CAACK,KAAd,CAAoB,SAACnsB,IAAD,CAAOosB,EAAP,CAAWC,EAAX,CAAeC,EAAf,CAAmBC,EAAnB,CAA0B,CAC5C,GAAMC,WAAU,CAAG,CAAC,CAAC,CAACJ,EAAD,CAAKC,EAAL,CAAD,CAAW,CAACC,EAAD,CAAKD,EAAL,CAAX,CAAqB,CAACC,EAAD,CAAKC,EAAL,CAArB,CAA+B,CAACH,EAAD,CAAKG,EAAL,CAA/B,CAAyC,CAACH,EAAD,CAAKC,EAAL,CAAzC,CAAD,CAAnB,CACA,GAAMI,YAAW,CAAGR,2BAAW,CAACO,UAAD,CAA/B,CAEA,GAAME,mCAAkC,CAAGC,0BAAe,CAACF,WAAD,CAAcT,eAAd,CAA1D,CACA,GAAMY,iCAAgC,CAAGC,wBAAa,CAACJ,WAAD,CAAcT,eAAd,CAAtD,CACA,GAAMc,mCAAkC,CAAGC,yBAAc,CAACN,WAAD,CAAcT,eAAd,CAAzD,CAEA,GAAI,CAACU,kCAAD,EACC,CAACE,gCADF,EAEC,CAACE,kCAFN,CAE0C,CACxC;AACA;AACA,MAAO,KAAP,CACD,CAED;AACA;AAEA;AACA,GAAI9sB,IAAI,CAACpd,IAAL,EACCoqC,kCAAqB,CACtBloB,yBAAS,CAAC,GAAG1jB,KAAH,CAASmjC,IAAT,CAAcmC,aAAa,CAAC1mB,IAAI,CAACpd,IAAL,CAAU,CAAV,CAAD,CAA3B,CAAD,CADa,CACiCopC,eADjC,CAD1B,CAIE,CACA;AACA;AACAE,YAAY,CAAC7pC,IAAb,CAAkB2d,IAAI,CAACpd,IAAvB,EACD,CAED;AACA;AACA,MAAO,MAAP,CACD,CAjCD,EAmCA4oC,QAAQ,CAAC,CAAEU,YAAY,CAAZA,YAAF,CAAD,CAAR,CACD,C,mDAEc,mBACLV,SADK,CACQ,KAAKr6B,KADb,CACLq6B,QADK,CAEb,GAAMyB,KAAI,CAAG5B,QAAQ,CAAC,KAAKl6B,KAAL,CAAWm6B,aAAZ,CAAR,EAAsC4B,uBAAnD,CAEA,GAAMC,eAAc,CAAG,EAAvB,CACAvB,kBAAkB,CAAC5pC,OAAnB,CAA2B,SAACyhB,CAAD,CAAO,CAChC,GAAI,KAAI,CAACtS,KAAL,CAAWsS,CAAX,IAAkBtc,SAAtB,CAAiCgmC,cAAc,CAAC1pB,CAAD,CAAd,CAAoB,KAAI,CAACtS,KAAL,CAAWsS,CAAX,CAApB,CAClC,CAFD,EAGA,GAAMkU,OAAM,CAAG,CACb,GAAIyV,mDAAJ,CACE,KAAKC,gBAAL,2CACEre,EAAE,CAAE2c,gBADN,CAEEl/B,QAAQ,CAAE,IAFZ,CAGEwgC,IAAI,CAAJA,IAHF,CAIEK,UAAU,CAAE,CACVC,UAAU,CAAE,IADF,CAJd,CAOEC,sBAAsB,CAAE,EAP1B,CAQE5qC,IAAI,CAAE6oC,UARR,CASET,MAAM,CAAE,qBAA+B,IAA5ByC,YAA4B,MAA5BA,WAA4B,CAAfxC,QAAe,MAAfA,QAAe,CACrC,GAAIA,QAAQ,GAAKJ,aAAjB,CAAgC,IACtBvlB,YADsB,CACNmoB,WAAW,CAAC/B,QAAZ,CAAqB,CAArB,EAAwBrmB,QADlB,CACtBC,WADsB,CAE9B,KAAI,CAACooB,qBAAL,CAA2BpoB,WAA3B,EACD,CAHD,IAGO,IAAI2lB,QAAQ,GAAKH,eAAjB,CAAkC,CACvC;AACAU,QAAQ,CAAC,CAAEU,YAAY,CAAE,EAAhB,CAAD,CAAR,CACD,CACF,CAjBH,CAkBEyB,cAAc,CAAE,CACdC,MAAM,CAAE,CACNC,SAAS,CAAE,QADL,CAENF,cAAc,CAAE,CACd,gBAAiB,CACf;AACA;AACAhe,IAAI,CAAEme,2BAHS,CAIfC,WAAW,CAAE,CAJE,CAKfphC,OAAO,CAAE,IALM,CAMfqhC,YAAY,CAAE,CANC,CAOfC,eAAe,CAAE,CAPF,CAQfC,eAAe,CAAE,CARF,CASfC,cAAc,CAAE,CATD,CADH,CAFV,CADM,CAlBlB,EAoCKhB,cApCL,EADF,CADa,CAAf,CA2CA,MAAOxV,OAAP,CACD,C,4BAjHyCoJ,mC,EAoH5C8K,6BAAc,CAACrU,SAAf,CAA2B,gBAA3B,CACAqU,6BAAc,CAACzX,YAAf,CAA8BA,YAA9B,C;;ACrMmD;AACQ;AAG3D;;;;GAKA,QAASga,eAAT,CAAwBC,OAAxB,CAAiC,CAC/B,qBAAeA,OAAf,EACD,CAED;;;;GAKA,QAASC,mBAAT,CAA4BD,OAA5B,CAAqC,CACnC,yBAAmBA,OAAnB,EACD,CAED;;;;;;;;GASO,QAASE,mBAAT,CACLlG,IADK,CAELpM,IAFK,CAGLoS,OAHK,CAIL3H,aAJK,CAKL8H,oBALK,CAML1C,aANK,CAQL,IADAhK,MACA,2DADQ,KACR,CACA,GAAI,CAACuG,IAAL,CAAW,CACT,MAAO,EAAP,CACD,CAED,GAAMoG,gBAAe,CAAGL,cAAc,CAACC,OAAD,CAAtC,CACA,GAAMK,sBAAqB,CAAG,GAAKzS,IAAI,CAAG,EAAZ,CAA9B,CAEA,MAAO,CAAC,GAAI4P,8BAAJ,CAAmB,CACzB7c,EAAE,CAAE,WADqB,CAEzB8S,KAAK,CAALA,KAFyB,CAGzBgK,aAAa,CAAbA,aAHyB,CAIzBpF,aAAa,CAAbA,aAJyB,CAKzBp6B,gBAAgB,CAAEC,0BAAiB,CAACC,SALX,CAMzB8+B,aAAa,CAAEjD,IANU,CAOzBmD,QAAQ,CAAE,uBAAsB,IAAnBU,aAAmB,MAAnBA,YAAmB,CAC9B,GAAMyC,QAAO,CAAGzC,YAAY,CAAChlC,GAAb,CAAiB,SAAA0nC,OAAO,QAAIA,QAAO,CAAC,CAAD,CAAX,EAAxB,CAAhB,CACA,GAAIJ,oBAAJ,CAA0B,CACxBA,oBAAoB,CAACG,OAAD,CAApB,CACD,CACF,CAZwB,CAazBpD,QAAQ,CAAE,CAACkD,eAAD,CAbe,CAczBI,qBAAqB,CAAE,uCAAM,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,EAAhB,CAAN,EAdE,CAezBC,qBAAqB,CAAE,uCAAM,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAgB,GAAhB,CAAN,EAfE,CAgBzBC,yBAAyB,CAAE,2CAAM,CAAC,CAAD,CAAI,CAAJ,CAAN,EAhBF,CAiBzBC,kBAAkB,CAAE,CAjBK,CAkBzBC,kBAAkB,CAAE,CAlBK,CAmBzBC,uBAAuB,CAAE,yCAAM,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAAmB,IAAnB,CAAN,EAnBA,CAoBzBC,wBAAwB,CAAE,0CAAMT,sBAAN,EApBD,CAqBzBU,0BAA0B,CAAE,CArBH,CAsBzBC,8BAA8B,CAAEX,qBAtBP,CAuBzBY,8BAA8B,CAAE,EAAIZ,qBAvBX,CAAnB,CAAD,CAAP,CAyBD,CAED;;;;;;GAOO,QAASa,iBAAT,CAA0Bp+B,KAA1B,CAAiC,IAEpC6d,GAFoC,CAGlC7d,KAHkC,CAEpC6d,EAFoC,CAEhCyQ,QAFgC,CAGlCtuB,KAHkC,CAEhCsuB,QAFgC,CAEtB78B,IAFsB,CAGlCuO,KAHkC,CAEtBvO,IAFsB,CAEhB0jC,UAFgB,CAGlCn1B,KAHkC,CAEhBm1B,UAFgB,CAEDkJ,IAFC,oDAGlCr+B,KAHkC,wCAItC,MAAO,CACLs+B,OAAO,CAAC,0CACNzgB,EAAE,CAAEsf,kBAAkB,CAACtf,EAAD,CADjB,CAEL0gB,YAAY,CAAEjQ,QAFT,CAGLkQ,YAAY,CAAElQ,QAHT,CAIL78B,IAAI,CAAJA,IAJK,CAKLgtC,cAAc,CAAEtJ,UALX,CAMLnC,UAAU,CAAE,CAAC,GAAI0L,mCAAJ,CAAwB,CAAEC,UAAU,CAAE,CAAd,CAAxB,CAAD,CANP,CAOLC,WAAW,CAAE,CAAC,CAAD,CAAI,CAAJ,CAPR,EAQFP,IARE,CADF,CAWL9R,IAAI,CAAC,0CACH1O,EAAE,CAAEof,cAAc,CAACpf,EAAD,CADhB,CAEF2gB,YAAY,CAAElQ,QAFZ,CAGFiQ,YAAY,CAAEjQ,QAHZ,CAIF;AACA;AACA;AACA78B,IAAI,CAAEA,IAAI,CAACxB,KAAL,EAPJ,EAQCouC,IARD,CAXC,CAAP,CAsBD,C;;;;;;;;;;;AC3GD;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;ACHsE;AACvD;AACf;AACA,iCAAiC,qDAA0B;AAC3D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpDmD;AACe;AAgBlE,GAAMQ,eAAc,CAAG,aAAvB,CACA,GAAMC,mBAAkB,CAAG,iBAA3B,CACA,GAAMC,uBAAsB,CAAG,qBAA/B,CAEA;AACA,GAAMC,qBAAoB,CAAG,QAAvBA,qBAAuB,CAAAr4B,IAAI,QAAIA,KAAI,CAACokB,EAAT,EAAjC,CACA,GAAMkU,kCAAyB,CAAG,QAA5BA,0BAA4B,CAAAxnB,MAAM,QAAI,UAACynB,SAAD,CAAe,gBACzD,GAAMv4B,KAAI,CAAGu4B,SAAS,CAAC,CAAD,CAAtB,CACA,MAAO,aAAAv4B,IAAI,CAAC8kB,IAAL,gDAAWn7B,MAAX,EAAoBqW,IAAI,CAAC8kB,IAAzB,CAAgCnF,uCAAM,CAAC3f,IAAI,CAACokB,EAAL,CAAQ,CAAR,CAAD,CAAapkB,IAAI,CAACokB,EAAL,CAAQ,CAAR,CAAb,CAAyBtT,MAAzB,CAA7C,CACD,CAHuC,EAAxC,CAIA,GAAM0nB,iCAAwB,CAAG,QAA3BA,yBAA2B,CAACC,UAAD,CAAahjC,KAAb,QAAuB,UAAC8iC,SAAD,CAAe,UAC/CE,UAAU,EAAIA,UAAU,CAACC,GAAX,CAAeH,SAAS,CAAC,CAAD,CAAxB,CAAf,EAAgD/iC,wCAAe,CAACC,KAAD,CADf,wDAC9DxL,CAD8D,UAC3DoX,CAD2D,UACxDC,CADwD,UACrD2E,CADqD,UAErE,MAAO,CAAChc,CAAD,CAAIoX,CAAJ,CAAOC,CAAP,CAAU,KAAO2E,CAAC,EAAI,CAAZ,CAAV,CAAP,CACD,CAHgC,EAAjC,CAIA,GAAM0yB,6BAA4B,CAAG,QAA/BA,6BAA+B,CAAChhC,aAAD,CAAmB,CACtD,GAAIA,aAAJ,CAAmB,CACjB;AACA;AACA,GAAMihC,iBAAgB,CAAG,GAAIC,IAAJ,CAAQlhC,aAAR,CAAzB,CACA,MAAO,UAAA4gC,SAAS,QAAKK,iBAAgB,CAACE,GAAjB,CAAqBP,SAAS,CAAC,CAAD,CAA9B,EAAqC,GAArC,CAA2C,GAAhD,EAAhB,CACD,CACD,MAAO,kBAAM,IAAN,EAAP,CACD,CARD,CAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAiCMQ,gB,4KACJ,iBAAY1/B,KAAZ,CAAmB,mEACjB,uBAAMA,KAAN,EAEA;AACA;AACA;AACA;AACA,MAAKs1B,YAAL,CAAoB,EAApB,CACA,MAAKqK,gBAAL,CAAwB,EAAxB,CACA,MAAKhF,aAAL,CAAqB,IAArB,CACA,MAAK1B,UAAL,CAAkB,IAAlB,CACA,MAAK2G,cAAL,CAAsB,IAAtB,CACA,MAAKC,kBAAL,CAA0B,IAA1B,CACA,MAAKC,WAAL,CAAmB,EAAnB,CACA,MAAKC,qBAAL,CAA6B,EAA7B,CACA;AACA;AACA,MAAKC,eAAL,CAAuB,CACrBvuC,IAAI,CAAE,GAAIqM,WAAJ,CAAe,KAAO,IAAP,CAAc,CAA7B,EACH/H,GADG,CACC,SAACkqC,CAAD,CAAIx3B,CAAJ,QAAWA,EAAC,CAAG,CAAJ,CAAQ,CAAR,CAAY7H,IAAI,CAACw3B,KAAL,CAAW,IAAMx3B,IAAI,CAACs/B,MAAL,EAAjB,CAAvB,EADD,CADe,CAGrB;AACA9+B,MAAM,CAAE,IAJa,CAKrBC,KAAK,CAAE,IALc,CAAvB,CAOA,MAAKzB,KAAL,6CAAkB,MAAKogC,eAAvB,EACA,MAAKG,UAAL,CAAkB,CAChB1uC,IAAI,CAAE,GAAIqM,WAAJ,CAAe,KAAO,IAAtB,CADU,CAEhB;AACAsD,MAAM,CAAE,IAHQ,CAIhBC,KAAK,CAAE,IAJS,CAAlB,CAOA;AACA,MAAK++B,iBAAL,GACA,MAAKC,kBAAL,GACA,MAAKC,qBAAL,GACA,MAAKC,sBAAL,GACA,MAAKC,yBAAL,GACA,MAAKC,0BAAL,GACA,MAAKC,cAAL,GAvCiB,aAwClB,C,wGAEgBC,Q,CAAU,IAEvBlpB,OAFuB,CAGrBkpB,QAHqB,CAEvBlpB,MAFuB,CAEfjc,OAFe,CAGrBmlC,QAHqB,CAEfnlC,OAFe,CAENwb,OAFM,CAGrB2pB,QAHqB,CAEN3pB,OAFM,CAEGE,OAFH,CAGrBypB,QAHqB,CAEGzpB,OAFH,IAIjBoe,aAJiB,CAIA,IAJA,CAIjBA,YAJiB,iBAwBrB,KAAKt1B,KAxBgB,CAMvB5D,KANuB,aAMvBA,KANuB,CAOvBwkC,UAPuB,aAOvBA,UAPuB,CAQvBtiC,aARuB,aAQvBA,aARuB,CASvBpD,gBATuB,aASvBA,gBATuB,CAUvBjG,iBAVuB,aAUvBA,iBAVuB,mCAWvB4rC,iBAXuB,CAWvBA,iBAXuB,gCAWHvB,4BAA4B,CAC9ChK,YAAY,CAAChlC,MAAb,GAAwBgO,aAAa,CAAChO,MAAtC,CAA+C,IAA/C,CAAsDgO,aADR,CAXzB,uBAcvB8gC,UAduB,aAcvBA,UAduB,mCAevB0B,YAfuB,CAevBA,YAfuB,gCAeR3B,gCAAwB,CAACC,UAAD,CAAahjC,KAAb,CAfhB,yDAgBvB2kC,cAhBuB,CAgBvBA,cAhBuB,gCAgBN9B,iCAAyB,CAACxnB,MAAD,CAhBnB,uBAiBvBupB,WAjBuB,aAiBvBA,WAjBuB,mCAkBvBC,cAlBuB,CAkBvBA,cAlBuB,gCAkBN,EAlBM,0DAmBvBnD,kBAnBuB,CAmBvBA,kBAnBuB,iCAmBF,CAnBE,wBAoBvBoD,2BApBuB,aAoBvBA,2BApBuB,CAqBvBlP,iBArBuB,aAqBvBA,iBArBuB,CAsBvB9rB,kBAtBuB,aAsBvBA,kBAtBuB,CAuBvBi7B,sBAvBuB,aAuBvBA,sBAvBuB,CAyBzB,GAAMC,qBAAoB,CAAGR,UAAU,CACnCtL,YAAY,CAACphC,MAAb,CAAoB,SAAAgrC,SAAS,QAAI0B,WAAU,CAACvvC,QAAX,CAAoB6tC,SAAS,CAAC,CAAD,CAA7B,CAAJ,EAA7B,CADmC,CAEnC5J,YAFJ,CAIA;AACA;AACA,GAAM+L,aAAY,CAAG,IAArB,CAEA,MAAO,IAAIC,wBAAJ,2CACLzjB,EAAE,CAAEghB,cADC,CAELrmB,eAAe,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAFZ,CAGL2c,UAAU,CAAE0L,iBAHP,CAILU,UAAU,CAAER,cAJP,CAKLrS,cAAc,CAAE,CACdmO,YAAY,CAAE,CAACrhC,OAAD,CADA,CAEd25B,UAAU,CAAE72B,aAFE,CAGd4H,kBAAkB,CAAlBA,kBAHc,CAIdq4B,YAAY,CAAE,CAACrnB,OAAD,CAAU8a,iBAAV,CAA6B1zB,aAA7B,CAA4C8gC,UAA5C,CAJA,CAKdZ,YAAY,CAAE,CAACxM,iBAAD,CAAoB1zB,aAApB,CAAmC8gC,UAAnC,CALA,CALX,CAYLb,YAAY,CAAE,sBAACW,SAAD,CAAe,CAC3B,GAAMt/B,MAAK,CAAGkhC,YAAY,CAAC5B,SAAD,CAA1B,CACAt/B,KAAK,CAAC,CAAD,CAAL,CAAWsX,OAAO,CAAG,GAArB,CACA,MAAOtX,MAAP,CACD,CAhBI,CAiBL4+B,YAAY,CAAE,sBAACU,SAAD,CAAe,CAC3B,GAAMt/B,MAAK,CAAGkhC,YAAY,CAAC5B,SAAD,CAA1B,CACAt/B,KAAK,CAAC,CAAD,CAAL,CAAW,GAAX,CACA,MAAOA,MAAP,CACD,CArBI,CAsBLm2B,OAAO,CAAE,iBAACn6B,IAAD,CAAU,CACjB,GAAIolC,WAAJ,CAAiB,CACfA,WAAW,CAACplC,IAAD,CAAX,CACD,CACF,CA1BI,CA2BLob,OAAO,CAAPA,OA3BK,CA4BL6lB,YAAY,CAAErhC,OAAO,CAAG,CAAH,CAAO,CA5BvB,CA6BLylC,cAAc,CAAdA,cA7BK,CA8BLnD,kBAAkB,CAAlBA,kBA9BK,CA+BL53B,kBAAkB,CAAlBA,kBA/BK,CAgCL8sB,UAAU,CAAE,CAAC,GAAIe,sDAAJ,EAAD,CAhCP,CAiCL7O,YAAY,CAAEgc,2BAA2B,CAAC,CAAD,CAjCpC,CAkCL/b,YAAY,CAAE+b,2BAA2B,CAAC,CAAD,CAlCpC,CAmCL9b,gBAAgB,CAAE4M,iBAAiB,GAAK,eAnCnC,CAoCL/a,QAAQ,CAAEkqB,sBApCL,EAqCFpmC,8CAAqB,CACtBqmC,oBADsB,CAEtBprC,SAFsB,CAGtBkF,gBAHsB,CAItBjG,iBAJsB,CAKtBosC,YALsB,CArCnB,EAAP,CA6CD,C,kEAEoBV,Q,CAAU,kBAKzB,KAAK3gC,KALoB,CAE3BwhC,oBAF2B,cAE3BA,oBAF2B,oCAG3BC,gBAH2B,CAG3BA,gBAH2B,gCAGR,SAAAhiC,CAAC,QAAIpD,yBAAO,CAACoD,CAAC,CAAC,CAAD,CAAD,CAAOpD,wBAAO,CAAC/L,MAAhB,CAAX,EAHO,2DAI3BoxC,mBAJ2B,CAI3BA,mBAJ2B,iCAIL,SAAAjiC,CAAC,QAAI,CAACA,CAAC,CAAC,CAAD,CAAF,CAAOA,CAAC,CAAC,CAAD,CAAR,CAAa,CAAb,CAAJ,EAJI,2BAMrBkgC,iBANqB,CAMA,IANA,CAMrBA,gBANqB,CAQ7B,MAAO,IAAIhD,4BAAJ,CAAqB,CAC1B9e,EAAE,CAAEihB,kBADsB,CAE1B3jC,gBAAgB,CAAEC,0BAAiB,CAACC,SAFV,CAG1B5J,IAAI,CAAEkuC,gBAHoB,CAI1BrkC,QAAQ,CAAE,IAJgB,CAK1BC,aAAa,CAAE,IALW,CAM1BwhC,eAAe,CAAE,CANS,CAO1B7lB,OAAO,CAAEypB,QAAQ,CAACzpB,OAPQ,CAQ1BF,OAAO,CAAE2pB,QAAQ,CAAC3pB,OARQ,CAS1B2qB,SAAS,CAAEhB,QAAQ,CAAClpB,MATM,CAU1B2W,WAAW,CAAEsT,mBAVa,CAW1BlD,YAAY,CAAEiD,gBAXY,CAY1BlD,YAAY,CAAEkD,gBAZY,CAa1B9lC,OAAO,CAAE,iBAACC,IAAD,CAAU,CACjB,GAAI4lC,oBAAJ,CAA0B,CACxB,GAAI5lC,IAAI,CAACC,MAAT,CAAiB,CACf2lC,oBAAoB,CAAC5lC,IAAI,CAACC,MAAL,CAAY,CAAZ,CAAD,CAApB,CACD,CAFD,IAEO,CACL2lC,oBAAoB,CAAC,IAAD,CAApB,CACD,CACF,CACF,CArByB,CAArB,CAAP,CAuBD,C,0EAEwBb,Q,CAAU,2BAM7B,KAAK3gC,KANwB,CAE/B4hC,sBAF+B,CAE/BA,sBAF+B,gCAEN,SAACC,kBAAD,CAAwB,CAC/C,GAAMC,aAAY,CAAGD,kBAAkB,CAAC,CAAD,CAAvC,CACA,MAAOC,aAAY,CAACrW,IAApB,CACD,CAL8B,0BAOzBsW,qBAPyB,CAOA,IAPA,CAOzBA,oBAPyB,CASjC,MAAO,IAAIT,wBAAJ,CAAiB,CACtBzjB,EAAE,CAAEkhB,sBADkB,CAEtBwC,UAAU,CAAEK,sBAFU,CAGtBzmC,gBAAgB,CAAEC,0BAAiB,CAACC,SAHd,CAItB5J,IAAI,CAAEswC,oBAJgB,CAKtBzmC,QAAQ,CAAE,IALY,CAMtBC,aAAa,CAAE,IANO,CAOtBC,OAAO,CAAE,IAPa,CAQtBC,MAAM,CAAE,KARc,CAStBC,YAAY,CAAE,CATQ,CAUtBmhC,YAAY,CAAE,EAVQ,CAWtB7lB,OAAO,CAAE2pB,QAAQ,CAAC3pB,OAXI,CAAjB,CAAP,CAaD,C,qEAEuB,kBAKlB,KAAKhX,KALa,CAEpB03B,SAFoB,cAEpBA,SAFoB,oCAGpBnC,aAHoB,CAGpBA,aAHoB,gCAGJyJ,oBAHI,uBAIpB3gC,gBAJoB,cAIpBA,gBAJoB,IAMd64B,KANc,CAML,KAAKtjC,KANA,CAMdsjC,IANc,IAOdyD,cAPc,CAOI,IAPJ,CAOdA,aAPc,CAQtB,MAAOyC,iDAAkB,CACvBlG,IADuB,CAEvBQ,SAAS,CAAC5M,IAFa,CAGvB+T,cAHuB,CAIvBtJ,aAJuB,CAKvBl3B,gBALuB,CAMvBs8B,aANuB,CAAzB,CAQD,C,iEAEqB,kBAOhB,KAAK36B,KAPW,CAElB03B,SAFkB,cAElBA,SAFkB,CAGlBr2B,KAHkB,cAGlBA,KAHkB,CAIlBD,MAJkB,cAIlBA,MAJkB,oCAKlBmM,iBALkB,CAKlBA,iBALkB,gCAKE,EALF,uBAMlBiZ,MANkB,cAMlBA,MANkB,CAQpB,GAAMhP,MAAK,CAAG,CAACgP,MAAM,EAAI,EAAX,EAAeoB,IAAf,CAAoB,SAAA32B,CAAC,QAAIA,EAAC,CAACumB,KAAN,EAArB,CAAd,CACA;AACA;AACA,GAAMnkB,QAAO,CAAG9D,MAAM,CAACuG,MAAP,CAAcyX,iBAAd,CAAhB,CACA,GAAI,CAACmqB,SAAD,EAAc,CAACr2B,KAAf,EAAwB,CAACD,MAAzB,EAAmC/N,OAAO,CAAC/C,MAAR,CAAiB,CAAxD,CAA2D,MAAO,KAAP,CAC3D,GAAMiB,OAAM,CAAG8B,OAAO,CAAC,CAAD,CAAtB,CACA,GAAI,CAAC9B,MAAL,CAAa,MAAO,KAAP,CACb,GAAMG,OAAM,CAAGJ,gDAAmB,CAACC,MAAD,CAAlC,CACA,GAAI,CAACG,MAAM,CAACmc,IAAZ,CAAkB,MAAO,KAAP,CAhBE,GAiBZwT,cAjBY,CAiBM3vB,MAAM,CAACmc,IAjBb,CAiBZwT,aAjBY,CAkBpB,GAAIA,aAAa,EAAI,CAAC7J,KAAtB,CAA6B,IACnB8J,EADmB,CACbD,aADa,CACnBC,CADmB,IAEnByG,KAFmB,CAEJzG,CAFI,CAEnByG,IAFmB,CAEb7V,IAFa,CAEJoP,CAFI,CAEbpP,IAFa,CAG3B,GAAI6V,IAAI,EAAI7V,IAAZ,CAAkB,CAChB,MAAO,IAAI8vB,sBAAJ,CAAkB,CACvBnkB,EAAE,CAAE,gBADmB,CAEvBkK,IAAI,CAAJA,IAFuB,CAGvB7V,IAAI,CAAJA,IAHuB,CAIvBwlB,SAAS,CAAC,4CAAMA,SAAP,EAAkBr2B,KAAK,CAALA,KAAlB,CAAyBD,MAAM,CAANA,MAAzB,EAJc,CAAlB,CAAP,CAMD,CACD,MAAO,KAAP,CACD,CACD,MAAO,KAAP,CACD,C,0DAEgB6gC,W,CAAa1wC,M,CAAQN,C,CAAG,CACvC,GAAM0vC,SAAQ,6CACTsB,WADS,EAEZlZ,QAAQ,CAAEkZ,WAAW,CAAClZ,QAAZ,CAAqB70B,MAArB,CACR,SAAAmzB,OAAO,QAAIA,QAAO,CAAC9b,SAAR,EAAqB8b,OAAO,CAACznB,KAA7B,EAAsCynB,OAAO,CAAC7K,MAAlD,EADC,CAFE,EAAd,CAOA;AACA;AACA;AACA;AACA,GAAIqE,WAAJ,CACA,GAAMqhB,oBAAmB,CAAGvB,QAAQ,CAAC5X,QAAT,CAAkBhzB,GAAlB,CAAsB,SAAA5B,CAAC,QAAIA,EAAC,CAACoX,SAAN,EAAvB,CAA5B,CACA,GAAM42B,oBAAmB,CAAG,KAAKpC,qBAAL,CAA2BY,QAAQ,CAAC/qB,KAApC,CAA5B,CACA,GAAI9M,iBAAO,CAACq5B,mBAAD,CAAsBD,mBAAtB,CAAX,CAAuD,CACrDrhB,UAAU,CAAGshB,mBAAb,CACD,CAFD,IAEO,CACLthB,UAAU,CAAGqhB,mBAAb,CACA,KAAKnC,qBAAL,CAA2BY,QAAQ,CAAC/qB,KAApC,EAA6CssB,mBAA7C,CACD,CACD,GAAME,oBAAmB,CAAI,CAACzB,QAAQ,CAAC3pB,OAAV,EACxB,MAAO2pB,SAAQ,CAAC3pB,OAAhB,GAA4B,SADL,EAEvBtf,OAAO,CAACipC,QAAQ,CAACvpB,gBAAV,CAFZ,CAGA,GAAMA,iBAAgB,CAAGgrB,mBAAmB,CAAG,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAH,CAAe,IAA3D,CACA,GAAMvJ,WAAU,CAAG,CACjB5hB,QAAQ,CAAE0pB,QAAQ,CAAC1pB,QADF,CAEjBC,OAAO,CAAEypB,QAAQ,CAACzpB,OAFD,CAGjBkrB,mBAAmB,CAAnBA,mBAHiB,CAIjBhrB,gBAAgB,CAAhBA,gBAJiB,CAKjBgQ,MAAM,CAAEuZ,QAAQ,CAAC5X,QAAT,CAAkBhzB,GAAlB,CAAsB,SAAA5B,CAAC,QAAIA,EAAC,CAACyL,KAAN,EAAvB,CALS,CAMjBuhB,OAAO,CAAEwf,QAAQ,CAAC5X,QAAT,CAAkBhzB,GAAlB,CAAsB,SAAA5B,CAAC,QAAIA,EAAC,CAACqoB,MAAN,EAAvB,CANQ,CAOjBrb,UAAU,CAAEw/B,QAAQ,CAACx/B,UAPJ,CAQjBkW,aAAa,CAAEspB,QAAQ,CAACtpB,aARP,CASjByK,MAAM,CAAE6e,QAAQ,CAAC7e,MATA,CAUjBC,MAAM,CAAE4e,QAAQ,CAAC5e,MAVA,CAWjBC,MAAM,CAAE2e,QAAQ,CAAC3e,MAXA,CAYjBra,QAAQ,CAAEg5B,QAAQ,CAACh5B,QAZF,CAajB06B,YAAY,CAAE1B,QAAQ,CAAC5X,QAAT,CAAkBhzB,GAAlB,CAAsB,SAAA5B,CAAC,QAAK,CAACwsC,QAAQ,CAAC3pB,OAAV,EAAqB,MAAO2pB,SAAQ,CAAC3pB,OAAhB,GAA4B,SAAjD,CACtC,KADsC,CAEtC7iB,CAAC,CAAC6iB,OAF+B,EAAvB,CAbG,CAAnB,CAkBA,GAAI,CAACzlB,MAAD,EAAW,CAACsnC,UAAhB,CAA4B,MAAO,KAAP,CA3CW,GA6CzBrpB,UA7CyB,CA+CnCje,MA/CmC,CA6CrCm2B,QA7CqC,CA6CzBlY,SA7CyB,CA8CrC/d,IA9CqC,CA+CnCF,MA/CmC,CA8CrCE,IA9CqC,CAgDvC,GAAIy3B,YAAJ,CACA,GAAI1Z,SAAJ,CAAe,IACLkS,MADK,CACgBlS,SADhB,CACLkS,KADK,CACEiG,SADF,CACgBnY,SADhB,CACEmY,SADF,CAEbuB,WAAW,CAAG,GAAIzH,6BAAJ,GACXkG,SADW,CACD,CAACA,SAAS,CAACrG,CAAX,CAAcqG,SAAS,CAACpG,CAAxB,CAA2B,CAA3B,CADC,EAEXG,KAFW,CAELA,KAFK,CAAd,CAGD,CALD,IAKO,IAAIif,QAAQ,CAACzX,WAAb,CAA0B,CAC/B;AACAA,WAAW,CAAG,GAAIzH,6BAAJ,CAAYkf,QAAQ,CAACzX,WAArB,CAAd,CACD,CACD,GAAI+Y,WAAW,CAACzjB,IAAZ,GAAqB,SAAzB,CAAoC,kBAK9B,KAAKxe,KALyB,CAEhCmhC,sBAFgC,cAEhCA,sBAFgC,oCAGhCD,2BAHgC,CAGhCA,2BAHgC,gCAGF,CAAC,GAAD,CAAM,GAAN,CAHE,uBAIhClP,iBAJgC,cAIhCA,iBAJgC,CAMlC,MAAO,IAAIjG,6BAAJ,CAAyB,CAC9B;AACA;AACAlO,EAAE,yBAAmB8iB,QAAQ,CAAC/qB,KAA5B,aAAqC3kB,CAArC,CAH4B,CAI9Bg0B,eAAe,CAAE4T,UAAU,CAACwJ,YAJE,CAK9BnrB,OAAO,CAAE2hB,UAAU,CAAC3hB,OALU,CAM9BgS,WAAW,CAAXA,WAN8B,CAO9BhG,WAAW,CAAEd,MAAM,CAAC,KAAKpiB,KAAL,CAAWg4B,aAAZ,CAPW,CAQ9BsK,eAAe,CAAErW,+CARa,CAS9B16B,MAAM,CAAEE,IATsB,CAU9BovB,UAAU,CAAVA,UAV8B,CAW9B;AACA;AACA;AACA;AACAuC,aAAa,CAAE,KAAKxjB,KAAL,CAAWnO,IAfI,CAgB9BoyB,aAAa,CAAE,KAAKjkB,KAAL,CAAWwB,MAhBI,CAiB9B0iB,YAAY,CAAE,KAAKlkB,KAAL,CAAWyB,KAjBK,CAkB9BkhC,iBAAiB,CAAE,IAlBW,CAmB9BC,cAAc,CAAE3J,UAAU,CAAClxB,QAnBG,CAoB9Bud,YAAY,CAAEgc,2BAA2B,CAAC,CAAD,CApBX,CAqB9B/b,YAAY,CAAE+b,2BAA2B,CAAC,CAAD,CArBX,CAsB9B9b,gBAAgB,CAAE4M,iBAAiB,GAAK,eAtBV,CAuB9B/a,QAAQ,CAAEkqB,sBAvBoB,CAwB9Br7B,cAAc,CAAE,KAAKq6B,UAAL,CAAgB1uC,IAxBF,CAAzB,CAAP,CA0BD,CA1FsC,yBA2FVm6B,oDAAmB,CAACn6B,IAAD,CAAOkvC,QAAQ,CAACnpB,KAAhB,CA3FT,wFA2FhCsU,KA3FgC,0BA2FzB2W,WA3FyB,0BA6FvC,GAAMzP,WAAU,CAAI2N,QAAQ,CAACnpB,KAAT,CAAiB,EAAjB,8CACdqhB,UAAU,CAAC5hB,QAAX,CAAsB,CACxB,GAAIyrB,kCAAJ,EADwB,CAAtB,CAEA,CACF,GAAIC,8BAAJ,EADE,CAHc,CAApB,CAQA,MAAO,IAAI7W,MAAJ,CAAU,CACfv6B,MAAM,CAAEkxC,WADO,CAEf5kB,EAAE,WAAK8iB,QAAQ,CAACnpB,KAAT,CAAiB,QAAjB,CAA4B,OAAjC,mBAAkDmpB,QAAQ,CAAC/qB,KAA3D,aAAoE3kB,CAApE,CAFa,CAGfm2B,MAAM,CAAEyR,UAAU,CAACzR,MAHJ,CAIftH,cAAc,CAAE+Y,UAAU,CAAC1X,OAJZ,CAKfN,UAAU,CAAVA,UALe,CAMfoE,eAAe,CAAE4T,UAAU,CAACwJ,YANb,CAOfnrB,OAAO,CAAE2hB,UAAU,CAAC3hB,OAPL,CAQfD,QAAQ,CAAE4hB,UAAU,CAAC5hB,QARN,CASfiS,WAAW,CAAXA,WATe,CAUf9R,gBAAgB,CAAEyhB,UAAU,CAACzhB,gBAVd,CAWfgrB,mBAAmB,CAAEvJ,UAAU,CAACuJ,mBAXjB,CAYfjhC,UAAU,CAAE03B,UAAU,CAAC13B,UAZR,CAafkW,aAAa,CAAEwhB,UAAU,CAACxhB,aAbX,CAcf/b,QAAQ,CAAE,KAdK,CAefwmB,MAAM,CAAE+W,UAAU,CAAC/W,MAfJ,CAgBfC,MAAM,CAAE8W,UAAU,CAAC9W,MAhBJ,CAiBfC,MAAM,CAAE6W,UAAU,CAAC7W,MAjBJ,CAkBfwgB,cAAc,CAAE3J,UAAU,CAAClxB,QAlBZ,CAmBfqrB,UAAU,CAAVA,UAnBe,CAAV,CAAP,CAqBD,C,6DAEmB,kCAKd,KAAKhzB,KALS,CAEhBwmB,MAFgB,cAEhBA,MAFgB,oCAGhBjZ,iBAHgB,CAGhBA,iBAHgB,gCAGI,EAHJ,0DAIhBq1B,qBAJgB,CAIhBA,qBAJgB,gCAIQ,EAJR,uBAMlB,GAAMprB,MAAK,CAAG,CAACgP,MAAM,EAAI,EAAX,EAAeoB,IAAf,CAAoB,SAAA32B,CAAC,QAAIA,EAAC,CAACumB,KAAN,EAArB,CAAd,CACA,GAAMqrB,WAAU,CAAG,CAACrc,MAAM,EAAI,EAAX,EAAe6C,SAAf,CAAyB,SAAAp4B,CAAC,QAAIA,EAAC,CAACumB,KAAN,EAA1B,CAAnB,CACA,MAAO,CAACgP,MAAM,EAAI,EAAX,EACJtyB,MADI,CACG,SAAAy0B,KAAK,QAAIA,MAAK,CAACnK,IAAN,GAAe,QAAf,EAA2BmK,KAAK,CAACnK,IAAN,GAAe,SAA9C,EADR,EAEJtqB,MAFI,CAEG,SAAAy0B,KAAK,QAAKnR,MAAK,CAAGmR,KAAK,CAACnR,KAAN,GAAgBA,KAAnB,CAA2B,IAArC,EAFR,EAGJzhB,GAHI,CAGA,SAAC4yB,KAAD,CAAQ13B,CAAR,QAAc,OAAI,CAAC6xC,gBAAL,6CACZna,KADY,EACLhhB,QAAQ,CAAEi7B,qBAAqB,CAACprB,KAAK,CAAGqrB,UAAH,CAAgB5xC,CAAtB,CAD1B,GAEjBsc,iBAAiB,CAACob,KAAK,CAAC/S,KAAP,CAFA,CAGjB3kB,CAHiB,CAAd,EAHA,CAAP,CAQD,C,6CAEW,IAER6uC,YAFQ,CAGN,IAHM,CAERA,WAFQ,CAEK7G,UAFL,CAGN,IAHM,CAEKA,UAFL,CAEiB4G,kBAFjB,CAGN,IAHM,CAEiBA,kBAFjB,CAEqCD,cAFrC,CAGN,IAHM,CAEqCA,cAFrC,CAIV,6DACKE,WADL,GAEE7G,UAFF,CAGE4G,kBAHF,CAIED,cAJF,CAKE,KAAKmD,mBAAL,EALF,+CAMK,KAAKC,qBAAL,EANL,GAQD,C,6DAEmB,kBAC2C,KAAKhjC,KADhD,iCACVhF,KADU,CACVA,KADU,6BACF,EADE,uDACEu6B,aADF,CACEA,aADF,gCACkByJ,oBADlB,uBAElB,GAAM1J,aAAY,CAAG/lC,MAAM,CAACsL,OAAP,CAAeG,KAAf,CAArB,CACA,KAAKs6B,YAAL,CAAoBA,YAApB,CACA,KAAKqF,aAAL,CAAqBtF,+CAAmB,CAACC,YAAD,CAAeC,aAAf,CAAxC,CACD,C,+DAEoB,IACX/O,OADW,CACA,KAAKxmB,KADL,CACXwmB,MADW,CAEnB,GAAMma,SAAQ,CAAG,CAACna,MAAM,EAAI,EAAX,EAAetoB,IAAf,CAAoB,SAAAyqB,KAAK,QAAIA,MAAK,CAACnK,IAAN,GAAe,OAAnB,EAAzB,CAAjB,CACA,GAAImiB,QAAJ,CAAc,CACZ,KAAK1H,UAAL,CAAkB,KAAKgK,gBAAL,CAAsBtC,QAAtB,CAAlB,CACD,CAFD,IAEO,CACL,KAAK1H,UAAL,CAAkB,IAAlB,CACD,CACF,C,+DAEoB,CACnB,GAAMr5B,MAAK,CAAG,KAAKogC,eAAnB,CADmB,GAEX9tB,KAFW,CAEF,KAAKlS,KAAL,CAAWo/B,UAFT,CAEXltB,IAFW,CAGnB,GAAI,MAAOA,KAAP,GAAgB,QAApB,CAA8B,CAC5B,GAAMsrB,QAAO,CAAG,KAAKx9B,KAAL,CAAWo/B,UAAX,CAAsB9nC,IAAtB,EAAhB,CACAsI,KAAK,CAACnO,IAAN,CAAa,GAAIqM,WAAJ,CAAe8B,KAAK,CAACwB,MAAN,CAAexB,KAAK,CAACyB,KAArB,CAA6B,CAA5C,EAA+CmU,IAA/C,CACXrZ,wCAAe,CAAC,KAAK6D,KAAL,CAAW5D,KAAZ,CAAf,CAAkC,CAAlC,CADW,CAAb,CAGA;AACAwD,KAAK,CAACnO,IAAN,CAAW,CAAX,EAAgB,CAAhB,CACAmO,KAAK,CAACnO,IAAN,CAAW,CAAX,EAAgB,CAAhB,CACAmO,KAAK,CAACnO,IAAN,CAAW,CAAX,EAAgB,CAAhB,CACA;AAT4B,yCAUX+rC,OAVW,YAU5B,+CAA0B,IAAf3f,GAAe,aACxB,GAAIA,EAAE,CAAG,CAAT,CAAY,CACV,GAAMsU,UAAS,CAAG,KAAKnyB,KAAL,CAAWo/B,UAAX,CAAsBC,GAAtB,CAA0BxhB,EAA1B,CAAlB,CACA,GAAIsU,SAAJ,CAAe,CACbvyB,KAAK,CAACnO,IAAN,CAAW0B,GAAX,CAAeg/B,SAAS,CAACliC,KAAV,CAAgB,CAAhB,CAAmB,CAAnB,CAAf,CAAsCmyB,MAAM,CAACvE,EAAD,CAAN,CAAa,CAAnD,EACD,CACF,CACF,CAjB2B,qDAkB7B,CACD,KAAKje,KAAL,CAAaA,KAAb,CACD,C,uEAEwB,yBACfkG,eADe,CACI,KAAK9F,KADT,CACf8F,cADe,CAEvB,qBAAIA,cAAc,CAAC,CAAD,CAAlB,2CAAI,iBAAmBxV,MAAvB,CAA+B,CAC7B,KAAK6vC,UAAL,CAAgB1uC,IAAhB,CAAuB,GAAIqM,WAAJ,CACrB,KAAKqiC,UAAL,CAAgB/+B,MAAhB,CAAyB,KAAK++B,UAAL,CAAgB9+B,KADpB,CAAvB,CAGA,KAAK8+B,UAAL,CAAgB1uC,IAAhB,CAAqB0B,GAArB,CAAyB2S,cAAc,CAAC,CAAD,CAAvC,EACD,CACF,C,qEAEuB,2BACK,KAAK9F,KADV,CACdsM,SADc,CACdA,SADc,gCACF,EADE,uBAEtB,GAAMqzB,iBAAgB,CAAGpwC,MAAM,CAACsL,OAAP,CAAeyR,SAAf,EAA0B+B,OAA1B,CACvB,eAAqBuH,KAArB,8DAAEstB,QAAF,UAAY5K,MAAZ,gBAA+BA,OAAM,CAACviC,GAAP,CAAW,4EAAEurB,CAAF,UAAKC,CAAL,gBAAY,CAACD,CAAD,CAAIC,CAAJ,CAAO3L,KAAP,CAAcstB,QAAd,CAAZ,EAAX,CAA/B,EADuB,CAAzB,CAGA,KAAKvD,gBAAL,CAAwBA,gBAAxB,CACD,C,uEAEwB,IACfnZ,OADe,CACJ,KAAKxmB,KADD,CACfwmB,MADe,CAEvB,GAAMma,SAAQ,CAAG,CAACna,MAAM,EAAI,EAAX,EAAetoB,IAAf,CAAoB,SAAAyqB,KAAK,QAAIA,MAAK,CAACnK,IAAN,GAAe,WAAnB,EAAzB,CAAjB,CACA,GAAImiB,QAAJ,CAAc,CACZ,KAAKf,cAAL,CAAsB,KAAKuD,oBAAL,CAA0BxC,QAA1B,CAAtB,CACD,CAFD,IAEO,CACL,KAAKf,cAAL,CAAsB,IAAtB,CACD,CACF,C,6EAE2B,2BACK,KAAK5/B,KADV,CAClBgN,aADkB,CAClBA,aADkB,gCACF,EADE,uBAE1B,GAAM+0B,qBAAoB,CAAGxyC,MAAM,CAACsL,OAAP,CAAemS,aAAf,CAA7B,CACA,KAAK+0B,oBAAL,CAA4BA,oBAA5B,CACD,C,+EAE4B,IACnBvb,OADmB,CACR,KAAKxmB,KADG,CACnBwmB,MADmB,CAE3B,GAAMma,SAAQ,CAAG,CAACna,MAAM,EAAI,EAAX,EAAetoB,IAAf,CACf,SAAAyqB,KAAK,QAAIA,MAAK,CAACnK,IAAN,GAAe,eAAnB,EADU,CAAjB,CAGA,GAAImiB,QAAJ,CAAc,CACZ,KAAKd,kBAAL,CAA0B,KAAKuD,wBAAL,CAA8BzC,QAA9B,CAA1B,CACD,CAFD,IAEO,CACL,KAAKd,kBAAL,CAA0B,IAA1B,CACD,CACF,C,uDAEgB,CACf,KAAKC,WAAL,CAAmB,KAAKuD,iBAAL,EAAnB,CACD,C,6DAEmB,4BAC+B,KAAKrjC,KADpC,CACVu1B,aADU,CACVA,aADU,iCACMyJ,oBADN,wBAElB,gIAAwBzJ,aAAxB,EACD,CAED;;;;;;;;mEASmB+N,S,CAAW,iBAC5B,KAAKC,iBAAL,GAEA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAAAC,QAAQ,QAAIH,UAAS,CAACG,QAAD,CAAT,GAAwB,MAAI,CAACzjC,KAAL,CAAWyjC,QAAX,CAA5B,EAA5B,CACA,GAAI,CAAC,OAAD,EAAU7b,IAAV,CAAe4b,WAAf,CAAJ,CAAiC,CAC/B;AACA,KAAKpD,iBAAL,GACA,KAAKsD,WAAL,GACD,CAED,GACE,CACE,QADF,CAEE,OAFF,CAGE,YAHF,CAIE,eAJF,CAKE,YALF,CAME,6BANF,CAOE,mBAPF,CAQE,wBARF,EASE9b,IATF,CASO4b,WATP,CADF,CAWE,CACA;AACA,KAAKnD,kBAAL,GACA,KAAKqD,WAAL,GACD,CAED,GAAI,CAAC,YAAD,EAAe9b,IAAf,CAAoB4b,WAApB,CAAJ,CAAsC,CACpC;AACA,KAAKG,kBAAL,GACA,KAAKD,WAAL,GACD,CAED,GAAI,CAAC,gBAAD,EAAmB9b,IAAnB,CAAwB4b,WAAxB,CAAJ,CAA0C,CACxC;AACA,KAAKI,sBAAL,GACA,KAAKF,WAAL,GACD,CAED,GAAI,CAAC,WAAD,EAAc9b,IAAd,CAAmB4b,WAAnB,CAAJ,CAAqC,CACnC;AACA,KAAKlD,qBAAL,GACA,KAAKoD,WAAL,GACD,CAED,GAAI,CAAC,QAAD,CAAW,WAAX,EAAwB9b,IAAxB,CAA6B4b,WAA7B,CAAJ,CAA+C,CAC7C;AACA,KAAKjD,sBAAL,GACA,KAAKmD,WAAL,GACD,CAED,GAAI,CAAC,eAAD,EAAkB9b,IAAlB,CAAuB4b,WAAvB,CAAJ,CAAyC,CACvC;AACA,KAAKhD,yBAAL,GACA,KAAKkD,WAAL,GACD,CAED,GAAI,CAAC,QAAD,CAAW,eAAX,EAA4B9b,IAA5B,CAAiC4b,WAAjC,CAAJ,CAAmD,CACjD;AACA,KAAK/C,0BAAL,GACA,KAAKiD,WAAL,GACD,CAED,GACE,CACE,QADF,CAEE,mBAFF,CAGE,YAHF,CAIE,eAJF,CAKE,6BALF,CAME,gBANF,CAOE,uBAPF,CAQE,wBARF,EASE9b,IATF,CASO4b,WATP,CADF,CAWE,CACA;AACA,KAAK9C,cAAL,GACA,KAAKgD,WAAL,GACD,CACF,CAED;qBA/jBoBzM,+C,EAkkBtB;;;;;;GAOA,GAAM4M,eAAc,CAAGC,qCAAU,CAAC,SAAC9jC,KAAD,CAAQ4D,OAAR,qBAChC,uCAAC,eAAD,kBAAa5D,KAAb,EAAoB,OAAO,CAAE4D,OAA7B,GADgC,EAAD,CAAjC,CAGeigC,6FAAf,E;;;;;;;;;;;ACxpBA,gD;;;;;;ACAA,iD;;;;;;ACAA,mD;;;;;;ACAA,kD;;;;;;ACAA,2D;;;;;;ACAA,8C;;;;;;ACAA,yC;;;;;;ACAA,gD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACcA,GAAME,gBAAe,CAAGjsB,6BAAU,CAAC,iBAAMksB,gCAAY,CAAC,CACpDC,WAAW,CAAE,CACX1nB,OAAO,CAAE,kBADE,CADuC,CAIpDH,GAAG,CAAE,CACHG,OAAO,CAAE,KADN,CAJ+C,CAOpD2nB,MAAM,CAAE,CACN3nB,OAAO,CAAE,iBADH,CAP4C,CAAD,CAAlB,EAAD,CAAlC,CAYA,GAAM4nB,qCAAqB,CAAG,QAAxBA,sBAAwB,MAIxB,IAHJC,oBAGI,MAHJA,mBAGI,CAFJxM,gBAEI,MAFJA,gBAEI,CADJpgB,KACI,MADJA,KACI,CACJ,GAAM2B,QAAO,CAAG4qB,eAAe,EAA/B,CACA,mBACE,uCAAC,kBAAD,mBACE,uCAAC,mBAAD,EAAW,SAAS,CAAE5qB,OAAO,CAAC8qB,WAA9B,oBADF,cAIE,uCAAC,mBAAD,EAAW,SAAS,CAAE9qB,OAAO,CAACiD,GAA9B,eACE,uCAAC,kBAAD,EACE,OAAO,CAAE,yBAAMgoB,oBAAmB,CAAC,CAACxM,gBAAF,CAAzB,EADX,CAEE,QAAQ,CAAE,CAACpgB,KAFb,CAGE,OAAO,CAAE9f,OAAO,CAACkgC,gBAAD,CAHlB,EADF,CAJF,CADF,CAcD,CApBD,CAsBe,QAASyM,eAAT,CAAwBrkC,KAAxB,CAA+B,IAE1C0pB,kBAF0C,CAexC1pB,KAfwC,CAE1C0pB,iBAF0C,CAG1CsI,iBAH0C,CAexChyB,KAfwC,CAG1CgyB,iBAH0C,CAI1CpzB,oBAJ0C,CAexCoB,KAfwC,CAI1CpB,oBAJ0C,CAK1CwlC,mBAL0C,CAexCpkC,KAfwC,CAK1CokC,mBAL0C,CAM1CxM,gBAN0C,CAexC53B,KAfwC,CAM1C43B,gBAN0C,CAO1CpgB,KAP0C,CAexCxX,KAfwC,CAO1CwX,KAP0C,CAQ1C2pB,sBAR0C,CAexCnhC,KAfwC,CAQ1CmhC,sBAR0C,CAS1CmD,yBAT0C,CAexCtkC,KAfwC,CAS1CskC,yBAT0C,CAU1CpD,2BAV0C,CAexClhC,KAfwC,CAU1CkhC,2BAV0C,CAW1CqD,8BAX0C,CAexCvkC,KAfwC,CAW1CukC,8BAX0C,CAY1CC,wBAZ0C,CAexCxkC,KAfwC,CAY1CwkC,wBAZ0C,CAa1CC,0BAb0C,CAexCzkC,KAfwC,CAa1CykC,0BAb0C,CAc1CC,gBAd0C,CAexC1kC,KAfwC,CAc1C0kC,gBAd0C,CAiB5C,QAASC,mCAAT,CAA4Cj9B,KAA5C,CAAmD,CACjD48B,yBAAyB,CAAC58B,KAAK,CAACkjB,MAAN,CAAaj3B,KAAd,CAAzB,CACD,CAED,QAASixC,0BAAT,CAAmCl9B,KAAnC,CAA0C/T,KAA1C,CAAiD,CAC/C4wC,8BAA8B,CAAC5wC,KAAD,CAA9B,CACD,CACD,GAAMkxC,mCAAkC,CAAG9rC,sCAAW,CACpDgK,kBAAQ,CAAC6hC,yBAAD,CAA4B,CAA5B,CAA+B,CAAE5hC,QAAQ,CAAE,IAAZ,CAA/B,CAD4C,CAEpD,CAAC4hC,yBAAD,CAFoD,CAAtD,CAKA,GAAMzrB,QAAO,CAAGtB,mCAAS,EAAzB,CAEA,mBACE,uCAAC,mCAAD,MACG4sB,0BAA0B,cACzB,uCAAC,0CAAD,EACE,iBAAiB,CAAE/a,iBADrB,CAEE,iBAAiB,CAAEsI,iBAFrB,CAGE,oBAAoB,CAAEpzB,oBAHxB,EADyB,CAMvB,IAPN,CAQG8lC,gBAAgB,cACf,uCAAC,oCAAD,EACE,mBAAmB,CAAEN,mBADvB,CAEE,gBAAgB,CAAExM,gBAFpB,CAGE,KAAK,CAAEpgB,KAHT,EADe,CAMb,IAdN,CAeGgtB,wBAAwB,cACvB,2FACE,uCAAC,kBAAD,mBACE,uCAAC,mBAAD,EAAW,SAAS,CAAErrB,OAAO,CAAC2D,SAA9B,CAAyC,OAAO,CAAC,iCAAjD,6BADF,cAIE,uCAAC,mBAAD,EAAW,SAAS,CAAE3D,OAAO,CAAC4D,SAA9B,eACE,uCAAC,+BAAD,EACE,SAAS,CAAE5D,OAAO,CAAC6D,MADrB,CAEE,KAAK,CAAEmkB,sBAFT,CAGE,QAAQ,CAAEwD,kCAHZ,CAIE,UAAU,CAAE,CACV9mB,EAAE,CAAE,iCADM,CAJd,EAQG5H,mCAAc,CAAClgB,GAAf,CAAmB,SAAA+uC,IAAI,qBACtB,iDAAQ,GAAG,CAAEA,IAAb,CAAmB,KAAK,CAAEA,IAA1B,EAAiCA,IAAjC,CADsB,EAAvB,CARH,CADF,CAJF,CADF,cAoBE,uCAAC,kBAAD,mBACE,uCAAC,mBAAD,EAAW,SAAS,CAAE3rB,OAAO,CAAC2D,SAA9B,mCADF,cAIE,uCAAC,mBAAD,EAAW,SAAS,CAAE3D,OAAO,CAAC4D,SAA9B,eACE,uCAAC,gBAAD,EACE,OAAO,CAAE,CAAEyC,IAAI,CAAErG,OAAO,CAACqD,MAAhB,CAAwBuoB,UAAU,CAAE5rB,OAAO,CAACuD,gBAA5C,CADX,CAEE,KAAK,CAAEwkB,2BAFT,CAGE,QAAQ,CAAE2D,kCAHZ,CAIE,kBAAgB,uCAJlB,CAKE,iBAAiB,CAAC,MALpB,CAME,IAAI,CAAE,KANR,CAOE,GAAG,CAAE,GAPP,CAQE,GAAG,CAAE,GARP,EADF,CAJF,CApBF,CADuB,CAuCrB,IAtDN,CADF,CA0DD,C;;;;;;;;;;;ACpIc,QAASG,yBAAT,CAAkChlC,KAAlC,CAAyC,IAEpD6sB,WAFoD,CAOlD7sB,KAPkD,CAEpD6sB,UAFoD,CAGpDmL,aAHoD,CAOlDh4B,KAPkD,CAGpDg4B,aAHoD,CAIpD32B,KAJoD,CAOlDrB,KAPkD,CAIpDqB,KAJoD,CAKpDD,MALoD,CAOlDpB,KAPkD,CAKpDoB,MALoD,CAMpD6jC,WANoD,CAOlDjlC,KAPkD,CAMpDilC,WANoD,CAStD,GAAMnY,WAAU,CAAGp0B,gDAAiB,EAApC,CACA,GAAMpD,SAAQ,CAAGwD,mDAAoB,CAAC+zB,UAAD,CAArC,CAVsD,SAY5BmL,aAAa,EAAIiN,WAAjB,EAEtBA,WAAW,CAACjN,aAAD,CAFW,sDAGlB1iC,QAAQ,EAAIA,QAAQ,CAACojC,OAArB,CAA+BpjC,QAAQ,CAACojC,OAAT,CAAiBV,aAAjB,CAA/B,CAAiE,CAAC,IAAD,CAAO,IAAP,CAH/C,GAKrB,CAAC,IAAD,CAAO,IAAP,CAAa,IAAb,CAjBiD,wDAY/Cj8B,QAZ+C,UAYrCulB,CAZqC,UAYlCC,CAZkC,UAmBtD,MACGxlB,SAAQ,cACP,uCAAC,4BAAD,EACE,CAAC,CAAEulB,CADL,CAEE,CAAC,CAAEC,CAFL,CAGE,UAAU,CAAEsL,UAHd,CAIE,UAAU,CAAEC,UAJd,CAKE,WAAW,CAAEzrB,KALf,CAME,YAAY,CAAED,MANhB,eAQE,uCAAC,iCAAD,EAAgB,IAAI,CAAErF,QAAtB,EARF,CADO,CAWL,IAZN,CAcD,C;;;;;;;;;ACRD,GAAMmpC,mBAAkB,CAAG,CACzB,OADyB,CAChB,WADgB,CACH,QADG,CACO,WADP,CACoB,mBADpB,CAA3B,CAIA;;;;;;;;;GAUe,QAASC,kBAAT,CAA2BnlC,KAA3B,CAAkC,IAE7CxK,KAF6C,CAc3CwK,KAd2C,CAE7CxK,IAF6C,CAG7Cd,kBAH6C,CAc3CsL,KAd2C,CAG7CtL,kBAH6C,CAI7C6kB,mBAJ6C,CAc3CvZ,KAd2C,CAI7CuZ,mBAJ6C,uBAc3CvZ,KAd2C,CAK7ColC,yBAL6C,CAKlB1b,iBALkB,gCAKE,MALF,6CAc3C1pB,KAd2C,CAM7CqlC,+BAN6C,CAMZ1b,uBANY,0CAMiBD,iBANjB,kDAc3C1pB,KAd2C,CAO7CslC,4BAP6C,CAOfzb,oBAPe,gCAOQ,UAPR,8CAc3C7pB,KAd2C,CAQ7CulC,kCAR6C,CAQTzb,0BARS,2CAQuBD,oBARvB,6BAS7CztB,KAT6C,CAc3C4D,KAd2C,CAS7C5D,KAT6C,uBAc3C4D,KAd2C,CAU7CwlC,cAV6C,CAU7CA,cAV6C,gCAU5B,KAV4B,oCAc3CxlC,KAd2C,CAW7CC,KAX6C,CAW7CA,KAX6C,uBAWrC,SAXqC,cAY7CwlC,SAZ6C,CAc3CzlC,KAd2C,CAY7CylC,SAZ6C,CAa7CC,eAb6C,CAc3C1lC,KAd2C,CAa7C0lC,eAb6C,CAgB/C,GAAMryC,QAAO,CAAG0E,yCAAU,EAA1B,CACA,GAAM9C,mBAAiB,CAAG0D,mDAAoB,EAA9C,CACA,GAAMpD,qBAAoB,CAAGyD,sDAAuB,CAACxD,IAAD,CAApD,CAEA;AApB+C,qBAoE1CI,8CAAe,CAAC0gB,oDAA4B,CAACqvB,OAA9B,CAAuCjxC,kBAAvC,CApE2B,wHAsB7CkV,OAtB6C,oBAsB7CA,OAtB6C,CAuBhCkhB,IAvBgC,oBAuB7C8a,WAvB6C,CAwB7BnY,OAxB6B,oBAwB7CoY,cAxB6C,CAyB7BnY,OAzB6B,oBAyB7CoY,cAzB6C,CA0B7BC,OA1B6B,oBA0B7CC,cA1B6C,CA2B3BC,SA3B2B,oBA2B7CC,gBA3B6C,CA4B3BC,SA5B2B,oBA4B7CC,gBA5B6C,CA6B3BC,SA7B2B,oBA6B7CC,gBA7B6C,CA8BvBC,aA9BuB,oBA8B7CC,oBA9B6C,CA+B3BlN,SA/B2B,oBA+B7CmN,gBA/B6C,CAgC1Bne,YAhC0B,oBAgC7CnxB,iBAhC6C,CAiCnB8hC,UAjCmB,oBAiC7CpuB,wBAjC6C,CAkC1B+0B,cAlC0B,oBAkC7C/yB,iBAlC6C,CAmCnBgzB,kBAnCmB,oBAmC7C3yB,wBAnC6C,CAoClC0zB,UApCkC,oBAoC7C8F,SApC6C,CAqC/B1O,aArC+B,oBAqC7C2O,YArC6C,CAsC3BC,aAtC2B,oBAsC7CC,gBAtC6C,CAuC5B7wB,gBAvC4B,oBAuC7C8wB,eAvC6C,CAwChCtoC,YAxCgC,oBAwC7CuoC,WAxC6C,CAyC3B/U,iBAzC2B,oBAyC7CgV,gBAzC6C,CA0C1BzoC,kBA1C0B,oBA0C7C0oC,iBA1C6C,CA2C7CrP,gBA3C6C,oBA2C7CA,gBA3C6C,CA4CvBuJ,sBA5CuB,oBA4C7C+F,oBA5C6C,CA6ClBhG,2BA7CkB,oBA6C7CiG,yBA7C6C,0CA+C7BC,OA/C6B,qBA+C7CC,cA/C6C,CAgD1BC,UAhD0B,qBAgD7CC,iBAhD6C,CAiD1BC,UAjD0B,qBAiD7CC,iBAjD6C,CAkD1BC,UAlD0B,qBAkD7CC,iBAlD6C,CAmDxBC,YAnDwB,qBAmD7CC,mBAnD6C,CAoDpBC,gBApDoB,qBAoD7CC,uBApD6C,CAqDxBC,YArDwB,qBAqD7CC,mBArD6C,CAsDvBC,eAtDuB,qBAsD7CC,oBAtD6C,CAuDhBC,aAvDgB,qBAuD7CC,2BAvD6C,CAwDvBC,iBAxDuB,qBAwD7CC,oBAxD6C,CAyDhBC,qBAzDgB,qBAyD7CC,2BAzD6C,CA0D/BC,aA1D+B,qBA0D7CC,YA1D6C,CA2DzBlqC,mBA3DyB,qBA2D7CmqC,kBA3D6C,CA4D5B1tC,gBA5D4B,qBA4D7C2tC,eA5D6C,CA6D7BlqC,eA7D6B,qBA6D7CmqC,cA7D6C,CA8DxBlqC,oBA9DwB,qBA8D7CmqC,mBA9D6C,CA+DvBrqC,qBA/DuB,qBA+D7CsqC,oBA/D6C,CAgE7CxH,oBAhE6C,qBAgE7CA,oBAhE6C,CAiE7C4C,mBAjE6C,qBAiE7CA,mBAjE6C,CAkEpBE,yBAlEoB,qBAkE7C2E,uBAlE6C,CAmEf1E,8BAnEe,qBAmE7C2E,4BAnE6C,2BA0E3CtxC,uDAAwB,CAC1B0e,oDAA4B,CAAC6yB,eADH,CAE1Bz0C,kBAF0B,CA1EmB,0FAwE3CkuC,qBAxE2C,2BAwE3CA,qBAxE2C,CA+E/C,GAAMprB,MAAK,CAAG8Q,YAAH,SAAGA,YAAH,iBAAGA,YAAY,CAAEV,IAAd,CAAmB,SAAAjzB,CAAC,QAAIA,EAAC,CAAC6iB,KAAN,EAApB,CAAd,CA/E+C,aAiFbxS,gCAAO,EAjFM,gEAiFxCC,IAjFwC,cAiFlCE,MAjFkC,cAiF1BG,SAjF0B,4BAuF3CtB,iCAAQ,CACVkhC,kBADU,CAvFmC,kEAmF7CngC,OAnF6C,eAoF7CV,cApF6C,eAqF7CO,iBArF6C,eAsF7CE,eAtF6C,sCA0FdnB,0CAAiB,EA1FH,oFA0FxCtC,KA1FwC,wBA0FjCD,MA1FiC,wBA0FzBwC,OA1FyB,wBA4F/C;AACA;AACAhB,oCAAS,CAAC,UAAM,CACd0C,SAAS,GACTR,eAAe,GACjB;AACC,CAJQ,CAIN,CAACzR,OAAD,CAAUuW,OAAV,CAJM,CAAT,CAMA;AApG+C,kBAqGnBG,0CAAY,CACtC1W,OADsC,CAC7BuW,OAD6B,CACpBvF,cADoB,CACJc,MADI,CACI,KADJ,CAEtC,CAAEkjC,2BAA2B,CAAED,aAA/B,CAFsC,CAGtC,CAAEv9B,wBAAwB,CAAEouB,UAA5B,CAHsC,CArGO,0EAqGxCj+B,KArGwC,mBAqGjCoP,UArGiC,yCA0GKiC,8CAAgB,CAClEhZ,OADkE,CACzDuW,OADyD,CAChDvF,cADgD,CAChCc,MADgC,CACxB,KADwB,CAElE,CAAEojC,oBAAoB,CAAED,iBAAxB,CAFkE,CAGlE,CAAEz7B,iBAAiB,CAAE+yB,cAArB,CAHkE,CA1GrB,kFA0GxCtzB,SA1GwC,uBA0G7BE,cA1G6B,uBA0GbE,cA1Ga,iDA+GvBK,kDAAoB,CAC1C1Z,OAD0C,CACjCuW,OADiC,CACxBvF,cADwB,CACRc,MADQ,CACA,KADA,CAE1C,CAAEsjC,2BAA2B,CAAED,qBAA/B,CAF0C,CAG1C,CAAEt7B,wBAAwB,CAAE2yB,kBAA5B,CAH0C,CA/GG,0FA+GxC7yB,aA/GwC,gDAoH5BjC,6CAAe,CAChC1X,OADgC,CACvBuW,OADuB,CACdvF,cADc,CACEc,MADF,CACU,KADV,CAEhC,CAAEyjC,kBAAkB,CAAEnqC,mBAAtB,CAA2CqqC,cAAc,CAAEnqC,eAA3D,CAFgC,CAGhC,CAAEmoC,eAAe,CAAE9wB,gBAAnB,CAAqC+wB,WAAW,CAAEvoC,YAAlD,CAHgC,CApHa,gFAoHxCsB,QApHwC,4CAyHtBwL,8CAAgB,CACvCjY,OADuC,CAC9BuW,OAD8B,CACrBvF,cADqB,CACL,KADK,CACEuiC,aADF,CACiBhiC,iBADjB,CAzHM,kFAyHxCkB,cAzHwC,+CA4H/BmG,gDAAkB,CAChC5Y,OADgC,CACvBuW,OADuB,CACdvF,cADc,CACEc,MADF,CACU,KADV,CA5Ha,sFA4HxCU,KA5HwC,yBA+H/C;AA/H+C,mBAgIKuH,2CAAa,CAC/D/Z,OAD+D,CACtDuW,OADsD,CAC7CvF,cAD6C,CAC7Bc,MAD6B,CACrB,KADqB,CAE/D,CAAEgjC,oBAAoB,CAAED,eAAxB,CAF+D,CAG/D,CAAE/wC,iBAAiB,CAAEmxB,YAArB,CAH+D,CAhIlB,4EAgIxCjb,MAhIwC,oBAgIhCE,iBAhIgC,oBAgIbE,cAhIa,oBAsI/C,GAAM+Y,OAAM,CAAGrwB,kCAAO,CAAC,UAAM,CAC3B;AACA;AACA;AACA,GAAMizC,oBAAmB,CAAG,CAAC37B,cAAc,CAACma,IAAf,CAAoB,SAAAjzB,CAAC,wBAAIA,EAAJ,SAAIA,CAAJ,8BAAIA,CAAC,CAAE+yB,QAAP,sCAAI,YAAauB,SAAjB,EAArB,CAA7B,CACA,6DACM2W,cAAc,CAAG,CAAC,4CAAKA,cAAN,EAAsBphB,IAAI,CAAE,WAA5B,GAAH,CAAgD,EADpE,+CAEOya,UAAU,EAAImQ,mBAAf,CAAsC,CAAC,4CAAKnQ,UAAN,EAAkBza,IAAI,CAAE,OAAxB,GAAtC,CAA2E,EAFjF,+CAGMqhB,kBAAkB,CAAG,CAAC,4CAAKA,kBAAN,EAA0BrhB,IAAI,CAAE,eAAhC,GAAH,CAAwD,EAHhF,+CAIM8J,YAAY,CAAGA,YAAY,CAACvyB,GAAb,CAAiB,SAAApB,CAAC,qDAAUA,CAAV,EAAa6pB,IAAI,CAAG7pB,CAAC,CAAC6pB,IAAF,EAAU,CAAC,QAAD,CAAW,SAAX,EAAsBntB,QAAtB,CAA+BsD,CAAC,CAAC6pB,IAAjC,CAAV,CAAmD7pB,CAAC,CAAC6pB,IAArD,CAA4D,QAAhF,IAAlB,CAAH,CAAqH,EAJvI,GAMD,CAXqB,CAWnB,CAACya,UAAD,CAAa2G,cAAb,CAA6BC,kBAA7B,CAAiDvX,YAAjD,CAA+D7a,cAA/D,CAXmB,CAAtB,CAaA7K,oCAAS,CAAC,UAAM,CACd,GAAK,MAAO6qB,QAAP,GAAmB,QAAnB,EAA+B,MAAOC,QAAP,GAAmB,QAAvD,CAAkE,2BAG5DxD,yDAAwB,CAAC,CAC3B7oB,KAAK,CAALA,KAD2B,CAE3BD,MAAM,CAANA,MAF2B,CAG3BpG,KAAK,CAALA,KAH2B,CAI3BuS,iBAAiB,CAAjBA,iBAJ2B,CAK3B4c,SAAS,CAAEzyB,OAAO,CAACrE,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyBga,MAA1B,CALS,CAM3BmK,KAAK,CAALA,KAN2B,CAAD,CAHoC,CAE9D4S,cAF8D,uBAE9DA,cAF8D,CAE9CC,cAF8C,uBAE9CA,cAF8C,CAE9BC,cAF8B,uBAE9BA,cAF8B,CAEdC,WAFc,uBAEdA,WAFc,CAWhE+c,UAAU,CAACld,cAAD,CAAV,CACAod,UAAU,CAACnd,cAAD,CAAV,CACAqd,UAAU,CAACpd,cAAD,CAAV,CACA8c,OAAO,CAAC7c,WAAD,CAAP,CACD,CACH;AACC,CAlBQ,CAkBN,CAAChd,iBAAD,CAAoBvS,KAApB,CAA2ByyB,OAA3B,CAAoCC,OAApC,CAA6C4Z,UAA7C,CAAyDE,UAAzD,CAAqEJ,OAArE,CAA8E5vB,KAA9E,CAlBM,CAAT,CAoBA,GAAM6xB,eAAc,CAAGlzC,kCAAO,CAAC,iBAAM0J,kDAAa,CAChDC,QADgD,CACtCvB,kBADsC,CAAnB,EAAD,CAE3B,CAACuB,QAAD,CAAWvB,kBAAX,CAF2B,CAA9B,CAIA,GAAM+qC,qBAAoB,CAAGvwC,sCAAW,CAAC,SAACuzB,CAAD,CAAO,CAC9CjuB,oDAAgB,CACdiuB,CADc,CACX/tB,kBADW,CACSC,YADT,CAEdC,mBAFc,CAEOC,qBAFP,CAE8BC,eAF9B,CAGdC,oBAHc,CAAhB,CAKD,CANuC,CAMrC,CAACL,kBAAD,CAAqBC,YAArB,CAAmCI,oBAAnC,CACDF,qBADC,CACsBC,eADtB,CACuCF,mBADvC,CANqC,CAAxC,CASA,GAAM2gC,WAAU,CAAGjpC,kCAAO,CAAC,iBAAM47B,oDAAa,CAAC,CAC7CC,iBAAiB,CAAjBA,iBAD6C,CAE7ClsB,cAAc,CAAEA,cAAc,EAAIA,cAAc,CAAC,CAAD,CAFH,CAG7C8gC,aAAa,CAAbA,aAH6C,CAI7C9mC,QAAQ,CAAEupC,cAJmC,CAK7CrzB,gBAAgB,CAAhBA,gBAL6C,CAM7CxX,YAAY,CAAZA,YAN6C,CAO7CyzB,mBAAmB,CAAEpsB,KAPwB,CAQ7CzJ,KAAK,CAALA,KAR6C,CAAD,CAAnB,EAAD,CAStB,CAAC41B,iBAAD,CAAoB4U,aAApB,CAAmCyC,cAAnC,CAAmDjtC,KAAnD,CACFoC,YADE,CACYwX,gBADZ,CAC8BlQ,cAD9B,CAC8CD,KAD9C,CATsB,CAA1B,CAYA;AACA;AACA;AACA;AACA,GAAM0jC,gCAA+B,CAAGpzC,kCAAO,CAAC,UAAM,CACpD,GAAM8hC,WAAU,CAAGxqB,cAAc,CAACma,IAAf,CAAoB,SAAAjzB,CAAC,yBAAIA,EAAJ,SAAIA,CAAJ,+BAAIA,CAAC,CAAE+yB,QAAP,uCAAI,aAAauB,SAAjB,EAArB,CAAnB,CACA,GAAI,CAAApjB,KAAK,OAAL,EAAAA,KAAK,SAAL,QAAAA,KAAK,CAAEI,IAAP,GAAeH,cAAf,EAAiCmyB,UAArC,CAAiD,CAC/C,GAAMuR,MAAK,CAAG3jC,KAAK,CAACI,IAAN,CAAW9W,MAAX,CAAkB,SAACqS,GAAD,CAAMmN,IAAN,QAAe/N,KAAI,CAACY,GAAL,CAASA,GAAT,CAAc4gB,MAAM,CAACzT,IAAD,CAApB,CAAf,EAAlB,CAAd,CACA,GAAM3I,OAAM,CAAG,GAAIlI,WAAJ,CAAe0rC,KAAK,CAAG,CAAvB,CAAf,CACA;AACA,IAAK,GAAIv4C,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG4U,KAAK,CAACI,IAAN,CAAW3V,MAA/B,CAAuCW,CAAC,EAAxC,CAA4C,CAC1C,GAAM4sB,GAAE,CAAGhY,KAAK,CAACI,IAAN,CAAWhV,CAAX,CAAX,CACA+U,MAAM,CAAC7S,GAAP,CAAW2S,cAAc,CAAC,CAAD,CAAd,CAAkB7V,KAAlB,CAAwBgB,CAAxB,CAA2BA,CAAC,CAAG,CAA/B,CAAX,CAA8CmxB,MAAM,CAACvE,EAAD,CAApD,EACD,CACD,MAAO,CAAC7X,MAAD,CAAP,CACD,CAAC,MAAO,CAAC,GAAIlI,WAAJ,EAAD,CAAP,CACH,CAZ8C,CAY5C,CAAC+H,KAAD,CAAQC,cAAR,CAAwB2H,cAAxB,CAZ4C,CAA/C,CAcA,GAAMnP,cAAa,CAAGnI,kCAAO,CAAC,iBAAMxE,MAAK,CAAC0e,IAAN,CAAW+uB,UAAU,CAAC9nC,IAAX,EAAX,CAAN,EAAD,CAAsC,CAAC8nC,UAAD,CAAtC,CAA7B,CAEA,GAAM6F,YAAW,CAAG,QAAdA,YAAc,CAACnpC,MAAD,CAAY,CAC9B,GAAM6K,KAAI,CAAG3L,KAAK,CAACc,MAAD,CAAlB,CACA,GAAI6K,IAAJ,CAAU,CACR,OAAO,gGACD9W,mCAAU,CAAC65B,iBAAD,CADhB,QAC2C5tB,MAD3C,EAEK6K,IAAI,CAAC3K,OAFV,EAID,CACD,MAAO,KAAP,CACD,CATD,CAWA,GAAM27B,aAAY,CAAG,QAAfA,aAAe,MAMf,IALE8R,QAKF,MALJ3e,IAKI,CAJJF,MAII,MAJJA,MAII,CAHO8e,YAGP,MAHJzD,SAGI,CAFW0D,gBAEX,MAFJpD,aAEI,CADOqD,YACP,MADJtQ,SACI,CACJ8N,OAAO,CAACqC,OAAD,CAAP,CACAnC,UAAU,CAAC1c,MAAM,CAAC,CAAD,CAAP,CAAV,CACA4c,UAAU,CAAC5c,MAAM,CAAC,CAAD,CAAP,CAAV,CACA8c,UAAU,CAAC9c,MAAM,CAAC,CAAD,CAAN,EAAa,IAAd,CAAV,CACAgd,YAAY,CAAC8B,YAAD,CAAZ,CACA5B,gBAAgB,CAAC6B,gBAAD,CAAhB,CACA3B,YAAY,CAAC4B,YAAY,EAAI,IAAjB,CAAZ,CACD,CAdD,CAgBA,GAAMC,SAAQ,CAAGrgB,oDAAmB,CAAC,CACnCC,iBAAiB,CAAErf,UADgB,CAEnCsf,iBAAiB,CAAjBA,iBAFmC,CAGnCC,uBAAuB,CAAvBA,uBAHmC,CAInCC,oBAAoB,CAAEpd,cAJa,CAKnCqd,oBAAoB,CAApBA,oBALmC,CAMnCC,0BAA0B,CAA1BA,0BANmC,CAOnCpd,cAAc,CAAdA,cAPmC,CAAD,CAApC,CAUA;AACA;AACA,GAAMxG,mBAAkB,CAAGN,iDAAwB,CAAC,CAAEC,KAAK,CAALA,KAAF,CAASC,cAAc,CAAdA,cAAT,CAAD,CAAnD,CACA,GAAMgkC,kBAAiB,CAAGz2C,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB,mBAAzB,CAA1B,CACA,GAAM02C,aAAY,CAAG12C,OAAO,CAACuW,OAAD,CAAP,CAAiBvW,OAAjB,CAAyB2H,KAAzB,EAChByS,cAAc,CAACma,IAAf,CAAoB,SAAAjzB,CAAC,yBAAIA,EAAJ,SAAIA,CAAJ,+BAAIA,CAAC,CAAE+yB,QAAP,uCAAI,aAAauB,SAAjB,EAArB,CADL,CAEA,GAAM+gB,gBAAe,CAAGz8B,iBAAiB,CAACqa,IAAlB,CAAuB,SAAAr2B,MAAM,QAAImG,QAAO,CAC9D/F,KAAK,CAAC0e,IAAN,CAAW,CACT/f,MAAM,CAAEiB,MAAM,CAACE,IAAP,CAAYnB,MADX,CAAX,EAEG4D,MAFH,CAEU,SAAC+rC,CAAD,CAAIgK,GAAJ,QAAYvoC,sDAAiB,CAACnQ,MAAM,CAACE,IAAR,CAAcw4C,GAAd,CAA7B,EAFV,EAE2D35C,MAHG,CAAX,EAA7B,CAAxB,CAKA;AACA,GAAMo0C,iBAAgB,CAAGsF,eAAe,EACnC,EAAE,CAAAvE,SAAS,OAAT,EAAAA,SAAS,SAAT,QAAAA,SAAS,CAAEn1C,MAAX,IAAsBid,iBAAiB,CAACjd,MAA1C,CADoB,EACiC,CAACo1C,eAD3D,CAGA,mBACE,uCAAC,4BAAD,EACE,KAAK,CAAEzlC,KADT,CAEE,IAAI,CAAE4pC,QAFR,CAGE,SAAS,KAHX,CAIE,IAAI,CAAE5kC,IAJR,CAKE,KAAK,CAAE7I,KALT,CAME,mBAAmB,CAAEmd,mBANvB,CAOE,OAAO,CAAExU,OAPX,CAQE,OAAO,CACL;AACA;AACA2/B,gBAAgB,EAAIoF,iBAApB,cACE,uCAAC,cAAD,EACE,iBAAiB,CAAEpgB,iBADrB,CAEE,iBAAiB,CAAEsI,iBAFrB,CAGE,oBAAoB,CAAEpzB,oBAHxB,CAIE,mBAAmB,CAAEwlC,mBAJvB,CAKE,gBAAgB,CAAExM,gBALpB,CAME,KAAK,CAAEpgB,KANT,CAOE,sBAAsB,CAAE2pB,sBAP1B,CAQE,yBAAyB,CAAEmD,yBAR7B,CASE,2BAA2B,CAAEpD,2BAT/B,CAUE,8BAA8B,CAAEqD,8BAVlC,CAWE,wBAAwB,CAAEuF,iBAX5B,CAYE,0BAA0B,CAAEC,YAAY,EAAID,iBAZ9C,CAaE,gBAAgB,CAAEpF,gBAbpB,EADF,CAgBI,IA3BR,eA8BE,uCAAC,0BAAD,EACE,GAAG,CAAE9gC,OADP,CAEE,IAAI,CAAEpO,IAFR,CAGE,KAAK,CAAE6L,KAHT,CAIE,MAAM,CAAED,MAJV,CAKE,SAAS,CAAE,CACT0pB,IAAI,CAAJA,IADS,CAETF,MAAM,CAAE,CAAC6C,OAAD,CAAUC,OAAV,CAAmBqY,OAAnB,CAFC,CAGTE,SAAS,CAATA,SAHS,CAITE,SAAS,CAATA,SAJS,CAKTE,SAAS,CAATA,SALS,CAMTE,aAAa,CAAbA,aANS,CAOTjN,SAAS,CAATA,SAPS,CALb,CAcE,YAAY,CAAE3B,YAdhB,CAeE,MAAM,CAAEnR,MAfV,CAgBE,KAAK,CAAExrB,KAhBT,CAiBE,UAAU,CAAE4lC,UAjBd,CAkBE,aAAa,CAAEtiC,aAlBjB,CAmBE,aAAa,CAAE05B,aAnBjB,CAoBE,UAAU,CAAEoH,UApBd,CAqBE,SAAS,CAAE9yB,SArBb,CAsBE,aAAa,CAAEU,aAtBjB,CAuBE,iBAAiB,CAAEO,iBAvBrB,CAwBE,aAAa,CAAEm7B,aAxBjB,CAyBE,gBAAgB,CAAEY,oBAzBpB,CA0BE,gBAAgB,CAAEpuC,gBA1BpB,CA2BE,oBAAoB,CAAEsmC,oBA3BxB,CA4BE,iBAAiB,CAAE,4BAAM,CACvBvsC,kBAAiB,CAACO,IAAD,CAAjB,CACD,CA9BH,CA+BE,cAAc,CAAED,oBA/BlB,CAgCE,qBAAqB,CAAEqtC,qBAhCzB,CAiCE,gBAAgB,CAAEhL,gBAjCpB,CAkCE,sBAAsB,CAAEuJ,sBAlC1B,CAmCE,2BAA2B,CAAED,2BAnC/B,CAoCE,cAAc,CAAEqI,+BApClB,CAqCE,iBAAiB,CAAEvX,iBArCrB,CAsCE,kBAAkB,CAAE9rB,kBAtCtB,CAuCE,KAAK,CAAE9J,KAvCT,EA9BF,CAuEG,CAACopC,cAAD,eACC,uCAAC,wBAAD,EACE,UAAU,CAAEhwC,IADd,CAEE,aAAa,CAAEwiC,aAFjB,CAGE,KAAK,CAAE32B,KAHT,CAIE,MAAM,CAAED,MAJV,CAKE,WAAW,CAAE6jC,WALf,EAxEJ,CADF,CAmFD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvYD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","file":"spatial.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 175);\n","/**\n * This file defines the current constant values.\n * To deprecate a value, add it to ./constants-old.js\n * with a corresponding log message.\n */\nexport const Component = {\n  DESCRIPTION: 'description',\n  STATUS: 'status',\n  GENES: 'genes',\n  CELL_SETS: 'cellSets',\n  SCATTERPLOT: 'scatterplot',\n  SPATIAL: 'spatial',\n  HEATMAP: 'heatmap',\n  LAYER_CONTROLLER: 'layerController',\n  CELL_SET_SIZES: 'cellSetSizes',\n  GENOMIC_PROFILES: 'genomicProfiles',\n  CELL_SET_EXPRESSION: 'cellSetExpression',\n  EXPRESSION_HISTOGRAM: 'expressionHistogram',\n  GATING: 'gating',\n};\n\nexport const DataType = {\n  CELLS: 'cells',\n  CELL_SETS: 'cell-sets',\n  EXPRESSION_MATRIX: 'expression-matrix',\n  GENOMIC_PROFILES: 'genomic-profiles',\n  MOLECULES: 'molecules',\n  NEIGHBORHOODS: 'neighborhoods',\n  RASTER: 'raster',\n};\n\n\nexport const FileType = {\n  CELLS_JSON: 'cells.json',\n  CELL_SETS_JSON: 'cell-sets.json',\n  EXPRESSION_MATRIX_ZARR: 'expression-matrix.zarr',\n  GENOMIC_PROFILES_ZARR: 'genomic-profiles.zarr',\n  MOLECULES_JSON: 'molecules.json',\n  NEIGHBORHOODS_JSON: 'neighborhoods.json',\n  RASTER_JSON: 'raster.json',\n  RASTER_OME_ZARR: 'raster.ome-zarr',\n  CLUSTERS_JSON: 'clusters.json',\n  GENES_JSON: 'genes.json',\n  ANNDATA_CELL_SETS_ZARR: 'anndata-cell-sets.zarr',\n  ANNDATA_CELLS_ZARR: 'anndata-cells.zarr',\n  ANNDATA_EXPRESSION_MATRIX_ZARR: 'anndata-expression-matrix.zarr',\n};\n\n/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const CoordinationType = {\n  DATASET: 'dataset',\n  // Entity types\n  OBS_TYPE: 'obsType',\n  FEATURE_TYPE: 'featureType',\n  FEATURE_VALUE_TYPE: 'featureValueType',\n  // Other types\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_OBS_SET_POLYGONS_VISIBLE: 'embeddingObsSetPolygonsVisible',\n  EMBEDDING_OBS_SET_LABELS_VISIBLE: 'embeddingObsSetLabelsVisible',\n  EMBEDDING_OBS_SET_LABEL_SIZE: 'embeddingObsSetLabelSize',\n  EMBEDDING_OBS_RADIUS: 'embeddingObsRadius',\n  EMBEDDING_OBS_RADIUS_MODE: 'embeddingObsRadiusMode',\n  EMBEDDING_OBS_OPACITY: 'embeddingObsOpacity',\n  EMBEDDING_OBS_OPACITY_MODE: 'embeddingObsOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  OBS_FILTER: 'obsFilter',\n  OBS_HIGHLIGHT: 'obsHighlight',\n  OBS_SET_SELECTION: 'obsSetSelection',\n  OBS_SET_HIGHLIGHT: 'obsSetHighlight',\n  OBS_SET_COLOR: 'obsSetColor',\n  FEATURE_FILTER: 'featureFilter',\n  FEATURE_HIGHLIGHT: 'featureHighlight',\n  FEATURE_SELECTION: 'featureSelection',\n  FEATURE_VALUE_COLORMAP: 'featureValueColormap',\n  FEATURE_VALUE_TRANSFORM: 'featureValueTransform',\n  FEATURE_VALUE_COLORMAP_RANGE: 'featureValueColormapRange',\n  OBS_COLOR_ENCODING: 'obsColorEncoding',\n  SPATIAL_IMAGE_LAYER: 'spatialImageLayer',\n  SPATIAL_SEGMENTATION_LAYER: 'spatialSegmentationLayer',\n  SPATIAL_POINT_LAYER: 'spatialPointLayer',\n  SPATIAL_NEIGHBORHOOD_LAYER: 'spatialNeighborhoodLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_OBS_SETS: 'additionalObsSets',\n  // TODO: use obsHighlight rather than moleculeHighlight.\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n  GATING_FEATURE_SELECTION_X: 'gatingFeatureSelectionX',\n  GATING_FEATURE_SELECTION_Y: 'gatingFeatureSelectionY',\n  FEATURE_VALUE_TRANSFORM_COEFFICIENT: 'featureValueTransformCoefficient',\n};\n","module.exports = require(\"react\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Get the longest string in the array of strings.\n * @param {string[]} strings The array of strings.\n * @returns The longest string.\n */\nexport function getLongestString(strings) {\n  return strings.reduce(\n    (prevLongest, currentValue) => (\n      prevLongest.length > currentValue.length ? prevLongest : currentValue\n    ),\n  );\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { CoordinationType } from '../constants';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: uid => set((state) => {\n    const newLayout = state.viewConfig.layout.filter(c => c.uid !== uid);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialImageLayer` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Get a mapping from dataset coordination scopes to dataset UIDs.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {object} Mapping from dataset coordination scope names to dataset UIDs.\n */\nexport function useDatasetUids(coordinationScopes) {\n  const parameter = CoordinationType.DATASET;\n  const datasetScopes = coordinationScopes[parameter];\n\n  // Mapping from dataset coordination scope name to dataset uid\n  const datasetUids = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    // Convert a single scope to an array of scopes to be consistent.\n    const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][datasetScope];\n        return [datasetScope, value];\n      }\n      return [datasetScope, undefined];\n    }));\n  }, shallow);\n\n  return datasetUids;\n}\n\n/**\n * Use coordination values and coordination setter functions corresponding to\n * dataset-specific coordination scopes for each coordination type.\n * @param {string[]} parameters An array of coordination types supported by a view.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {array} [cValues, cSetters] where\n * cValues is a mapping from coordination scope name to { coordinationType: coordinationValue },\n * and cSetters is a mapping from coordination scope name to { setCoordinationType }\n * setter functions.\n */\nexport function useMultiDatasetCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const datasetScopes = coordinationScopes[CoordinationType.DATASET];\n\n  // Convert a single scope to an array of scopes to be consistent.\n  const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      const datasetValues = fromEntries(parameters.map((parameter) => {\n        if (coordinationSpace && coordinationSpace[parameter]) {\n          let value;\n          const parameterSpace = coordinationSpace[parameter];\n          const parameterScope = coordinationScopes[parameter];\n          if (typeof parameterScope === 'object') {\n            value = parameterSpace[parameterScope[datasetScope]];\n          } else if (typeof parameterScope === 'string') {\n            value = parameterSpace[parameterScope];\n          } else {\n            console.error(`coordination scope for ${parameter} must be of type string or object.`);\n          }\n          return [parameter, value];\n        }\n        return [parameter, undefined];\n      }));\n      return [datasetScope, datasetValues];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(datasetScopesArr.map((datasetScope) => {\n    const datasetSetters = fromEntries(parameters.map((parameter) => {\n      const setterName = `set${capitalize(parameter)}`;\n      let setterFunc;\n      const parameterScope = coordinationScopes[parameter];\n      if (typeof parameterScope === 'object') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope[datasetScope],\n          value,\n        });\n      } else if (typeof parameterScope === 'string') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope,\n          value,\n        });\n      } else {\n        console.error(`coordination scope for ${parameter} must be of type string or object.`);\n      }\n      return [setterName, setterFunc];\n    }));\n    return [datasetScope, datasetSetters];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialImageLayer: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\n\n// Image texture dimensions\nexport const TILE_SIZE = 4096;\n// Reshaped data texture dimensions\nexport const DATA_TEXTURE_SIZE = 4096;\nexport const MIN_ROW_AGG = 1;\nexport const MAX_ROW_AGG = 16;\n\nexport const COLOR_BAR_SIZE = 20;\nexport const AXIS_LABEL_TEXT_SIZE = 11;\nexport const AXIS_TITLE_TEXT_SIZE = 15;\nexport const AXIS_MIN_SIZE = 12;\nexport const AXIS_MAX_SIZE = 120;\nexport const AXIS_MARGIN = 3;\nexport const AXIS_PADDING = 10;\nexport const THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64],\n};\nexport const AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\n\nexport const PIXELATED_TEXTURE_PARAMETERS = {\n  // NEAREST for integer data to prevent interpolation.\n  [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n  [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n  // CLAMP_TO_EDGE to remove tile artifacts.\n  [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n  [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n};\n","module.exports = require(\"regenerator-runtime\");\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_DARK_COLOR = [50, 50, 50];\nexport const DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nexport function getDefaultColor(theme) {\n  return theme === 'dark' ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateTracksHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateTracksHover: ${hoverInfo}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n\n\nexport function formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  // eslint-disable-next-line no-restricted-properties\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport const getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf('y')];\n  const width = shape[labels.indexOf('x')];\n  const depth = shape[labels.indexOf('z')];\n  // eslint-disable-next-line no-bitwise\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  // Check memory allocation limits for Float32Array (used in XR3DLayer for rendering)\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height, width, depthDownsampled, totalBytes,\n  };\n};\n\nexport const canLoadResolution = (loader, resolution) => {\n  const {\n    totalBytes, height, width, depthDownsampled,\n  } = getStatsForResolution(\n    loader,\n    resolution,\n  );\n  const maxHeapSize = window.performance?.memory\n    && window.performance?.memory?.jsHeapSizeLimit / 2;\n  const maxSize = maxHeapSize || (2 ** 31) - 1;\n  // 2048 is a normal texture size limit although some browsers go larger.\n  return (\n    totalBytes < maxSize\n    && height <= 2048\n    && depthDownsampled <= 2048\n    && width <= 2048\n    && depthDownsampled > 1\n  );\n};\n","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"@luma.gl/constants\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@deck.gl/core\");","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","module.exports = require(\"@material-ui/core/styles\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class DatasetNotFoundError extends AbstractLoaderError {\n  constructor(datasetUid) {\n    super(`Error finding dataset for ${datasetUid}. Please check that at least one dataset exists in the view config.`);\n    this.name = 'DatasetNotFoundError';\n\n    this.datasetUid = datasetUid;\n  }\n\n  warnInConsole() {\n    const {\n      datasetUid,\n    } = this;\n    if (datasetUid) {\n      console.warn(\n        `Unable to find dataset for ${datasetUid}`,\n      );\n    } else {\n      console.warn('No dataset uid specified.');\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\nexport { default as DatasetNotFoundError } from './DatasetNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","module.exports = require(\"@material-ui/core/TableCell\");","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n  DatasetNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { getDefaultCoordinationValues } from '../app/plugins';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  const defaultCoordinationValues = getDefaultCoordinationValues();\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, defaultCoordinationValues[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialSegmentationLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialPointLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      if (isRequired) {\n        warn(new DatasetNotFoundError(dataset), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport centroid from '@turf/centroid';\nimport concaveman from 'concaveman';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { getDefaultColor, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Get the size associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {number} The length of all the node's children\n */\nexport function getNodeLength(currNode) {\n  if (!currNode) {\n    return 0;\n  }\n  if (!currNode.children) {\n    return (currNode.set?.length || 0);\n  }\n  return currNode.children.reduce((acc, curr) => acc + getNodeLength(curr), 0);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodePath The path of the node of interest.\n * @param {string} dataType Datatype (i.e cell sets)\n * @param {Array} cellSetColors Array of objects of cell set colors and paths\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors, theme) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color\n      ?? getDefaultColor(theme);\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: getNodeLength(node),\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor, theme) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  let cellsArray = [];\n  for (let i = 0; i < selectedNamePaths.length; i += 1) {\n    const setNamePath = selectedNamePaths[i];\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellsArray = cellsArray.concat(nodeSet.map(([cellId]) => ({\n        obsId: cellId,\n        name: node.name,\n        color: nodeColor,\n      })));\n    }\n  }\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor, theme,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(cell => cell.every(i => typeof i === 'number'));\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const concavity = Infinity;\n        const hullCoords = concaveman(cellPositions, concavity);\n        if (hullCoords) {\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme);\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      // If there is a color for the node specified via the cell set tree,\n      // then use it. Otherwise, use a color from the default color palette.\n      const nodeColorArray = (node.color ? node.color : PALETTE[index % PALETTE.length]);\n      nextCellSetColor.push({\n        path: nodePath,\n        color: nodeColorArray,\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    theme,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(\n      cellSets, cells, mapping, cellSetSelection, cellSetColor, theme,\n    );\n  }\n  return [];\n}\n","// List of the GLSL colormaps available,\n// to validate against before string replacing.\nexport const GLSL_COLORMAPS = [\n  'plasma',\n  'viridis',\n  'jet',\n];\nexport const GLSL_COLORMAP_DEFAULT = 'plasma';\nexport const COLORMAP_SHADER_PLACEHOLDER = 'COLORMAP_FUNC';\n","import { CoordinationType, Component } from '../constants';\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [CoordinationType.OBS_TYPE]: 'cell',\n  [CoordinationType.FEATURE_TYPE]: 'gene',\n  [CoordinationType.FEATURE_VALUE_TYPE]: 'expression',\n  [CoordinationType.EMBEDDING_ZOOM]: null,\n  [CoordinationType.EMBEDDING_ROTATION]: 0,\n  [CoordinationType.EMBEDDING_TARGET_X]: null,\n  [CoordinationType.EMBEDDING_TARGET_Y]: null,\n  [CoordinationType.EMBEDDING_TARGET_Z]: 0,\n  [CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE]: 14,\n  [CoordinationType.EMBEDDING_OBS_RADIUS]: 1,\n  [CoordinationType.EMBEDDING_OBS_RADIUS_MODE]: 'auto',\n  [CoordinationType.EMBEDDING_OBS_OPACITY]: 1,\n  [CoordinationType.EMBEDDING_OBS_OPACITY_MODE]: 'auto',\n  [CoordinationType.SPATIAL_ZOOM]: null,\n  [CoordinationType.SPATIAL_ROTATION]: 0,\n  [CoordinationType.SPATIAL_TARGET_X]: null,\n  [CoordinationType.SPATIAL_TARGET_Y]: null,\n  [CoordinationType.SPATIAL_TARGET_Z]: null,\n  [CoordinationType.SPATIAL_ROTATION_X]: null,\n  [CoordinationType.SPATIAL_ROTATION_Y]: null,\n  [CoordinationType.SPATIAL_ROTATION_Z]: null,\n  [CoordinationType.SPATIAL_AXIS_FIXED]: false,\n  [CoordinationType.SPATIAL_ROTATION_ORBIT]: 0,\n  [CoordinationType.SPATIAL_ORBIT_AXIS]: 'Y',\n  [CoordinationType.SPATIAL_IMAGE_LAYER]: null,\n  [CoordinationType.SPATIAL_SEGMENTATION_LAYER]: null,\n  [CoordinationType.SPATIAL_POINT_LAYER]: null,\n  [CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER]: null,\n  [CoordinationType.HEATMAP_ZOOM_X]: 0,\n  [CoordinationType.HEATMAP_ZOOM_Y]: 0,\n  [CoordinationType.HEATMAP_TARGET_X]: 0,\n  [CoordinationType.HEATMAP_TARGET_Y]: 0,\n  [CoordinationType.FEATURE_VALUE_COLORMAP]: 'plasma',\n  [CoordinationType.FEATURE_VALUE_COLORMAP_RANGE]: [0.0, 1.0],\n  [CoordinationType.FEATURE_VALUE_TRANSFORM]: null,\n  [CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT]: 1,\n  [CoordinationType.FEATURE_FILTER]: null,\n  [CoordinationType.FEATURE_HIGHLIGHT]: null,\n  [CoordinationType.FEATURE_SELECTION]: null,\n  [CoordinationType.OBS_FILTER]: null,\n  [CoordinationType.OBS_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_SELECTION]: null,\n  [CoordinationType.OBS_SET_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_COLOR]: null,\n  [CoordinationType.OBS_COLOR_ENCODING]: 'cellSetSelection',\n  [CoordinationType.GENOMIC_ZOOM_X]: 0,\n  [CoordinationType.GENOMIC_ZOOM_Y]: 0,\n  [CoordinationType.GENOMIC_TARGET_X]: 1549999999.5,\n  [CoordinationType.GENOMIC_TARGET_Y]: 1549999999.5,\n  [CoordinationType.ADDITIONAL_OBS_SETS]: null,\n  [CoordinationType.MOLECULE_HIGHLIGHT]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_X]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_Y]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  CoordinationType.HEATMAP_ZOOM_X,\n  CoordinationType.HEATMAP_ZOOM_Y,\n  CoordinationType.HEATMAP_TARGET_X,\n  CoordinationType.HEATMAP_TARGET_Y,\n  CoordinationType.EMBEDDING_ZOOM,\n  CoordinationType.EMBEDDING_TARGET_X,\n  CoordinationType.EMBEDDING_TARGET_Y,\n  CoordinationType.EMBEDDING_TARGET_Z,\n  CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n  CoordinationType.EMBEDDING_OBS_RADIUS,\n  CoordinationType.EMBEDDING_OBS_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  [Component.SCATTERPLOT]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.GATING]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.GATING_FEATURE_SELECTION_X,\n    CoordinationType.GATING_FEATURE_SELECTION_Y,\n  ],\n  [Component.SPATIAL]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_ROTATION,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n    CoordinationType.SPATIAL_AXIS_FIXED,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.HEATMAP]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.HEATMAP_ZOOM_X,\n    CoordinationType.HEATMAP_ZOOM_Y,\n    CoordinationType.HEATMAP_TARGET_X,\n    CoordinationType.HEATMAP_TARGET_Y,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.CELL_SETS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.CELL_SET_SIZES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.STATUS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.GENES]: [\n    CoordinationType.DATASET,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.OBS_SET_SELECTION,\n  ],\n  [Component.CELL_SET_EXPRESSION]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.EXPRESSION_HISTOGRAM]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.LAYER_CONTROLLER]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n  ],\n  [Component.GENOMIC_PROFILES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.DESCRIPTION]: [\n    CoordinationType.DATASET,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n  ],\n  higlass: [\n    CoordinationType.DATASET,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n};\n","module.exports = require(\"@deck.gl/layers\");","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","module.exports = require(\"lodash/debounce\");","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","module.exports = require(\"lodash/range\");","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","module.exports = require(\"zustand/shallow\");","module.exports = require(\"@material-ui/core/TableRow\");","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import { FileType, DataType } from './constants';\n\n/**\n * Mapping from file types to data types. Each file type\n * should correspond to one data type. Multiple file types\n * can map onto the same data type.\n */\nexport const FILE_TYPE_DATA_TYPE_MAPPING = {\n  [FileType.CELLS_JSON]: DataType.CELLS,\n  [FileType.CELL_SETS_JSON]: DataType.CELL_SETS,\n  [FileType.EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENOMIC_PROFILES_ZARR]: DataType.GENOMIC_PROFILES,\n  [FileType.MOLECULES_JSON]: DataType.MOLECULES,\n  [FileType.NEIGHBORHOODS_JSON]: DataType.NEIGHBORHOODS,\n  [FileType.RASTER_JSON]: DataType.RASTER,\n  [FileType.RASTER_OME_ZARR]: DataType.RASTER,\n  [FileType.CLUSTERS_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENES_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.ANNDATA_CELL_SETS_ZARR]: DataType.CELL_SETS,\n  [FileType.ANNDATA_CELLS_ZARR]: DataType.CELLS,\n  [FileType.ANNDATA_EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n};\n","import { fromEntries } from '../utils';\nimport { FILE_TYPE_DATA_TYPE_MAPPING } from './constant-relationships';\nimport { FileType, CoordinationType } from './constants';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n} from './state/coordination';\n\nconst PLUGINS_KEY = '__VITESSCE_PLUGINS__';\nconst PLUGIN_VIEW_TYPES_KEY = 'viewTypes';\nconst PLUGIN_COORDINATION_TYPES_KEY = 'coordinationTypes';\nconst PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY = 'coordinationTypesPerView';\nconst PLUGIN_FILE_TYPES_KEY = 'fileTypes';\nconst PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY = 'fileTypeDataTypeMapping';\nconst PLUGIN_CONVENIENCE_FILE_TYPES_KEY = 'convenienceFileTypes';\n\nwindow[PLUGINS_KEY] = {};\nconst PLUGINS = window[PLUGINS_KEY];\n\n// Reference: https://github.com/higlass/higlass-register/blob/master/src/index.js\nPLUGINS[PLUGIN_VIEW_TYPES_KEY] = PLUGINS[PLUGIN_VIEW_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_KEY] = PLUGINS[PLUGIN_COORDINATION_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] = (\n  PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] || {}\n);\nPLUGINS[PLUGIN_FILE_TYPES_KEY] = PLUGINS[PLUGIN_FILE_TYPES_KEY] || {};\nPLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] = (\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] || {}\n);\nPLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] = PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] || {};\n\n/**\n * Register a new coordination type.\n * @param {string} typeName Name for the new coordination type.\n * @param {*} defaultValue A default value for the coordination type.\n */\nexport function registerPluginCoordinationType(typeName, defaultValue) {\n  PLUGINS[PLUGIN_COORDINATION_TYPES_KEY][typeName] = defaultValue;\n}\n\n/**\n * Register a new view type.\n * @param {string} viewType A name\n * @param {function} viewSubscriberReactComponent A react component.\n * @param {string[]} coordinationTypes A list of coordination types that this view supports.\n */\nexport function registerPluginViewType(viewType, viewSubscriberReactComponent, coordinationTypes) {\n  PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType] = viewSubscriberReactComponent;\n  // Register the supported coordination types.\n  const pluginTypesPerView = PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY];\n  if (Array.isArray(pluginTypesPerView[viewType])) {\n    coordinationTypes.forEach((coordinationType) => {\n      if (!pluginTypesPerView[viewType].includes(coordinationType)) {\n        pluginTypesPerView[viewType].push(coordinationType);\n      }\n    });\n  } else {\n    pluginTypesPerView[viewType] = coordinationTypes;\n  }\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {string} dataTypeName Name for the data type associated with the file type.\n * @param {class} dataSourceClass Data source class definition.\n * @param {class} dataLoaderClass Data loader class definition.\n */\nexport function registerPluginFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, dataTypeName, dataLoaderClass, dataSourceClass,\n) {\n  PLUGINS[PLUGIN_FILE_TYPES_KEY][fileTypeName] = [dataSourceClass, dataLoaderClass];\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileTypeName] = dataTypeName;\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {function} expansionFunction The file type expansion function.\n * Should take in a single file definition and return an array of\n * file definitions with valid fileType values.\n */\nexport function registerPluginConvenienceFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, expansionFunction,\n) {\n  PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileTypeName] = expansionFunction;\n}\n\n\n// Plugin getter functions.\n\nexport function getPluginViewTypes() {\n  return Object.keys(PLUGINS[PLUGIN_VIEW_TYPES_KEY]);\n}\n\nexport function getPluginViewType(viewType) {\n  return PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType];\n}\n\nexport function getPluginCoordinationTypes() {\n  return Object.keys(PLUGINS[PLUGIN_COORDINATION_TYPES_KEY]);\n}\n\nexport function getPluginCoordinationTypeDefaults() {\n  return PLUGINS[PLUGIN_COORDINATION_TYPES_KEY];\n}\n\nexport function getPluginCoordinationTypesForViewType(viewType) {\n  if (Array.isArray(PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType])) {\n    return PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType];\n  }\n  return [];\n}\n\nexport function getPluginFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_FILE_TYPES_KEY]);\n}\nexport function getPluginConvenienceFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY]);\n}\n\nexport function getDataTypeForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileType];\n}\nexport function getLoaderClassesForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPES_KEY][fileType];\n}\nexport function getExpansionFunctionForPluginConvenienceFileType(fileType) {\n  return PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileType];\n}\n\n// Getters that depend on plugins.\nexport function getFileTypes() {\n  return [\n    ...Object.values(FileType),\n    ...getPluginFileTypes(),\n  ];\n}\n\nexport function getCoordinationTypes() {\n  return [\n    ...Object.values(CoordinationType),\n    ...getPluginCoordinationTypes(),\n  ];\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getDefaultCoordinationValues() {\n  return {\n    ...DEFAULT_COORDINATION_VALUES,\n    ...getPluginCoordinationTypeDefaults(),\n  };\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getComponentCoordinationTypes() {\n  return {\n    ...COMPONENT_COORDINATION_TYPES,\n    ...fromEntries(getPluginViewTypes().map(viewType => ([\n      viewType,\n      getPluginCoordinationTypesForViewType(viewType),\n    ]))),\n  };\n}\n\nexport function getFileTypeDataTypeMapping() {\n  return {\n    ...FILE_TYPE_DATA_TYPE_MAPPING,\n    ...fromEntries(getPluginFileTypes().map(fileType => ([\n      fileType,\n      getDataTypeForPluginFileType(fileType),\n    ]))),\n  };\n}\n\nexport function getConvenienceFileTypes() {\n  return {\n    // TODO: import built-in convenience file types and include them here.\n    ...PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY],\n  };\n}\n","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(theme => ({\n  box: {\n    boxSizing: 'border-box',\n  },\n  checkbox: {\n    padding: '3px',\n    color: theme.palette.primaryForeground,\n    '&:checked': {\n      color: theme.palette.primaryForeground,\n    },\n    '& input': {\n      height: '100%',\n    },\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: '60px',\n    padding: '10px 0 10px 0',\n  },\n  sliderValueLabel: {\n    '& span': {\n      '& span': {\n        color: theme.palette.primaryBackground,\n      },\n    },\n  },\n  tableContainer: {\n    overflow: 'hidden',\n    overflowX: 'hidden !important',\n  },\n  labelCell: {\n    padding: '2px 8px 2px 16px',\n  },\n  inputCell: {\n    padding: '2px 16px 2px 8px',\n    overflow: 'visible',\n  },\n  select: {\n    '& select': {\n      fontSize: '.875rem',\n    },\n  },\n  selectRoot: {\n    padding: 0,\n    height: 'auto',\n  },\n}));\n","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n    placement = 'bottom-end',\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement={placement}\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/Paper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Popper\");","import { makeStyles, createTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"math.gl\");","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport { useStyles } from './styles';\n\nexport default function OptionSelect(props) {\n  const { classes: classesProp = {} } = props;\n  const classes = useStyles();\n  return (\n    <Select\n      native\n      disableUnderline\n      {...props}\n      classes={{\n        root: classes.selectRoot,\n        ...classesProp,\n      }}\n    />\n  );\n}\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"@turf/helpers\");","import { getChannelStats } from '@hms-dbmi/viv';\nimport { Matrix4 } from 'math.gl';\n\nasync function getSingleSelectionStats2D({ loader, selection }) {\n  const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n  const raster = await data.getRaster({ selection });\n  const selectionStats = getChannelStats(raster.data);\n  const { domain, contrastLimits: slider } = selectionStats;\n  return { domain, slider };\n}\n\nasync function getSingleSelectionStats3D({ loader, selection }) {\n  const lowResSource = loader[loader.length - 1];\n  const { shape, labels } = lowResSource;\n  // eslint-disable-next-line no-bitwise\n  const sizeZ = shape[labels.indexOf('z')] >> (loader.length - 1);\n  const raster0 = await lowResSource.getRaster({\n    selection: { ...selection, z: 0 },\n  });\n  const rasterMid = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.floor(sizeZ / 2) },\n  });\n  const rasterTop = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.max(0, sizeZ - 1) },\n  });\n  const stats0 = getChannelStats(raster0.data);\n  const statsMid = getChannelStats(rasterMid.data);\n  const statsTop = getChannelStats(rasterTop.data);\n  return {\n    domain: [\n      Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]),\n      Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1]),\n    ],\n    slider: [\n      Math.min(\n        stats0.contrastLimits[0],\n        statsMid.contrastLimits[0],\n        statsTop.contrastLimits[0],\n      ),\n      Math.max(\n        stats0.contrastLimits[1],\n        statsMid.contrastLimits[1],\n        statsTop.contrastLimits[1],\n      ),\n    ],\n  };\n}\n\n/**\n * Get bounding cube for a given loader i.e [[0, width], [0, height], [0, depth]]\n * @param {Object} loader PixelSource|PixelSource[]\n * @param {[]} selection Selection for stats.\n * @param {boolean} use3d Whether or not to get 3d stats.\n * @returns {Object} { domains, sliders }\n */\nexport const getSingleSelectionStats = async ({ loader, selection, use3d }) => {\n  const getStats = use3d\n    ? getSingleSelectionStats3D\n    : getSingleSelectionStats2D;\n  return getStats({ loader, selection });\n};\n\nexport const getMultiSelectionStats = async ({ loader, selections, use3d }) => {\n  const stats = await Promise.all(\n    selections.map(selection => getSingleSelectionStats({ loader, selection, use3d })),\n  );\n  const domains = stats.map(stat => stat.domain);\n  const sliders = stats.map(stat => stat.slider);\n  return { domains, sliders };\n};\n\n/**\n * Get physical size scaling Matrix4\n * @param {Object} loader PixelSource\n * @returns {Object} matrix\n */\nexport function getPhysicalSizeScalingMatrix(loader) {\n  const { x, y, z } = loader?.meta?.physicalSizes ?? {};\n  if (x?.size && y?.size && z?.size) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n  return new Matrix4().identity();\n}\n\n/**\n * Get bounding cube for a given loader\n * @param {Object} loader PixelSource|PixelSource[]\n * @returns {Array} [0, width], [0, height], [0, depth]]\n */\nexport function getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { shape, labels } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf('x')]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf('y')]];\n  const zSlice = [\n    0,\n    physicalSizeScalingMatrix[10] * shape[labels.indexOf('z')],\n  ];\n  return [xSlice, ySlice, zSlice];\n}\n\nexport function abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n","module.exports = require(\"uuid/v4\");","module.exports = require(\"deck.gl\");","module.exports = require(\"nebula.gl\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Checkbox\");","import glsl from 'glslify';\n\nexport const vs = glsl`\n#define SHADER_NAME bitmask-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 instancePickingColors;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vTexCoord = texCoords;\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\nexport const fs = glsl`\n#define SHADER_NAME bitmask-layer-fragment-shader\nprecision highp float;\n\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Data (mask) texture\nuniform sampler2D channel0;\nuniform sampler2D channel1;\nuniform sampler2D channel2;\nuniform sampler2D channel3;\nuniform sampler2D channel4;\nuniform sampler2D channel5;\n\n// Color texture\nuniform sampler2D colorTex;\nuniform float colorTexHeight;\nuniform float colorTexWidth;\nuniform float hovered;\n// range\nuniform bool channelsVisible[6];\n\n// Expression mapping\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\nuniform sampler2D expressionTex;\n\n// opacity\nuniform float opacity;\n\nvarying vec2 vTexCoord;\n\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\n  float sampledData = texture(dataTex, coord).r;\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\n  // Only return a color if the data is non-zero.\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\n}\n\nvoid main() {\n\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\n\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\n  // otherwise just use the currently stored color.  Repeat this for all channels.\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D, isWebGL2 } from '@luma.gl/core';\nimport { XRLayer } from '@hms-dbmi/viv';\nimport { fs, vs } from './bitmask-layer-shaders';\nimport {\n  GLSL_COLORMAPS,\n  GLSL_COLORMAP_DEFAULT,\n  COLORMAP_SHADER_PLACEHOLDER,\n} from './constants';\n\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n  return newArr;\n}\n\nconst defaultProps = {\n  hoveredCell: { type: 'number', value: null, compare: true },\n  cellColorData: { type: 'object', value: null, compare: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  expressionData: { type: 'object', value: null, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class BitmaskLayer extends XRLayer {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      fs,\n      vs,\n      modules: [project32, picking],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps, changeFlags }) {\n    super.updateState({ props, oldProps, changeFlags });\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n    if (props.expressionData !== oldProps.expressionData) {\n      const { expressionData, cellTexHeight, cellTexWidth } = this.props;\n      const expressionTex = this.dataToTexture(\n        expressionData,\n        cellTexWidth,\n        cellTexHeight,\n      );\n      this.setState({ expressionTex });\n    }\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      // eslint-disable-next-line no-underscore-dangle\n      this.setState({ model: this._getModel(gl) });\n\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width,\n    } = this.props;\n    const colorTex = new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data,\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: GL.RGB,\n      dataFormat: GL.RGB,\n      type: GL.UNSIGNED_BYTE,\n    });\n    this.setState({ colorTex });\n  }\n\n  draw(opts) {\n    const { uniforms } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      textures, model, colorTex, expressionTex,\n    } = this.state;\n    // Render the image\n    if (textures && model && colorTex) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            hovered: hoveredCell || 0,\n            colorTex,\n            expressionTex,\n            colorTexHeight: colorTex.height,\n            colorTexWidth: colorTex.width,\n            channelsVisible: padWithDefault(\n              channelsVisible,\n              false,\n              // There are six texture entries on the shaders\n              6 - channelsVisible.length,\n            ),\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n            uIsExpressionMode: isExpressionMode,\n            ...textures,\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * This function creates textures from the data\n   */\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL2(this.context.gl);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data: new Float32Array(data),\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: isWebGL2On ? GL.R32F : GL.LUMINANCE,\n      dataFormat: isWebGL2On ? GL.RED : GL.LUMINANCE,\n      type: GL.FLOAT,\n    });\n  }\n}\nBitmaskLayer.layerName = 'BitmaskLayer';\nBitmaskLayer.defaultProps = defaultProps;\n","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport isEqual from 'lodash/isEqual';\nimport {\n  getDefaultInitialViewState,\n  MultiscaleImageLayer,\n  ImageLayer,\n  VolumeLayer,\n} from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize, getSourceFromLoader, isRgb } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_LABELS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\nimport BitmaskLayer from '../../layers/BitmaskLayer';\nimport { getMultiSelectionStats } from '../layer-controller/utils';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels\n    .filter(dim => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim] = Math.floor(\n      (source.shape[source.labels.indexOf(dim)] || 0) / 2,\n    );\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = source.labels.filter(\n    dim => !GLOBAL_LABELS.includes(dim)\n      && source.shape[source.labels.indexOf(dim)],\n  )[0];\n  for (let i = 0; i < Math.min(4, source.shape[\n    source.labels.indexOf(firstNonGlobalDimension)\n  ]); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * @param {Array.<number>} shape loader shape\n */\nexport function isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance with channel names appended by Vitessce loaders\n * of the form { data: (PixelSource[]|PixelSource), metadata: Object, channels }\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader, use3d) {\n  const result = [];\n  const source = getSourceFromLoader(loader);\n  // Add channel automatically as the first avaialable value for each dimension.\n  let defaultSelection = buildDefaultSelection(source);\n  defaultSelection = isInterleaved(source.shape)\n    ? [{ ...defaultSelection[0], c: 0 }] : defaultSelection;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data, selections: defaultSelection, use3d,\n  });\n\n  const domains = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.domains;\n  const colors = isRgb(loader)\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.sliders;\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      // eslint-disable-next-line no-nested-ternary\n      color: colors ? colors[i]\n        : defaultSelection.length !== 1\n          ? VIEWER_PALETTE[i] : [255, 255, 255],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  const sources = imageLoaders.map(loader => getSourceFromLoader(loader));\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n    || sources.every(\n      source => !source.meta?.physicalSizes?.x || !source.meta?.physicalSizes?.y,\n    )\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    acc[2] = (acc[2] === undefined || compare(sizes[2], acc[2]) === -1) ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const source = sources[j];\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // Add in z dimension needed for Matrix4 scale API.\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMetaAndLayers = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMetaAndLayers[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n        index: layerIndex,\n        ...DEFAULT_RASTER_LAYER_PROPS,\n        channels: channels.map((channel, j) => ({\n          ...channel,\n          ...(nextImageMetaAndLayers[layerIndex].channels\n            ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n        })),\n        modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n        transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n          index: layerIndex,\n          ...DEFAULT_RASTER_LAYER_PROPS,\n          channels: channels.map((channel, j) => ({\n            ...channel,\n            ...(nextImageMetaAndLayers[layerIndex].channels\n              ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n          })),\n          domainType: 'Min/Max',\n          modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n          transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n  useRaster,\n  use3d,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i].data,\n        viewSize,\n        zoomBackoff,\n        use3d,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[2] > initialTargetZ) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0\n    // Only use cellValues in quadtree calculation if there is\n    // centroid data in the cells (i.e not just ids).\n    && cellValues[0].xy\n    && !useRaster) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    let xExtent = extent(cellCoordinates, c => c[0]);\n    let yExtent = extent(cellCoordinates, c => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n    const getViewExtentFromPolygonExtents = extents => [\n      Math.min(...extents.map(i => i[0])),\n      Math.max(...extents.map(i => i[1])),\n    ];\n    if (xRange === 0) {\n      // The fall back is the cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsX = cellValues.map(cell => extent(cell.poly, i => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n    if (yRange === 0) {\n      // The fall back is the first cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsY = cellValues.map(cell => extent(cell.poly, i => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null, initialTargetY: null, initialTargetZ: null, initialZoom: null,\n    };\n  }\n  return {\n    initialTargetX, initialTargetY, initialZoom, initialTargetZ,\n  };\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} data PixelSource | PixelSource[]\n * @returns {Array} [Layer, PixelSource | PixelSource[]] tuple.\n */\nexport function getLayerLoaderTuple(data, use3d) {\n  const loader = ((Array.isArray(data) && data.length > 1) || !Array.isArray(data))\n    ? data : data[0];\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n  const Layer = (Array.isArray(data) && data.length > 1) ? MultiscaleImageLayer : ImageLayer;\n  return [Layer, loader];\n}\n\n\nexport function renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left, top, right, bottom,\n    },\n    x,\n    y,\n    z,\n  } = props.tile;\n  const {\n    data, id, loader,\n  } = props;\n  // Only render in positive coorinate system\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  // Tiles are exactly fitted to have height and width such that their bounds\n  // match that of the actual image (not some padded version).\n  // Thus the right/bottom given by deck.gl are incorrect since\n  // they assume tiles are of uniform sizes, which is not the case for us.\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top,\n  ];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    // Uncomment to help debugging - shades the tile being hovered over.\n    // autoHighlight: true,\n    // highlightColor: [80, 80, 80, 50],\n    // Shared props with BitmapLayer:\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z },\n  });\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"tinycolor2\");","import React from 'react';\nimport Tooltip from './Tooltip';\n\n/**\n * A tooltip component that also incorporates a crosshair element.\n * @param {object} props\n * @param {string} props.parentUuid A unique identifier corresponding to the plot\n * with which this scatterplot is associated.\n * @param {string} props.sourceUuid A unique identifier corresponding to the plot\n * from which this tooltip originated.\n * @param {number} props.x The x coordinate for the tooltip.\n * @param {number} props.y The y coordinate for the tooltip.\n * @param {number} props.parentWidth The width of the parent plot container element.\n * @param {number} props.parentHeight The height of the parent plot container element.\n * @param {React.Component} props.children The tooltip contents as a react component.\n */\nexport default function Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  // Check if out of bounds.\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n  // Show tooltip or crosshair?\n  const isTooltipVisible = (parentUuid === sourceUuid);\n  const crosshairWidth = 1;\n  return (\n    <>\n      {isTooltipVisible ? (\n        <Tooltip\n          x={x}\n          y={y}\n          parentWidth={parentWidth}\n          parentHeight={parentHeight}\n        >\n          {children}\n        </Tooltip>\n      ) : (\n        <>\n          {x !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: `${x - crosshairWidth / 2}px`,\n                top: 0,\n                width: `${crosshairWidth}px`,\n                height: `${parentHeight}px`,\n              }}\n            />\n          ) : null}\n          {y !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: 0,\n                top: `${y - crosshairWidth / 2}px`,\n                width: `${parentWidth}px`,\n                height: `${crosshairWidth}px`,\n              }}\n            />\n          ) : null}\n        </>\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function TooltipContent(props) {\n  const {\n    info,\n  } = props;\n\n  return (\n    <table>\n      <tbody>\n        {Object.entries(info).map(([key, value]) => (\n          <tr key={key}>\n            <th>{key}</th>\n            <td>{value}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/* eslint-disable no-underscore-dangle */\nimport { COORDINATE_SYSTEM, CompositeLayer } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { TextLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_TITLE_TEXT_SIZE,\n  AXIS_MARGIN,\n  THEME_TO_TEXT_COLOR,\n  AXIS_FONT_FAMILY,\n  COLOR_BAR_SIZE,\n} from './heatmap-constants';\n\nexport default class HeatmapCompositeTextLayer extends CompositeLayer {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData, matrixLeft, width, matrixWidth, viewWidth, theme,\n      targetX, targetY, axisTopTitle, cellWidth, axisOffsetTop, scaleFactor,\n      hideTopLabels,\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return hideTopLabels ? [] : [\n      new TextLayer({\n        id: 'axisTopLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisTopLabelData,\n        getText: d => d[1],\n        getPosition: d => [matrixLeft + ((d[0] + 0.5) / width) * matrixWidth, axisLabelTop],\n        getTextAnchor: 'start',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 75,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisTopTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisTopTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  _renderCornerLayers() {\n    const {\n      theme, targetX, targetY, axisOffsetTop, scaleFactor,\n      cellColorLabelsData, axisOffsetLeft, transpose,\n    } = this.props;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return cellColorLabelsData.map(data => (\n      new TextLayer({\n        id: `cellColorLabel-${data[0]}`,\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [data],\n        getText: d => d[1],\n        getTextAnchor: (transpose ? 'end' : 'start'),\n        getAlignmentBaseline: 'top',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: AXIS_LABEL_TEXT_SIZE,\n        getPosition: d => [\n          (transpose\n            ? axisLabelLeft\n            : targetX\n              + ((-cellColorLabelsData.length + d[0] * 2) * COLOR_BAR_SIZE + AXIS_MARGIN)\n              / 2 / scaleFactor\n          ),\n          (transpose\n            ? targetY\n              + ((-cellColorLabelsData.length + d[0] * 2) * COLOR_BAR_SIZE + AXIS_MARGIN)\n              / 2 / scaleFactor\n            : axisLabelTop\n          ),\n        ],\n        getAngle: (transpose ? 0 : 90),\n        fontFamily: AXIS_FONT_FAMILY,\n      })\n    ));\n  }\n\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData, matrixTop, height, matrixHeight,\n      viewHeight, theme, axisLeftTitle, targetX, targetY, cellHeight, axisOffsetLeft,\n      scaleFactor, hideLeftLabels,\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return hideLeftLabels ? [] : [\n      new TextLayer({\n        id: 'axisLeftLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisLeftLabelData,\n        getText: d => d[1],\n        getPosition: d => [axisLabelLeft, matrixTop + ((d[0] + 0.5) / height) * matrixHeight],\n        getTextAnchor: 'end',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisLeftTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisLeftTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 90,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  renderLayers() {\n    const { axis } = this.props;\n    if (axis === 'left') {\n      return this._renderAxisLeftLayers();\n    }\n    if (axis === 'top') {\n      return this._renderAxisTopLayers();\n    }\n    if (axis === 'corner') {\n      return this._renderCornerLayers();\n    }\n    return [];\n  }\n}\n\nHeatmapCompositeTextLayer.layerName = 'HeatmapCompositeTextLayer';\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport { useStyles } from './styles';\n\nexport default function OptionsContainer(props) {\n  const {\n    children,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.box}>\n      <TableContainer className={classes.tableContainer}>\n        <Table className={classes.table} size=\"small\">\n          <TableBody>\n            {children}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport const styles = makeStyles(() => ({\n  tooltipAnchor: {\n    position: 'relative',\n    width: '0px',\n    height: '0px',\n    pointerEvents: 'none',\n    userSelect: 'none',\n  },\n  tooltipContent: {\n    opacity: 0.9,\n    padding: '5px',\n    pointerEvents: 'none',\n    '& table > tbody > tr > th, & table > tbody > tr > td': {\n      fontSize: '80%',\n      opacity: 0.8,\n      outline: 0,\n      padding: '0 2px',\n    },\n    '& table': {\n      borderCollapse: 'collapse',\n    },\n  },\n}));\n","import React, { useEffect, useRef, useState } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport default function Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  const ref = useRef();\n  const classes = styles();\n  const [placementX, setPlacementX] = useState('start');\n  const [placementY, setPlacementY] = useState('bottom');\n\n  const getTooltipContainer = useVitessceContainer(ref);\n\n  // Do collision detection based on the bounds of the tooltip ancestor element.\n  useEffect(() => {\n    if (ref && ref.current) {\n      const flipX = (x > parentWidth / 2);\n      const flipY = (y > parentHeight / 2);\n      setPlacementX(flipX ? 'end' : 'start');\n      setPlacementY(flipY ? 'top' : 'bottom');\n      ref.current.style.left = `${x + (flipX ? -20 : 5)}px`;\n      ref.current.style.top = `${y + (flipY ? -20 : 5)}px`;\n    }\n  }, [x, y, parentWidth, parentHeight]);\n\n  return (\n    <div\n      ref={ref}\n      className={classes.tooltipAnchor}\n    >\n      {ref && ref.current ? (\n        <Popper\n          open\n          anchorEl={ref.current}\n          container={getTooltipContainer}\n          transition\n          placement={`${placementY}-${placementX}`}\n        >\n          <Paper elevation={4} className={classes.tooltipContent}>\n            {children}\n          </Paper>\n        </Popper>\n      ) : null}\n    </div>\n  );\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\nimport { treeToCellColorsBySetNames } from './sets/cell-set-utils';\n\n// The functions defined here have been adapted from d3-interpolate,\n// d3-color, and d3-scale-chromatic.\n// Color string \"rgb(r,g,b)\" representations are replaced by color array [r, g, b]\n// representations, to allow them to work nicely with deck.gl,\n// without the need to converting back and forth between string and array formats.\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/431d21da776f97c632f53a855bd822edfbbcd56e/src/diverging/RdBu.js\n// eslint-disable-next-line max-len\nconst schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\n// eslint-disable-next-line max-len\nconst schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\n\n// Reference: https://github.com/d3/d3-interpolate/blob/96d54051d1c2fec55f240edd0ec5401715b10390/src/rgb.js\nfunction rgbSpline(spline) {\n  return (colors) => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i; let\n      color;\n    // eslint-disable-next-line no-plusplus\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return t => [r(t), g(t), b(t)];\n  };\n}\n\n// Reference: https://github.com/d3/d3-interpolate/blob/594a32af1fe1118812b439012c2cb742e907c0c0/src/basis.js\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1; const\n      t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n          + (4 - 6 * t2 + 3 * t3) * v1\n          + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n          + t3 * v3) / 6;\n  }\n\n  const n = values.length - 1;\n  return (t) => {\n    const i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/ade54c13e8dfdb9807801a794eaec1a37f926b8a/src/ramp.js\nconst interpolateRgbBasis = rgbSpline(basis);\n\nfunction interpolateSequentialMulti(range) {\n  const n = range.length;\n  return t => range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\n\nexport const interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nexport const interpolatePlasma = interpolateSequentialMulti(schemePlasma);\n\n\n/**\n * Get a mapping of cell IDs to cell colors based on\n * gene / cell set selection coordination state.\n * @param {object} params\n * @param {object} params.expressionMatrix { rows, cols, matrix }\n * @param {array} params.geneSelection Array of selected gene IDs.\n * @param {object} params.cellSets The cell sets tree.\n * @param {object} params.cellSetSelection Selected cell sets.\n * @param {string} params.cellColorEncoding Which to use for\n * coloring: gene expression or cell sets?\n * @returns {Map} Mapping from cell IDs to [r, g, b] color arrays.\n */\nexport function getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionData,\n    cellSets, cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs,\n    theme,\n  } = params;\n  if (cellColorEncoding === 'geneSelection' && expressionData && expressionDataAttrs) {\n    // TODO: allow other color maps.\n    const geneExpColormap = interpolatePlasma;\n    const colors = new Map();\n    for (let i = 0; i < expressionData.length; i += 1) {\n      const value = expressionData[i];\n      const cellColor = geneExpColormap(value / 255);\n      colors.set(expressionDataAttrs.rows[i], cellColor);\n    }\n    return colors;\n  } if (cellColorEncoding === 'cellSetSelection' && cellSetSelection && cellSets) {\n    // Cell sets can potentially lack set colors since the color property\n    // is not a required part of the schema.\n    // The `initializeSets` function fills in any empty colors\n    // with defaults and returns the processed tree object.\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor, theme);\n  }\n  return new Map();\n}\n","module.exports = require(\"@turf/centroid\");","module.exports = require(\"concaveman\");","module.exports = require(\"@nebula.gl/edit-modes\");","import { BitmapLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { CompositeLayer } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { PIXELATED_TEXTURE_PARAMETERS } from './heatmap-constants';\n\n\n// These are the same defaultProps as for BitmapLayer.\nconst defaultProps = {\n  ...BitmapLayer.defaultProps,\n  image: { type: 'object', value: null, async: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  desaturate: {\n    type: 'number', min: 0, max: 1, value: 0,\n  },\n  transparentColor: { type: 'color', value: [0, 0, 0, 0] },\n  tintColor: { type: 'color', value: [255, 255, 255] },\n};\n\nexport default class PixelatedBitmapLayer extends CompositeLayer {\n  renderLayers() {\n    const { image } = this.props;\n    return new BitmapLayer(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS,\n    });\n  }\n}\n\nPixelatedBitmapLayer.layerName = 'PixelatedBitmapLayer';\nPixelatedBitmapLayer.defaultProps = defaultProps;\n","import glsl from 'glslify';\n\n/**\n * No change to the vertex shader from the base BitmapLayer.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-vertex.js\n */\nexport const vertexShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\n/**\n * Fragment shader adapted to perform aggregation and\n * take color scale functions + sliders into account.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-fragment.js\n * Reference: https://github.com/hms-dbmi/viv/blob/06231ae02cac1ff57ba458c71e9bc59ed2fc4f8b/src/layers/XRLayer/xr-layer-fragment-colormap.webgl1.glsl\n */\nexport const fragmentShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#pragma glslify: rdbu = require(\"glsl-colormap/rdbu\")\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// The texture (GL.LUMINANCE & Uint8Array).\nuniform sampler2D uBitmapTexture;\n\n// What are the dimensions of the texture (width, height)?\nuniform vec2 uTextureSize;\n\n// How many consecutive pixels should be aggregated together along each axis?\nuniform vec2 uAggSize;\n\n// What are the values of the color scale sliders?\nuniform vec2 uColorScaleRange;\n\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  // Compute 1 pixel in texture coordinates\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\n  \n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\n\n  // Compute (x % aggSizeX, y % aggSizeY).\n  // These values will be the number of values to the left / above the current position to consider.\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\n\n  // Take the sum of values along each axis.\n  float intensitySum = 0.0;\n  vec2 offsetPixels = vec2(0.0, 0.0);\n\n  for(int i = 0; i < 16; i++) {\n    // Check to break outer loop early.\n    // Uniforms cannot be used as conditions in GLSL for loops.\n    if(float(i) >= uAggSize.y) {\n      // Done in the y direction.\n      break;\n    }\n\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\n\n    for(int j = 0; j < 16; j++) {\n      // Check to break inner loop early.\n      // Uniforms cannot be used as conditions in GLSL for loops.\n      if(float(j) >= uAggSize.x) {\n        // Done in the x direction.\n        break;\n      }\n\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\n    }\n  }\n  \n  // Compute the mean value.\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\n  \n  // Re-scale using the color scale slider values.\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n\n  gl_FragColor = COLORMAP_FUNC(clamp(scaledIntensityMean, 0.0, 1.0));\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { _mergeShaders, project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { BitmapLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D } from '@luma.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS, TILE_SIZE } from './heatmap-constants';\nimport {\n  GLSL_COLORMAPS,\n  GLSL_COLORMAP_DEFAULT,\n  COLORMAP_SHADER_PLACEHOLDER,\n} from './constants';\nimport { vertexShader, fragmentShader } from './heatmap-bitmap-layer-shaders';\n\nconst defaultProps = {\n  image: { type: 'object', value: null, async: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  aggSizeX: { type: 'number', value: 8.0, compare: true },\n  aggSizeY: { type: 'number', value: 8.0, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n};\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class HeatmapBitmapLayer extends BitmapLayer {\n  /**\n   * Copy of getShaders from Layer (grandparent, parent of BitmapLayer).\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/core/src/lib/layer.js#L302\n   * @param {object} shaders\n   * @returns {object} Merged shaders.\n   */\n  // eslint-disable-next-line no-underscore-dangle\n  _getShaders(shaders) {\n    this.props.extensions.forEach((extension) => {\n      // eslint-disable-next-line no-param-reassign\n      shaders = _mergeShaders(\n        shaders,\n        extension.getShaders.call(this, extension),\n      );\n    });\n    return shaders;\n  }\n\n  /**\n   * Need to override to provide custom shaders.\n   */\n  getShaders() {\n    const { colormap } = this.props;\n    const fragmentShaderWithColormap = GLSL_COLORMAPS.includes(colormap)\n      ? fragmentShader.replace(COLORMAP_SHADER_PLACEHOLDER, colormap)\n      : fragmentShader.replace(\n        COLORMAP_SHADER_PLACEHOLDER,\n        GLSL_COLORMAP_DEFAULT,\n      );\n    // eslint-disable-next-line no-underscore-dangle\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShaderWithColormap,\n      modules: [project32, picking],\n    });\n  }\n\n  updateState(args) {\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n    const { props, oldProps } = args;\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      // eslint-disable-next-line no-unused-expressions\n      this.state.model?.delete();\n      // eslint-disable-next-line no-underscore-dangle\n      this.state.model = this._getModel(gl);\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  /**\n   * Need to override to provide additional uniform values.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L173\n   * @param {*} opts\n   */\n  draw(opts) {\n    const { uniforms } = opts;\n    const { bitmapTexture, model } = this.state;\n    const {\n      aggSizeX, aggSizeY, colorScaleLo, colorScaleHi,\n    } = this.props;\n\n    // Render the image\n    if (bitmapTexture && model) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            uBitmapTexture: bitmapTexture,\n            uTextureSize: [TILE_SIZE, TILE_SIZE],\n            uAggSize: [aggSizeX, aggSizeY],\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * Need to override to provide the custom DEFAULT_TEXTURE_PARAMETERS\n   * object.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L218\n   * @param {Uint8Array} image\n   */\n  loadTexture(image) {\n    const { gl } = this.context;\n\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n\n    if (image instanceof Texture2D) {\n      this.setState({\n        bitmapTexture: image,\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          // Each color contains a single luminance value.\n          // When sampled, rgb are all set to this luminance, alpha is 1.0.\n          // Reference: https://luma.gl/docs/api-reference/webgl/texture#texture-formats\n          format: GL.LUMINANCE,\n          dataFormat: GL.LUMINANCE,\n          type: GL.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE,\n        }),\n      });\n    }\n  }\n}\nHeatmapBitmapLayer.layerName = 'HeatmapBitmapLayer';\nHeatmapBitmapLayer.defaultProps = defaultProps;\n","module.exports = require(\"d3-quadtree\");","import glsl from 'glslify';\n\n/**\n *\n * Reference: https://github.com/visgl/deck.gl/blob/8.4-release/modules/layers/src/scatterplot-layer/scatterplot-layer-vertex.glsl.js\n * Reference: https://observablehq.com/@rreusser/selecting-the-right-opacity-for-2d-point-clouds\n * Reference: https://github.com/flekschas/regl-scatterplot/blob/5e3b03e/src/point.vs\n */\nconst vs = glsl`\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Custom attributes for Vitessce:\nattribute float expressionValue;\n\n// Custom uniforms for Vitessce:\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\n\n`;\n\nconst inject = {\n  'vs:DECKGL_FILTER_COLOR': `\n    if(uIsExpressionMode) {\n      float normalizedExpressionValue = expressionValue / 255.0;\n      float scaledExpressionValue = (normalizedExpressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n      color.rgb = COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)).rgb;\n    }\n  `,\n};\n\nexport default {\n  name: 'scaled-expression',\n  vs,\n  inject,\n};\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable import/no-extraneous-dependencies */\nimport GL from '@luma.gl/constants';\nimport { LayerExtension } from '@deck.gl/core';\nimport { GLSL_COLORMAPS, GLSL_COLORMAP_DEFAULT, COLORMAP_SHADER_PLACEHOLDER } from '../../layers/constants';\nimport module from './shader-module';\n\nconst defaultProps = {\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n  isExpressionMode: false,\n  getExpressionValue: { type: 'accessor', value: 0 },\n  getSelectionState: { type: 'accessor', value: 0.0 },\n};\n\nexport default class ScaledExpressionExtension extends LayerExtension {\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      modules: [module],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps }) {\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      // Normal single model layers, like ScatterplotLayer\n      if (this.state.model) {\n        // eslint-disable-next-line no-unused-expressions\n        this.state.model?.delete();\n        this.state.model = this._getModel(gl);\n      } else {\n        // Special handling for PolygonLayer sublayer models.\n        if (this.state.models) {\n          // eslint-disable-next-line no-unused-expressions\n          this.state.models?.forEach(model => model?.delete());\n        }\n        if (this.state.topModel) {\n           // eslint-disable-next-line no-unused-expressions\n           this.state.topModel?.delete();\n        }\n        if (this.state.sideModel) {\n           // eslint-disable-next-line no-unused-expressions\n           this.state.sideModel?.delete();\n        }\n        if (this._getModels) {\n          this.setState(this._getModels(this.context.gl));\n        }\n      }\n      const attributeManager = this.getAttributeManager();\n      if (attributeManager) {\n        this.getAttributeManager().invalidateAll();\n      }\n    }\n  }\n\n  initializeState() {\n    const layer = this.getCurrentLayer();\n    // No need to run this on layers that don't have a `draw` call.\n    if (layer.isComposite) {\n      return;\n    }\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      // This attributes is the array of expression data needed for\n      // coloring cells against the colormap.\n      attributeManager.add({\n        expressionValue: {\n          type: GL.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: 'getExpressionValue',\n          defaultValue: 1,\n          // PolygonLayer fill needs not-intsanced attribute but\n          // ScatterplotLayer and the PolygonLayer stroke needs instanced.\n          // So use another attribute's divisor property as a proxy for this divisor.\n          divisor: Object.values(attributeManager.attributes)[0].settings.divisor,\n        },\n      });\n    }\n  }\n\n  draw() {\n    const {\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      topModel, sideModel, models, model,\n    } = this.state;\n    const uniforms = {\n      uColorScaleRange: [colorScaleLo, colorScaleHi],\n      uIsExpressionMode: isExpressionMode,\n    };\n    // ScatterplotLayer model\n    // eslint-disable-next-line no-unused-expressions\n    model?.setUniforms(uniforms);\n\n    // PolygonLayer models from sublayers\n    // eslint-disable-next-line no-unused-expressions\n    models?.forEach(m => m.setUniforms(uniforms));\n    // eslint-disable-next-line no-unused-expressions\n    topModel?.setUniforms(uniforms);\n    // eslint-disable-next-line no-unused-expressions\n    sideModel?.setUniforms(uniforms);\n  }\n}\n\nScaledExpressionExtension.extensionName = 'ScaledExpressionExtension';\nScaledExpressionExtension.defaultProps = defaultProps;\n","import ScaledExpressionExtension from './ScaledExpressionExtension';\n\nexport default ScaledExpressionExtension;\n","import glsl from 'glslify';\n\nconst vs = glsl`\nattribute float isSelected;\n`;\n\nconst inject = {\n  'vs:DECKGL_FILTER_GL_POSITION': `\n    position.z += (1. - isSelected) * .00005; // Add a small z offset for unselected points in the positive direction i.e into the screen.\n  `,\n  'fs:#main-start': ` // Gets rid of bad border effects (active after deck.gl 8.5): https://github.com/visgl/deck.gl/pull/6081\n    float distToCenterNew = length(unitPosition) * outerRadiusPixels;\n    float inCircleNew = step(distToCenterNew, outerRadiusPixels);\n    if (inCircleNew == 0.0) {\n      discard;\n    }\n  `,\n};\n\nexport default {\n  name: 'selection',\n  vs,\n  inject,\n};\n","/* eslint-disable no-underscore-dangle */\n/* eslint-disable import/no-extraneous-dependencies */\nimport GL from '@luma.gl/constants';\nimport { LayerExtension } from '@deck.gl/core';\nimport module from './shader-module';\n\nexport default class SelectionExtension extends LayerExtension {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    return {\n      modules: [module],\n    };\n  }\n\n  initializeState(context, extension) {\n    const attributeManager = this.getAttributeManager();\n    if (attributeManager) {\n      attributeManager.add({\n        isSelected: {\n          type: GL.FLOAT,\n          size: 1,\n          transition: true,\n          accessor: 'getCellIsSelected',\n          defaultValue: 1,\n          // PolygonLayer needs not-intsanced attribute but\n          // ScatterplotLayer needs instanced.\n          divisor: Number(extension.opts.instanced),\n        },\n      });\n    }\n  }\n}\n\nSelectionExtension.extensionName = 'SelectionExtension';\n","import SelectionExtension from './SelectionExtension';\n\nexport default SelectionExtension;\n","export { default as ScaledExpressionExtension } from './ScaledExpressionExtension';\nexport { default as SelectionExtension } from './SelectionExtension';\n","module.exports = require(\"@material-ui/core/Box\");","module.exports = require(\"@material-ui/core/Table\");","module.exports = require(\"@material-ui/core/TableBody\");","module.exports = require(\"@material-ui/core/TableContainer\");","import { quadtree } from 'd3-quadtree';\n\n/**\n * Create a d3-quadtree object for cells data points.\n * @param {array} cellsEntries Array of [cellId, cell] tuples,\n * resulting from running Object.entries on the cells object.\n * @param {function} getCellCoords Given a cell object, return the\n * spatial/scatterplot coordinates [x, y].\n * @returns {object} Quadtree instance.\n */\nexport function createCellsQuadTree(cellsEntries, getCellCoords) {\n  // Use the cellsEntries variable since it is already\n  // an array, converted by Object.entries().\n  // Only use cellsEntries in quadtree calculation if there is\n  // centroid data in the cells (i.e not just ids).\n  // eslint-disable-next-line no-unused-vars\n  if (!cellsEntries || !cellsEntries.length || !getCellCoords(cellsEntries[0][1])) {\n    // Abort if the cells data is not yet available.\n    return null;\n  }\n  const tree = quadtree()\n    .x(d => getCellCoords(d[1])[0])\n    .y(d => getCellCoords(d[1])[1])\n    .addAll(cellsEntries);\n  return tree;\n}\n","import React from 'react';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport OptionSelect from './OptionSelect';\nimport { useStyles } from './styles';\n\nexport default function CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  const classes = useStyles();\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n\n  return (\n    <TableRow>\n      <TableCell className={classes.labelCell} htmlFor=\"cell-color-encoding-select\">\n        {observationsLabelNice} Color Encoding\n      </TableCell>\n      <TableCell className={classes.inputCell}>\n        <OptionSelect\n          className={classes.select}\n          value={cellColorEncoding}\n          onChange={handleColorEncodingChange}\n          inputProps={{\n            id: 'cell-color-encoding-select',\n          }}\n        >\n          <option value=\"cellSetSelection\">Cell Sets</option>\n          <option value=\"geneSelection\">Gene Expression</option>\n        </OptionSelect>\n      </TableCell>\n    </TableRow>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n});\n\nfunction SvgNearMe(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgNearMe, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/near_me.2a308adc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n});\n\nfunction SvgSelectionRectangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionRectangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_rectangle.aa477261.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSelectionLasso(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionLasso, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_lasso.00e80a33.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { ReactComponent as PointerIconSVG } from '../../assets/tools/near_me.svg';\nimport { ReactComponent as SelectRectangleIconSVG } from '../../assets/tools/selection_rectangle.svg';\nimport { ReactComponent as SelectLassoIconSVG } from '../../assets/tools/selection_lasso.svg';\n\nexport function IconButton(props) {\n  const {\n    alt, onClick, isActive, children,\n  } = props;\n  const inactive = 'btn btn-outline-secondary mr-2 icon';\n  const active = `${inactive} active`;\n  return (\n    <button\n      className={isActive ? active : inactive}\n      onClick={onClick}\n      type=\"button\"\n      title={alt}\n    >\n      {children}\n    </button>\n  );\n}\n\nexport default function ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = { pan: true, selectRectangle: true, selectLasso: true },\n  } = props;\n  return (\n    <div className=\"tool\">\n      {visibleTools.pan && (\n      <IconButton\n        alt=\"pointer tool\"\n        onClick={() => setActiveTool(null)}\n        isActive={activeTool === null}\n      ><PointerIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectRectangle ? (\n        <IconButton\n          alt=\"select rectangle\"\n          onClick={() => setActiveTool(SELECTION_TYPE.RECTANGLE)}\n          isActive={activeTool === SELECTION_TYPE.RECTANGLE}\n        ><SelectRectangleIconSVG />\n        </IconButton>\n      ) : null}\n      {visibleTools.selectLasso ? (\n        <IconButton\n          alt=\"select lasso\"\n          onClick={() => setActiveTool(SELECTION_TYPE.POLYGON)}\n          isActive={activeTool === SELECTION_TYPE.POLYGON}\n        ><SelectLassoIconSVG />\n        </IconButton>\n      ) : null}\n    </div>\n  );\n}\n","export const getCursorWithTool = () => 'crosshair';\nexport const getCursor = interactionState => (interactionState.isDragging\n  ? 'grabbing' : 'default'\n);\n","import React, { PureComponent } from 'react';\nimport DeckGL, { OrthographicView, OrbitView } from 'deck.gl';\nimport ToolMenu from './ToolMenu';\nimport { DEFAULT_GL_OPTIONS } from '../utils';\nimport { getCursor, getCursorWithTool } from './cursor';\n\n/**\n * Abstract class component intended to be inherited by\n * the Spatial and Scatterplot class components.\n * Contains a common constructor, common DeckGL callbacks,\n * and common render function.\n */\nexport default class AbstractSpatialOrScatterplot extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      gl: null,\n      tool: null,\n    };\n\n    this.viewport = null;\n\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n    this.onHover = this.onHover.bind(this);\n  }\n\n  /**\n   * Called by DeckGL upon a viewState change,\n   * for example zoom or pan interaction.\n   * Emit the new viewState to the `setViewState`\n   * handler prop.\n   * @param {object} params\n   * @param {object} params.viewState The next deck.gl viewState.\n   */\n  onViewStateChange({ viewState: nextViewState }) {\n    const {\n      setViewState, viewState, layers, spatialAxisFixed,\n    } = this.props;\n    const use3d = layers?.some(l => l.use3d);\n    setViewState({\n      ...nextViewState,\n      // If the axis is fixed, just use the current target in state i.e don't change target.\n      target: spatialAxisFixed && use3d ? viewState.target : nextViewState.target,\n    });\n  }\n\n  /**\n   * Called by DeckGL upon viewport\n   * initialization.\n   * @param {object} viewState\n   * @param {object} viewState.viewport\n   */\n  onInitializeViewInfo({ viewport }) {\n    this.viewport = viewport;\n  }\n\n  /**\n   * Called by DeckGL upon initialization,\n   * helps to understand when to pass layers\n   * to the DeckGL component.\n   * @param {object} gl The WebGL context object.\n   */\n  onWebGLInitialized(gl) {\n    this.setState({ gl });\n  }\n\n  /**\n   * Called by the ToolMenu buttons.\n   * Emits the new tool value to the\n   * `onToolChange` prop.\n   * @param {string} tool Name of tool.\n   */\n  onToolChange(tool) {\n    const { onToolChange: onToolChangeProp } = this.props;\n    this.setState({ tool });\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n\n  /**\n   * Create the DeckGL layers.\n   * @returns {object[]} Array of\n   * DeckGL layer objects.\n   * Intended to be overriden by descendants.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getLayers() {\n    return [];\n  }\n\n  // eslint-disable-next-line consistent-return\n  onHover(info) {\n    const {\n      coordinate, sourceLayer: layer, tile,\n    } = info;\n    const {\n      setCellHighlight, cellHighlight, setComponentHover, layers,\n    } = this.props;\n    const hasBitmask = (layers || []).some(l => l.type === 'bitmask');\n    if (!setCellHighlight || !tile) {\n      return null;\n    }\n    if (!layer || !coordinate) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { content, bbox, z } = tile;\n    if (!content) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    const { data, width, height } = content;\n    const {\n      left, right, top, bottom,\n    } = bbox;\n    const bounds = [\n      left,\n      data.height < layer.tileSize ? height : bottom,\n      data.width < layer.tileSize ? width : right,\n      top,\n    ];\n    if (!data) {\n      if (cellHighlight && hasBitmask) {\n        setCellHighlight(null);\n      }\n      return null;\n    }\n    // Tiled layer needs a custom layerZoomScale.\n    if (layer.id.includes('bitmask')) {\n      // The zoomed out layer needs to use the fixed zoom at which it is rendered.\n      const layerZoomScale = Math.max(\n        1,\n        2 ** Math.round(-z),\n      );\n      const dataCoords = [\n        Math.floor((coordinate[0] - bounds[0]) / layerZoomScale),\n        Math.floor((coordinate[1] - bounds[3]) / layerZoomScale),\n      ];\n      const coords = dataCoords[1] * width + dataCoords[0];\n      const hoverData = data.map(d => d[coords]);\n      const cellId = hoverData.find(i => i > 0);\n      if (cellId !== Number(cellHighlight)) {\n        if (setComponentHover) {\n          setComponentHover();\n        }\n        // eslint-disable-next-line no-unused-expressions\n        setCellHighlight(cellId ? String(cellId) : null);\n      }\n    }\n  }\n\n  /**\n   * Emits a function to project from the\n   * cell ID space to the scatterplot or\n   * spatial coordinate space, via the\n   * `updateViewInfo` prop.\n   */\n  viewInfoDidUpdate(getCellCoords) {\n    const { updateViewInfo, cells, uuid } = this.props;\n    const { viewport } = this;\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: (cellId) => {\n          const cell = cells[cellId];\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        },\n      });\n    }\n  }\n\n  /**\n   * Intended to be overriden by descendants.\n   */\n  componentDidUpdate() {\n\n  }\n\n  /**\n   * A common render function for both Spatial\n   * and Scatterplot components.\n   */\n  render() {\n    const {\n      deckRef, viewState, uuid, layers: layerProps, hideTools,\n    } = this.props;\n    const { gl, tool } = this.state;\n    const layers = this.getLayers();\n    const use3d = (layerProps || []).some(l => l.use3d);\n\n    const showCellSelectionTools = this.cellsLayer !== null\n      || (this.cellsEntries.length && this.cellsEntries[0][1].xy);\n    const showPanTool = this.cellsLayer !== null || layerProps.findIndex(l => l.type === 'bitmask' || l.type === 'raster') >= 0;\n    // For large datasets or ray casting, the visual quality takes only a small\n    // hit in exchange for much better performance by setting this to false:\n    // https://deck.gl/docs/api-reference/core/deck#usedevicepixels\n    const useDevicePixels = this.cellsEntries.length < 100000 && !use3d;\n\n    return (\n      <>\n        <ToolMenu\n          activeTool={tool}\n          setActiveTool={this.onToolChange}\n          visibleTools={{\n            pan: showPanTool && !hideTools,\n            selectRectangle: showCellSelectionTools && !hideTools,\n            selectLasso: showCellSelectionTools && !hideTools,\n          }}\n        />\n        <DeckGL\n          id={`deckgl-overlay-${uuid}`}\n          ref={deckRef}\n          views={[\n            use3d\n              ? new OrbitView({ id: 'orbit', controller: true, orbitAxis: 'Y' })\n              : new OrthographicView({\n                id: 'ortho',\n              }),\n          ]} // id is a fix for https://github.com/uber/deck.gl/issues/3259\n          layers={\n            gl && viewState.target.slice(0, 2).every(i => typeof i === 'number')\n              ? layers\n              : []\n          }\n          glOptions={DEFAULT_GL_OPTIONS}\n          onWebGLInitialized={this.onWebGLInitialized}\n          onViewStateChange={this.onViewStateChange}\n          viewState={viewState}\n          useDevicePixels={useDevicePixels}\n          controller={tool ? { dragPan: false } : true}\n          getCursor={tool ? getCursorWithTool : getCursor}\n          onHover={this.onHover}\n        >\n          {this.onInitializeViewInfo}\n        </DeckGL>\n      </>\n    );\n  }\n}\n","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-underscore-dangle */\n// File adopted from nebula.gl's SelectionLayer\n// https://github.com/uber/nebula.gl/blob/8e9c2ec8d7cf4ca7050909ed826eb847d5e2cd9c/modules/layers/src/layers/selection-layer.js\nimport { CompositeLayer } from 'deck.gl';\nimport { polygon as turfPolygon, point as turfPoint } from '@turf/helpers';\nimport booleanWithin from '@turf/boolean-within';\nimport booleanContains from '@turf/boolean-contains';\nimport booleanOverlap from '@turf/boolean-overlap';\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\nimport { ScatterplotLayer } from '@deck.gl/layers';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { EditableGeoJsonLayer } from '@nebula.gl/layers';\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from '@nebula.gl/edit-modes';\n\nconst EDIT_TYPE_ADD = 'addFeature';\nconst EDIT_TYPE_CLEAR = 'clearFeatures';\n\n// Customize the click handlers for the rectangle and polygon tools,\n// so that clicking triggers the `onEdit` callback.\nclass ClickableDrawRectangleMode extends DrawRectangleMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nclass ClickableDrawPolygonByDraggingMode extends DrawPolygonByDraggingMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nconst MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode,\n};\n\nconst defaultProps = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {},\n};\n\nconst EMPTY_DATA = {\n  type: 'FeatureCollection',\n  features: [],\n};\n\nconst LAYER_ID_GEOJSON = 'selection-geojson';\n\nconst PASS_THROUGH_PROPS = [\n  'lineWidthScale',\n  'lineWidthMinPixels',\n  'lineWidthMaxPixels',\n  'lineWidthUnits',\n  'lineJointRounded',\n  'lineMiterLimit',\n  'pointRadiusScale',\n  'pointRadiusMinPixels',\n  'pointRadiusMaxPixels',\n  'lineDashJustified',\n  'getLineColor',\n  'getFillColor',\n  'getPointRadius',\n  'getLineWidth',\n  'getLineDashArray',\n  'getTentativeLineDashArray',\n  'getTentativeLineColor',\n  'getTentativeFillColor',\n  'getTentativeLineWidth',\n  'editHandlePointRadiusScale',\n  'editHandlePointRadiusMinPixels',\n  'editHandlePointRadiusMaxPixels',\n  'getEditHandlePointColor',\n  'getEditHandlePointRadius',\n  'modeHandlers',\n];\n\nexport default class SelectionLayer extends CompositeLayer {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY,\n    } = this.props;\n\n    const flippedCoordinates = (flipY\n      ? coordinates.map(poly => poly.map(p => ([p[0], -p[1]])))\n      : coordinates);\n\n    // Convert the selection to a turf polygon object.\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n\n    // Create an array to store the results.\n    const pickingInfos = [];\n\n    // quadtree.visit() takes a callback that returns a boolean:\n    // If true returned, then the children of the node are _not_ visited.\n    // If false returned, then the children of the node are visited.\n    // Reference: https://github.com/d3/d3-quadtree#quadtree_visit\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n\n      if (!nodePolygonContainsSelectedPolygon\n        && !nodePolygonWithinSelectedPolygon\n        && !nodePolygonOverlapsSelectedPolgyon) {\n        // We are not interested in anything below this node,\n        // so return true because we are done with this node.\n        return true;\n      }\n\n      // This node made it past the above return statement, so it must either\n      // contain, be within, or overlap with the selected polygon.\n\n      // Check if this is a leaf node.\n      if (node.data\n        && booleanPointInPolygon(\n          turfPoint([].slice.call(getCellCoords(node.data[1]))), selectedPolygon,\n        )\n      ) {\n        // This node has data, so it is a leaf node representing one data point,\n        // and we have verified that the point is in the selected polygon.\n        pickingInfos.push(node.data);\n      }\n\n      // Return false because we are not done.\n      // We want to visit the children of this node.\n      return false;\n    });\n\n    onSelect({ pickingInfos });\n  }\n\n  renderLayers() {\n    const { onSelect } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach((p) => {\n      if (this.props[p] !== undefined) inheritedProps[p] = this.props[p];\n    });\n    const layers = [\n      new EditableGeoJsonLayer(\n        this.getSubLayerProps({\n          id: LAYER_ID_GEOJSON,\n          pickable: true,\n          mode,\n          modeConfig: {\n            dragToDraw: true,\n          },\n          selectedFeatureIndexes: [],\n          data: EMPTY_DATA,\n          onEdit: ({ updatedData, editType }) => {\n            if (editType === EDIT_TYPE_ADD) {\n              const { coordinates } = updatedData.features[0].geometry;\n              this._selectPolygonObjects(coordinates);\n            } else if (editType === EDIT_TYPE_CLEAR) {\n              // We want to select an empty array to clear any previous selection.\n              onSelect({ pickingInfos: [] });\n            }\n          },\n          _subLayerProps: {\n            guides: {\n              pointType: 'circle',\n              _subLayerProps: {\n                'points-circle': {\n                  // Styling for editHandles goes here.\n                  // Reference: https://github.com/uber/nebula.gl/issues/618#issuecomment-898466319\n                  type: ScatterplotLayer,\n                  radiusScale: 1,\n                  stroked: true,\n                  getLineWidth: 1,\n                  radiusMinPixels: 1,\n                  radiusMaxPixels: 3,\n                  getPointRadius: 2,\n                },\n              },\n            },\n          },\n          ...inheritedProps,\n        }),\n      ),\n    ];\n\n    return layers;\n  }\n}\n\nSelectionLayer.layerName = 'SelectionLayer';\nSelectionLayer.defaultProps = defaultProps;\n","import { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { DataFilterExtension } from '@deck.gl/extensions'; // eslint-disable-line import/no-extraneous-dependencies\nimport SelectionLayer from './SelectionLayer';\n\n/**\n * Convert a DeckGL layer ID to a \"base\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\n\n/**\n * Convert a DeckGL layer ID to a \"selected\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getSelectedLayerId(layerId) {\n  return `selected-${layerId}`;\n}\n\n/**\n * Construct DeckGL selection layers.\n * @param {string} tool\n * @param {number} zoom\n * @param {string} cellBaseLayerId\n * @param {function} getCellCoords\n * @param {function} updateCellsSelection\n * @returns {object[]} The array of DeckGL selection layers.\n */\nexport function getSelectionLayers(\n  tool,\n  zoom,\n  layerId,\n  getCellCoords,\n  updateCellsSelection,\n  cellsQuadTree,\n  flipY = false,\n) {\n  if (!tool) {\n    return [];\n  }\n\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n\n  return [new SelectionLayer({\n    id: 'selection',\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    selectionType: tool,\n    onSelect: ({ pickingInfos }) => {\n      const cellIds = pickingInfos.map(cellObj => cellObj[0]);\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [0xff, 0xff, 0xff, 0xff],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius,\n  })];\n}\n\n/**\n * Get deck.gl layer props for selection overlays.\n * @param {object} props\n * @returns {object} Object with two properties,\n * overlay: overlayProps, base: baseProps,\n * where the values are deck.gl layer props.\n */\nexport function overlayBaseProps(props) {\n  const {\n    id, getColor, data, isSelected, ...rest\n  } = props;\n  return {\n    overlay: {\n      id: getSelectedLayerId(id),\n      getFillColor: getColor,\n      getLineColor: getColor,\n      data,\n      getFilterValue: isSelected,\n      extensions: [new DataFilterExtension({ filterSize: 1 })],\n      filterRange: [1, 1],\n      ...rest,\n    },\n    base: {\n      id: getBaseLayerId(id),\n      getLineColor: getColor,\n      getFillColor: getColor,\n      // Alternatively: contrast outlines with solids:\n      // getLineColor: getColor,\n      // getFillColor: [255, 255, 255],\n      data: data.slice(),\n      ...rest,\n    },\n  };\n}\n","// Selection Layers\nexport { getSelectionLayers } from './selection-utils';\n\n// Heatmap Layers\nexport { default as HeatmapBitmapLayer } from './HeatmapBitmapLayer';\nexport { default as PixelatedBitmapLayer } from './PixelatedBitmapLayer';\nexport { default as HeatmapCompositeTextLayer } from './HeatmapCompositeTextLayer';\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import React, { forwardRef } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { PolygonLayer, ScatterplotLayer } from '@deck.gl/layers'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Matrix4 } from 'math.gl';\nimport {\n  ScaleBarLayer,\n  MultiscaleImageLayer,\n  AdditiveColormapExtension,\n  ColorPaletteExtension,\n} from '@hms-dbmi/viv';\nimport { getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, PALETTE, getDefaultColor } from '../utils';\nimport { getSourceFromLoader } from '../../utils';\nimport { square, getLayerLoaderTuple, renderSubBitmaskLayers } from './utils';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport { createCellsQuadTree } from '../shared-spatial-scatterplot/quadtree';\nimport { ScaledExpressionExtension } from '../../layer-extensions';\n\nconst CELLS_LAYER_ID = 'cells-layer';\nconst MOLECULES_LAYER_ID = 'molecules-layer';\nconst NEIGHBORHOODS_LAYER_ID = 'neighborhoods-layer';\n\n// Default getter function props.\nconst defaultGetCellCoords = cell => cell.xy;\nconst makeDefaultGetCellPolygon = radius => (cellEntry) => {\n  const cell = cellEntry[1];\n  return cell.poly?.length ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\nconst makeDefaultGetCellColors = (cellColors, theme) => (cellEntry) => {\n  const [r, g, b, a] = (cellColors && cellColors.get(cellEntry[0])) || getDefaultColor(theme);\n  return [r, g, b, 255 * (a || 1)];\n};\nconst makeDefaultGetCellIsSelected = (cellSelection) => {\n  if (cellSelection) {\n    // For performance, convert the Array to a Set instance.\n    // Set.has() is faster than Array.includes().\n    const cellSelectionSet = new Set(cellSelection);\n    return cellEntry => (cellSelectionSet.has(cellEntry[0]) ? 1.0 : 0.0);\n  }\n  return () => 0.0;\n};\n\n/**\n * React component which expresses the spatial relationships between cells and molecules.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component,\n * used to determine when to show tooltips vs. crosshairs.\n * @param {number} props.height Height of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {number} props.width Width of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {object} props.viewState The DeckGL viewState object.\n * @param {function} props.setViewState A handler for updating the DeckGL\n * viewState object.\n * @param {object} props.molecules Molecules data.\n * @param {object} props.cells Cells data.\n * @param {object} props.neighborhoods Neighborhoods data.\n * @param {number} props.lineWidthScale Width of cell border in view space (deck.gl).\n * @param {number} props.lineWidthMaxPixels Max width of the cell border in pixels (deck.gl).\n * @param {object} props.imageLayerLoaders An object mapping raster layer index to Viv loader\n * instances.\n * @param {object} props.cellColors Map from cell IDs to colors [r, g, b].\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellPolygon Getter function for cell polygons.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.getMoleculeColor\n * @param {function} props.getMoleculePosition\n * @param {function} props.getNeighborhoodPolygon\n * @param {function} props.updateViewInfo Handler for DeckGL viewport updates,\n * used when rendering tooltips and crosshairs.\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n * @param {string} props.theme \"light\" or \"dark\" for the vitessce theme\n */\nclass Spatial extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n    // Better for the bitmask layer when there is no color data to use this.\n    // 2048 is best for performance and for stability (4096 texture size is not always supported).\n    this.randomColorData = {\n      data: new Uint8Array(2048 * 2048 * 3)\n        .map((_, j) => (j < 4 ? 0 : Math.round(255 * Math.random()))),\n      // This buffer should be able to hold colors for 2048 x 2048 ~ 4 million cells.\n      height: 2048,\n      width: 2048,\n    };\n    this.color = { ...this.randomColorData };\n    this.expression = {\n      data: new Uint8Array(2048 * 2048),\n      // This buffer should be able to hold colors for 2048 x 2048 ~ 4 million cells.\n      height: 2048,\n      width: 2048,\n    };\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n\n  createCellsLayer(layerDef) {\n    const {\n      radius, stroked, visible, opacity,\n    } = layerDef;\n    const { cellsEntries } = this;\n    const {\n      theme,\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(\n        cellsEntries.length === cellSelection.length ? null : cellSelection,\n      ),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors, theme),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n      geneExpressionColormapRange,\n      cellColorEncoding,\n      getExpressionValue,\n      geneExpressionColormap,\n    } = this.props;\n    const filteredCellsEntries = cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries;\n\n    // Graphics rendering has the y-axis positive going south,\n    // so we need to flip it for rendering tooltips.\n    const flipYTooltip = true;\n\n    return new PolygonLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getLineWidth: [stroked],\n        isSelected: cellSelection,\n        getExpressionValue,\n        getFillColor: [opacity, cellColorEncoding, cellSelection, cellColors],\n        getLineColor: [cellColorEncoding, cellSelection, cellColors],\n      },\n      getFillColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      getExpressionValue,\n      extensions: [new ScaledExpressionExtension()],\n      colorScaleLo: geneExpressionColormapRange[0],\n      colorScaleHi: geneExpressionColormapRange[1],\n      isExpressionMode: cellColorEncoding === 'geneSelection',\n      colormap: geneExpressionColormap,\n      ...cellLayerDefaultProps(\n        filteredCellsEntries,\n        undefined,\n        setCellHighlight,\n        setComponentHover,\n        flipYTooltip,\n      ),\n    });\n  }\n\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = d => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = d => [d[0], d[1], 0],\n    } = this.props;\n    const { moleculesEntries } = this;\n\n    return new ScatterplotLayer({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: (info) => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      },\n    });\n  }\n\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = (neighborhoodsEntry) => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      },\n    } = this.props;\n    const { neighborhoodsEntries } = this;\n\n    return new PolygonLayer({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible,\n    });\n  }\n\n  createSelectionLayers() {\n    const {\n      viewState,\n      getCellCoords = defaultGetCellCoords,\n      setCellSelection,\n    } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n    );\n  }\n\n  createScaleBarLayer() {\n    const {\n      viewState,\n      width,\n      height,\n      imageLayerLoaders = {},\n      layers,\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    // Just get the first layer/loader since they should all be spatially\n    // resolved and therefore have the same unit size scale.\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1) return null;\n    const loader = loaders[0];\n    if (!loader) return null;\n    const source = getSourceFromLoader(loader);\n    if (!source.meta) return null;\n    const { physicalSizes } = source.meta;\n    if (physicalSizes && !use3d) {\n      const { x } = physicalSizes;\n      const { unit, size } = x;\n      if (unit && size) {\n        return new ScaleBarLayer({\n          id: 'scalebar-layer',\n          unit,\n          size,\n          viewState: { ...viewState, width, height },\n        });\n      }\n      return null;\n    }\n    return null;\n  }\n\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = {\n      ...rawLayerDef,\n      channels: rawLayerDef.channels.filter(\n        channel => channel.selection && channel.color && channel.slider,\n      ),\n    };\n\n    // We need to keep the same selections array reference,\n    // otherwise the Viv layer will not be re-used as we want it to,\n    // since selections is one of its `updateTriggers`.\n    // Reference: https://github.com/hms-dbmi/viv/blob/ad86d0f/src/layers/MultiscaleImageLayer/MultiscaleImageLayer.js#L127\n    let selections;\n    const nextLoaderSelection = layerDef.channels.map(c => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n    if (isEqual(prevLoaderSelection, nextLoaderSelection)) {\n      selections = prevLoaderSelection;\n    } else {\n      selections = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n    const useTransparentColor = (!layerDef.visible\n      && typeof layerDef.visible === 'boolean')\n      || Boolean(layerDef.transparentColor);\n    const transparentColor = useTransparentColor ? [0, 0, 0] : null;\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      useTransparentColor,\n      transparentColor,\n      colors: layerDef.channels.map(c => c.color),\n      sliders: layerDef.channels.map(c => c.slider),\n      resolution: layerDef.resolution,\n      renderingMode: layerDef.renderingMode,\n      xSlice: layerDef.xSlice,\n      ySlice: layerDef.ySlice,\n      zSlice: layerDef.zSlice,\n      callback: layerDef.callback,\n      visibilities: layerDef.channels.map(c => (!layerDef.visible && typeof layerDef.visible === 'boolean'\n        ? false\n        : c.visible)),\n    };\n\n    if (!loader || !layerProps) return null;\n    const {\n      metadata: { transform },\n      data,\n    } = loader;\n    let modelMatrix;\n    if (transform) {\n      const { scale, translate } = transform;\n      modelMatrix = new Matrix4()\n        .translate([translate.x, translate.y, 0])\n        .scale(scale);\n    } else if (layerDef.modelMatrix) {\n      // eslint-disable-next-line prefer-destructuring\n      modelMatrix = new Matrix4(layerDef.modelMatrix);\n    }\n    if (rawLayerDef.type === 'bitmask') {\n      const {\n        geneExpressionColormap,\n        geneExpressionColormapRange = [0.0, 1.0],\n        cellColorEncoding,\n      } = this.props;\n      return new MultiscaleImageLayer({\n        // `bitmask` is used by the AbstractSpatialOrScatterplot\n        // https://github.com/vitessce/vitessce/pull/927/files#diff-9cab35a2ca0c5b6d9754b177810d25079a30ca91efa062d5795181360bc3ff2cR111\n        id: `bitmask-layer-${layerDef.index}-${i}`,\n        channelsVisible: layerProps.visibilities,\n        opacity: layerProps.opacity,\n        modelMatrix,\n        hoveredCell: Number(this.props.cellHighlight),\n        renderSubLayers: renderSubBitmaskLayers,\n        loader: data,\n        selections,\n        // For some reason, deck.gl doesn't recognize the prop diffing\n        // unless these are separated out.  I don't think it's a bug, just\n        // has to do with the fact that we don't have it in the `defaultProps`,\n        // could be wrong though.\n        cellColorData: this.color.data,\n        cellTexHeight: this.color.height,\n        cellTexWidth: this.color.width,\n        excludeBackground: true,\n        onViewportLoad: layerProps.callback,\n        colorScaleLo: geneExpressionColormapRange[0],\n        colorScaleHi: geneExpressionColormapRange[1],\n        isExpressionMode: cellColorEncoding === 'geneSelection',\n        colormap: geneExpressionColormap,\n        expressionData: this.expression.data,\n      });\n    }\n    const [Layer, layerLoader] = getLayerLoaderTuple(data, layerDef.use3d);\n\n    const extensions = (layerDef.use3d ? [] : [\n      ...(layerProps.colormap ? [\n        new AdditiveColormapExtension(),\n      ] : [\n        new ColorPaletteExtension(),\n      ]),\n    ]);\n\n    return new Layer({\n      loader: layerLoader,\n      id: `${layerDef.use3d ? 'volume' : 'image'}-layer-${layerDef.index}-${i}`,\n      colors: layerProps.colors,\n      contrastLimits: layerProps.sliders,\n      selections,\n      channelsVisible: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: layerProps.colormap,\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n      useTransparentColor: layerProps.useTransparentColor,\n      resolution: layerProps.resolution,\n      renderingMode: layerProps.renderingMode,\n      pickable: false,\n      xSlice: layerProps.xSlice,\n      ySlice: layerProps.ySlice,\n      zSlice: layerProps.zSlice,\n      onViewportLoad: layerProps.callback,\n      extensions,\n    });\n  }\n\n  createImageLayers() {\n    const {\n      layers,\n      imageLayerLoaders = {},\n      rasterLayersCallbacks = [],\n    } = this.props;\n    const use3d = (layers || []).some(i => i.use3d);\n    const use3dIndex = (layers || []).findIndex(i => i.use3d);\n    return (layers || [])\n      .filter(layer => layer.type === 'raster' || layer.type === 'bitmask')\n      .filter(layer => (use3d ? layer.use3d === use3d : true))\n      .map((layer, i) => this.createImageLayer(\n        { ...layer, callback: rasterLayersCallbacks[use3d ? use3dIndex : i] },\n        imageLayerLoaders[layer.index],\n        i,\n      ));\n  }\n\n  getLayers() {\n    const {\n      imageLayers, cellsLayer, neighborhoodsLayer, moleculesLayer,\n    } = this;\n    return [\n      ...imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n      this.createScaleBarLayer(),\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const { cells = {}, getCellCoords = defaultGetCellCoords } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'cells');\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n\n  onUpdateCellColors() {\n    const color = this.randomColorData;\n    const { size } = this.props.cellColors;\n    if (typeof size === 'number') {\n      const cellIds = this.props.cellColors.keys();\n      color.data = new Uint8Array(color.height * color.width * 3).fill(\n        getDefaultColor(this.props.theme)[0],\n      );\n      // 0th cell id is the empty space of the image i.e black color.\n      color.data[0] = 0;\n      color.data[1] = 0;\n      color.data[2] = 0;\n      // eslint-disable-next-line no-restricted-syntax\n      for (const id of cellIds) {\n        if (id > 0) {\n          const cellColor = this.props.cellColors.get(id);\n          if (cellColor) {\n            color.data.set(cellColor.slice(0, 3), Number(id) * 3);\n          }\n        }\n      }\n    }\n    this.color = color;\n  }\n\n  onUpdateExpressionData() {\n    const { expressionData } = this.props;\n    if (expressionData[0]?.length) {\n      this.expression.data = new Uint8Array(\n        this.expression.height * this.expression.width,\n      );\n      this.expression.data.set(expressionData[0]);\n    }\n  }\n\n  onUpdateMoleculesData() {\n    const { molecules = {} } = this.props;\n    const moleculesEntries = Object.entries(molecules).flatMap(\n      ([molecule, coords], index) => coords.map(([x, y]) => [x, y, index, molecule]),\n    );\n    this.moleculesEntries = moleculesEntries;\n  }\n\n  onUpdateMoleculesLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'molecules');\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n\n  onUpdateNeighborhoodsData() {\n    const { neighborhoods = {} } = this.props;\n    const neighborhoodsEntries = Object.entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n\n  onUpdateNeighborhoodsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(\n      layer => layer.type === 'neighborhoods',\n    );\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n\n  viewInfoDidUpdate() {\n    const { getCellCoords = defaultGetCellCoords } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => prevProps[propName] !== this.props[propName];\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if (\n      [\n        'layers',\n        'cells',\n        'cellFilter',\n        'cellSelection',\n        'cellColors',\n        'geneExpressionColormapRange',\n        'cellColorEncoding',\n        'geneExpressionColormap',\n      ].some(shallowDiff)\n    ) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if (['cellColors'].some(shallowDiff)) {\n      // Cells Color layer props changed.\n      this.onUpdateCellColors();\n      this.forceUpdate();\n    }\n\n    if (['expressionData'].some(shallowDiff)) {\n      // Expression data prop changed.\n      this.onUpdateExpressionData();\n      this.forceUpdate();\n    }\n\n    if (['molecules'].some(shallowDiff)) {\n      // Molecules data changed.\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'molecules'].some(shallowDiff)) {\n      // Molecules layer props changed.\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n\n    if (['neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods data changed.\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods layer props changed.\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n\n    if (\n      [\n        'layers',\n        'imageLayerLoaders',\n        'cellColors',\n        'cellHighlight',\n        'geneExpressionColormapRange',\n        'expressionData',\n        'rasterLayersCallbacks',\n        'geneExpressionColormap',\n      ].some(shallowDiff)\n    ) {\n      // Image layers changed.\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst SpatialWrapper = forwardRef((props, deckRef) => (\n  <Spatial {...props} deckRef={deckRef} />\n));\nexport default SpatialWrapper;\n","module.exports = require(\"@deck.gl/extensions\");","module.exports = require(\"@turf/boolean-within\");","module.exports = require(\"@turf/boolean-contains\");","module.exports = require(\"@turf/boolean-overlap\");","module.exports = require(\"@turf/boolean-point-in-polygon\");","module.exports = require(\"@nebula.gl/layers\");","module.exports = require(\"short-number\");","module.exports = require(\"regenerator-runtime\");","import React, { useCallback } from 'react';\nimport debounce from 'lodash/debounce';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Slider from '@material-ui/core/Slider';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport { useStyles } from '../shared-plot-options/styles';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\nimport OptionSelect from '../shared-plot-options/OptionSelect';\nimport { GLSL_COLORMAPS } from '../../layers/constants';\n\nconst useToggleStyles = makeStyles(() => createStyles({\n  cameraLabel: {\n    padding: '0px 0px 0px 16px',\n  },\n  box: {\n    padding: '0px',\n  },\n  button: {\n    padding: '0px 0px 0px 8px',\n  },\n}));\n\nconst ToggleFixedAxisButton = ({\n  setSpatialAxisFixed,\n  spatialAxisFixed,\n  use3d,\n}) => {\n  const classes = useToggleStyles();\n  return (\n    <TableRow>\n      <TableCell className={classes.cameraLabel}>\n      Fix Camera Axis\n      </TableCell>\n      <TableCell className={classes.box}>\n        <Checkbox\n          onClick={() => setSpatialAxisFixed(!spatialAxisFixed)}\n          disabled={!use3d}\n          checked={Boolean(spatialAxisFixed)}\n        />\n      </TableCell>\n    </TableRow>\n  );\n};\n\nexport default function SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n    setSpatialAxisFixed,\n    spatialAxisFixed,\n    use3d,\n    geneExpressionColormap,\n    setGeneExpressionColormap,\n    geneExpressionColormapRange,\n    setGeneExpressionColormapRange,\n    canShowExpressionOptions,\n    canShowColorEncodingOption,\n    canShow3DOptions,\n  } = props;\n\n  function handleGeneExpressionColormapChange(event) {\n    setGeneExpressionColormap(event.target.value);\n  }\n\n  function handleColormapRangeChange(event, value) {\n    setGeneExpressionColormapRange(value);\n  }\n  const handleColormapRangeChangeDebounced = useCallback(\n    debounce(handleColormapRangeChange, 5, { trailing: true }),\n    [handleColormapRangeChange],\n  );\n\n  const classes = useStyles();\n\n  return (\n    <OptionsContainer>\n      {canShowColorEncodingOption ? (\n        <CellColorEncodingOption\n          observationsLabel={observationsLabel}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n        />\n      ) : null}\n      {canShow3DOptions ? (\n        <ToggleFixedAxisButton\n          setSpatialAxisFixed={setSpatialAxisFixed}\n          spatialAxisFixed={spatialAxisFixed}\n          use3d={use3d}\n        />\n      ) : null}\n      {canShowExpressionOptions ? (\n        <>\n          <TableRow>\n            <TableCell className={classes.labelCell} htmlFor=\"gene-expression-colormap-select\">\n          Gene Expression Colormap\n            </TableCell>\n            <TableCell className={classes.inputCell}>\n              <OptionSelect\n                className={classes.select}\n                value={geneExpressionColormap}\n                onChange={handleGeneExpressionColormapChange}\n                inputProps={{\n                  id: 'gene-expression-colormap-select',\n                }}\n              >\n                {GLSL_COLORMAPS.map(cmap => (\n                  <option key={cmap} value={cmap}>{cmap}</option>\n                ))}\n              </OptionSelect>\n            </TableCell>\n          </TableRow>\n          <TableRow>\n            <TableCell className={classes.labelCell}>\n          Gene Expression Colormap Range\n            </TableCell>\n            <TableCell className={classes.inputCell}>\n              <Slider\n                classes={{ root: classes.slider, valueLabel: classes.sliderValueLabel }}\n                value={geneExpressionColormapRange}\n                onChange={handleColormapRangeChangeDebounced}\n                aria-labelledby=\"gene-expression-colormap-range-slider\"\n                valueLabelDisplay=\"auto\"\n                step={0.005}\n                min={0.0}\n                max={1.0}\n              />\n            </TableCell>\n          </TableRow>\n        </>\n      ) : null}\n    </OptionsContainer>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, { useEffect, useMemo, useCallback } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { capitalize } from '../../utils';\nimport {\n  useDeckCanvasSize, useReady, useUrls, useExpressionValueGetter,\n} from '../hooks';\nimport { setCellSelection, mergeCellSets, canLoadResolution } from '../utils';\nimport {\n  useCellsData,\n  useCellSetsData,\n  useGeneSelection,\n  useMoleculesData,\n  useNeighborhoodsData,\n  useRasterData,\n  useExpressionAttrs,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Spatial from './Spatial';\nimport SpatialOptions from './SpatialOptions';\nimport SpatialTooltipSubscriber from './SpatialTooltipSubscriber';\nimport { makeSpatialSubtitle, getInitialSpatialTargets } from './utils';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n  useAuxiliaryCoordination,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SPATIAL_DATA_TYPES = [\n  'cells', 'molecules', 'raster', 'cell-sets', 'expression-matrix',\n];\n\n/**\n * A subscriber component for the spatial plot.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = 'molecule',\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n    title = 'Spatial',\n    disable3d,\n    globalDisable3d,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialRotationX: rotationX,\n    spatialRotationY: rotationY,\n    spatialRotationZ: rotationZ,\n    spatialRotationOrbit: rotationOrbit,\n    spatialOrbitAxis: orbitAxis,\n    spatialImageLayer: rasterLayers,\n    spatialSegmentationLayer: cellsLayer,\n    spatialPointLayer: moleculesLayer,\n    spatialNeighborhoodLayer: neighborhoodsLayer,\n    obsFilter: cellFilter,\n    obsHighlight: cellHighlight,\n    featureSelection: geneSelection,\n    obsSetSelection: cellSetSelection,\n    obsSetColor: cellSetColor,\n    obsColorEncoding: cellColorEncoding,\n    additionalObsSets: additionalCellSets,\n    spatialAxisFixed,\n    featureValueColormap: geneExpressionColormap,\n    featureValueColormapRange: geneExpressionColormapRange,\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialRotationX: setRotationX,\n    setSpatialRotationOrbit: setRotationOrbit,\n    setSpatialOrbitAxis: setOrbitAxis,\n    setSpatialImageLayer: setRasterLayers,\n    setSpatialSegmentationLayer: setCellsLayer,\n    setSpatialPointLayer: setMoleculesLayer,\n    setSpatialNeighborhoodLayer: setNeighborhoodsLayer,\n    setObsFilter: setCellFilter,\n    setObsSetSelection: setCellSetSelection,\n    setObsHighlight: setCellHighlight,\n    setObsSetColor: setCellSetColor,\n    setObsColorEncoding: setCellColorEncoding,\n    setAdditionalObsSets: setAdditionalCellSets,\n    setMoleculeHighlight,\n    setSpatialAxisFixed,\n    setFeatureValueColormap: setGeneExpressionColormap,\n    setFeatureValueColormapRange: setGeneExpressionColormapRange,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n\n  const [\n    {\n      rasterLayersCallbacks,\n    },\n  ] = useAuxiliaryCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n\n  const use3d = rasterLayers?.some(l => l.use3d);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady,\n    resetReadyItems,\n  ] = useReady(\n    SPATIAL_DATA_TYPES,\n  );\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  // Also clear the array of automatically-initialized layers.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialSegmentationLayer: setCellsLayer },\n    { spatialSegmentationLayer: cellsLayer },\n  );\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialPointLayer: setMoleculesLayer },\n    { spatialPointLayer: moleculesLayer },\n  );\n  const [neighborhoods] = useNeighborhoodsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialNeighborhoodLayer: setNeighborhoodsLayer },\n    { spatialNeighborhoodLayer: neighborhoodsLayer },\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setObsSetSelection: setCellSetSelection, setObsSetColor: setCellSetColor },\n    { obsSetSelection: cellSetSelection, obsSetColor: cellSetColor },\n  );\n  const [expressionData] = useGeneSelection(\n    loaders, dataset, setItemIsReady, false, geneSelection, setItemIsNotReady,\n  );\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setSpatialImageLayer: setRasterLayers },\n    { spatialImageLayer: rasterLayers },\n  );\n\n  const layers = useMemo(() => {\n    // Only want to pass in cells layer once if there is not `bitmask`.\n    // We pass in the cells data regardless because it is needed for selection,\n    // but the rendering layer itself is not needed.\n    const canPassInCellsLayer = !imageLayerMeta.some(l => l?.metadata?.isBitmask);\n    return [\n      ...(moleculesLayer ? [{ ...moleculesLayer, type: 'molecules' }] : []),\n      ...((cellsLayer && canPassInCellsLayer) ? [{ ...cellsLayer, type: 'cells' }] : []),\n      ...(neighborhoodsLayer ? [{ ...neighborhoodsLayer, type: 'neighborhoods' }] : []),\n      ...(rasterLayers ? rasterLayers.map(l => ({ ...l, type: (l.type && ['raster', 'bitmask'].includes(l.type) ? l.type : 'raster') })) : []),\n    ];\n  }, [cellsLayer, moleculesLayer, neighborhoodsLayer, rasterLayers, imageLayerMeta]);\n\n  useEffect(() => {\n    if ((typeof targetX !== 'number' || typeof targetY !== 'number')) {\n      const {\n        initialTargetX, initialTargetY, initialTargetZ, initialZoom,\n      } = getInitialSpatialTargets({\n        width,\n        height,\n        cells,\n        imageLayerLoaders,\n        useRaster: Boolean(loaders[dataset].loaders.raster),\n        use3d,\n      });\n      setTargetX(initialTargetX);\n      setTargetY(initialTargetY);\n      setTargetZ(initialTargetZ);\n      setZoom(initialZoom);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageLayerLoaders, cells, targetX, targetY, setTargetX, setTargetY, setZoom, use3d]);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionData: expressionData && expressionData[0],\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n    expressionDataAttrs: attrs,\n    theme,\n  }), [cellColorEncoding, geneSelection, mergedCellSets, theme,\n    cellSetColor, cellSetSelection, expressionData, attrs]);\n\n  // The bitmask layer needs access to a array (i.e a texture) lookup of cell -> expression value\n  // where each cell id indexes into the array.\n  // Cell ids in `attrs.rows` do not necessaryily correspond to indices in that array, though,\n  // so we create a \"shifted\" array where this is the case.\n  const shiftedExpressionDataForBitmask = useMemo(() => {\n    const hasBitmask = imageLayerMeta.some(l => l?.metadata?.isBitmask);\n    if (attrs?.rows && expressionData && hasBitmask) {\n      const maxId = attrs.rows.reduce((max, curr) => Math.max(max, Number(curr)));\n      const result = new Uint8Array(maxId + 1);\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        const id = attrs.rows[i];\n        result.set(expressionData[0].slice(i, i + 1), Number(id));\n      }\n      return [result];\n    } return [new Uint8Array()];\n  }, [attrs, expressionData, imageLayerMeta]);\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const getCellInfo = (cellId) => {\n    const cell = cells[cellId];\n    if (cell) {\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...cell.factors,\n      };\n    }\n    return null;\n  };\n\n  const setViewState = ({\n    zoom: newZoom,\n    target,\n    rotationX: newRotationX,\n    rotationOrbit: newRotationOrbit,\n    orbitAxis: newOrbitAxis,\n  }) => {\n    setZoom(newZoom);\n    setTargetX(target[0]);\n    setTargetY(target[1]);\n    setTargetZ(target[2] || null);\n    setRotationX(newRotationX);\n    setRotationOrbit(newRotationOrbit);\n    setOrbitAxis(newOrbitAxis || null);\n  };\n\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount,\n  });\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useExpressionValueGetter({ attrs, expressionData });\n  const hasExpressionData = loaders[dataset].loaders['expression-matrix'];\n  const hasCellsData = loaders[dataset].loaders.cells\n    || imageLayerMeta.some(l => l?.metadata?.isBitmask);\n  const canLoad3DLayers = imageLayerLoaders.some(loader => Boolean(\n    Array.from({\n      length: loader.data.length,\n    }).filter((_, res) => canLoadResolution(loader.data, res)).length,\n  ));\n  // Only show 3D options if we can theoretically load the data and it is allowed to be loaded.\n  const canShow3DOptions = canLoad3DLayers\n    && !(disable3d?.length === imageLayerLoaders.length) && !globalDisable3d;\n\n  return (\n    <TitleInfo\n      title={title}\n      info={subtitle}\n      isSpatial\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      options={\n        // Only show button if there is expression or 3D data because only cells data\n        // does not have any options (i.e for color encoding, you need to switch to expression data)\n        canShow3DOptions || hasExpressionData ? (\n          <SpatialOptions\n            observationsLabel={observationsLabel}\n            cellColorEncoding={cellColorEncoding}\n            setCellColorEncoding={setCellColorEncoding}\n            setSpatialAxisFixed={setSpatialAxisFixed}\n            spatialAxisFixed={spatialAxisFixed}\n            use3d={use3d}\n            geneExpressionColormap={geneExpressionColormap}\n            setGeneExpressionColormap={setGeneExpressionColormap}\n            geneExpressionColormapRange={geneExpressionColormapRange}\n            setGeneExpressionColormapRange={setGeneExpressionColormapRange}\n            canShowExpressionOptions={hasExpressionData}\n            canShowColorEncodingOption={hasCellsData && hasExpressionData}\n            canShow3DOptions={canShow3DOptions}\n          />\n        ) : null\n      }\n    >\n      <Spatial\n        ref={deckRef}\n        uuid={uuid}\n        width={width}\n        height={height}\n        viewState={{\n          zoom,\n          target: [targetX, targetY, targetZ],\n          rotationX,\n          rotationY,\n          rotationZ,\n          rotationOrbit,\n          orbitAxis,\n        }}\n        setViewState={setViewState}\n        layers={layers}\n        cells={cells}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        molecules={molecules}\n        neighborhoods={neighborhoods}\n        imageLayerLoaders={imageLayerLoaders}\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        setMoleculeHighlight={setMoleculeHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n        rasterLayersCallbacks={rasterLayersCallbacks}\n        spatialAxisFixed={spatialAxisFixed}\n        geneExpressionColormap={geneExpressionColormap}\n        geneExpressionColormapRange={geneExpressionColormapRange}\n        expressionData={shiftedExpressionDataForBitmask}\n        cellColorEncoding={cellColorEncoding}\n        getExpressionValue={getExpressionValue}\n        theme={theme}\n      />\n      {!disableTooltip && (\n        <SpatialTooltipSubscriber\n          parentUuid={uuid}\n          cellHighlight={cellHighlight}\n          width={width}\n          height={height}\n          getCellInfo={getCellInfo}\n        />\n      )}\n    </TitleInfo>\n  );\n}\n","export { default as SpatialSubscriber } from './SpatialSubscriber';\nexport { default as Spatial } from './Spatial';\n"],"sourceRoot":""}