{"version":3,"sources":["../webpack/bootstrap","app/constants.js","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","utils.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"lodash/isEqual\"","components/hooks.js","../external \"@material-ui/core/styles\"","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/DatasetNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","components/data-hooks.js","app/state/coordination.js","components/classNames.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/spatial/constants.js","../external \"zustand\"","../external \"lodash/debounce\"","loaders/errors/AbstractLoaderError.js","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","app/constant-relationships.js","app/plugins.js","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/Paper\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","../external \"@material-ui/core/Popper\"","components/shared-mui/styles.js","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"uuid/v4\"","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../external \"lodash/difference\"","components/selectable-table/SelectableTable.js","components/genes/Genes.js","../external \"react-virtualized\"","components/genes/GenesSubscriber.js","../external \"lodash/every\"","../external \"lodash/union\"","components/genes/index.js"],"names":["Component","DESCRIPTION","STATUS","GENES","CELL_SETS","SCATTERPLOT","SPATIAL","HEATMAP","LAYER_CONTROLLER","CELL_SET_SIZES","GENOMIC_PROFILES","CELL_SET_EXPRESSION","EXPRESSION_HISTOGRAM","GATING","DataType","CELLS","EXPRESSION_MATRIX","MOLECULES","NEIGHBORHOODS","RASTER","FileType","CELLS_JSON","CELL_SETS_JSON","EXPRESSION_MATRIX_ZARR","GENOMIC_PROFILES_ZARR","MOLECULES_JSON","NEIGHBORHOODS_JSON","RASTER_JSON","RASTER_OME_ZARR","CLUSTERS_JSON","GENES_JSON","ANNDATA_CELL_SETS_ZARR","ANNDATA_CELLS_ZARR","ANNDATA_EXPRESSION_MATRIX_ZARR","CoordinationType","DATASET","OBS_TYPE","FEATURE_TYPE","FEATURE_VALUE_TYPE","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_OBS_SET_POLYGONS_VISIBLE","EMBEDDING_OBS_SET_LABELS_VISIBLE","EMBEDDING_OBS_SET_LABEL_SIZE","EMBEDDING_OBS_RADIUS","EMBEDDING_OBS_RADIUS_MODE","EMBEDDING_OBS_OPACITY","EMBEDDING_OBS_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","OBS_FILTER","OBS_HIGHLIGHT","OBS_SET_SELECTION","OBS_SET_HIGHLIGHT","OBS_SET_COLOR","FEATURE_FILTER","FEATURE_HIGHLIGHT","FEATURE_SELECTION","FEATURE_VALUE_COLORMAP","FEATURE_VALUE_TRANSFORM","FEATURE_VALUE_COLORMAP_RANGE","OBS_COLOR_ENCODING","SPATIAL_IMAGE_LAYER","SPATIAL_SEGMENTATION_LAYER","SPATIAL_POINT_LAYER","SPATIAL_NEIGHBORHOOD_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_OBS_SETS","MOLECULE_HIGHLIGHT","GATING_FEATURE_SELECTION_X","GATING_FEATURE_SELECTION_Y","FEATURE_VALUE_TRANSFORM_COEFFICIENT","fromEntries","iterable","reduce","obj","key","val","Object","assign","pluralize","singular","plural","count","capitalize","word","charAt","toUpperCase","slice","getLongestString","strings","prevLongest","currentValue","length","getNextScope","prevScopes","chars","nextCharIndices","next","r","forEach","charIndex","unshift","increment","i","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","Array","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","uid","newLayout","layout","filter","c","changeLayout","newComponentProps","newProps","useComponentLayout","component","scopes","coordinationScopes","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","map","undefined","shallow","setters","useMemo","setterName","setterFunc","useDatasetUids","datasetScopes","datasetUids","datasetScopesArr","datasetScope","useMultiDatasetCoordination","datasetValues","parameterSpace","parameterScope","console","error","datasetSetters","AUXILIARY_COORDINATION_TYPES_MAP","spatialImageLayer","mapCoordinationScopes","newCoordinationScopes","keys","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","getWindowDimensions","window","width","innerWidth","height","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","log","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","name","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellId","cellIndex","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","warn","AbstractLoaderError","LoaderNotFoundError","DatasetNotFoundError","datasetUid","message","warnInConsole","initCoordinationSpace","initialValues","defaultCoordinationValues","getDefaultCoordinationValues","entries","initialValue","shouldInit","equal","useDescription","dataset","description","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","cells","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialSegmentationLayer","DEFAULT_CELLS_LAYER","useCellSetsData","cellSets","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","arr","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","Uint8Array","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","a","b","spatialPointLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","TOOLTIP_ANCESTOR","CARD","PRIMARY_CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","stroked","DEFAULT_LAYER_TYPE_ORDERING","Error","LoadingIndicator","useStyles","makeStyles","theme","iconButton","border","marginLeft","background","color","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","props","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","title","info","children","isScroll","isSpatial","childClassName","FILE_TYPE_DATA_TYPE_MAPPING","PLUGINS_KEY","PLUGIN_VIEW_TYPES_KEY","PLUGIN_COORDINATION_TYPES_KEY","PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY","PLUGIN_FILE_TYPES_KEY","PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY","PLUGIN_CONVENIENCE_FILE_TYPES_KEY","PLUGINS","registerPluginCoordinationType","typeName","defaultValue","registerPluginViewType","viewType","viewSubscriberReactComponent","coordinationTypes","pluginTypesPerView","registerPluginFileType","fileTypeName","dataTypeName","dataLoaderClass","dataSourceClass","registerPluginConvenienceFileType","expansionFunction","getPluginViewTypes","getPluginViewType","getPluginCoordinationTypes","getPluginCoordinationTypeDefaults","getPluginCoordinationTypesForViewType","getPluginFileTypes","getPluginConvenienceFileTypes","getDataTypeForPluginFileType","fileType","getLoaderClassesForPluginFileType","getExpansionFunctionForPluginConvenienceFileType","getFileTypes","getCoordinationTypes","getComponentCoordinationTypes","getFileTypeDataTypeMapping","getConvenienceFileTypes","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","placement","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","maxHeight","position","left","top","textAlign","muiTheme","dark","createTheme","type","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","SHIFT_KEYCODE","SelectableTable","hasColorEncoding","columns","onChange","idKey","valueKey","allowMultiple","allowUncheck","showTableHead","showTableInputs","testHeight","testWidth","selectedRows","setSelectedRows","isCheckingMultiple","setIsCheckingMultiple","onKeyDown","event","keyCode","onKeyUp","onSelectRow","checked","union","difference","handleInputChange","target","getDataFromIds","ids","find","isSelected","initialSelectedRows","d","isEqual","selectedRowData","inputUuid","uuidv4","hiddenInputsClass","rowRenderer","index","style","column","headerRowRenderer","outline","Genes","geneList","geneSelection","geneFilter","setGeneSelection","enableMultiSelect","searchTerm","setSearchTerm","searchResults","setSearchResults","results","gene","toLowerCase","s","sort","localeCompare","handleChange","GENES_DATA_TYPES","GenesSubscriber","variablesLabelOverride","variablesLabel","variablesPluralLabelOverride","variablesPluralLabel","genes","featureSelection","featureFilter","cellColorEncoding","obsColorEncoding","setFeatureSelection","setGeneFilter","setFeatureFilter","setGeneHighlight","setFeatureHighlight","setCellColorEncoding","setObsColorEncoding","setGeneSelectionAndColorEncoding","newSelection"],"mappings":"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","file":"genes.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 214);\n","/**\n * This file defines the current constant values.\n * To deprecate a value, add it to ./constants-old.js\n * with a corresponding log message.\n */\nexport const Component = {\n  DESCRIPTION: 'description',\n  STATUS: 'status',\n  GENES: 'genes',\n  CELL_SETS: 'cellSets',\n  SCATTERPLOT: 'scatterplot',\n  SPATIAL: 'spatial',\n  HEATMAP: 'heatmap',\n  LAYER_CONTROLLER: 'layerController',\n  CELL_SET_SIZES: 'cellSetSizes',\n  GENOMIC_PROFILES: 'genomicProfiles',\n  CELL_SET_EXPRESSION: 'cellSetExpression',\n  EXPRESSION_HISTOGRAM: 'expressionHistogram',\n  GATING: 'gating',\n};\n\nexport const DataType = {\n  CELLS: 'cells',\n  CELL_SETS: 'cell-sets',\n  EXPRESSION_MATRIX: 'expression-matrix',\n  GENOMIC_PROFILES: 'genomic-profiles',\n  MOLECULES: 'molecules',\n  NEIGHBORHOODS: 'neighborhoods',\n  RASTER: 'raster',\n};\n\n\nexport const FileType = {\n  CELLS_JSON: 'cells.json',\n  CELL_SETS_JSON: 'cell-sets.json',\n  EXPRESSION_MATRIX_ZARR: 'expression-matrix.zarr',\n  GENOMIC_PROFILES_ZARR: 'genomic-profiles.zarr',\n  MOLECULES_JSON: 'molecules.json',\n  NEIGHBORHOODS_JSON: 'neighborhoods.json',\n  RASTER_JSON: 'raster.json',\n  RASTER_OME_ZARR: 'raster.ome-zarr',\n  CLUSTERS_JSON: 'clusters.json',\n  GENES_JSON: 'genes.json',\n  ANNDATA_CELL_SETS_ZARR: 'anndata-cell-sets.zarr',\n  ANNDATA_CELLS_ZARR: 'anndata-cells.zarr',\n  ANNDATA_EXPRESSION_MATRIX_ZARR: 'anndata-expression-matrix.zarr',\n};\n\n/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const CoordinationType = {\n  DATASET: 'dataset',\n  // Entity types\n  OBS_TYPE: 'obsType',\n  FEATURE_TYPE: 'featureType',\n  FEATURE_VALUE_TYPE: 'featureValueType',\n  // Other types\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_OBS_SET_POLYGONS_VISIBLE: 'embeddingObsSetPolygonsVisible',\n  EMBEDDING_OBS_SET_LABELS_VISIBLE: 'embeddingObsSetLabelsVisible',\n  EMBEDDING_OBS_SET_LABEL_SIZE: 'embeddingObsSetLabelSize',\n  EMBEDDING_OBS_RADIUS: 'embeddingObsRadius',\n  EMBEDDING_OBS_RADIUS_MODE: 'embeddingObsRadiusMode',\n  EMBEDDING_OBS_OPACITY: 'embeddingObsOpacity',\n  EMBEDDING_OBS_OPACITY_MODE: 'embeddingObsOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  OBS_FILTER: 'obsFilter',\n  OBS_HIGHLIGHT: 'obsHighlight',\n  OBS_SET_SELECTION: 'obsSetSelection',\n  OBS_SET_HIGHLIGHT: 'obsSetHighlight',\n  OBS_SET_COLOR: 'obsSetColor',\n  FEATURE_FILTER: 'featureFilter',\n  FEATURE_HIGHLIGHT: 'featureHighlight',\n  FEATURE_SELECTION: 'featureSelection',\n  FEATURE_VALUE_COLORMAP: 'featureValueColormap',\n  FEATURE_VALUE_TRANSFORM: 'featureValueTransform',\n  FEATURE_VALUE_COLORMAP_RANGE: 'featureValueColormapRange',\n  OBS_COLOR_ENCODING: 'obsColorEncoding',\n  SPATIAL_IMAGE_LAYER: 'spatialImageLayer',\n  SPATIAL_SEGMENTATION_LAYER: 'spatialSegmentationLayer',\n  SPATIAL_POINT_LAYER: 'spatialPointLayer',\n  SPATIAL_NEIGHBORHOOD_LAYER: 'spatialNeighborhoodLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_OBS_SETS: 'additionalObsSets',\n  // TODO: use obsHighlight rather than moleculeHighlight.\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n  GATING_FEATURE_SELECTION_X: 'gatingFeatureSelectionX',\n  GATING_FEATURE_SELECTION_Y: 'gatingFeatureSelectionY',\n  FEATURE_VALUE_TRANSFORM_COEFFICIENT: 'featureValueTransformCoefficient',\n};\n","module.exports = require(\"react\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Get the longest string in the array of strings.\n * @param {string[]} strings The array of strings.\n * @returns The longest string.\n */\nexport function getLongestString(strings) {\n  return strings.reduce(\n    (prevLongest, currentValue) => (\n      prevLongest.length > currentValue.length ? prevLongest : currentValue\n    ),\n  );\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { CoordinationType } from '../constants';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: uid => set((state) => {\n    const newLayout = state.viewConfig.layout.filter(c => c.uid !== uid);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialImageLayer` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Get a mapping from dataset coordination scopes to dataset UIDs.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {object} Mapping from dataset coordination scope names to dataset UIDs.\n */\nexport function useDatasetUids(coordinationScopes) {\n  const parameter = CoordinationType.DATASET;\n  const datasetScopes = coordinationScopes[parameter];\n\n  // Mapping from dataset coordination scope name to dataset uid\n  const datasetUids = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    // Convert a single scope to an array of scopes to be consistent.\n    const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][datasetScope];\n        return [datasetScope, value];\n      }\n      return [datasetScope, undefined];\n    }));\n  }, shallow);\n\n  return datasetUids;\n}\n\n/**\n * Use coordination values and coordination setter functions corresponding to\n * dataset-specific coordination scopes for each coordination type.\n * @param {string[]} parameters An array of coordination types supported by a view.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {array} [cValues, cSetters] where\n * cValues is a mapping from coordination scope name to { coordinationType: coordinationValue },\n * and cSetters is a mapping from coordination scope name to { setCoordinationType }\n * setter functions.\n */\nexport function useMultiDatasetCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const datasetScopes = coordinationScopes[CoordinationType.DATASET];\n\n  // Convert a single scope to an array of scopes to be consistent.\n  const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      const datasetValues = fromEntries(parameters.map((parameter) => {\n        if (coordinationSpace && coordinationSpace[parameter]) {\n          let value;\n          const parameterSpace = coordinationSpace[parameter];\n          const parameterScope = coordinationScopes[parameter];\n          if (typeof parameterScope === 'object') {\n            value = parameterSpace[parameterScope[datasetScope]];\n          } else if (typeof parameterScope === 'string') {\n            value = parameterSpace[parameterScope];\n          } else {\n            console.error(`coordination scope for ${parameter} must be of type string or object.`);\n          }\n          return [parameter, value];\n        }\n        return [parameter, undefined];\n      }));\n      return [datasetScope, datasetValues];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(datasetScopesArr.map((datasetScope) => {\n    const datasetSetters = fromEntries(parameters.map((parameter) => {\n      const setterName = `set${capitalize(parameter)}`;\n      let setterFunc;\n      const parameterScope = coordinationScopes[parameter];\n      if (typeof parameterScope === 'object') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope[datasetScope],\n          value,\n        });\n      } else if (typeof parameterScope === 'string') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope,\n          value,\n        });\n      } else {\n        console.error(`coordination scope for ${parameter} must be of type string or object.`);\n      }\n      return [setterName, setterFunc];\n    }));\n    return [datasetScope, datasetSetters];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialImageLayer: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"lodash/isEqual\");","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","module.exports = require(\"@material-ui/core/styles\");","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class DatasetNotFoundError extends AbstractLoaderError {\n  constructor(datasetUid) {\n    super(`Error finding dataset for ${datasetUid}. Please check that at least one dataset exists in the view config.`);\n    this.name = 'DatasetNotFoundError';\n\n    this.datasetUid = datasetUid;\n  }\n\n  warnInConsole() {\n    const {\n      datasetUid,\n    } = this;\n    if (datasetUid) {\n      console.warn(\n        `Unable to find dataset for ${datasetUid}`,\n      );\n    } else {\n      console.warn('No dataset uid specified.');\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\nexport { default as DatasetNotFoundError } from './DatasetNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n  DatasetNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { getDefaultCoordinationValues } from '../app/plugins';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  const defaultCoordinationValues = getDefaultCoordinationValues();\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, defaultCoordinationValues[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialSegmentationLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialPointLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      if (isRequired) {\n        warn(new DatasetNotFoundError(dataset), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","import { CoordinationType, Component } from '../constants';\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [CoordinationType.OBS_TYPE]: 'cell',\n  [CoordinationType.FEATURE_TYPE]: 'gene',\n  [CoordinationType.FEATURE_VALUE_TYPE]: 'expression',\n  [CoordinationType.EMBEDDING_ZOOM]: null,\n  [CoordinationType.EMBEDDING_ROTATION]: 0,\n  [CoordinationType.EMBEDDING_TARGET_X]: null,\n  [CoordinationType.EMBEDDING_TARGET_Y]: null,\n  [CoordinationType.EMBEDDING_TARGET_Z]: 0,\n  [CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE]: 14,\n  [CoordinationType.EMBEDDING_OBS_RADIUS]: 1,\n  [CoordinationType.EMBEDDING_OBS_RADIUS_MODE]: 'auto',\n  [CoordinationType.EMBEDDING_OBS_OPACITY]: 1,\n  [CoordinationType.EMBEDDING_OBS_OPACITY_MODE]: 'auto',\n  [CoordinationType.SPATIAL_ZOOM]: null,\n  [CoordinationType.SPATIAL_ROTATION]: 0,\n  [CoordinationType.SPATIAL_TARGET_X]: null,\n  [CoordinationType.SPATIAL_TARGET_Y]: null,\n  [CoordinationType.SPATIAL_TARGET_Z]: null,\n  [CoordinationType.SPATIAL_ROTATION_X]: null,\n  [CoordinationType.SPATIAL_ROTATION_Y]: null,\n  [CoordinationType.SPATIAL_ROTATION_Z]: null,\n  [CoordinationType.SPATIAL_AXIS_FIXED]: false,\n  [CoordinationType.SPATIAL_ROTATION_ORBIT]: 0,\n  [CoordinationType.SPATIAL_ORBIT_AXIS]: 'Y',\n  [CoordinationType.SPATIAL_IMAGE_LAYER]: null,\n  [CoordinationType.SPATIAL_SEGMENTATION_LAYER]: null,\n  [CoordinationType.SPATIAL_POINT_LAYER]: null,\n  [CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER]: null,\n  [CoordinationType.HEATMAP_ZOOM_X]: 0,\n  [CoordinationType.HEATMAP_ZOOM_Y]: 0,\n  [CoordinationType.HEATMAP_TARGET_X]: 0,\n  [CoordinationType.HEATMAP_TARGET_Y]: 0,\n  [CoordinationType.FEATURE_VALUE_COLORMAP]: 'plasma',\n  [CoordinationType.FEATURE_VALUE_COLORMAP_RANGE]: [0.0, 1.0],\n  [CoordinationType.FEATURE_VALUE_TRANSFORM]: null,\n  [CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT]: 1,\n  [CoordinationType.FEATURE_FILTER]: null,\n  [CoordinationType.FEATURE_HIGHLIGHT]: null,\n  [CoordinationType.FEATURE_SELECTION]: null,\n  [CoordinationType.OBS_FILTER]: null,\n  [CoordinationType.OBS_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_SELECTION]: null,\n  [CoordinationType.OBS_SET_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_COLOR]: null,\n  [CoordinationType.OBS_COLOR_ENCODING]: 'cellSetSelection',\n  [CoordinationType.GENOMIC_ZOOM_X]: 0,\n  [CoordinationType.GENOMIC_ZOOM_Y]: 0,\n  [CoordinationType.GENOMIC_TARGET_X]: 1549999999.5,\n  [CoordinationType.GENOMIC_TARGET_Y]: 1549999999.5,\n  [CoordinationType.ADDITIONAL_OBS_SETS]: null,\n  [CoordinationType.MOLECULE_HIGHLIGHT]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_X]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_Y]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  CoordinationType.HEATMAP_ZOOM_X,\n  CoordinationType.HEATMAP_ZOOM_Y,\n  CoordinationType.HEATMAP_TARGET_X,\n  CoordinationType.HEATMAP_TARGET_Y,\n  CoordinationType.EMBEDDING_ZOOM,\n  CoordinationType.EMBEDDING_TARGET_X,\n  CoordinationType.EMBEDDING_TARGET_Y,\n  CoordinationType.EMBEDDING_TARGET_Z,\n  CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n  CoordinationType.EMBEDDING_OBS_RADIUS,\n  CoordinationType.EMBEDDING_OBS_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  [Component.SCATTERPLOT]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.GATING]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.GATING_FEATURE_SELECTION_X,\n    CoordinationType.GATING_FEATURE_SELECTION_Y,\n  ],\n  [Component.SPATIAL]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_ROTATION,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n    CoordinationType.SPATIAL_AXIS_FIXED,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.HEATMAP]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.HEATMAP_ZOOM_X,\n    CoordinationType.HEATMAP_ZOOM_Y,\n    CoordinationType.HEATMAP_TARGET_X,\n    CoordinationType.HEATMAP_TARGET_Y,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.CELL_SETS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.CELL_SET_SIZES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.STATUS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.GENES]: [\n    CoordinationType.DATASET,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.OBS_SET_SELECTION,\n  ],\n  [Component.CELL_SET_EXPRESSION]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.EXPRESSION_HISTOGRAM]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.LAYER_CONTROLLER]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n  ],\n  [Component.GENOMIC_PROFILES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.DESCRIPTION]: [\n    CoordinationType.DATASET,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n  ],\n  higlass: [\n    CoordinationType.DATASET,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n};\n","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","module.exports = require(\"lodash/debounce\");","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","module.exports = require(\"zustand/shallow\");","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import { FileType, DataType } from './constants';\n\n/**\n * Mapping from file types to data types. Each file type\n * should correspond to one data type. Multiple file types\n * can map onto the same data type.\n */\nexport const FILE_TYPE_DATA_TYPE_MAPPING = {\n  [FileType.CELLS_JSON]: DataType.CELLS,\n  [FileType.CELL_SETS_JSON]: DataType.CELL_SETS,\n  [FileType.EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENOMIC_PROFILES_ZARR]: DataType.GENOMIC_PROFILES,\n  [FileType.MOLECULES_JSON]: DataType.MOLECULES,\n  [FileType.NEIGHBORHOODS_JSON]: DataType.NEIGHBORHOODS,\n  [FileType.RASTER_JSON]: DataType.RASTER,\n  [FileType.RASTER_OME_ZARR]: DataType.RASTER,\n  [FileType.CLUSTERS_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENES_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.ANNDATA_CELL_SETS_ZARR]: DataType.CELL_SETS,\n  [FileType.ANNDATA_CELLS_ZARR]: DataType.CELLS,\n  [FileType.ANNDATA_EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n};\n","import { fromEntries } from '../utils';\nimport { FILE_TYPE_DATA_TYPE_MAPPING } from './constant-relationships';\nimport { FileType, CoordinationType } from './constants';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n} from './state/coordination';\n\nconst PLUGINS_KEY = '__VITESSCE_PLUGINS__';\nconst PLUGIN_VIEW_TYPES_KEY = 'viewTypes';\nconst PLUGIN_COORDINATION_TYPES_KEY = 'coordinationTypes';\nconst PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY = 'coordinationTypesPerView';\nconst PLUGIN_FILE_TYPES_KEY = 'fileTypes';\nconst PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY = 'fileTypeDataTypeMapping';\nconst PLUGIN_CONVENIENCE_FILE_TYPES_KEY = 'convenienceFileTypes';\n\nwindow[PLUGINS_KEY] = {};\nconst PLUGINS = window[PLUGINS_KEY];\n\n// Reference: https://github.com/higlass/higlass-register/blob/master/src/index.js\nPLUGINS[PLUGIN_VIEW_TYPES_KEY] = PLUGINS[PLUGIN_VIEW_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_KEY] = PLUGINS[PLUGIN_COORDINATION_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] = (\n  PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] || {}\n);\nPLUGINS[PLUGIN_FILE_TYPES_KEY] = PLUGINS[PLUGIN_FILE_TYPES_KEY] || {};\nPLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] = (\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] || {}\n);\nPLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] = PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] || {};\n\n/**\n * Register a new coordination type.\n * @param {string} typeName Name for the new coordination type.\n * @param {*} defaultValue A default value for the coordination type.\n */\nexport function registerPluginCoordinationType(typeName, defaultValue) {\n  PLUGINS[PLUGIN_COORDINATION_TYPES_KEY][typeName] = defaultValue;\n}\n\n/**\n * Register a new view type.\n * @param {string} viewType A name\n * @param {function} viewSubscriberReactComponent A react component.\n * @param {string[]} coordinationTypes A list of coordination types that this view supports.\n */\nexport function registerPluginViewType(viewType, viewSubscriberReactComponent, coordinationTypes) {\n  PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType] = viewSubscriberReactComponent;\n  // Register the supported coordination types.\n  const pluginTypesPerView = PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY];\n  if (Array.isArray(pluginTypesPerView[viewType])) {\n    coordinationTypes.forEach((coordinationType) => {\n      if (!pluginTypesPerView[viewType].includes(coordinationType)) {\n        pluginTypesPerView[viewType].push(coordinationType);\n      }\n    });\n  } else {\n    pluginTypesPerView[viewType] = coordinationTypes;\n  }\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {string} dataTypeName Name for the data type associated with the file type.\n * @param {class} dataSourceClass Data source class definition.\n * @param {class} dataLoaderClass Data loader class definition.\n */\nexport function registerPluginFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, dataTypeName, dataLoaderClass, dataSourceClass,\n) {\n  PLUGINS[PLUGIN_FILE_TYPES_KEY][fileTypeName] = [dataSourceClass, dataLoaderClass];\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileTypeName] = dataTypeName;\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {function} expansionFunction The file type expansion function.\n * Should take in a single file definition and return an array of\n * file definitions with valid fileType values.\n */\nexport function registerPluginConvenienceFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, expansionFunction,\n) {\n  PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileTypeName] = expansionFunction;\n}\n\n\n// Plugin getter functions.\n\nexport function getPluginViewTypes() {\n  return Object.keys(PLUGINS[PLUGIN_VIEW_TYPES_KEY]);\n}\n\nexport function getPluginViewType(viewType) {\n  return PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType];\n}\n\nexport function getPluginCoordinationTypes() {\n  return Object.keys(PLUGINS[PLUGIN_COORDINATION_TYPES_KEY]);\n}\n\nexport function getPluginCoordinationTypeDefaults() {\n  return PLUGINS[PLUGIN_COORDINATION_TYPES_KEY];\n}\n\nexport function getPluginCoordinationTypesForViewType(viewType) {\n  if (Array.isArray(PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType])) {\n    return PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType];\n  }\n  return [];\n}\n\nexport function getPluginFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_FILE_TYPES_KEY]);\n}\nexport function getPluginConvenienceFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY]);\n}\n\nexport function getDataTypeForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileType];\n}\nexport function getLoaderClassesForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPES_KEY][fileType];\n}\nexport function getExpansionFunctionForPluginConvenienceFileType(fileType) {\n  return PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileType];\n}\n\n// Getters that depend on plugins.\nexport function getFileTypes() {\n  return [\n    ...Object.values(FileType),\n    ...getPluginFileTypes(),\n  ];\n}\n\nexport function getCoordinationTypes() {\n  return [\n    ...Object.values(CoordinationType),\n    ...getPluginCoordinationTypes(),\n  ];\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getDefaultCoordinationValues() {\n  return {\n    ...DEFAULT_COORDINATION_VALUES,\n    ...getPluginCoordinationTypeDefaults(),\n  };\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getComponentCoordinationTypes() {\n  return {\n    ...COMPONENT_COORDINATION_TYPES,\n    ...fromEntries(getPluginViewTypes().map(viewType => ([\n      viewType,\n      getPluginCoordinationTypesForViewType(viewType),\n    ]))),\n  };\n}\n\nexport function getFileTypeDataTypeMapping() {\n  return {\n    ...FILE_TYPE_DATA_TYPE_MAPPING,\n    ...fromEntries(getPluginFileTypes().map(fileType => ([\n      fileType,\n      getDataTypeForPluginFileType(fileType),\n    ]))),\n  };\n}\n\nexport function getConvenienceFileTypes() {\n  return {\n    // TODO: import built-in convenience file types and include them here.\n    ...PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY],\n  };\n}\n","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n    placement = 'bottom-end',\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement={placement}\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","module.exports = require(\"@material-ui/core/Popper\");","import { makeStyles, createTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"lodash/difference\");","/* eslint-disable jsx-a11y/no-noninteractive-element-to-interactive-role */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useCallback, useState } from 'react';\nimport { Table, AutoSizer } from 'react-virtualized';\nimport uuidv4 from 'uuid/v4';\nimport union from 'lodash/union';\nimport difference from 'lodash/difference';\nimport isEqual from 'lodash/isEqual';\n\nconst SHIFT_KEYCODE = 16;\n\n/**\n * A table with \"selectable\" rows.\n * @prop {string[]} columns An array of column names, corresponding to data object properties.\n * @prop {object[]} data An array of data objects used to populate table rows.\n * @prop {function} onChange Callback function,\n * passed a selection object when `allowMultiple` is false (and `null` if `allowUncheck` is true),\n * or passed an array of selection objects when `allowMultiple` is true.\n * @prop {string} idKey The key for a unique identifier property of `data` objects.\n * @prop {string} valueKey If initially-selected rows are required,\n * this key specifies a boolean property of the `data` objects\n * indicating those rows that should be initially selected.\n * @prop {boolean} allowMultiple Whether to allow multiple rows to be selected.\n * @prop {boolean} allowUncheck Whether to allow selected rows to be un-checked. By default, false.\n * @prop {boolean} showTableHead Whether to show the table header element. By default, true.\n * @prop {boolean} showTableInputs Whether to show the table input elements for each row.\n * By default, false.\n */\nexport default function SelectableTable(props) {\n  const {\n    hasColorEncoding,\n    columns,\n    data,\n    onChange,\n    idKey = 'id',\n    valueKey = 'value',\n    allowMultiple = false,\n    allowUncheck = false,\n    showTableHead = true,\n    showTableInputs = false,\n    testHeight = undefined,\n    testWidth = undefined,\n  } = props;\n\n  const [selectedRows, setSelectedRows] = useState(null);\n  const [isCheckingMultiple, setIsCheckingMultiple] = useState(false);\n\n  // Enable selecting multiple rows while the shift key is down.\n  useEffect(() => {\n    function onKeyDown(event) {\n      if (allowMultiple && event.keyCode === SHIFT_KEYCODE) {\n        setIsCheckingMultiple(true);\n      }\n    }\n\n    function onKeyUp(event) {\n      if (allowMultiple && event.keyCode === SHIFT_KEYCODE) {\n        setIsCheckingMultiple(false);\n      }\n    }\n\n    window.addEventListener('keydown', onKeyDown);\n    window.addEventListener('keyup', onKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n      window.removeEventListener('keyup', onKeyUp);\n    };\n  }, [allowMultiple]);\n\n  // Callback function to update the `selectedRows` state.\n  const onSelectRow = useCallback((value, checked) => {\n    if (checked || allowUncheck) {\n      if (!isCheckingMultiple\n        && (checked || (!checked && allowMultiple && selectedRows.length > 1))\n      ) {\n        setSelectedRows([value]);\n      } else if (!allowMultiple && !checked) {\n        setSelectedRows([]);\n      } else {\n        setSelectedRows(\n          checked\n            ? union(selectedRows || [], [value])\n            : difference(selectedRows || [], [value]),\n        );\n      }\n    }\n  }, [allowMultiple, isCheckingMultiple, allowUncheck, selectedRows]);\n\n  // Handler for checkbox input elements.\n  const handleInputChange = useCallback((event) => {\n    const { target } = event;\n    const { checked } = target;\n    const { value } = target;\n    onSelectRow(value, checked);\n  }, [onSelectRow]);\n\n  // Function to map row IDs to corresponding objects\n  // to pass to the `onChange` callback.\n  const getDataFromIds = useCallback(ids => ids.map(id => ({\n    [idKey]: id,\n    data: data.find(item => item[idKey] === id),\n  })), [data, idKey]);\n\n  // Function to check if a row ID has been selected.\n  const isSelected = useCallback(id => (\n    Array.isArray(selectedRows) && selectedRows.includes(id)\n  ), [selectedRows]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Check whether an initial set of rows should be selected.\n    const initialSelectedRows = data\n      .map((d) => {\n        if (d[valueKey]) {\n          return d[idKey];\n        }\n        return null;\n      })\n      .filter(Boolean);\n    if (!isEqual(initialSelectedRows, selectedRows)) {\n      if (initialSelectedRows.length > 0) {\n        setSelectedRows(initialSelectedRows);\n      } else {\n        setSelectedRows(null);\n      }\n    }\n  }, [data, idKey, valueKey]);\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    // Call the `onChange` prop function with an updated row or set of rows.\n    if (!onChange || !selectedRows) {\n      return;\n    }\n    const selectedRowData = getDataFromIds(selectedRows);\n    if (allowMultiple) {\n      onChange(selectedRowData);\n    } else if (selectedRows.length === 1) {\n      onChange(selectedRowData[0]);\n    } else if (selectedRows.length === 0) {\n      onChange(null);\n    }\n  }, [selectedRows, allowMultiple]);\n\n  // Generate a unique ID to use in (for, id) label-input pairs.\n  const inputUuid = uuidv4();\n\n  // Class for first column of inputs, to hide them if desired.\n  const hiddenInputsClass = (showTableInputs ? '' : 'hidden-input-column');\n\n  const rowRenderer = ({ index, style }) => (\n    // eslint-disable-next-line jsx-a11y/interactive-supports-focus\n    <div\n      key={data[index][idKey]}\n      className={`table-item table-row ${isSelected(data[index][idKey]) ? 'row-checked ' : ''}`}\n      style={style}\n      role=\"button\"\n      onClick={() => onSelectRow(\n        data[index][idKey],\n        !isSelected(data[index][idKey]) || !hasColorEncoding,\n      )}\n    >\n      <div className={`input-container ${hiddenInputsClass} table-cell`}>\n        <label htmlFor={`${inputUuid}_${data[index][idKey]}`}>\n          <input\n            id={`${inputUuid}_${data[index][idKey]}`}\n            type=\"checkbox\"\n            className={(isCheckingMultiple ? 'checkbox' : 'radio')}\n            name={inputUuid}\n            value={data[index][idKey]}\n            onChange={handleInputChange}\n            checked={isSelected(data[index][idKey])}\n          />\n        </label>\n      </div>\n      {columns.map(column => (\n        <div\n          className=\"table-cell\"\n          key={column}\n        >\n          {data[index][column]}\n        </div>\n      ))}\n    </div>\n  );\n\n  const headerRowRenderer = ({ style }) => (\n    <div className={`${hiddenInputsClass} table-row`} style={style}>\n      {columns.map(column => (\n        <div key={column}>{column}</div>\n      ))}\n    </div>\n  );\n\n  return (\n    <div className=\"selectable-table\">\n      <AutoSizer>\n        {({ width, height }) => (\n          <Table\n            height={testHeight || height}\n            gridStyle={{ outline: 'none' }}\n            rowCount={data.length}\n            // 24 is 1 em + padding in either direction (see _selectable_table.scss).\n            rowHeight={24}\n            headerHeight={showTableHead ? 24 : undefined}\n            rowRenderer={rowRenderer}\n            width={testWidth || width}\n            headerRowRenderer={showTableHead ? headerRowRenderer : undefined}\n            rowGetter={({ index }) => data[index]}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport every from 'lodash/every';\nimport { SelectableTable } from '../selectable-table/index';\n\nexport default function Genes(props) {\n  const {\n    hasColorEncoding,\n    geneList = [],\n    geneSelection = [],\n    geneFilter = null,\n    setGeneSelection,\n    enableMultiSelect,\n  } = props;\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState(geneList);\n\n  useEffect(() => {\n    const results = geneList\n      .filter(gene => gene.toLowerCase().includes(searchTerm.toLowerCase()));\n    setSearchResults(results);\n  }, [searchTerm, geneList]);\n\n  function onChange(selection) {\n    if (setGeneSelection && selection) {\n      if (Array.isArray(selection)) {\n        if (selection.length > 0 && every(selection, s => s.name)) {\n          setGeneSelection(selection.map(s => s.name));\n        } else {\n          setGeneSelection(null);\n        }\n      } else if (selection.name) {\n        setGeneSelection([selection.name]);\n        setSearchTerm(selection.name);\n      }\n    }\n  }\n\n  const data = searchResults\n    .filter(gene => (geneFilter ? geneFilter.includes(gene) : true))\n    .sort((a, b) => a.localeCompare(b))\n    .map(\n      gene => ({ name: gene, value: (geneSelection ? geneSelection.includes(gene) : false) }),\n    );\n\n  const handleChange = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  return (\n    <>\n      <input\n        className=\"search-bar\"\n        type=\"text\"\n        placeholder=\"Search\"\n        value={searchTerm}\n        onChange={handleChange}\n      />\n      <SelectableTable\n        columns={['name']}\n        data={data}\n        hasColorEncoding={hasColorEncoding}\n        idKey=\"name\"\n        valueKey=\"value\"\n        onChange={onChange}\n        allowMultiple={enableMultiSelect}\n        allowUncheck={enableMultiSelect}\n        showTableHead={false}\n      />\n    </>\n  );\n}\n","module.exports = require(\"react-virtualized\");","import React, { useEffect } from 'react';\nimport { pluralize } from '../../utils';\nimport { useReady, useUrls } from '../hooks';\nimport { useExpressionAttrs } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nimport TitleInfo from '../TitleInfo';\nimport Genes from './Genes';\n\nconst GENES_DATA_TYPES = ['expression-matrix'];\n\n/**\n * A subscriber component for a gene listing component.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {string} props.variablesLabelOverride The singular form\n * of the name of the variable.\n * @param {string} props.variablesPluralLabelOverride The plural\n * form of the name of the variable.\n * @param {boolean} props.enableMultiSelect If true, allow\n * shift-clicking to select multiple genes.\n */\nexport default function GenesSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    variablesLabelOverride: variablesLabel = 'gene',\n    variablesPluralLabelOverride: variablesPluralLabel = `${variablesLabel}s`,\n    theme,\n    title = 'Expression Levels',\n    enableMultiSelect = false,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    featureSelection: geneSelection,\n    featureFilter: geneFilter,\n    obsColorEncoding: cellColorEncoding,\n  }, {\n    setFeatureSelection: setGeneSelection,\n    setFeatureFilter: setGeneFilter,\n    setFeatureHighlight: setGeneHighlight,\n    setObsColorEncoding: setCellColorEncoding,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.genes, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    GENES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [attrs] = useExpressionAttrs(\n    loaders, dataset, setItemIsReady, addUrl, true,\n  );\n  const geneList = attrs ? attrs.cols : [];\n  const numGenes = geneList.length;\n\n  function setGeneSelectionAndColorEncoding(newSelection) {\n    setGeneSelection(newSelection);\n    setCellColorEncoding('geneSelection');\n  }\n\n  return (\n    <TitleInfo\n      title={title}\n      info={`${numGenes} ${pluralize(variablesLabel, variablesPluralLabel, numGenes)}`}\n      theme={theme}\n      // Virtual scroll is used but this allows for the same styling as a scroll component\n      // even though this no longer uses the TitleInfo component's\n      // scroll css (SelectableTable is virtual scroll).\n      isScroll\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      urls={urls}\n    >\n      <Genes\n        hasColorEncoding={cellColorEncoding === 'geneSelection'}\n        geneList={geneList}\n        geneSelection={geneSelection}\n        geneFilter={geneFilter}\n        setGeneSelection={setGeneSelectionAndColorEncoding}\n        setGeneFilter={setGeneFilter}\n        setGeneHighlight={setGeneHighlight}\n        enableMultiSelect={enableMultiSelect}\n      />\n    </TitleInfo>\n  );\n}\n","module.exports = require(\"lodash/every\");","module.exports = require(\"lodash/union\");","export { default as GenesSubscriber } from './GenesSubscriber';\nexport { default as Genes } from './Genes';\n"],"sourceRoot":""}