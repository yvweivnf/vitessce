{"version":3,"sources":["../webpack/bootstrap","app/constants.js","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","utils.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"lodash/isEqual\"","../external \"@deck.gl/core\"","components/hooks.js","../external \"@material-ui/core/styles\"","components/sets/constants.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/DatasetNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","components/sets/utils.js","components/data-hooks.js","components/sets/cell-set-utils.js","app/state/coordination.js","components/classNames.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/spatial/constants.js","../external \"zustand\"","../external \"lodash/debounce\"","loaders/errors/AbstractLoaderError.js","../external \"lodash/range\"","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","app/constant-relationships.js","app/plugins.js","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/Paper\"","../external \"lodash/clamp\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","../external \"@material-ui/core/Popper\"","components/shared-mui/styles.js","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"@turf/helpers\"","../external \"uuid/v4\"","../external \"ajv\"","components/sets/io.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../external \"lodash/isNil\"","../external \"tinycolor2\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","components/vega/ReactVega.js","components/vega/VegaPlot.js","components/vega/utils.js","components/vega/index.js","../external \"@turf/centroid\"","../external \"concaveman\"","../external \"classnames\"","../external \"rc-tree\"","components/sets/CellSetSizesPlot.js","components/sets/Tree.js","components/sets/HelpTooltip.js","components/sets/Popover.js","components/sets/PopoverMenu.js","assets/menu.svg","components/sets/TreeNode.js","assets/sets/union.svg","assets/sets/intersection.svg","assets/sets/complement.svg","components/sets/SetsManagerButtons.js","components/sets/SetsManager.js","../external \"react-vega\"","components/sets/CellSetsManagerSubscriber.js","components/sets/CellSetSizesPlotSubscriber.js","../external \"d3-dsv\"","../external \"json2csv\"","../external \"clsx\"","../external \"rc-tree/es/util\"","../external \"react-color\"","../external \"rc-tooltip\"","../external \"vega-tooltip\"","components/sets/index.js"],"names":["Component","DESCRIPTION","STATUS","GENES","CELL_SETS","SCATTERPLOT","SPATIAL","HEATMAP","LAYER_CONTROLLER","CELL_SET_SIZES","GENOMIC_PROFILES","CELL_SET_EXPRESSION","EXPRESSION_HISTOGRAM","GATING","DataType","CELLS","EXPRESSION_MATRIX","MOLECULES","NEIGHBORHOODS","RASTER","FileType","CELLS_JSON","CELL_SETS_JSON","EXPRESSION_MATRIX_ZARR","GENOMIC_PROFILES_ZARR","MOLECULES_JSON","NEIGHBORHOODS_JSON","RASTER_JSON","RASTER_OME_ZARR","CLUSTERS_JSON","GENES_JSON","ANNDATA_CELL_SETS_ZARR","ANNDATA_CELLS_ZARR","ANNDATA_EXPRESSION_MATRIX_ZARR","CoordinationType","DATASET","OBS_TYPE","FEATURE_TYPE","FEATURE_VALUE_TYPE","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_OBS_SET_POLYGONS_VISIBLE","EMBEDDING_OBS_SET_LABELS_VISIBLE","EMBEDDING_OBS_SET_LABEL_SIZE","EMBEDDING_OBS_RADIUS","EMBEDDING_OBS_RADIUS_MODE","EMBEDDING_OBS_OPACITY","EMBEDDING_OBS_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","OBS_FILTER","OBS_HIGHLIGHT","OBS_SET_SELECTION","OBS_SET_HIGHLIGHT","OBS_SET_COLOR","FEATURE_FILTER","FEATURE_HIGHLIGHT","FEATURE_SELECTION","FEATURE_VALUE_COLORMAP","FEATURE_VALUE_TRANSFORM","FEATURE_VALUE_COLORMAP_RANGE","OBS_COLOR_ENCODING","SPATIAL_IMAGE_LAYER","SPATIAL_SEGMENTATION_LAYER","SPATIAL_POINT_LAYER","SPATIAL_NEIGHBORHOOD_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_OBS_SETS","MOLECULE_HIGHLIGHT","GATING_FEATURE_SELECTION_X","GATING_FEATURE_SELECTION_Y","FEATURE_VALUE_TRANSFORM_COEFFICIENT","fromEntries","iterable","reduce","obj","key","val","Object","assign","pluralize","singular","plural","count","capitalize","word","charAt","toUpperCase","slice","getLongestString","strings","prevLongest","currentValue","length","getNextScope","prevScopes","chars","nextCharIndices","next","r","forEach","charIndex","unshift","increment","i","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","Array","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","uid","newLayout","layout","filter","c","changeLayout","newComponentProps","newProps","useComponentLayout","component","scopes","coordinationScopes","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","map","undefined","shallow","setters","useMemo","setterName","setterFunc","useDatasetUids","datasetScopes","datasetUids","datasetScopesArr","datasetScope","useMultiDatasetCoordination","datasetValues","parameterSpace","parameterScope","console","error","datasetSetters","AUXILIARY_COORDINATION_TYPES_MAP","spatialImageLayer","mapCoordinationScopes","newCoordinationScopes","keys","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","theme","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateTracksHover","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","getStatsForResolution","resolution","height","width","depth","depthDownsampled","max","totalBytes","canLoadResolution","maxHeapSize","window","performance","memory","jsHeapSizeLimit","maxSize","getWindowDimensions","innerWidth","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellIndex","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","AbstractLoaderError","LoaderNotFoundError","DatasetNotFoundError","datasetUid","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","warnInConsole","initCoordinationSpace","initialValues","defaultCoordinationValues","getDefaultCoordinationValues","initialValue","shouldInit","equal","useDescription","dataset","description","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialSegmentationLayer","DEFAULT_CELLS_LAYER","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","a","spatialPointLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","generateKey","uuidv4","nodeToSet","currNode","flatMap","nodeToHeight","newLevel","childrenHeights","getNodeLength","acc","curr","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","splice","treeToUnion","checkedPaths","nodeSets","h","hEl","treeToIntersection","treeToComplement","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","concavity","Infinity","hullCoords","concaveman","centroidCoords","centroid","geometry","coordinates","hull","treeToSetSizesBySetNames","filterNode","filterPath","treeToExpectedCheckedLevel","lzn","levelZeroPath","range","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","nodeColorArray","getCellSetPolygons","params","cellSetSelection","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","DEFAULT_LAYER_TYPE_ORDERING","Error","LoadingIndicator","useStyles","makeStyles","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","FILE_TYPE_DATA_TYPE_MAPPING","PLUGINS_KEY","PLUGIN_VIEW_TYPES_KEY","PLUGIN_COORDINATION_TYPES_KEY","PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY","PLUGIN_FILE_TYPES_KEY","PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY","PLUGIN_CONVENIENCE_FILE_TYPES_KEY","PLUGINS","registerPluginCoordinationType","typeName","defaultValue","registerPluginViewType","viewType","viewSubscriberReactComponent","coordinationTypes","pluginTypesPerView","registerPluginFileType","fileTypeName","dataTypeName","dataLoaderClass","dataSourceClass","registerPluginConvenienceFileType","expansionFunction","getPluginViewTypes","getPluginViewType","getPluginCoordinationTypes","getPluginCoordinationTypeDefaults","getPluginCoordinationTypesForViewType","getPluginFileTypes","getPluginConvenienceFileTypes","getDataTypeForPluginFileType","fileType","getLoaderClassesForPluginFileType","getExpansionFunctionForPluginConvenienceFileType","getFileTypes","getCoordinationTypes","getComponentCoordinationTypes","getFileTypeDataTypeMapping","getConvenienceFileTypes","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","placement","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","maxHeight","position","left","top","textAlign","muiTheme","dark","createTheme","type","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","tryUpgradeTreeToLatestSchema","validate","Ajv","compile","valid","failureReason","errors","itemId","handleImportJSON","importData","parse","handleImportTabular","dsvParser","dsvFormat","row","groupName","setName","predictionScore","treeToImport","uniqueGroupNames","Set","groupRows","uniqueSetNames","setRows","levelOneNode","handleExportJSON","jsonString","dataString","encodeURIComponent","handleExportTabular","exportData","csvString","json2csv","fields","delimiter","downloadForUser","fileName","downloadAnchorNode","document","createElement","setAttribute","body","appendChild","click","remove","DATASET_NAME","isVega","spec","$schema","VegaPlot","partialSpec","signalListeners","vegaComponent","Handler","call","VEGA_THEMES","style","axis","domainColor","gridColor","tickColor","CellSetSizesPlot","rawData","marginBottom","keyLength","keyName","colors","domain","mark","encoding","x","field","labelExpr","sort","y","scale","legend","tooltip","clamp","config","Tree","React","forwardRef","prefixCls","className","showIcon","blockNode","checkable","classNames","defaultProps","virtual","HelpTooltip","content","overlayClassName","spanRef","overlay","trigger","mouseEnterDelay","mouseLeaveDelay","Popover","PopoverMenuListButton","subtitle","onClick","handler","handlerKey","confirm","isConfirming","setIsConfirming","handleOrRequireConfirm","titleWithConfirm","PopoverMenuList","menuConfig","handleColorChange","rgb","defaultPalette","PopoverMenu","setVisible","makeNodeViewMenuConfig","onCheckNode","onNodeRemove","onNodeSetIsEditing","onExportLevelZeroNodeJSON","onExportLevelZeroNodeTabular","onExportSetJSON","editable","exportable","checked","NamedSetNodeStatic","checkbox","isChecking","onNodeSetColor","onNodeView","expanded","onCheckLevel","checkedLevelPath","checkedLevelIndex","disableTooltip","shouldCheckNextLevel","nextLevelToCheck","numberFormatter","Intl","NumberFormat","niceSize","format","tooltipText","tooltipProps","popoverMenuConfig","NamedSetNodeEditing","onNodeSetName","onNodeCheckNewName","currentTitle","setCurrentTitle","hasConflicts","trySetName","target","select","NamedSetNode","isEditing","isCurrentSet","LevelsButtons","hasColorEncoding","onCheck","parseInt","isChecked","clsx","SwitcherIcon","isOpen","hexColor","TreeNode","renderSelector","isSelected","onDragStartProp","onDragStart","context","rcTree","prefixClass","draggable","wrapClass","isDraggable","setSelectHandle","getNodeState","renderCheckbox","renderLevels","renderSwitcher","onNodeExpand","onNodeExpandWrapper","switcherClass","loading","dragOver","dragOverGapTop","dragOverGapBottom","selected","halfChecked","onDragEndProp","onDragEnd","expandable","otherProps","filterTreeNode","disabled","isDisabled","dataAndAriaAttributeProps","getDataAndAria","onDragEnter","onDragOver","onDragLeave","onDrop","bind","renderChildren","RcTreeNode","PlusButton","onError","onImportTree","onCreateLevelZeroNode","importable","onImport","importHandler","mimeType","uploadInputNode","File","FileReader","FileList","Blob","files","reader","readAsText","SetOperationButtons","onUnion","onIntersection","onComplement","operatable","hasCheckedSetsToUnion","hasCheckedSetsToIntersect","hasCheckedSetsToComplement","processSets","sets","getAllKeys","v","SetsManager","additionalSets","checkedLevel","levelSelection","setSelection","setExpansion","onExpandNode","onDropNode","autoExpandParent","isDragging","setIsDragging","isEditingNodeName","setIsEditingNodeName","processedSets","processedAdditionalSets","additionalSetKeys","allSetSelectionKeys","allSetExpansionKeys","setSelectionKeys","setExpansionKeys","additionalSetSelectionKeys","additionalSetExpansionKeys","renderTreeNodes","readOnly","checkedKeys","expandedKeys","dropKey","eventKey","dragKey","dragNode","dropToGap","dropPosition","CELL_SETS_DATA_TYPES","CellSetsManagerSubscriber","obsSetSelection","obsSetColor","additionalObsSets","cellColorEncoding","obsColorEncoding","setObsSetSelection","setObsColorEncoding","setObsSetColor","setAdditionalObsSets","cellSetExpansion","setCellSetExpansion","upgradedCellSets","allCellIds","setCellSetColorEncoding","mergedCellSets","levelZeroName","newCellSetSelection","targetKey","split","dropPath","dropNode","dropNodeLevel","dropNodeIsLevelZero","dragPath","dropParentNode","dropParentPath","dropNodeCurrIndex","findIndex","hasSiblingNameConflict","dragNodeName","newDragPath","addChildFunction","checkPathFunction","newLevelZero","oldColors","newColors","newCellSetColor","prevNodeColor","nextNamePath","pop","renameNode","nextCellSetSelection","nextCellSetExpansion","setsToView","viewNode","expandedPath","targetNode","newSet","importAutoSetColors","packageJson","CELL_SET_SIZES_DATA_TYPES","CellSetSizesPlotSubscriber","cellSetSizes"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;;;;GAKO,GAAMA,UAAS,CAAG,CACvBC,WAAW,CAAE,aADU,CAEvBC,MAAM,CAAE,QAFe,CAGvBC,KAAK,CAAE,OAHgB,CAIvBC,SAAS,CAAE,UAJY,CAKvBC,WAAW,CAAE,aALU,CAMvBC,OAAO,CAAE,SANc,CAOvBC,OAAO,CAAE,SAPc,CAQvBC,gBAAgB,CAAE,iBARK,CASvBC,cAAc,CAAE,cATO,CAUvBC,gBAAgB,CAAE,iBAVK,CAWvBC,mBAAmB,CAAE,mBAXE,CAYvBC,oBAAoB,CAAE,qBAZC,CAavBC,MAAM,CAAE,QAbe,CAAlB,CAgBA,GAAMC,SAAQ,CAAG,CACtBC,KAAK,CAAE,OADe,CAEtBX,SAAS,CAAE,WAFW,CAGtBY,iBAAiB,CAAE,mBAHG,CAItBN,gBAAgB,CAAE,kBAJI,CAKtBO,SAAS,CAAE,WALW,CAMtBC,aAAa,CAAE,eANO,CAOtBC,MAAM,CAAE,QAPc,CAAjB,CAWA,GAAMC,SAAQ,CAAG,CACtBC,UAAU,CAAE,YADU,CAEtBC,cAAc,CAAE,gBAFM,CAGtBC,sBAAsB,CAAE,wBAHF,CAItBC,qBAAqB,CAAE,uBAJD,CAKtBC,cAAc,CAAE,gBALM,CAMtBC,kBAAkB,CAAE,oBANE,CAOtBC,WAAW,CAAE,aAPS,CAQtBC,eAAe,CAAE,iBARK,CAStBC,aAAa,CAAE,eATO,CAUtBC,UAAU,CAAE,YAVU,CAWtBC,sBAAsB,CAAE,wBAXF,CAYtBC,kBAAkB,CAAE,oBAZE,CAatBC,8BAA8B,CAAE,gCAbV,CAAjB,CAgBP;;;GAIO,GAAMC,iBAAgB,CAAG,CAC9BC,OAAO,CAAE,SADqB,CAE9B;AACAC,QAAQ,CAAE,SAHoB,CAI9BC,YAAY,CAAE,aAJgB,CAK9BC,kBAAkB,CAAE,kBALU,CAM9B;AACAC,cAAc,CAAE,eAPc,CAQ9BC,cAAc,CAAE,eARc,CAS9BC,kBAAkB,CAAE,mBATU,CAU9BC,kBAAkB,CAAE,kBAVU,CAW9BC,kBAAkB,CAAE,kBAXU,CAY9BC,kBAAkB,CAAE,kBAZU,CAa9BC,kCAAkC,CAAE,gCAbN,CAc9BC,gCAAgC,CAAE,8BAdJ,CAe9BC,4BAA4B,CAAE,0BAfA,CAgB9BC,oBAAoB,CAAE,oBAhBQ,CAiB9BC,yBAAyB,CAAE,wBAjBG,CAkB9BC,qBAAqB,CAAE,qBAlBO,CAmB9BC,0BAA0B,CAAE,yBAnBE,CAoB9BC,YAAY,CAAE,aApBgB,CAqB9BC,gBAAgB,CAAE,iBArBY,CAsB9BC,gBAAgB,CAAE,gBAtBY,CAuB9BC,gBAAgB,CAAE,gBAvBY,CAwB9BC,gBAAgB,CAAE,gBAxBY,CAyB9BC,kBAAkB,CAAE,kBAzBU,CA0B9BC,kBAAkB,CAAE,kBA1BU,CA2B9BC,kBAAkB,CAAE,kBA3BU,CA4B9BC,sBAAsB,CAAE,sBA5BM,CA6B9BC,kBAAkB,CAAE,kBA7BU,CA8B9BC,kBAAkB,CAAE,kBA9BU,CA+B9BC,cAAc,CAAE,cA/Bc,CAgC9BC,cAAc,CAAE,cAhCc,CAiC9BC,gBAAgB,CAAE,gBAjCY,CAkC9BC,gBAAgB,CAAE,gBAlCY,CAmC9BC,UAAU,CAAE,WAnCkB,CAoC9BC,aAAa,CAAE,cApCe,CAqC9BC,iBAAiB,CAAE,iBArCW,CAsC9BC,iBAAiB,CAAE,iBAtCW,CAuC9BC,aAAa,CAAE,aAvCe,CAwC9BC,cAAc,CAAE,eAxCc,CAyC9BC,iBAAiB,CAAE,kBAzCW,CA0C9BC,iBAAiB,CAAE,kBA1CW,CA2C9BC,sBAAsB,CAAE,sBA3CM,CA4C9BC,uBAAuB,CAAE,uBA5CK,CA6C9BC,4BAA4B,CAAE,2BA7CA,CA8C9BC,kBAAkB,CAAE,kBA9CU,CA+C9BC,mBAAmB,CAAE,mBA/CS,CAgD9BC,0BAA0B,CAAE,0BAhDE,CAiD9BC,mBAAmB,CAAE,mBAjDS,CAkD9BC,0BAA0B,CAAE,0BAlDE,CAmD9BC,cAAc,CAAE,cAnDc,CAoD9BC,cAAc,CAAE,cApDc,CAqD9BC,gBAAgB,CAAE,gBArDY,CAsD9BC,gBAAgB,CAAE,gBAtDY,CAuD9BC,mBAAmB,CAAE,mBAvDS,CAwD9B;AACAC,kBAAkB,CAAE,mBAzDU,CA0D9BC,0BAA0B,CAAE,yBA1DE,CA2D9BC,0BAA0B,CAAE,yBA3DE,CA4D9BC,mCAAmC,CAAE,kCA5DP,CAAzB,C;;;;;;ACpDP,kC;;;;;;;ACAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;ACbe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc;AACtB,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,C;;;;;;;;;;;;AClCkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;;;;;;;;;;ACNA,gC,CAEA;AACO,QAASC,YAAT,CAAqBC,QAArB,CAA+B,CACpC,MAAO,6MAAIA,QAAJ,EACJC,MADI,CACG,SAACC,GAAD,UAAWC,IAAX,MAAQ,CAAR,EAAmBC,GAAnB,MAAgB,CAAhB,QAA6BC,OAAM,CAACC,MAAP,CAAcJ,GAAd,6MAAsBC,GAAtB,CAA4BC,GAA5B,EAA7B,EADH,CACoE,EADpE,CAAP,CAED,CAED;;;;;;;GAQO,QAASG,UAAT,CAAmBC,QAAnB,CAA6BC,MAA7B,CAAqCC,KAArC,CAA4C,CACjD,MAAQA,MAAK,GAAK,CAAV,CAAcF,QAAd,CAAyBC,MAAjC,CACD,CAED;;;;GAKO,QAASE,WAAT,CAAoBC,IAApB,CAA0B,CAC/B,MAAOA,KAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,WAAf,GAA+BF,IAAI,CAACG,KAAL,CAAW,CAAX,CAAtC,CACD,CAED;;;;GAKO,QAASC,iBAAT,CAA0BC,OAA1B,CAAmC,CACxC,MAAOA,QAAO,CAAChB,MAAR,CACL,SAACiB,WAAD,CAAcC,YAAd,QACED,YAAW,CAACE,MAAZ,CAAqBD,YAAY,CAACC,MAAlC,CAA2CF,WAA3C,CAAyDC,YAD3D,EADK,CAAP,CAKD,CAED;;;;;;;;;GAUO,QAASE,aAAT,CAAsBC,UAAtB,CAAkC,CACvC;AACA,GAAMC,MAAK,CAAG,4BAAd,CACA;AACA;AACA;AACA,GAAMC,gBAAe,CAAG,CAAC,CAAD,CAAxB,CAEA;AACA;AACA;AACA,QAASC,KAAT,EAAgB,CACd,GAAMC,EAAC,CAAG,EAAV,CACAF,eAAe,CAACG,OAAhB,CAAwB,SAACC,SAAD,CAAe,CACrCF,CAAC,CAACG,OAAF,CAAUN,KAAK,CAACK,SAAD,CAAf,EACD,CAFD,EAGA,GAAIE,UAAS,CAAG,IAAhB,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGP,eAAe,CAACJ,MAApC,CAA4CW,CAAC,EAA7C,CAAiD,CAC/C,GAAM3B,IAAG,CAAG,EAAEoB,eAAe,CAACO,CAAD,CAA7B,CACA,GAAI3B,GAAG,EAAImB,KAAK,CAACH,MAAjB,CAAyB,CACvBI,eAAe,CAACO,CAAD,CAAf,CAAqB,CAArB,CACD,CAFD,IAEO,CACLD,SAAS,CAAG,KAAZ,CACA,MACD,CACF,CACD,GAAIA,SAAJ,CAAe,CACbN,eAAe,CAACQ,IAAhB,CAAqB,CAArB,EACD,CACD,MAAON,EAAC,CAACO,IAAF,CAAO,EAAP,CAAP,CACD,CAED,GAAIC,UAAJ,CACA,EAAG,CACDA,SAAS,CAAGT,IAAI,EAAhB,CACD,CAFD,MAESH,UAAU,CAACa,QAAX,CAAoBD,SAApB,CAFT,EAGA,MAAOA,UAAP,CACD,CAED;;;;;;GAOO,QAASE,oBAAT,CAA6BC,MAA7B,CAAqCC,KAArC,CAA4C,IACzCC,KADyC,CAChCF,MADgC,CACzCE,IADyC,CAEjD,GAAMC,OAAM,CAAGC,KAAK,CAACC,OAAN,CAAcH,IAAd,EAAsBA,IAAI,CAAED,KAAK,EAAIC,IAAI,CAACnB,MAAL,CAAc,CAAzB,CAA1B,CAAyDmB,IAAxE,CACA,MAAOC,OAAP,CACD,CAED;;;GAIO,QAASG,MAAT,CAAeN,MAAf,CAAuB,CAC5B,GAAMG,OAAM,CAAGJ,mBAAmB,CAACC,MAAD,CAAlC,CAD4B,GAEpBO,MAFoB,CAEKJ,MAFL,CAEpBI,KAFoB,CAEbC,KAFa,CAEKL,MAFL,CAEbK,KAFa,CAENC,MAFM,CAEKN,MAFL,CAENM,MAFM,CAG5B,GAAMC,YAAW,CAAGH,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAzB,CACA,MAAQD,YAAW,GAAK,CAAjB,EAAuBF,KAAK,GAAK,OAAxC,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GD;AACA;mBAKII,sDAAa,E,CAHLC,uB,gBAAVC,Q,CACUC,uB,gBAAVC,Q,CACaC,0B,gBAAbC,W,CAGK,GAAMC,mBAAkB,CAAGN,uBAA3B,CACA,GAAMO,mBAAkB,CAAGL,uBAA3B,CACA,GAAMM,sBAAqB,CAAGJ,0BAA9B,C,oBAKHL,sDAAa,E,CAFLU,sB,iBAAVR,Q,CACUS,sB,iBAAVP,Q,CAGK,GAAMQ,kBAAiB,CAAGF,sBAA1B,CACA,GAAMG,kBAAiB,CAAGF,sBAA1B,CAGP;;;;;;GAOO,GAAMG,sBAAqB,CAAG,QAAxBA,sBAAwB,SAAMC,+CAAM,CAAC,SAAAC,GAAG,QAAK,CACxD;AACA;AACA;AACAC,UAAU,CAAE,IAJ4C,CAKxD;AACA;AACAC,OAAO,CAAE,IAP+C,CAQxD;AACA;AACAC,aAAa,CAAE,uBAAAF,UAAU,QAAID,IAAG,CAAC,CAAEC,UAAU,CAAVA,UAAF,CAAD,CAAP,EAV+B,CAWxDG,UAAU,CAAE,oBAAAF,OAAO,QAAIF,IAAG,CAAC,CAAEE,OAAO,CAAPA,OAAF,CAAD,CAAP,EAXqC,CAYxDG,oBAAoB,CAAE,uCAAGC,UAAH,MAAGA,SAAH,CAAcC,KAAd,MAAcA,KAAd,CAAqBC,KAArB,MAAqBA,KAArB,OAAiCR,IAAG,CAAC,SAAAS,KAAK,QAAK,CACnER,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERS,iBAAiB,CAAC,2MACbD,KAAK,CAACR,UAAN,CAAiBS,iBADL,6MAEdJ,SAFc,4MAGVG,KAAK,CAACR,UAAN,CAAiBS,iBAAjB,CAAmCJ,SAAnC,CAHU,6MAIZC,KAJY,CAIJC,KAJI,IAFT,EADyD,CAAL,EAAN,CAApC,EAZkC,CAwBxDG,eAAe,CAAE,yBAAAC,GAAG,QAAIZ,IAAG,CAAC,SAACS,KAAD,CAAW,CACrC,GAAMI,UAAS,CAAGJ,KAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBC,MAAxB,CAA+B,SAAAC,CAAC,QAAIA,EAAC,CAACJ,GAAF,GAAUA,GAAd,EAAhC,CAAlB,CACA,MAAO,CACLX,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERa,MAAM,CAAED,SAFA,EADL,CAAP,CAMD,CAR0B,CAAP,EAxBoC,CAiCxDI,YAAY,CAAE,sBAAAC,iBAAiB,QAAIlB,IAAG,CAAC,SAACS,KAAD,CAAW,CAChD,GAAMI,UAAS,CAAGJ,KAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBhE,KAAxB,EAAlB,CACAoE,iBAAiB,CAACxD,OAAlB,CAA0B,eAAmB,4NAAjBI,CAAiB,UAAdqD,QAAc,UAC3CN,SAAS,CAAC/C,CAAD,CAAT,4MACK+C,SAAS,CAAC/C,CAAD,CADd,IAEKqD,QAFL,EAID,CALD,EAMA,MAAO,CACLlB,UAAU,CAAC,2MACNQ,KAAK,CAACR,UADD,EAERa,MAAM,CAAED,SAFA,EADL,CAAP,CAMD,CAdqC,CAAP,EAjCyB,CAAL,EAAJ,CAAZ,EAA9B,CAkDP;;;;GAKO,GAAMO,mBAAkB,CAAG,QAArBA,mBAAqB,CAACC,SAAD,CAAYC,MAAZ,CAAoBC,kBAApB,QAA2C/B,mBAAkB,CAC7F,SAAAiB,KAAK,QAAIA,MAAK,CAACR,UAAN,CAAiBa,MAAjB,CAAwBC,MAAxB,CAA+B,SAAAS,CAAC,QAAIA,EAAC,CAACH,SAAF,GAAgBA,SAApB,EAAhC,EAA+DN,MAA/D,CACP,SAAAS,CAAC,QAAIF,OAAM,CAACG,KAAP,CAAa,SAAAlB,KAAK,QAAIiB,EAAC,CAACD,kBAAF,CAAqBhB,KAArB,IACjBgB,kBAAkB,CAAChB,KAAD,CADL,EAAlB,CAAJ,EADM,CAAJ,EADwF,CAA7D,EAA3B,CAOP;;;;;;;;;;;GAYO,GAAMmB,qBAAoB,CAAG,QAAvBA,qBAAuB,SAAM3B,+CAAM,CAAC,SAAAC,GAAG,QAAK,CACvD2B,cAAc,CAAE,IADuC,CAEvDtB,oBAAoB,CAAE,wCAAGC,UAAH,OAAGA,SAAH,CAAcC,KAAd,OAAcA,KAAd,CAAqBC,KAArB,OAAqBA,KAArB,OAAiCR,IAAG,CAAC,SAAAS,KAAK,QAAK,CACnEkB,cAAc,CAAC,2MACVlB,KAAK,CAACkB,cADG,6MAEXrB,SAFW,6MAGTC,KAHS,CAGDC,KAHC,GADqD,CAAL,EAAN,CAApC,EAFiC,CAAL,EAAJ,CAAZ,EAA7B,CAYP;;;;;GAMA,GAAMoB,cAAa,CAAG7B,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACnC;AACA;AACA;AACA6B,cAAc,CAAE,IAJmB,CAKnCC,iBAAiB,CAAE,2BAAAD,cAAc,QAAI7B,IAAG,CAAC,CAAE6B,cAAc,CAAdA,cAAF,CAAD,CAAP,EALE,CAAL,EAAJ,CAA5B,CAQA;;;;GAKA,GAAME,aAAY,CAAGhC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CAClC;AACA;AACAgC,OAAO,CAAE,IAHyB,CAIlCC,UAAU,CAAE,oBAAAD,OAAO,QAAIhC,IAAG,CAAC,CAAEgC,OAAO,CAAPA,OAAF,CAAD,CAAP,EAJe,CAAL,EAAJ,CAA3B,CAOA;;;;;GAMA,GAAME,iBAAgB,CAAGnC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACtC;AACA;AACA;AACAmC,QAAQ,CAAE,EAJ4B,CAKtCC,oBAAoB,CAAE,8BAACC,IAAD,CAAOF,QAAP,QAAoBnC,IAAG,CAAC,SAAAS,KAAK,QAAK,CACtD0B,QAAQ,CAAC,2MACJ1B,KAAK,CAAC0B,QADH,6MAELE,IAFK,CAEEF,QAFF,EAD8C,CAAL,EAAN,CAAvB,EALgB,CAAL,EAAJ,CAA/B,CAaA;;;;;GAMA,GAAMG,iBAAgB,CAAGvC,8CAAM,CAAC,SAAAC,GAAG,QAAK,CACtCuC,WAAW,CAAE,EADyB,CAEtCC,oBAAoB,CAAE,sCAAMxC,IAAG,CAAC,SAAAS,KAAK,QAAK,CACxC8B,WAAW,CAAE9B,KAAK,CAAC8B,WAAN,CAAoB,CADO,CAAL,EAAN,CAAT,EAFgB,CAAL,EAAJ,CAA/B,CAOA;;;;;;;;;;;;;;;GAgBO,QAASE,gBAAT,CAAyBC,UAAzB,CAAqCnB,kBAArC,CAAyD,CAC9D,GAAMlB,qBAAoB,CAAGb,kBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA/C,CAEA,GAAMsC,OAAM,CAAGnD,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACnCC,kBADmC,CACbD,KAAK,CAACR,UADO,CACnCS,iBADmC,CAE3C,MAAO5E,mEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC/C,GAAII,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAME,MAAK,CAAGE,iBAAiB,CAACJ,SAAD,CAAjB,CAA6BiB,kBAAkB,CAACjB,SAAD,CAA/C,CAAd,CACA,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CATgC,CAS9BC,sDAT8B,CAAjC,CAWA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CACtE,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAM4C,WAAU,CAAG,QAAbA,WAAa,CAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CAC/CC,SAAS,CAATA,SAD+C,CAE/CC,KAAK,CAAEgB,kBAAkB,CAACjB,SAAD,CAFsB,CAG/CE,KAAK,CAALA,KAH+C,CAAD,CAAxB,EAAxB,CAKA,MAAO,CAACyC,UAAD,CAAaC,UAAb,CAAP,CACF;AACC,CATyC,CAAD,CAAjB,EAAD,CASlB,CAACR,UAAD,CAAanB,kBAAb,CATkB,CAAvB,CAWA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED;;;;GAKO,QAASI,eAAT,CAAwB5B,kBAAxB,CAA4C,CACjD,GAAMjB,UAAS,CAAGlI,mEAAgB,CAACC,OAAnC,CACA,GAAM+K,cAAa,CAAG7B,kBAAkB,CAACjB,SAAD,CAAxC,CAEA;AACA,GAAM+C,YAAW,CAAG7D,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACxCC,kBADwC,CAClBD,KAAK,CAACR,UADY,CACxCS,iBADwC,CAEhD;AACA,GAAM4C,iBAAgB,CAAG9E,KAAK,CAACC,OAAN,CAAc2E,aAAd,EAA+BA,aAA/B,CAA+C,CAACA,aAAD,CAAxE,CACA,MAAOtH,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CACxD,GAAI7C,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAME,MAAK,CAAGE,iBAAiB,CAACJ,SAAD,CAAjB,CAA6BiD,YAA7B,CAAd,CACA,MAAO,CAACA,YAAD,CAAe/C,KAAf,CAAP,CACD,CACD,MAAO,CAAC+C,YAAD,CAAeV,SAAf,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CAXqC,CAWnCC,sDAXmC,CAAtC,CAaA,MAAOO,YAAP,CACD,CAED;;;;;;;;;GAUO,QAASG,4BAAT,CAAqCd,UAArC,CAAiDnB,kBAAjD,CAAqE,CAC1E,GAAMlB,qBAAoB,CAAGb,kBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA/C,CAEA,GAAM+C,cAAa,CAAG7B,kBAAkB,CAACnJ,mEAAgB,CAACC,OAAlB,CAAxC,CAEA;AACA,GAAMiL,iBAAgB,CAAG9E,KAAK,CAACC,OAAN,CAAc2E,aAAd,EAA+BA,aAA/B,CAA+C,CAACA,aAAD,CAAxE,CAEA,GAAMT,OAAM,CAAGnD,kBAAkB,CAAC,SAACiB,KAAD,CAAW,IACnCC,kBADmC,CACbD,KAAK,CAACR,UADO,CACnCS,iBADmC,CAE3C,MAAO5E,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CACxD,GAAME,cAAa,CAAG3H,kEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC9D,GAAII,iBAAiB,EAAIA,iBAAiB,CAACJ,SAAD,CAA1C,CAAuD,CACrD,GAAIE,MAAJ,CACA,GAAMkD,eAAc,CAAGhD,iBAAiB,CAACJ,SAAD,CAAxC,CACA,GAAMqD,eAAc,CAAGpC,kBAAkB,CAACjB,SAAD,CAAzC,CACA,GAAI,MAAOqD,eAAP,GAA0B,QAA9B,CAAwC,CACtCnD,KAAK,CAAGkD,cAAc,CAACC,cAAc,CAACJ,YAAD,CAAf,CAAtB,CACD,CAFD,IAEO,IAAI,MAAOI,eAAP,GAA0B,QAA9B,CAAwC,CAC7CnD,KAAK,CAAGkD,cAAc,CAACC,cAAD,CAAtB,CACD,CAFM,IAEA,CACLC,OAAO,CAACC,KAAR,kCAAwCvD,SAAxC,wCACD,CACD,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CAfiC,CAAD,CAAjC,CAgBA,MAAO,CAACU,YAAD,CAAeE,aAAf,CAAP,CACD,CAlBkB,CAAD,CAAlB,CAmBD,CArBgC,CAqB9BX,sDArB8B,CAAjC,CAuBA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAACwH,gBAAgB,CAACV,GAAjB,CAAqB,SAACW,YAAD,CAAkB,CAC/E,GAAMO,eAAc,CAAGhI,kEAAW,CAAC4G,UAAU,CAACE,GAAX,CAAe,SAACtC,SAAD,CAAe,CAC/D,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAI4C,WAAJ,CACA,GAAMS,eAAc,CAAGpC,kBAAkB,CAACjB,SAAD,CAAzC,CACA,GAAI,MAAOqD,eAAP,GAA0B,QAA9B,CAAwC,CACtCT,UAAU,CAAG,oBAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CACzCC,SAAS,CAATA,SADyC,CAEzCC,KAAK,CAAEoD,cAAc,CAACJ,YAAD,CAFoB,CAGzC/C,KAAK,CAALA,KAHyC,CAAD,CAAxB,EAAlB,CAKD,CAND,IAMO,IAAI,MAAOmD,eAAP,GAA0B,QAA9B,CAAwC,CAC7CT,UAAU,CAAG,oBAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CACzCC,SAAS,CAATA,SADyC,CAEzCC,KAAK,CAAEoD,cAFkC,CAGzCnD,KAAK,CAALA,KAHyC,CAAD,CAAxB,EAAlB,CAKD,CANM,IAMA,CACLoD,OAAO,CAACC,KAAR,kCAAwCvD,SAAxC,wCACD,CACD,MAAO,CAAC2C,UAAD,CAAaC,UAAb,CAAP,CACD,CApBkC,CAAD,CAAlC,CAqBA,MAAO,CAACK,YAAD,CAAeO,cAAf,CAAP,CACF;AACC,CAxByC,CAAD,CAAjB,EAAD,CAwBlB,CAACpB,UAAD,CAAanB,kBAAb,CAxBkB,CAAvB,CA0BA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED,GAAMgB,iCAAgC,CAAG,CACvCC,iBAAiB,CAAE,CAAC,uBAAD,CAA0B,2BAA1B,CADoB,CAAzC,CAIA;;;;;;;GAQA,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAwB,CAAC1C,kBAAD,CAAwB,CACpD,GAAM2C,sBAAqB,CAAG,EAA9B,CACA9H,MAAM,CAAC+H,IAAP,CAAY5C,kBAAZ,EAAgC7D,OAAhC,CAAwC,SAACxB,GAAD,CAAS,CAC/C,GAAMkI,qBAAoB,CAAGL,gCAAgC,CAAC7H,GAAD,CAAhC,EAAyC,EAAtE,CACAkI,oBAAoB,CAAC1G,OAArB,CAA6B,SAAC2G,gBAAD,CAAsB,CACjDH,qBAAqB,CAACG,gBAAgB,EAAInI,GAArB,CAArB,CAAiDqF,kBAAkB,CAACrF,GAAD,CAAnE,CACD,CAFD,EAGD,CALD,EAMA,MAAOgI,sBAAP,CACD,CATD,CAWA,GAAMI,cAAa,CAAG,QAAhBA,cAAgB,CAAA5B,UAAU,QAAIA,WAAU,CAC3CE,GADiC,CAC7B,SAAAtC,SAAS,QAAIyD,iCAAgC,CAACzD,SAAD,CAApC,EADoB,EAC6BS,MAD7B,CACoCwD,OADpC,EAC6CC,IAD7C,EAAJ,EAAhC,CAGA;;;;;;;;;;;;;;;GAgBO,QAASC,yBAAT,CAAkC/B,UAAlC,CAA8CnB,kBAA9C,CAAkE,CACvE,GAAMlB,qBAAoB,CAAGR,iBAAiB,CAAC,SAAAY,KAAK,QAAIA,MAAK,CAACJ,oBAAV,EAAN,CAA9C,CACA,GAAMqE,yBAAwB,CAAGT,qBAAqB,CAAC1C,kBAAD,CAAtD,CACA,GAAMoD,iBAAgB,CAAGL,aAAa,CAAC5B,UAAD,CAAtC,CACA,GAAMC,OAAM,CAAG9C,iBAAiB,CAAC,SAACY,KAAD,CAAW,IAClCkB,eADkC,CACflB,KADe,CAClCkB,cADkC,CAE1C,MAAO7F,mEAAW,CAAC6I,gBAAgB,CAAC/B,GAAjB,CAAqB,SAACtC,SAAD,CAAe,CACrD,GAAIqB,cAAc,EAAIA,cAAc,CAACrB,SAAD,CAApC,CAAiD,CAC/C,GAAME,MAAK,CAAGmB,cAAc,CAACrB,SAAD,CAAd,CAA0BoE,wBAAwB,CAACpE,SAAD,CAAlD,CAAd,CACA,MAAO,CAACA,SAAD,CAAYE,KAAZ,CAAP,CACD,CACD,MAAO,CAACF,SAAD,CAAYuC,SAAZ,CAAP,CACD,CANkB,CAAD,CAAlB,CAOD,CAT+B,CAS7BC,sDAT6B,CAAhC,CAUA,GAAMC,QAAO,CAAGC,qDAAO,CAAC,iBAAMlH,mEAAW,CAAC6I,gBAAgB,CAAC/B,GAAjB,CAAqB,SAACtC,SAAD,CAAe,CAC5E,GAAM2C,WAAU,cAASvG,iEAAU,CAAC4D,SAAD,CAAnB,CAAhB,CACA,GAAM4C,WAAU,CAAG,QAAbA,WAAa,CAAA1C,KAAK,QAAIH,qBAAoB,CAAC,CAC/CC,SAAS,CAATA,SAD+C,CAE/CC,KAAK,CAAEmE,wBAAwB,CAACpE,SAAD,CAFgB,CAG/CE,KAAK,CAALA,KAH+C,CAAD,CAAxB,EAAxB,CAKA,MAAO,CAACyC,UAAD,CAAaC,UAAb,CAAP,CACF;AACC,CATyC,CAAD,CAAjB,EAAD,CASlB,CAACR,UAAD,CAAanB,kBAAb,CATkB,CAAvB,CAWA,MAAO,CAACoB,MAAD,CAASI,OAAT,CAAP,CACD,CAED;;;;;GAMO,QAAS6B,WAAT,EAAsB,CAC3B,MAAOpF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACP,OAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS2E,UAAT,EAAqB,CAC1B,MAAOrF,mBAAkB,CAAC,SAAAiB,KAAK,iDAAIA,KAAK,CAACR,UAAV,4CAAI,kBAAkBa,MAAtB,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAASgE,mBAAT,EAA8B,CACnC,MAAOtF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACE,eAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAASoE,gBAAT,EAA2B,CAChC,MAAOvF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACQ,YAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS+D,cAAT,EAAyB,CAC9B,MAAOxF,mBAAkB,CAAC,SAAAiB,KAAK,QAAIA,MAAK,CAACL,UAAV,EAAN,CAAzB,CACD,CAED;;;;;GAMO,QAAS6E,iBAAT,CAA0BC,kBAA1B,CAA8C,CACnD,GAAMC,iBAAgB,CAAGC,oDAAM,CAACF,kBAAkB,CAACG,QAAnB,GAA8BlF,aAA/B,CAA/B,CACA,GAAMA,cAAa,CAAGgF,gBAAgB,CAACG,OAAvC,CACA,MAAOnF,cAAP,CACD,CAED;;;;;GAMO,QAASoF,kBAAT,EAA6B,CAClC,MAAO3D,cAAa,CAAC,SAAAnB,KAAK,QAAIA,MAAK,CAACoB,cAAV,EAAN,CAApB,CACD,CAED;;;;;GAMO,QAAS2D,qBAAT,EAAgC,CACrC,MAAO5D,cAAa,CAAC,SAAAnB,KAAK,QAAIA,MAAK,CAACqB,iBAAV,EAAN,CAApB,CACD,CAED;;;;;GAMO,QAAS2D,WAAT,EAAsB,CAC3B,MAAO1D,aAAY,CAAC,SAAAtB,KAAK,QAAIA,MAAK,CAACuB,OAAV,EAAN,CAAnB,CACD,CAED;;;;;GAMO,QAAS0D,cAAT,EAAyB,CAC9B,MAAO3D,aAAY,CAAC,SAAAtB,KAAK,QAAIA,MAAK,CAACwB,UAAV,EAAN,CAAnB,CACD,CAED;;;;;GAMO,QAAS0D,qBAAT,CAA8BtD,IAA9B,CAAoC,CACzC,MAAOH,iBAAgB,CAAC0D,yDAAW,CAAC,SAAAnF,KAAK,QAAIA,MAAK,CAAC0B,QAAN,CAAeE,IAAf,CAAJ,EAAN,CAAgC,CAACA,IAAD,CAAhC,CAAZ,CAAvB,CACD,CAED;;;;;GAMO,QAASwD,wBAAT,CAAiCxD,IAAjC,CAAuC,CAC5C,GAAMyD,eAAc,CAAGV,oDAAM,CAAClD,gBAAgB,CAACmD,QAAjB,GAA4BjD,oBAA7B,CAA7B,CACA,GAAMA,qBAAoB,CAAG,QAAvBA,qBAAuB,CAAAD,QAAQ,QAAI2D,eAAc,CAACR,OAAf,CAAuBjD,IAAvB,CAA6BF,QAA7B,CAAJ,EAArC,CACA,MAAOC,qBAAP,CACD,CAED;;;;GAKO,QAAS2D,cAAT,EAAyB,CAC9B,MAAOzD,iBAAgB,CAAC,SAAA7B,KAAK,QAAIA,MAAK,CAAC8B,WAAV,EAAN,CAAvB,CACD,CAED;;;;;GAMO,QAASyD,kBAAT,EAA6B,CAClC,MAAO1D,iBAAgB,CAAC,SAAA7B,KAAK,QAAIA,MAAK,CAAC+B,oBAAV,EAAN,CAAvB,CACD,C;;;;;;;;;AClhBD;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;ACJA;AAAA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACbmD;AAO5C,QAASyD,sBAAT,CAA+BC,eAA/B,CAAgD,CACrD,MAAO9J,OAAM,CAAC+J,OAAP,CAAeD,eAAf,EAAgCtD,GAAhC,CACL,yOAAEwD,MAAF,UAAU5F,KAAV,0BAAwB4F,MAAxB,cAAmC5F,KAAnC,GADK,EAELxC,IAFK,CAEA,IAFA,CAAP,CAGD,CAEM,QAASqI,sBAAT,CAA+BC,KAA/B,CAAsCC,YAAtC,CAAoDC,gBAApD,CAAsE1E,iBAAtE,CAAyF,CAC9F,MAAO,CACL2E,gBAAgB,CAAEC,+DAAiB,CAACC,SAD/B,CAELrI,IAAI,CAAEgI,KAFD,CAGLM,QAAQ,CAAE,IAHL,CAILC,aAAa,CAAE,IAJV,CAKLC,OAAO,CAAE,IALJ,CAMLC,MAAM,CAAE,IANH,CAOLC,YAAY,CAAE,CAPT,CAQLC,OAAO,CAAE,iBAACC,IAAD,CAAU,CACjB;AACA;AACA,GAAIpF,iBAAJ,CAAuB,CACrBA,iBAAiB,GAClB,CACD,GAAIoF,IAAI,CAACC,MAAT,CAAiB,0NACYD,IAAI,CAACC,MADjB,IACRC,MADQ,iBACAC,QADA,uCAEUA,QAFV,CAEPC,OAFO,CAEPA,OAFO,4BAEG,EAFH,mBAGf,GAAIf,YAAJ,CAAkB,CAChBA,YAAY,CAACN,qBAAqB,CAACqB,OAAD,CAAtB,CAAZ,CACD,CACD,GAAId,gBAAJ,CAAsB,CACpBA,gBAAgB,CAACY,MAAD,CAAhB,CACD,CACF,CATD,IASO,IAAIZ,gBAAJ,CAAsB,CAC3B;AACAA,gBAAgB,CAAC,EAAD,CAAhB,CACD,CACF,CA3BI,CAAP,CA6BD,CAEM,GAAMe,mBAAkB,CAAG,CAAC,EAAD,CAAK,EAAL,CAAS,EAAT,CAA3B,CACA,GAAMC,oBAAmB,CAAG,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAA5B,CAEA,QAASC,gBAAT,CAAyBC,KAAzB,CAAgC,CACrC,MAAOA,MAAK,GAAK,MAAV,CAAmBH,kBAAnB,CAAwCC,mBAA/C,CACD,CAED;AACO,GAAMG,QAAO,CAAG,CACrB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CADqB,CAErB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAFqB,CAGrB,CAAC,EAAD,CAAK,GAAL,CAAU,GAAV,CAHqB,CAIrB,CAAC,EAAD,CAAK,GAAL,CAAU,EAAV,CAJqB,CAKrB,CAAC,GAAD,CAAM,GAAN,CAAW,EAAX,CALqB,CAMrB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CANqB,CAOrB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAPqB,CAQrB,CAAC,GAAD,CAAM,EAAN,CAAU,EAAV,CARqB,CASrB,CAAC,GAAD,CAAM,EAAN,CAAU,GAAV,CATqB,CAAhB,CAYA,GAAMC,eAAc,CAAG,CAC5B,CAAC,CAAD,CAAI,CAAJ,CAAO,GAAP,CAD4B,CAE5B,CAAC,CAAD,CAAI,GAAJ,CAAS,CAAT,CAF4B,CAG5B,CAAC,GAAD,CAAM,CAAN,CAAS,GAAT,CAH4B,CAI5B,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAJ4B,CAK5B,CAAC,CAAD,CAAI,GAAJ,CAAS,GAAT,CAL4B,CAM5B,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAN4B,CAO5B,CAAC,GAAD,CAAM,GAAN,CAAW,CAAX,CAP4B,CAQ5B,CAAC,GAAD,CAAM,CAAN,CAAS,CAAT,CAR4B,CAAvB,CAWA,GAAMC,iBAAgB,CAAG,CAC9B,SAD8B,CAE9B,OAF8B,CAG9B,OAH8B,CAI9B,KAJ8B,CAK9B,KAL8B,CAM9B,MAN8B,CAO9B,QAP8B,CAQ9B,QAR8B,CAS9B,SAT8B,CAU9B,SAV8B,CAAzB,CAaA,GAAMC,mBAAkB,CAAG,CAAEC,MAAM,CAAE,IAAV,CAA3B,CAEA,QAASC,0BAAT,CAAmCC,aAAnC,CAAkD,CACvD,MAAO,UAAAC,OAAO,QAAItE,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,2BAA+CC,OAA/C,EAAJ,EAAd,CACD,CAEM,QAASE,kCAAT,CAA2CH,aAA3C,CAA0D,CAC/D,MAAO,UAAAI,cAAc,QAAIzE,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,mCAAuDI,cAAvD,EAAJ,EAArB,CACD,CAEM,QAASC,8BAAT,CAAuCL,aAAvC,CAAsD,CAC3D,MAAO,UAAAM,SAAS,QAAI3E,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,+BAAmDM,SAAS,CAACnB,MAA7D,EAAJ,EAAhB,CACD,CAEM,QAASoB,8BAAT,CAAuCP,aAAvC,CAAsD,CAC3D,MAAO,UAAAM,SAAS,QAAI3E,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,+BAAmDM,SAAS,CAACE,MAA7D,EAAJ,EAAhB,CACD,CAEM,QAASC,+BAAT,CAAwCT,aAAxC,CAAuD,CAC5D,MAAO,UAAAM,SAAS,QAAI3E,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,gCAAoDM,SAApD,EAAJ,EAAhB,CACD,CAEM,QAASI,4BAAT,CAAqCV,aAArC,CAAoD,CACzD,MAAO,UAAA9F,QAAQ,QAAIyB,QAAO,CAACuE,IAAR,WAAgBF,aAAhB,6BAAiD9F,QAAjD,EAAJ,EAAf,CACD,CAEM,QAASyG,6BAAT,EAAwC,CAC7C,MAAO,WAAM,CAAE,CAAf,CACD,CAGD;;;;GAKO,QAASC,eAAT,CAAwBC,GAAxB,CAA6B,CAClC,GAAMC,UAAS,CAAG,GAAIC,YAAJ,CAAgBF,GAAG,CAACG,MAAJ,CAAWC,UAA3B,CAAlB,CACA,GAAMC,OAAM,CAAG,GAAIC,WAAJ,CAAeL,SAAf,CAAf,CACAI,MAAM,CAACnJ,GAAP,CAAW8I,GAAX,EACA,MAAOK,OAAP,CACD,CAEM,QAASE,wBAAT,CAAiCC,KAAjC,CAAwCC,MAAxC,CAAgD,CACrD,GAAIzL,EAAC,CAAG,CAAR,CACA,GAAIwL,KAAJ,CAAW,CACT;AACA,MAAOA,KAAK,CAACE,IAAN,CAAW,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAF,aAAcH,MAAd,SAAuBzL,CAAvB,CAAJ,EAAZ,CAAP,CAAoD,CAClD;AACAA,CAAC,GACF,CACF,CACD,gBAAUyL,MAAV,SAAmBzL,CAAnB,EACD,CAED;;;;;;GAOO,QAAS6L,iBAAT,CAA0BC,aAA1B,CAAyCC,kBAAzC,CAA6DC,YAA7D,CAA2EC,mBAA3E,CAAgGC,qBAAhG,CAAuHC,eAAvH,CAAwIC,oBAAxI,CAAqL,IAAvBX,OAAuB,2DAAd,YAAc,CAC1L,GAAMY,gCAA+B,CAAG,eAAxC,CAEA,GAAMC,wBAAuB,CAAGP,kBAAH,SAAGA,kBAAH,iBAAGA,kBAAkB,CAAEQ,IAApB,CAAyBb,IAAzB,CAC9B,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAF,GAAWS,+BAAf,EAD6B,CAAhC,CAGA,GAAMG,uBAAsB,CAAG,CAC7BC,OAAO,CAAEC,4EAAoB,CAACC,0EAAD,CAApB,CAAyCC,aADrB,CAE7BC,QAAQ,CAAEF,0EAFmB,CAG7BJ,IAAI,CAAC,4MAAMR,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EAAtD,CAHyB,CAA/B,CAMA,GAAMO,SAAQ,CAAGvB,uBAAuB,CAACe,uBAAD,SAACA,uBAAD,iBAACA,uBAAuB,CAAES,QAA1B,CAAoCtB,MAApC,CAAxC,CACA,GAAIuB,WAAU,CAAG,CAAjB,CACA,GAAIV,uBAAJ,CAA6B,CAC3BU,UAAU,CAAGV,uBAAuB,CAACS,QAAxB,CAAiC1N,MAA9C,CACAiN,uBAAuB,CAACS,QAAxB,CAAiC9M,IAAjC,CAAsC,CACpC2L,IAAI,CAAEkB,QAD8B,CAEpC5K,GAAG,CAAE4J,aAAa,CAAChH,GAAd,CAAkB,SAAAmI,CAAC,QAAI,CAACA,CAAD,CAAI,IAAJ,CAAJ,EAAnB,CAF+B,CAAtC,EAID,CAND,IAMO,CACLT,sBAAsB,CAACD,IAAvB,CAA4BtM,IAA5B,CAAiC,CAC/B2L,IAAI,CAAES,+BADyB,CAE/BU,QAAQ,CAAE,CACR,CACEnB,IAAI,CAAEkB,QADR,CAEE5K,GAAG,CAAE4J,aAAa,CAAChH,GAAd,CAAkB,SAAAmI,CAAC,QAAI,CAACA,CAAD,CAAI,IAAJ,CAAJ,EAAnB,CAFP,CADQ,CAFqB,CAAjC,EASD,CACDf,qBAAqB,CAACM,sBAAD,CAArB,CACA,GAAMU,SAAQ,CAAG,CAAC,eAAD,CAAkBJ,QAAlB,CAAjB,CACAX,eAAe,uNACTH,YAAY,EAAI,EADP,GAEb,CACEmB,IAAI,CAAED,QADR,CAEEE,KAAK,CAAEvD,OAAO,CAACmD,UAAU,CAAGnD,OAAO,CAACxK,MAAtB,CAFhB,CAFa,GAAf,CAOA4M,mBAAmB,CAAC,CAACiB,QAAD,CAAD,CAAnB,CACAd,oBAAoB,CAAC,kBAAD,CAApB,CACD,CAEM,QAASiB,cAAT,CAAuBC,QAAvB,CAAiCvB,kBAAjC,CAAqD,CAC1D,MAAO,CACLU,OAAO,CAAEC,4EAAoB,CAACC,0EAAD,CAApB,CAAyCC,aAD7C,CAELC,QAAQ,CAAEF,0EAFL,CAGLJ,IAAI,uNACEe,QAAQ,CAAGA,QAAQ,CAACf,IAAZ,CAAmB,EAD7B,8MAEER,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EAFjD,EAHC,CAAP,CAQD,CAEM,QAASgB,uBAAT,CAAgCC,KAAhC,CAAuC,CAC5C,MAAO,WAAM,IAETC,MAFS,CAIPD,KAJO,CAETC,KAFS,CAGTrD,OAHS,CAIPoD,KAJO,CAGTpD,OAHS,CAKX,mBACE,kEAAK,SAAS,CAAEsD,gEAAhB,eACE,qEAAKD,KAAL,CADF,cAEE,sEAAMrD,OAAN,CAFF,CADF,CAMD,CAXD,CAYD,CAEM,QAASuD,WAAT,CAAoBpK,SAApB,CAA+B,CACpC,MAAO,CACLqK,UAAU,CAAE,IADP,CAELC,OAAO,CAAEtK,SAFJ,CAAP,CAID,CAGM,QAASuK,YAAT,CAAqBC,KAArB,CAA0C,IAAdC,SAAc,2DAAH,CAAG,CAC/C,GAAID,KAAK,GAAK,CAAd,CAAiB,MAAO,SAAP,CAEjB,GAAME,EAAC,CAAG,IAAV,CACA,GAAMC,GAAE,CAAGF,QAAQ,CAAG,CAAX,CAAe,CAAf,CAAmBA,QAA9B,CACA,GAAMG,MAAK,CAAG,CAAC,OAAD,CAAU,IAAV,CAAgB,IAAhB,CAAsB,IAAtB,CAAd,CAEA,GAAMnO,EAAC,CAAGoO,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAASP,KAAT,EAAkBK,IAAI,CAACE,GAAL,CAASL,CAAT,CAA7B,CAAV,CAEA;AACA,gBAAUM,UAAU,CAAC,CAACR,KAAK,CAAGK,IAAI,CAACI,GAAL,CAASP,CAAT,CAAYjO,CAAZ,CAAT,EAAyByO,OAAzB,CAAiCP,EAAjC,CAAD,CAApB,aAA8DC,KAAK,CAACnO,CAAD,CAAnE,EACD,CAEM,GAAM0O,sBAAqB,CAAG,QAAxBA,sBAAwB,CAACpO,MAAD,CAASqO,UAAT,CAAwB,wBACjCrO,MAAM,CAACqO,UAAD,CAD2B,CACnD9N,KADmD,oBACnDA,KADmD,CAC5CE,MAD4C,oBAC5CA,MAD4C,CAE3D,GAAM6N,OAAM,CAAG/N,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAApB,CACA,GAAM4N,MAAK,CAAGhO,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAnB,CACA,GAAM6N,MAAK,CAAGjO,KAAK,CAACE,MAAM,CAACE,OAAP,CAAe,GAAf,CAAD,CAAnB,CACA;AACA,GAAM8N,iBAAgB,CAAGX,IAAI,CAACY,GAAL,CAAS,CAAT,CAAYF,KAAK,EAAIH,UAArB,CAAzB,CACA;AACA,GAAMM,WAAU,CAAG,EAAIL,MAAJ,CAAaC,KAAb,CAAqBE,gBAAxC,CACA,MAAO,CACLH,MAAM,CAANA,MADK,CACGC,KAAK,CAALA,KADH,CACUE,gBAAgB,CAAhBA,gBADV,CAC4BE,UAAU,CAAVA,UAD5B,CAAP,CAGD,CAZM,CAcA,GAAMC,kBAAiB,CAAG,QAApBA,kBAAoB,CAAC5O,MAAD,CAASqO,UAAT,CAAwB,8FAGnDD,qBAAqB,CACvBpO,MADuB,CAEvBqO,UAFuB,CAH8B,CAErDM,UAFqD,uBAErDA,UAFqD,CAEzCL,MAFyC,uBAEzCA,MAFyC,CAEjCC,KAFiC,uBAEjCA,KAFiC,CAE1BE,gBAF0B,uBAE1BA,gBAF0B,CAOvD,GAAMI,YAAW,CAAG,sBAAAC,MAAM,CAACC,WAAP,kEAAoBC,MAApB,GACf,uBAAAF,MAAM,CAACC,WAAP,2FAAoBC,MAApB,sEAA4BC,eAA5B,EAA8C,CADnD,CAEA,GAAMC,QAAO,CAAGL,WAAW,EAAI,SAAC,CAAD,CAAM,EAAN,EAAY,CAA3C,CACA;AACA,MACEF,WAAU,CAAGO,OAAb,EACGZ,MAAM,EAAI,IADb,EAEGG,gBAAgB,EAAI,IAFvB,EAGGF,KAAK,EAAI,IAHZ,EAIGE,gBAAgB,CAAG,CALxB,CAOD,CAlBM,C;;;;;;;;;;;;ACjQQ;AACf;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA,GAAG;AACH;AACA;AACA,C;;ACXe;AACf;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,C;;;;;ACd+C;AACa;AAC7C;AACf,eAAe,OAAO;AACtB;AACA;;AAEA,SAAS,gDAAqB;AAC9B,C;;ACRA;AAA8C;AACoB;AACE;AACrD;AACf;AACA,gBAAgB,yCAAc;AAC9B;;AAEA,QAAQ,yBAAwB;AAChC,sBAAsB,yCAAc;AACpC;AACA,KAAK;AACL;AACA;;AAEA,WAAW,0BAAyB;AACpC;AACA,C;;;;;;;;;ACjBe;AACf;AACA;AACA;AACA;;AAEA;AACA,C;;ACPA;AAA8C;AAC/B;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,eAAc;AAChC,C;;;;;;;ACdA,2C;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;;;;ACOA,QAASU,oBAAT,EAA+B,aACsBL,MADtB,CACTP,KADS,SACrBa,UADqB,CACWd,MADX,SACFe,WADE,CAE7B,MAAO,CACLd,KAAK,CAALA,KADK,CAELD,MAAM,CAANA,MAFK,CAAP,CAID,CAEM,QAASgB,qBAAT,CAA8BC,GAA9B,CAAmC,CACxC,MAAO/H,0DAAW,CAAC,UAAM,CACvB,GAAI+H,GAAG,CAACrI,OAAR,CAAiB,CACf,MAAOqI,IAAG,CAACrI,OAAJ,CAAYsI,OAAZ,YAAwBC,sEAAxB,EAAP,CACD,CACD,MAAO,KAAP,CACD,CALiB,CAKf,CAACF,GAAD,CALe,CAAlB,CAMD,CAED;;;;GAKO,QAASG,oBAAT,EAA+B,eACYC,sDAAQ,CACtDR,mBAAmB,EADmC,CADpB,iOAC7BS,gBAD6B,eACXC,mBADW,eAKpCC,uDAAS,CAAC,UAAM,CACd,QAASC,aAAT,EAAwB,CACtBF,mBAAmB,CAACV,mBAAmB,EAApB,CAAnB,CACD,CACD,GAAMa,kBAAiB,CAAGC,sDAAQ,CAACF,YAAD,CAAe,GAAf,CAAoB,CAAEG,QAAQ,CAAE,IAAZ,CAApB,CAAlC,CAEApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACA,MAAO,kBAAMlB,OAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,CAAN,EAAP,CACD,CARQ,CAQN,EARM,CAAT,CAUA,MAAOJ,iBAAP,CACD,CAED;;;;GAKO,QAASS,gBAAT,EAA2B,CAChC,GAAMC,aAAY,CAAGtJ,oDAAM,EAA3B,CADgC,eAGJ2I,sDAAQ,EAHJ,kOAGzBrB,MAHyB,eAGjBiC,SAHiB,8BAINZ,sDAAQ,EAJF,kOAIzBpB,KAJyB,eAIlBiC,QAJkB,eAMhC,GAAMrM,YAAW,CAAGwD,8EAAa,EAAjC,CACA,GAAMvD,qBAAoB,CAAGwD,kFAAiB,EAA9C,CAEA;AACAkI,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxBrM,oBAAoB,GACrB,CACD,GAAM4L,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAVQ,CAUN,CAAC5L,oBAAD,CAVM,CAAT,CAYA;AACA;AACA0L,uDAAS,CAAC,UAAM,CACd,GAAI,CAACQ,YAAY,CAACpJ,OAAlB,CAA2B,OAC3B,GAAMwJ,UAAS,CAAGJ,YAAY,CAACpJ,OAA/B,CACA,GAAMyJ,cAAa,CAAGD,SAAS,CAACE,qBAAV,EAAtB,CACAL,SAAS,CAACI,aAAa,CAACrC,MAAf,CAAT,CACAkC,QAAQ,CAACG,aAAa,CAACpC,KAAf,CAAR,CACD,CANQ,CAMN,CAACpK,WAAD,CANM,CAAT,CAQA,MAAO,CAACoK,KAAD,CAAQD,MAAR,CAAgBgC,YAAhB,CAAP,CACD,CAED;;;;;GAMO,QAASO,kBAAT,EAA6B,CAClC,GAAMC,QAAO,CAAG9J,oDAAM,EAAtB,CADkC,eAGN2I,sDAAQ,EAHF,kOAG3BrB,MAH2B,eAGnBiC,SAHmB,8BAIRZ,sDAAQ,EAJA,mOAI3BpB,KAJ2B,gBAIpBiC,QAJoB,gBAMlC,GAAMrM,YAAW,CAAGwD,8EAAa,EAAjC,CACA,GAAMvD,qBAAoB,CAAGwD,kFAAiB,EAA9C,CAEA;AACAkI,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxBrM,oBAAoB,GACrB,CACD,GAAM4L,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAVQ,CAUN,CAAC5L,oBAAD,CAVM,CAAT,CAYA;AACA;AACA0L,uDAAS,CAAC,UAAM,CACd,GAAI,CAACgB,OAAO,CAAC5J,OAAb,CAAsB,OADR,GAEN6J,OAFM,CAEKD,OAAO,CAAC5J,OAAR,CAAgB8J,IAFrB,CAEND,MAFM,CAGd,GAAME,WAAU,CAAGF,MAAM,CAACH,qBAAP,EAAnB,CACAL,SAAS,CAACU,UAAU,CAAC3C,MAAZ,CAAT,CACAkC,QAAQ,CAACS,UAAU,CAAC1C,KAAZ,CAAR,CACD,CANQ,CAMN,CAACpK,WAAD,CANM,CAAT,CAQA,MAAO,CAACoK,KAAD,CAAQD,MAAR,CAAgBwC,OAAhB,CAAP,CACD,CAED;;;;;;;;;;;;;;GAeO,QAASI,SAAT,CAAkBC,cAAlB,CAAkC,CACvC,GAAMC,MAAK,CAAGD,cAAd,CADuC,gBAETxB,sDAAQ,CAACyB,KAAD,CAFC,oOAEhCC,OAFgC,gBAEvBC,UAFuB,gBAIvC,GAAMC,eAAc,CAAG/J,yDAAW,CAAC,SAACgK,SAAD,CAAe,CAChDF,UAAU,CAAC,SAACG,YAAD,CAAkB,CAC3B,GAAMC,iBAAgB,CAAGD,YAAY,CAAC9O,MAAb,CAAoB,SAAAgP,IAAI,QAAIA,KAAI,GAAKH,SAAb,EAAxB,CAAzB,CACA;AACAhM,OAAO,CAACwI,GAAR,mBAAuBwD,SAAvB,yBAAgDE,gBAAgB,CAAC3S,MAAjE,cAA4E6S,IAAI,CAACC,SAAL,CAAeH,gBAAf,CAA5E,GACA,MAAOA,iBAAP,CACD,CALS,CAAV,CAMD,CAPiC,CAO/B,CAACJ,UAAD,CAP+B,CAAlC,CASA,GAAMQ,kBAAiB,CAAGtK,yDAAW,CAAC,SAACuK,YAAD,CAAkB,CACtDT,UAAU,CAAC,SAACG,YAAD,CAAkB,CAC3B,GAAMC,iBAAgB,uNAAOD,YAAP,GAAqBM,YAArB,EAAtB,CACA;AACAvM,OAAO,CAACwI,GAAR,sBAA0B0D,gBAAgB,CAAC3S,MAA3C,cAAsD6S,IAAI,CAACC,SAAL,CAAeH,gBAAf,CAAtD,GACA,MAAOA,iBAAP,CACD,CALS,CAAV,CAMD,CAPoC,CAOlC,CAACJ,UAAD,CAPkC,CAArC,CASA,GAAMU,gBAAe,CAAGxK,yDAAW,CAAC,UAAM,CACxC8J,UAAU,CAACF,KAAD,CAAV,CACA;AACA5L,OAAO,CAACwI,GAAR,sBAA0BoD,KAAK,CAACrS,MAAhC,cAA2C6S,IAAI,CAACC,SAAL,CAAeT,KAAf,CAA3C,GACD,CAJkC,CAIhC,CAACE,UAAD,CAAaF,KAAb,CAJgC,CAAnC,CAMA,GAAMa,QAAO,CAAGZ,OAAO,CAACtS,MAAR,GAAmB,CAAnC,CAEA,MAAO,CAACkT,OAAD,CAAUV,cAAV,CAA0BO,iBAA1B,CAA6CE,eAA7C,CAAP,CACD,CAED;;;;;;;;GASO,QAASE,QAAT,EAAmB,iBACAvC,sDAAQ,CAAC,EAAD,CADR,oOACjBwC,IADiB,gBACXC,OADW,gBAGxB,GAAMC,OAAM,CAAG7K,yDAAW,CAAC,SAAC8K,GAAD,CAAMhH,IAAN,CAAe,CACxC,GAAIgH,GAAJ,CAAS,CACPF,OAAO,CAAC,SAAAG,IAAI,8NAASA,IAAT,GAAe,CAAED,GAAG,CAAHA,GAAF,CAAOhH,IAAI,CAAJA,IAAP,CAAf,IAAL,CAAP,CACD,CACF,CAJyB,CAIvB,CAAC8G,OAAD,CAJuB,CAA1B,CAMA,GAAMI,UAAS,CAAGhL,yDAAW,CAAC,UAAM,CAClC4K,OAAO,CAAC,EAAD,CAAP,CACD,CAF4B,CAE1B,CAACA,OAAD,CAF0B,CAA7B,CAIA,MAAO,CAACD,IAAD,CAAOE,MAAP,CAAeG,SAAf,CAAP,CACD,CAED;;;;;;GAOO,QAASC,gCAAT,CAAyClD,GAAzC,CAA8C,iBACvBI,sDAAQ,EADe,oOAC5CrB,MAD4C,gBACpCiC,SADoC,gCAEzBZ,sDAAQ,EAFiB,oOAE5CpB,KAF4C,gBAErCiC,QAFqC,gBAInDV,uDAAS,CAAC,UAAM,CACd,QAASW,eAAT,EAA0B,CACxB,GAAIlB,GAAG,CAACrI,OAAR,CAAiB,0BAGXqI,GAAG,CAACrI,OAAJ,CAAYsI,OAAZ,CAAoB,qBAApB,CAHW,CAECkD,eAFD,sBAEbC,YAFa,CAE+BC,cAF/B,sBAEkBC,WAFlB,CAIfrC,QAAQ,CAACoC,cAAD,CAAR,CACArC,SAAS,CAACmC,eAAD,CAAT,CACD,CACF,CACD,GAAM1C,kBAAiB,CAAGC,sDAAQ,CAACQ,cAAD,CAAiB,GAAjB,CAAsB,CAAEP,QAAQ,CAAE,IAAZ,CAAtB,CAAlC,CACApB,MAAM,CAACqB,gBAAP,CAAwB,QAAxB,CAAkCH,iBAAlC,EACAS,cAAc,GACd,MAAO,WAAM,CACX3B,MAAM,CAACsB,mBAAP,CAA2B,QAA3B,CAAqCJ,iBAArC,EACD,CAFD,CAGD,CAhBQ,CAgBN,CAACT,GAAD,CAhBM,CAAT,CAkBA,MAAO,CAAChB,KAAD,CAAQD,MAAR,CAAP,CACD,CAEM,QAASwE,yBAAT,MAA6D,IAAzBC,MAAyB,MAAzBA,KAAyB,CAAlBC,cAAkB,MAAlBA,cAAkB,CAClE;AACA,GAAMC,UAAS,CAAGrO,qDAAO,CAAC,UAAM,CAC9B,GAAMsO,OAAM,CAAG,EAAf,CACA,GAAIH,KAAK,EAAIA,KAAK,CAACI,IAAnB,CAAyB,CACvB;AACA,IAAK,GAAIzT,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGqT,KAAK,CAACI,IAAN,CAAWpU,MAA/B,CAAuCW,CAAC,EAAxC,CAA4C,CAC1CwT,MAAM,CAACH,KAAK,CAACI,IAAN,CAAWzT,CAAX,CAAD,CAAN,CAAwBA,CAAxB,CACD,CACF,CACD,MAAOwT,OAAP,CACD,CATwB,CAStB,CAACH,KAAD,CATsB,CAAzB,CAWA;AACA;AACA,GAAMK,mBAAkB,CAAG5L,yDAAW,CAAC,SAAC6L,KAAD,CAAW,CAChD,GAAMrK,OAAM,CAAGqK,KAAK,CAAC,CAAD,CAApB,CACA,GAAIJ,SAAS,EAAID,cAAb,EAA+BA,cAAc,CAAC,CAAD,CAAjD,CAAsD,CACpD,GAAMM,UAAS,CAAGL,SAAS,CAACjK,MAAD,CAA3B,CACA,GAAMjL,IAAG,CAAGiV,cAAc,CAAC,CAAD,CAAd,CAAkBM,SAAlB,CAAZ,CACA,MAAOvV,IAAP,CACD,CACD,MAAO,EAAP,CACD,CARqC,CAQnC,CAACkV,SAAD,CAAYD,cAAZ,CARmC,CAAtC,CASA,MAAOI,mBAAP,CACD,C;;;;;;AClQD,qD;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,GAAMG,oBAAmB,CAAG,MAA5B,CACA,GAAMC,eAAc,CAAG,kBAAvB,CAEA,GAAMC,uBAAsB,CAAG,KAA/B,CACA,GAAMC,kBAAiB,CAAG,UAA1B,CACA,GAAMC,kBAAiB,CAAG,GAA1B,CACP;AACA;AACO,GAAMC,iBAAgB,CAAG,IAAzB,CAEA,GAAMvH,mBAAkB,CAAG,MAA3B,CACA,GAAMD,qBAAoB,CAAG,CAClCyH,IAAI,CAAE,CACJvH,aAAa,CAAE,OADX,CAEJwH,MAAM,CAAEC,2DAFJ,CAD4B,CAA7B,CAOA,GAAMC,gBAAe,CAAG,CAC7BH,IAAI,CAAE,CACJC,MAAM,CAAEG,mEADJ,CADuB,CAAxB,C;;;;;;;;;;;;;;;;;;;;;;;;;GCnBcC,4C,sMACnB,+BAAYC,WAAZ,CAAyBC,eAAzB,CAA0CC,UAA1C,CAAsDC,MAAtD,CAA8D,iFAC5D,wDAAgCH,WAAhC,OACA,MAAK7I,IAAL,CAAY,uBAAZ,CAEA,MAAK6I,WAAL,CAAmBA,WAAnB,CACA,MAAKC,eAAL,CAAuBA,eAAvB,CACA,MAAKC,UAAL,CAAkBA,UAAlB,CACA,MAAKC,MAAL,CAAcA,MAAd,CAP4D,aAQ7D,C,iHAEe,IAEZH,YAFY,CAGV,IAHU,CAEZA,WAFY,CAECE,UAFD,CAGV,IAHU,CAECA,UAFD,CAEaC,MAFb,CAGV,IAHU,CAEaA,MAFb,CAId9O,OAAO,CAACuE,IAAR,WACKoK,WADL,kBACyBE,UADzB,wBAEEzC,IAAI,CAACC,SAAL,CAAeyC,MAAf,CAAuB,IAAvB,CAA6B,CAA7B,CAFF,EAID,C,mCAnBgDC,sC;;GCA9BC,wC,kMACnB,6BAAYL,WAAZ,CAAyBC,eAAzB,CAA0CC,UAA1C,CAAsD,+EACpD,0DAAkCF,WAAlC,OACA,MAAK7I,IAAL,CAAY,qBAAZ,CAEA,MAAK6I,WAAL,CAAmBA,WAAnB,CACA,MAAKC,eAAL,CAAuBA,eAAvB,CACA,MAAKC,UAAL,CAAkBA,UAAlB,CANoD,aAOrD,C,+GAEe,IAEZF,YAFY,CAGV,IAHU,CAEZA,WAFY,CAECC,eAFD,CAGV,IAHU,CAECA,eAFD,CAEkBC,UAFlB,CAGV,IAHU,CAEkBA,UAFlB,CAId,GAAID,eAAe,EAAIC,UAAvB,CAAmC,CACjC7O,OAAO,CAACuE,IAAR,WACKoK,WADL,kBACyBE,UADzB,iDAC2ED,eAD3E,GAGD,CAJD,IAIO,CACL5O,OAAO,CAACuE,IAAR,WACKoK,WADL,6BAGD,CACF,C,iCAvB8CI,sC;;GCA5BE,0C,oMACnB,8BAAYC,UAAZ,CAAwB,gFACtB,2DAAmCA,UAAnC,yEACA,MAAKpJ,IAAL,CAAY,sBAAZ,CAEA,MAAKoJ,UAAL,CAAkBA,UAAlB,CAJsB,aAKvB,C,gHAEe,IAEZA,WAFY,CAGV,IAHU,CAEZA,UAFY,CAId,GAAIA,UAAJ,CAAgB,CACdlP,OAAO,CAACuE,IAAR,sCACgC2K,UADhC,GAGD,CAJD,IAIO,CACLlP,OAAO,CAACuE,IAAR,CAAa,2BAAb,EACD,CACF,C,kCAnB+CwK,sC;;ACFlD;AAAA;AAAA;AAAA;;;;;;;ACAA,0C;;;;;;;;;;;;;;;;;;;;ACGA;;;;;GAMO,QAASI,mBAAT,CAA4BC,KAA5B,CAAmC9W,GAAnC,CAAwC+W,QAAxC,CAAkD,CACvD,GAAID,KAAK,CAAC9W,GAAN,GAAcA,GAAlB,CAAuB,CACrB8W,KAAK,CAACE,cAAN,GACAD,QAAQ,GACT,CACF,CAED;;;;GAKO,QAASE,mBAAT,CAA4BC,QAA5B,CAAsC,CAC3C,MAAOC,kDAAS,CAAC,CAAE5V,CAAC,CAAE2V,QAAQ,CAAC,CAAD,CAAb,CAAkBE,CAAC,CAAEF,QAAQ,CAAC,CAAD,CAA7B,CAAkCG,CAAC,CAAEH,QAAQ,CAAC,CAAD,CAA7C,CAAD,CAAT,CAA8DI,WAA9D,EAAP,CACD,CAED;;;;GAKO,QAASC,mBAAT,CAA4BC,WAA5B,CAAyC,CAC9C,GAAMC,SAAQ,CAAGN,iDAAS,CAACK,WAAD,CAAT,CAAuBE,KAAvB,EAAjB,CACA,MAAO,CAACD,QAAQ,CAAClW,CAAV,CAAakW,QAAQ,CAACL,CAAtB,CAAyBK,QAAQ,CAACJ,CAAlC,CAAP,CACD,CAED;;;;GAKO,QAASM,oBAAT,CAA6B/V,CAA7B,CAAgC,CACrC,GAAIA,CAAC,GAAK,CAAV,CAAa,MAAO,oBAAP,CACb,GAAIA,CAAC,EAAI,CAAT,CAAY,CACV,GAAMgW,KAAI,CAAG,QAAPA,KAAO,CAAAC,CAAC,QAAK,MAAMC,MAAN,CAAaD,CAAb,CAAL,EAAd,CACA,yBAAmBD,IAAI,CAAChW,CAAC,CAAG,CAAL,CAAvB,YACD,CACD,uCAAiCA,CAAjC,EACD,CAEM,QAASmW,gBAAT,CAAyBC,UAAzB,CAAqCC,QAArC,CAA+C,CACpD,GAAID,UAAU,CAAC/W,MAAX,EAAqBgX,QAAQ,CAAChX,MAAlC,CAA0C,CACxC,MAAOiX,sDAAO,CAACF,UAAD,CAAaC,QAAQ,CAACrX,KAAT,CAAe,CAAf,CAAkBoX,UAAU,CAAC/W,MAA7B,CAAb,CAAd,CACD,CACD,MAAO,MAAP,CACD,CAEM,QAASkX,cAAT,CAAuBH,UAAvB,CAAmCC,QAAnC,CAA6CG,cAA7C,CAA6D,CAClE,GAAIL,eAAe,CAACC,UAAD,CAAaC,QAAb,CAAnB,CAA2C,CACzC,4NAAWG,cAAX,8MAA8BH,QAAQ,CAACrX,KAAT,CAAewX,cAAc,CAACnX,MAA9B,CAA9B,GACD,CACD,MAAOgX,SAAP,CACD,CAEM,GAAMI,SAAQ,CAAG,KAAjB,CAEA,QAASC,UAAT,CAAmBvJ,IAAnB,CAAyB,CAC9B,MAAOA,KAAI,CAACjN,IAAL,CAAUuW,QAAV,CAAP,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnDD;;;;GAKA,QAASpM,KAAT,CAActE,KAAd,CAAqB5B,UAArB,CAAiC,CAC/BA,UAAU,CAAC4B,KAAK,CAACqE,OAAP,CAAV,CACAtE,OAAO,CAACuE,IAAR,CAAatE,KAAK,CAACqE,OAAnB,EACA,GAAIrE,KAAK,WAAY8O,kFAArB,CAA0C,CACxC9O,KAAK,CAAC4Q,aAAN,GACD,CACF,CAED;;;;;;;;;;GAWA,QAASC,sBAAT,CAA+B/R,MAA/B,CAAuCI,OAAvC,CAAgD4R,aAAhD,CAA+D,CAC7D,GAAI,CAAChS,MAAD,EAAW,CAACI,OAAhB,CAAyB,CACvB,OACD,CACD,GAAM6R,0BAAyB,CAAGC,yFAA4B,EAA9D,CACAzY,MAAM,CAAC+J,OAAP,CAAexD,MAAf,EAAuBjF,OAAvB,CAA+B,cAA+B,2NAA7B2G,gBAA6B,UAAX7D,KAAW,UAC5D,GAAMyC,WAAU,cAASvG,iEAAU,CAAC2H,gBAAD,CAAnB,CAAhB,CACA,GAAMnB,WAAU,CAAGH,OAAO,CAACE,UAAD,CAA1B,CACA,GAAM6R,aAAY,CAAGH,aAAa,EAAIA,aAAa,CAACtQ,gBAAD,CAAnD,CACA,GAAM0Q,WAAU,CAAGC,sDAAK,CAACF,YAAD,CAAeF,yBAAyB,CAACvQ,gBAAD,CAAxC,CAAxB,CACA,GAAI0Q,UAAU,EAAI7R,UAAlB,CAA8B,CAC5BA,UAAU,CAAC1C,KAAD,CAAV,CACD,CACF,CARD,EASD,CAED;;;;;;;;GASO,QAASyU,eAAT,CAAwB/U,OAAxB,CAAiCgV,OAAjC,CAA0C,eACTnH,sDAAQ,EADC,iOACxCoH,WADwC,eAC3BC,cAD2B,eAG/ClH,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBC,WAArB,CAAkC,CAChCC,cAAc,CAAClV,OAAO,CAACgV,OAAD,CAAP,CAAiBC,WAAlB,CAAd,CACD,CAFD,IAEO,CACLC,cAAc,CAAC,IAAD,CAAd,CACD,CACH;AACC,CAXQ,CAWN,CAAClV,OAAD,CAAUgV,OAAV,CAXM,CAAT,CAaA,MAAO,CAACC,WAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;GAyBO,QAASE,aAAT,CACLnV,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBAC0BzH,sDAAQ,CAAC,EAAD,CADlC,kOACOzH,KADP,eACcmP,QADd,8BAEoC1H,sDAAQ,CAAC,CAAD,CAF5C,kOAEO2H,UAFP,eAEmBC,aAFnB,eAIA,GAAM1T,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyBoG,KAA7B,CAAoC,CAClCpG,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyBoG,KAAzB,CAA+BsP,IAA/B,GAAsCC,KAAtC,CAA4C,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAA7C,EAAsE8T,IAAtE,CAA2E,SAACC,OAAD,CAAa,CACtF,GAAI,CAACA,OAAL,CAAc,OADwE,GAE9E1X,KAF8E,CAE5C0X,OAF4C,CAE9E1X,IAF8E,CAExEoS,GAFwE,CAE5CsF,OAF4C,CAExEtF,GAFwE,CAEnEuF,kBAFmE,CAE5CD,OAF4C,CAEnEC,kBAFmE,CAGtFR,QAAQ,CAACnX,IAAD,CAAR,CACAqX,aAAa,CAACvZ,MAAM,CAAC+H,IAAP,CAAY7F,IAAZ,EAAkBnB,MAAnB,CAAb,CACAsT,MAAM,CAACC,GAAD,CAAM,OAAN,CAAN,CACA;AACA;AACA;AACA,GAAMwF,4BAA2B,0MAC/BC,wBAAwB,CAAEC,8EADK,EAE5BH,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAEEC,yBAFF,CAArB,CAIA7F,cAAc,CAAC,OAAD,CAAd,CACD,CAlBD,EAmBD,CApBD,IAoBO,CACL8F,QAAQ,CAAC,EAAD,CAAR,CACAE,aAAa,CAAC,CAAD,CAAb,CACA,GAAIL,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,OAAjC,CAA0C,IAA1C,CAAgD,IAAhD,CAAD,CAAwDjT,UAAxD,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,OAAD,CAAd,CACD,CACF,CACH;AACC,CAnCQ,CAmCN,CAACzP,OAAD,CAAUgV,OAAV,CAnCM,CAAT,CAqCA,MAAO,CAAC5O,KAAD,CAAQoP,UAAR,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;GAuBO,QAASW,gBAAT,CACLnW,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBACgCzH,sDAAQ,EADxC,kOACO3C,QADP,eACiBkL,WADjB,eAGA,GAAMrU,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,WAAzB,CAAJ,CAA2C,CACzC;AACAA,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,WAAzB,EAAsC0V,IAAtC,GAA6CC,KAA7C,CAAmD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAApD,EAA6E8T,IAA7E,CAAkF,SAACC,OAAD,CAAa,CAC7F,GAAI,CAACA,OAAL,CAAc,OAD+E,GAErF1X,KAFqF,CAEnD0X,OAFmD,CAErF1X,IAFqF,CAE/EoS,GAF+E,CAEnDsF,OAFmD,CAE/EtF,GAF+E,CAE1EuF,kBAF0E,CAEnDD,OAFmD,CAE1EC,kBAF0E,CAG7FK,WAAW,CAAChY,IAAD,CAAX,CACAmS,MAAM,CAACC,GAAD,CAAM,WAAN,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,WAAD,CAAd,CACD,CAXD,EAYD,CAdD,IAcO,CACL2G,WAAW,CAAC,IAAD,CAAX,CACA,GAAIhB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,WAAjC,CAA8C,IAA9C,CAAoD,IAApD,CAAD,CAA4DjT,UAA5D,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,WAAD,CAAd,CACD,CACF,CACH;AACC,CA5BQ,CA4BN,CAACzP,OAAD,CAAUgV,OAAV,CA5BM,CAAT,CA8BA,MAAO,CAAC9J,QAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BO,QAASmL,wBAAT,CACLrW,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,gBACgDzH,sDAAQ,EADxD,mOACOyI,gBADP,gBACyBC,mBADzB,gBAGA,GAAMxU,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,mBAAzB,CAAJ,CAAmD,CACjDA,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,mBAAzB,EAA8C0V,IAA9C,GAAqDC,KAArD,CAA2D,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAA5D,EAAqF8T,IAArF,CAA0F,SAACC,OAAD,CAAa,CACrG,GAAI,CAACA,OAAL,CAAc,OADuF,GAE7F1X,KAF6F,CAE3D0X,OAF2D,CAE7F1X,IAF6F,CAEvFoS,GAFuF,CAE3DsF,OAF2D,CAEvFtF,GAFuF,CAElFuF,kBAFkF,CAE3DD,OAF2D,CAElFC,kBAFkF,mNAGhF3X,IAHgF,IAG9F6S,KAH8F,UAGvFrI,GAHuF,UAIrG2N,mBAAmB,CAAC,CAClBC,IAAI,CAAEvF,KAAK,CAACuF,IADM,CAElBnF,IAAI,CAAEJ,KAAK,CAACI,IAFM,CAGlBoF,MAAM,CAAE7N,GAAG,CAACxK,IAHM,CAAD,CAAnB,CAKAmS,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,mBAAD,CAAd,CACD,CAhBD,EAiBD,CAlBD,IAkBO,CACL8G,mBAAmB,CAAC,IAAD,CAAnB,CACA,GAAInB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoEjT,UAApE,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAhCQ,CAgCN,CAACzP,OAAD,CAAUgV,OAAV,CAhCM,CAAT,CAkCA,MAAO,CAACsB,gBAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;GAgBO,QAASI,iBAAT,CACL1W,OADK,CAELgV,OAFK,CAGLvF,cAHK,CAIL2F,UAJK,CAKLuB,SALK,CAML3G,iBANK,CAOL,iBACgCnC,sDAAQ,EADxC,oOACO+I,QADP,gBACiBC,WADjB,gBAGA,GAAM9U,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CACD,GAAI,CAAC2B,SAAL,CAAgB,CACdlH,cAAc,CAAC,mBAAD,CAAd,CACA,OACD,CACD,GAAMvR,OAAM,CAAG8B,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,mBAAzB,CAAf,CACA,GAAI9B,MAAJ,CAAY,CACV8R,iBAAiB,CAAC,mBAAD,CAAjB,CACA,GAAM8G,wBAAuB,CAAG,MAAO5Y,OAAM,CAAC6Y,iBAAd,GAAoC,UAApE,CACA,GAAID,uBAAJ,CAA6B,CAC3B9W,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,mBAAzB,EACG+W,iBADH,CACqB,CAAEJ,SAAS,CAATA,SAAF,CADrB,EAEGhB,KAFH,CAES,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAFV,EAGG8T,IAHH,CAGQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAET1X,KAFS,CAEA0X,OAFA,CAET1X,IAFS,CAGjByY,WAAW,CAACzY,IAAD,CAAX,CACAqR,cAAc,CAAC,mBAAD,CAAd,CACD,CARH,EASD,CAVD,IAUO,CACLvR,MAAM,CAACwX,IAAP,GAAcC,KAAd,CAAoB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAArB,EAA8C8T,IAA9C,CAAmD,SAACC,OAAD,CAAa,CAC9D,GAAI,CAACA,OAAL,CAAc,OADgD,GAEtD1X,KAFsD,CAE7C0X,OAF6C,CAEtD1X,IAFsD,oNAG5BA,IAH4B,IAGvD6S,KAHuD,WAGxCwF,MAHwC,WAG9CrY,IAH8C,CAI9D,GAAM4Y,2BAA0B,CAAGL,SAAS,CAACjU,GAAV,CAAc,SAACuU,GAAD,CAAS,CACxD,GAAMC,UAAS,CAAGjG,KAAK,CAACuF,IAAN,CAAW3X,OAAX,CAAmBoY,GAAnB,CAAlB,CACA,GAAME,SAAQ,CAAGlG,KAAK,CAACuF,IAAN,CAAWvZ,MAA5B,CACA,GAAMma,SAAQ,CAAGnG,KAAK,CAACI,IAAN,CAAWpU,MAA5B,CACA,GAAMiU,eAAc,CAAG,GAAIhI,WAAJ,CAAekO,QAAf,CAAvB,CACA,IAAK,GAAI5F,UAAS,CAAG,CAArB,CAAwBA,SAAS,CAAG4F,QAApC,CAA8C5F,SAAS,EAAI,CAA3D,CAA8D,CAC5DN,cAAc,CAACM,SAAD,CAAd,CAA4BiF,MAAM,CAACjF,SAAS,CAAG2F,QAAZ,CAAuBD,SAAxB,CAAlC,CACD,CACD,MAAOhG,eAAP,CACD,CATkC,CAAnC,CAUA2F,WAAW,CAACG,0BAAD,CAAX,CACAvH,cAAc,CAAC,mBAAD,CAAd,CACD,CAhBD,EAiBD,CACF,CAhCD,IAgCO,CACLoH,WAAW,CAAC,IAAD,CAAX,CACA,GAAIzB,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoEjT,UAApE,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAlDQ,CAkDN,CAACzP,OAAD,CAAUgV,OAAV,CAAmB2B,SAAnB,CAlDM,CAAT,CAoDA,MAAO,CAACC,QAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;GAkBO,QAASS,mBAAT,CAA4BrX,OAA5B,CAAqCgV,OAArC,CAA8CvF,cAA9C,CAA8Dc,MAA9D,CAAsE6E,UAAtE,CAAkF,iBAC7DvH,sDAAQ,EADqD,oOAChFoD,KADgF,gBACzEqG,QADyE,gBAGvF,GAAMvV,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CACD,GAAM9W,OAAM,CAAG8B,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,mBAAzB,CAAf,CACA,GAAI9B,MAAJ,CAAY,CACV,GAAMqZ,oBAAmB,CAAG,MAAOrZ,OAAM,CAACsZ,SAAd,GAA4B,UAAxD,CACA,GAAID,mBAAJ,CAAyB,CACvBrZ,MAAM,CAACsZ,SAAP,GAAmB7B,KAAnB,CAAyB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAA1B,EAAmD8T,IAAnD,CAAwD,SAACC,OAAD,CAAa,CACnE,GAAI,CAACA,OAAL,CAAc,OADqD,GAE3D1X,KAF2D,CAE7C0X,OAF6C,CAE3D1X,IAF2D,CAErDoS,GAFqD,CAE7CsF,OAF6C,CAErDtF,GAFqD,CAGnE8G,QAAQ,CAAClZ,IAAD,CAAR,CACAmS,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAf,cAAc,CAAC,mBAAD,CAAd,CACD,CAND,EAOD,CARD,IAQO,CACLvR,MAAM,CAACwX,IAAP,GAAcC,KAAd,CAAoB,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAArB,EAA8C8T,IAA9C,CAAmD,SAACC,OAAD,CAAa,CAC9D,GAAI,CAACA,OAAL,CAAc,OADgD,GAEtD1X,KAFsD,CAExC0X,OAFwC,CAEtD1X,IAFsD,CAEhDoS,GAFgD,CAExCsF,OAFwC,CAEhDtF,GAFgD,CAG9D8G,QAAQ,CAAClZ,IAAI,CAAC,CAAD,CAAL,CAAR,CACAmS,MAAM,CAACC,GAAD,CAAM,mBAAN,CAAN,CACAf,cAAc,CAAC,mBAAD,CAAd,CACD,CAND,EAOD,CACF,CAnBD,IAmBO,CACL6H,QAAQ,CAAC,IAAD,CAAR,CACA,GAAIlC,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,mBAAjC,CAAsD,IAAtD,CAA4D,IAA5D,CAAD,CAAoEjT,UAApE,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,mBAAD,CAAd,CACD,CACF,CACH;AACC,CAjCQ,CAiCN,CAACzP,OAAD,CAAUgV,OAAV,CAjCM,CAAT,CAmCA,MAAO,CAAC/D,KAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;GA0BO,QAASwG,iBAAT,CACLzX,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBACkCzH,sDAAQ,EAD1C,oOACO6J,SADP,gBACkBC,YADlB,gCAE4C9J,sDAAQ,CAAC,CAAD,CAFpD,oOAEO+J,cAFP,gBAEuBC,iBAFvB,gCAG4ChK,sDAAQ,CAAC,CAAD,CAHpD,oOAGOiK,cAHP,gBAGuBC,iBAHvB,gBAKA,GAAMhW,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB0X,SAA7B,CAAwC,CACtC1X,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB0X,SAAzB,CAAmChC,IAAnC,GAA0CC,KAA1C,CAAgD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAAjD,EAA0E8T,IAA1E,CAA+E,SAACC,OAAD,CAAa,CAC1F,GAAI,CAACA,OAAL,CAAc,OAD4E,GAElF1X,KAFkF,CAEhD0X,OAFgD,CAElF1X,IAFkF,CAE5EoS,GAF4E,CAEhDsF,OAFgD,CAE5EtF,GAF4E,CAEvEuF,kBAFuE,CAEhDD,OAFgD,CAEvEC,kBAFuE,CAG1F4B,YAAY,CAACvZ,IAAD,CAAZ,CACAyZ,iBAAiB,CAAC3b,MAAM,CAAC+H,IAAP,CAAY7F,IAAZ,EAAkBnB,MAAnB,CAAjB,CACA8a,iBAAiB,CAAC7b,MAAM,CAACuG,MAAP,CAAcrE,IAAd,EACfsE,GADe,CACX,SAAApB,CAAC,QAAIA,EAAC,CAACrE,MAAN,EADU,EAEfnB,MAFe,CAER,SAACkc,CAAD,CAAI3E,CAAJ,QAAU2E,EAAC,CAAG3E,CAAd,EAFQ,CAES,CAFT,CAAD,CAAjB,CAGA9C,MAAM,CAACC,GAAD,CAAM,WAAN,CAAN,CACA,GAAMwF,4BAA2B,0MAC/BiC,iBAAiB,CAAEC,kFADY,EAE5BnC,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,WAAD,CAAd,CACD,CAnBD,EAoBD,CArBD,IAqBO,CACLkI,YAAY,CAAC,EAAD,CAAZ,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CACAE,iBAAiB,CAAC,CAAD,CAAjB,CACA,GAAI3C,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,WAAjC,CAA8C,IAA9C,CAAoD,IAApD,CAAD,CAA4DjT,UAA5D,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,WAAD,CAAd,CACD,CACF,CACH;AACC,CArCQ,CAqCN,CAACzP,OAAD,CAAUgV,OAAV,CArCM,CAAT,CAuCA,MAAO,CAAC0C,SAAD,CAAYE,cAAZ,CAA4BE,cAA5B,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;GAwBO,QAASK,qBAAT,CACLnY,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBAC0CzH,sDAAQ,EADlD,oOACOuK,aADP,gBACsBC,gBADtB,gBAGA,GAAMtW,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyBoY,aAA7B,CAA4C,CAC1CpY,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyBoY,aAAzB,CAAuC1C,IAAvC,GAA8CC,KAA9C,CAAoD,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAArD,EACG8T,IADH,CACQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAET1X,KAFS,CAEyB0X,OAFzB,CAET1X,IAFS,CAEHoS,GAFG,CAEyBsF,OAFzB,CAEHtF,GAFG,CAEEuF,kBAFF,CAEyBD,OAFzB,CAEEC,kBAFF,CAGjBsC,gBAAgB,CAACja,IAAD,CAAhB,CACAmS,MAAM,CAACC,GAAD,CAAM,eAAN,CAAN,CACA,GAAMwF,4BAA2B,0MAC/BsC,wBAAwB,CAAEC,sFADK,EAE5BxC,kBAF4B,CAAjC,CAIAvB,qBAAqB,CACnBwB,2BADmB,CAEnBX,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,eAAD,CAAd,CACD,CAhBH,EAiBD,CAlBD,IAkBO,CACL4I,gBAAgB,CAAC,EAAD,CAAhB,CACA,GAAIjD,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,eAAjC,CAAkD,IAAlD,CAAwD,IAAxD,CAAD,CAAgEjT,UAAhE,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,eAAD,CAAd,CACD,CACF,CACH;AACC,CAhCQ,CAgCN,CAACzP,OAAD,CAAUgV,OAAV,CAhCM,CAAT,CAkCA,MAAO,CAACoD,aAAD,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;GA0BO,QAASI,cAAT,CACLxY,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBAC4BzH,sDAAQ,EADpC,oOACO4K,MADP,gBACeC,SADf,gBAEA;AACA;AACA;AACA;AALA,gBAMkD7K,sDAAQ,CAAC,EAAD,CAN1D,oOAMO8K,iBANP,gBAM0BC,oBAN1B,gCAO4C/K,sDAAQ,CAAC,EAAD,CAPpD,oOAOOgL,cAPP,gBAOuBC,iBAPvB,gBASA,GAAM/W,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,GAAII,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAI0K,mFAAJ,CAAyBqC,OAAzB,CAAD,CAAoCjT,UAApC,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,QAAD,CAAd,CACD,CACD,OACD,CAED,GAAIzP,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyByY,MAA7B,CAAqC,CACnCzY,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyByY,MAAzB,CAAgC/C,IAAhC,GAAuCC,KAAvC,CAA6C,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAA9C,EAAuE8T,IAAvE,CAA4E,SAACC,OAAD,CAAa,CACvF,GAAI,CAACA,OAAL,CAAc,OADyE,GAE/E1X,KAF+E,CAEvC0X,OAFuC,CAE/E1X,IAF+E,CAEpEiS,IAFoE,CAEvCyF,OAFuC,CAEzEtF,GAFyE,CAE9DuF,kBAF8D,CAEvCD,OAFuC,CAE9DC,kBAF8D,CAGvF2C,SAAS,CAACta,IAAD,CAAT,CACAiS,IAAI,CAAC7S,OAAL,CAAa,eAAiB,4NAAfgT,GAAe,UAAVhH,IAAU,UAC5B+G,MAAM,CAACC,GAAD,CAAMhH,IAAN,CAAN,CACD,CAFD,EAJuF,GAOtEuP,iBAPsE,CAO5B3a,IAP4B,CAO/E4B,OAP+E,CAO9CgZ,aAP8C,CAO5B5a,IAP4B,CAOpD6a,IAPoD,CAQvFL,oBAAoB,CAACG,gBAAD,CAApB,CACAD,iBAAiB,CAACE,aAAD,CAAjB,CACAxE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,QAAD,CAAd,CACD,CAhBD,EAiBD,CAlBD,IAkBO,CACL;AACA;AACAmJ,oBAAoB,CAAC,EAAD,CAApB,CACAE,iBAAiB,CAAC,EAAD,CAAjB,CACA,GAAI1D,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,QAAjC,CAA2C,IAA3C,CAAiD,IAAjD,CAAD,CAAyDjT,UAAzD,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,QAAD,CAAd,CACD,CACF,CACH;AACC,CAxCQ,CAwCN,CAACzP,OAAD,CAAUgV,OAAV,CAxCM,CAAT,CAyCA,MAAO,CAACyD,MAAD,CAASE,iBAAT,CAA4BE,cAA5B,CAAP,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;GAwBO,QAASK,uBAAT,CACLlZ,OADK,CACIgV,OADJ,CACavF,cADb,CAC6Bc,MAD7B,CACqC6E,UADrC,CAELC,mBAFK,CAEgBC,yBAFhB,CAGL,iBACwDzH,sDAAQ,EADhE,oOACOsL,oBADP,gBAC6BC,uBAD7B,gBAGA,GAAMrX,WAAU,CAAGyD,8EAAa,EAAhC,CAEAwI,uDAAS,CAAC,UAAM,CACd,GAAI,CAAChO,OAAO,CAACgV,OAAD,CAAZ,CAAuB,CACrB,OACD,CAED,GAAIhV,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,kBAAzB,CAAJ,CAAkD,CAChDA,OAAO,CAACgV,OAAD,CAAP,CAAiBhV,OAAjB,CAAyB,kBAAzB,EAA6C0V,IAA7C,GAAoDC,KAApD,CAA0D,SAAAC,CAAC,QAAI3N,KAAI,CAAC2N,CAAD,CAAI7T,UAAJ,CAAR,EAA3D,EACG8T,IADH,CACQ,SAACC,OAAD,CAAa,CACjB,GAAI,CAACA,OAAL,CAAc,OADG,GAET1X,KAFS,CAEyB0X,OAFzB,CAET1X,IAFS,CAEHoS,GAFG,CAEyBsF,OAFzB,CAEHtF,GAFG,CAEEuF,kBAFF,CAEyBD,OAFzB,CAEEC,kBAFF,CAGjBqD,uBAAuB,CAAChb,IAAD,CAAvB,CACAmS,MAAM,CAACC,GAAD,CAAN,CACAgE,qBAAqB,CACnBuB,kBADmB,CAEnBV,mBAFmB,CAGnBC,yBAHmB,CAArB,CAKA7F,cAAc,CAAC,kBAAD,CAAd,CACD,CAZH,EAaD,CAdD,IAcO,CACL2J,uBAAuB,CAAC,IAAD,CAAvB,CACA,GAAIhE,UAAJ,CAAgB,CACdnN,IAAI,CAAC,GAAIyK,kFAAJ,CAAwBsC,OAAxB,CAAiC,kBAAjC,CAAqD,IAArD,CAA2D,IAA3D,CAAD,CAAmEjT,UAAnE,CAAJ,CACD,CAFD,IAEO,CACL0N,cAAc,CAAC,kBAAD,CAAd,CACD,CACF,CACH;AACC,CA5BQ,CA4BN,CAACzP,OAAD,CAAUgV,OAAV,CA5BM,CAAT,CA8BA,MAAO,CAACmE,oBAAD,CAAP,CACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5tBD,yCAcA;;;GAIA,QAASE,YAAT,EAAuB,CACrB,MAAOC,+CAAM,EAAb,CACD,CAED;;;;;GAMO,QAASC,UAAT,CAAmBC,QAAnB,CAA6B,CAClC,GAAI,CAACA,QAAL,CAAe,CACb,MAAO,EAAP,CACD,CACD,GAAI,CAACA,QAAQ,CAAC7O,QAAd,CAAwB,CACtB,MAAQ6O,SAAQ,CAAC1Z,GAAT,EAAgB,EAAxB,CACD,CACD,MAAO0Z,SAAQ,CAAC7O,QAAT,CAAkB8O,OAAlB,CAA0B,SAAA3Y,CAAC,QAAIyY,UAAS,CAACzY,CAAD,CAAb,EAA3B,CAAP,CACD,CAED;;;;;;GAOO,QAAS4Y,aAAT,CAAsBF,QAAtB,CAA2C,IAAXrb,MAAW,2DAAH,CAAG,CAChD,GAAI,CAACqb,QAAQ,CAAC7O,QAAd,CAAwB,CACtB,MAAOxM,MAAP,CACD,CACD,GAAMwb,SAAQ,CAAGxb,KAAK,CAAG,CAAzB,CACA,GAAMyb,gBAAe,CAAGJ,QAAQ,CAAC7O,QAAT,CAAkBjI,GAAlB,CAAsB,SAAA5B,CAAC,QAAI4Y,aAAY,CAAC5Y,CAAD,CAAI6Y,QAAJ,CAAhB,EAAvB,CAAxB,CACA,MAAO3N,KAAI,CAACY,GAAL,OAAAZ,IAAI,6MAAQ4N,eAAR,UAAyBD,QAAzB,GAAX,CACD,CAED;;;;;GAMO,QAASE,cAAT,CAAuBL,QAAvB,CAAiC,CACtC,GAAI,CAACA,QAAL,CAAe,CACb,MAAO,EAAP,CACD,CACD,GAAI,CAACA,QAAQ,CAAC7O,QAAd,CAAwB,mBACtB,MAAQ,gBAAA6O,QAAQ,CAAC1Z,GAAT,sDAAc7C,MAAd,GAAwB,CAAhC,CACD,CACD,MAAOuc,SAAQ,CAAC7O,QAAT,CAAkB7O,MAAlB,CAAyB,SAACge,GAAD,CAAMC,IAAN,QAAeD,IAAG,CAAGD,aAAa,CAACE,IAAD,CAAlC,EAAzB,CAAmE,CAAnE,CAAP,CACD,CAED;;;;;;GAOA,QAASC,uBAAT,CAAgCC,IAAhC,CAAsClP,IAAtC,CAA4CmP,cAA5C,CAA4D,CAC1D,GAAMC,aAAY,CAAGpP,IAAI,CAACmP,cAAD,CAAzB,CACA,GAAID,IAAI,CAACzQ,IAAL,GAAc2Q,YAAlB,CAAgC,CAC9B,GAAID,cAAc,GAAKnP,IAAI,CAAC9N,MAAL,CAAc,CAArC,CAAwC,CACtC,MAAOgd,KAAP,CACD,CACD,GAAIA,IAAI,CAACtP,QAAT,CAAmB,CACjB,GAAMyP,WAAU,CAAGH,IAAI,CAACtP,QAAL,CAChBjI,GADgB,CACZ,SAAA2X,KAAK,QAAIL,uBAAsB,CAACK,KAAD,CAAQtP,IAAR,CAAcmP,cAAc,CAAG,CAA/B,CAA1B,EADO,EAEhBrZ,MAFgB,CAETwD,OAFS,CAAnB,CAGA,GAAI+V,UAAU,CAACnd,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAOmd,WAAU,CAAC,CAAD,CAAjB,CACD,CACF,CACF,CACD,MAAO,KAAP,CACD,CAED;;;;;GAMO,QAASE,uBAAT,CAAgCC,QAAhC,CAA0CC,cAA1C,CAA0D,CAC/D,GAAMJ,WAAU,CAAGG,QAAQ,CAACpQ,IAAT,CAChBzH,GADgB,CACZ,SAAA+X,aAAa,QAAIT,uBAAsB,CAACS,aAAD,CAAgBD,cAAhB,CAAgC,CAAhC,CAA1B,EADD,EAEhB3Z,MAFgB,CAETwD,OAFS,CAAnB,CAGA,GAAI+V,UAAU,CAACnd,MAAX,GAAsB,CAA1B,CAA6B,CAC3B,MAAOmd,WAAU,CAAC,CAAD,CAAjB,CACD,CACD,MAAO,KAAP,CACD,CAED;;;;;;;;;;;GAYO,QAASM,cAAT,CAAuBT,IAAvB,CAA6BU,SAA7B,CAAwCC,SAAxC,CAAmDC,gBAAnD,CAAqEC,QAArE,CAA+E,CACpF,GAAIC,QAAJ,CACA,GAAI,CAACD,QAAL,CAAe,CACbC,OAAO,CAAG,CAACd,IAAI,CAACzQ,IAAN,CAAV,CACD,CAFD,IAEO,CACLuR,OAAO,6MAAOD,QAAP,CAAP,CACD,CACD,GAAIH,SAAS,CAACV,IAAD,CAAOc,OAAP,CAAb,CAA8B,CAC5BF,gBAAgB,CAAChd,IAAjB,CAAsBkd,OAAtB,EACA,MAAOH,UAAS,CAACX,IAAD,CAAOc,OAAP,CAAhB,CACD,CACD,GAAId,IAAI,CAACtP,QAAT,CAAmB,CACjB,OAAO,2MACFsP,IADL,EAEEtP,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CAAcjI,GAAd,CACR,SAAA2X,KAAK,QAAIK,cAAa,CACpBL,KADoB,CACbM,SADa,CACFC,SADE,CACSC,gBADT,CAC2BE,OAAO,CAACC,MAAR,CAAe,CAACX,KAAK,CAAC7Q,IAAP,CAAf,CAD3B,CAAjB,EADG,CAFZ,GAQD,CACD,MAAOyQ,KAAP,CACD,CAED;;;;;;;;;;;GAYO,QAASgB,iBAAT,CAA0BhB,IAA1B,CAAgCU,SAAhC,CAA2CC,SAA3C,CAAsDC,gBAAtD,CAAwEC,QAAxE,CAAkF,CACvF,GAAIC,QAAJ,CACA,GAAI,CAACD,QAAL,CAAe,CACbC,OAAO,CAAG,CAACd,IAAI,CAACzQ,IAAN,CAAV,CACD,CAFD,IAEO,CACLuR,OAAO,6MAAOD,QAAP,CAAP,CACD,CACD,GAAII,QAAO,CAAGjB,IAAd,CACA,GAAIU,SAAS,CAACV,IAAD,CAAOc,OAAP,CAAb,CAA8B,CAC5BF,gBAAgB,CAAChd,IAAjB,CAAsBkd,OAAtB,EACAG,OAAO,CAAGN,SAAS,CAACX,IAAD,CAAOc,OAAP,CAAnB,CACD,CACD,GAAId,IAAI,CAACtP,QAAT,CAAmB,CACjB,OAAO,2MACFuQ,OADL,EAEEvQ,QAAQ,CAAEuQ,OAAO,CAACvQ,QAAR,CAAiBjI,GAAjB,CACR,SAAA2X,KAAK,QAAIY,iBAAgB,CACvBZ,KADuB,CAChBM,SADgB,CACLC,SADK,CACMC,gBADN,CACwBE,OAAO,CAACC,MAAR,CAAe,CAACX,KAAK,CAAC7Q,IAAP,CAAf,CADxB,CAApB,EADG,CAFZ,GAQD,CACD,MAAO0R,QAAP,CACD,CAED;;;;;GAMO,QAASC,gBAAT,CAAyB3B,QAAzB,CAAmC4B,QAAnC,CAA6C,CAClD,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,uNAAM6O,QAAQ,CAAC7O,QAAf,GAAyByQ,QAAzB,EAFV,GAID,CAED;;;;;GAMO,QAASC,iBAAT,CAA0B7B,QAA1B,CAAoC4B,QAApC,CAA8C,CACnD,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,EAAGyQ,QAAH,qNAAgB5B,QAAQ,CAAC7O,QAAzB,EAFV,GAID,CAED;;;;;;GAOO,QAAS2Q,gBAAT,CAAyB9B,QAAzB,CAAmC4B,QAAnC,CAA6CG,WAA7C,CAA0D,CAC/D,GAAMC,YAAW,CAAGld,KAAK,CAACmd,IAAN,CAAWjC,QAAQ,CAAC7O,QAApB,CAApB,CACA6Q,WAAW,CAACE,MAAZ,CAAmBH,WAAnB,CAAgC,CAAhC,CAAmCH,QAAnC,EACA,OAAO,2MACF5B,QADL,EAEE7O,QAAQ,CAAE6Q,WAFZ,GAID,CAED;;;;GAKO,QAASG,YAAT,CAAqBpB,QAArB,CAA+BqB,YAA/B,CAA6C,CAClD,GAAMxS,MAAK,CAAGwS,YAAY,CAAClZ,GAAb,CAAiB,SAAAqI,IAAI,QAAIuP,uBAAsB,CAACC,QAAD,CAAWxP,IAAX,CAA1B,EAArB,CAAd,CACA,GAAM8Q,SAAQ,CAAGzS,KAAK,CAAC1G,GAAN,CAAU,SAAAuX,IAAI,QAAIV,UAAS,CAACU,IAAD,CAAT,CAAgBvX,GAAhB,CAAoB,yOAAEwE,MAAF,gBAAcA,OAAd,EAApB,CAAJ,EAAd,CAAjB,CACA,MAAO2U,SAAQ,CACZ/f,MADI,CACG,SAACkc,CAAD,CAAI8D,CAAJ,QAAU9D,EAAC,CAACgD,MAAF,CAASc,CAAC,CAACjb,MAAF,CAAS,SAAAkb,GAAG,QAAI,CAAC/D,CAAC,CAACha,QAAF,CAAW+d,GAAX,CAAL,EAAZ,CAAT,CAAV,EADH,CAC0DF,QAAQ,CAAC,CAAD,CAAR,EAAe,EADzE,CAAP,CAED,CAED;;;;GAKO,QAASG,mBAAT,CAA4BzB,QAA5B,CAAsCqB,YAAtC,CAAoD,CACzD,GAAMxS,MAAK,CAAGwS,YAAY,CAAClZ,GAAb,CAAiB,SAAAqI,IAAI,QAAIuP,uBAAsB,CAACC,QAAD,CAAWxP,IAAX,CAA1B,EAArB,CAAd,CACA,GAAM8Q,SAAQ,CAAGzS,KAAK,CAAC1G,GAAN,CAAU,SAAAuX,IAAI,QAAIV,UAAS,CAACU,IAAD,CAAT,CAAgBvX,GAAhB,CAAoB,2OAAEwE,MAAF,gBAAcA,OAAd,EAApB,CAAJ,EAAd,CAAjB,CACA,MAAO2U,SAAQ,CACZ/f,MADI,CACG,SAACkc,CAAD,CAAI8D,CAAJ,QAAUA,EAAC,CAACjb,MAAF,CAAS,SAAAkb,GAAG,QAAI/D,EAAC,CAACha,QAAF,CAAW+d,GAAX,CAAJ,EAAZ,CAAV,EADH,CAC+CF,QAAQ,CAAC,CAAD,CAAR,EAAe,EAD9D,CAAP,CAED,CAED;;;;;GAMO,QAASI,iBAAT,CAA0B1B,QAA1B,CAAoCqB,YAApC,CAAkDtM,KAAlD,CAAyD,CAC9D,GAAM4M,aAAY,CAAGP,WAAW,CAACpB,QAAD,CAAWqB,YAAX,CAAhC,CACA,MAAOtM,MAAK,CAACzO,MAAN,CAAa,SAAAsb,EAAE,QAAI,CAACD,YAAY,CAACle,QAAb,CAAsBme,EAAtB,CAAL,EAAf,CAAP,CACD,CAED;;;;;;;;;GAUO,QAASC,+BAAT,CAAwCnC,IAAxC,CAA8C9b,KAA9C,CAAqDke,QAArD,CAAkF,IAAnBC,UAAmB,2DAAP,KAAO,CACvF,GAAI,CAACrC,IAAI,CAACtP,QAAV,CAAoB,CAClB,GAAI,CAAC2R,SAAL,CAAgB,CACd,MAAO,KAAP,CACD,CACD,MAAO,uNAAKD,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAAP,CACD,CACD,GAAIrL,KAAK,GAAK,CAAd,CAAiB,CACf,MAAO,uNAAKke,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAAP,CACD,CACD,MAAOyQ,KAAI,CAACtP,QAAL,CACJ8O,OADI,CACI,SAAA3Y,CAAC,QAAIsb,+BAA8B,CAACtb,CAAD,CAAI3C,KAAK,CAAG,CAAZ,uNAAmBke,QAAnB,GAA6BpC,IAAI,CAACzQ,IAAlC,GAAyC8S,SAAzC,CAAlC,EADL,EAEJzb,MAFI,CAEGwD,OAFH,CAAP,CAGD,CAED;;;;GAKO,QAASkY,WAAT,CAAoBhC,QAApB,CAA8B9P,QAA9B,CAAwC,CAC7C,MAAO,CACLJ,OAAO,CAAEC,wEAAoB,CAACG,QAAD,CAApB,CAA+BD,aADnC,CAELC,QAAQ,CAARA,QAFK,CAGLN,IAAI,CAAEoQ,QAAQ,CAACpQ,IAHV,CAAP,CAKD,CAED;;;;;;;;;;GAWO,QAASqS,wBAAT,CAAiCjC,QAAjC,CAA2CkC,QAA3C,CAAqDhS,QAArD,CAA+DiS,aAA/D,CAA8ElV,KAA9E,CAAqF,CAC1F,GAAMyS,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWkC,QAAX,CAAnC,CACA,GAAME,eAAc,CAAG1B,gBAAgB,CAAChB,IAAD,CAAO,iBAAM,KAAN,EAAP,CAAmB,SAAC1Q,CAAD,CAAIqT,KAAJ,CAAc,+CACtE,GAAMC,UAAS,wBAAGH,aAAH,SAAGA,aAAH,sCAAGA,aAAa,CAAEpT,IAAf,CAAoB,SAAAxI,CAAC,QAAIoT,sDAAO,CAACpT,CAAC,CAACiK,IAAH,CAAS6R,KAAT,CAAX,EAArB,CAAH,8CAAG,oBAAkD5R,KAArD,+DACVzD,uEAAe,CAACC,KAAD,CADpB,CAEA,OAAO,2MACF+B,CADL,EAEEyB,KAAK,CAAE6R,SAAS,CAACjgB,KAAV,CAAgB,CAAhB,CAAmB,CAAnB,CAFT,GAID,CAPsC,CAOpC,EAPoC,CAAvC,CAQA,GAAMkgB,yBAAwB,4MACzBvC,QADyB,EAE5BpQ,IAAI,CAAE,CAACwS,cAAD,CAFsB,EAA9B,CAIA,MAAO,CACLI,YAAY,CAAER,UAAU,CAACO,wBAAD,CAA2BrS,QAA3B,CADnB,CAELuS,QAAQ,CAAE/C,IAAI,CAACzQ,IAFV,CAAP,CAID,CAED;;;;;GAMO,QAASyT,cAAT,CAAuB1C,QAAvB,CAAiCkC,QAAjC,CAA2C,CAChD,GAAMxC,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWkC,QAAX,CAAnC,CACA,MAAO,CAAES,WAAW,CAAE3D,SAAS,CAACU,IAAD,CAAxB,CAAgC+C,QAAQ,CAAE/C,IAAI,CAACzQ,IAA/C,CAAP,CACD,CAED;;;;GAKO,QAAS2T,eAAT,CAAwB1S,QAAxB,CAAkC,CACvC,MAAO,CACLJ,OAAO,CAAEC,wEAAoB,CAACG,QAAD,CAApB,CAA+BD,aADnC,CAELC,QAAQ,CAARA,QAFK,CAGLN,IAAI,CAAE,EAHD,CAAP,CAKD,CAED;;;;;;GAOO,QAASiT,kBAAT,CAA2BnD,IAA3B,CAAiClP,IAAjC,CAAuCnB,YAAvC,CAAqD,wBAC1D,GAAMzL,MAAK,CAAG4M,IAAI,CAAC9N,MAAL,CAAc,CAA5B,CACA,MAAO,CACLoO,KAAK,CAAE4O,IAAI,CAACzQ,IADP,CAEL6T,OAAO,CAAE/I,iEAAS,CAACvJ,IAAD,CAFb,CAGLA,IAAI,CAAJA,IAHK,CAILuS,IAAI,CAAEzD,aAAa,CAACI,IAAD,CAJd,CAKLjP,KAAK,CAAEpB,YAAF,SAAEA,YAAF,qCAAEA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASA,IAAT,CAAX,EAApB,CAAF,6CAAE,mBAAgDC,KALlD,CAML7M,KAAK,CAALA,KANK,CAOLof,MAAM,CAAE,CAAC,CAACtD,IAAI,CAACtP,QAAN,EAAkBsP,IAAI,CAACtP,QAAL,CAAc1N,MAAd,GAAyB,CAA5C,GAAkDoH,OAAO,CAAC4V,IAAI,CAACna,GAAN,CAP5D,CAQL0M,MAAM,CAAEkN,YAAY,CAACO,IAAD,CARf,CAAP,CAUD,CAED;;;;;;;;;GAUA,QAASuD,wBAAT,CAAiCC,aAAjC,CAAgDC,CAAhD,CAAkF,IAA/BC,YAA+B,2DAAjB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAiB,CAChF,MAAO,CACJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CADlD,CAEJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CAFlD,CAGJ,CAACF,aAAa,CAAC,CAAD,CAAb,CAAmBE,WAAW,CAAC,CAAD,CAA/B,EAAsCD,CAAvC,CAA4CC,WAAW,CAAC,CAAD,CAHlD,CAAP,CAKD,CAED;;;;;;;;;;;;GAaO,QAASC,2BAAT,CAAoCrD,QAApC,CAA8CsD,iBAA9C,CAAiEjU,YAAjE,CAA+EpC,KAA/E,CAAsF,CAC3F,GAAIsW,gBAAe,CAAG,EAAtB,CACAD,iBAAiB,CAACrgB,OAAlB,CAA0B,SAACugB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,yBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAjT,YAAY,OAAZ,EAAAA,YAAY,SAAZ,6BAAAA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAApB,mEAAuD/S,KAAvD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIAsW,eAAe,uNACVA,eADU,8MAEVE,OAAO,CAACtb,GAAR,CAAY,2OAAEwE,MAAF,UAAU+W,IAAV,gBAAoB,CACjC/W,MADiC,CAEhCgX,mDAAK,CAACD,IAAD,CAAL,CAAcpB,SAAd,CAA0BW,uBAAuB,CAACX,SAAD,CAAYoB,IAAZ,CAFjB,CAApB,EAAZ,CAFU,EAAf,CAOD,CACF,CAhBD,EAiBA,MAAO,IAAIE,IAAJ,CAAQL,eAAR,CAAP,CACD,CAED;;;;;;;;;;;;GAaO,QAASM,wBAAT,CAAiC7D,QAAjC,CAA2CsD,iBAA3C,CAA8DQ,QAA9D,CAAwE7W,KAAxE,CAA+E,CACpF,GAAI8W,WAAU,CAAG,EAAjB,CADoF,yBAE3E1gB,CAF2E,EAGlF,GAAMmgB,YAAW,CAAGF,iBAAiB,CAACjgB,CAAD,CAArC,CACA,GAAMqc,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,oBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAwB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,wBAAAA,QAAQ,CAAE/U,IAAV,CAAe,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAAhB,yDAAmD/S,KAAnD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIA8W,UAAU,CAAGA,UAAU,CAACtD,MAAX,CAAkBgD,OAAO,CAACtb,GAAR,CAAY,2OAAEwE,MAAF,gBAAe,CACxDqX,KAAK,CAAErX,MADiD,CAExDsC,IAAI,CAAEyQ,IAAI,CAACzQ,IAF6C,CAGxDwB,KAAK,CAAE6R,SAHiD,CAAf,EAAZ,CAAlB,CAAb,CAKD,CAhBiF,EAEpF,IAAK,GAAIjf,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGigB,iBAAiB,CAAC5gB,MAAtC,CAA8CW,CAAC,EAAI,CAAnD,CAAsD,OAA7CA,CAA6C,EAerD,CACD,MAAO0gB,WAAP,CACD,CAEM,QAASE,6BAAT,CACLjE,QADK,CACKnU,KADL,CACYqY,OADZ,CACqBZ,iBADrB,CACwCjU,YADxC,CACsDpC,KADtD,CAEL,CACA,GAAMkX,gBAAe,CAAG,EAAxB,CACAb,iBAAiB,CAACrgB,OAAlB,CAA0B,SAACugB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,yBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CACb,CAAAjT,YAAY,OAAZ,EAAAA,YAAY,SAAZ,6BAAAA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAApB,mEAAuD/S,KAAvD,GACGzD,uEAAe,CAACC,KAAD,CAFpB,CAIA,GAAMmX,cAAa,CAAGX,OAAO,CAC1Btb,GADmB,CACf,6QAAEwE,MAAF,iBAAe,gBAClBd,KAAK,CAACc,MAAD,CADa,wCAClB,cAAe0X,QAAf,CAAwBH,OAAxB,EAAiC,CAAjC,CADkB,CAElB,kBAACrY,KAAK,CAACc,MAAD,CAAN,yCAAC,eAAe0X,QAAf,CAAwBH,OAAxB,EAAiC,CAAjC,CAAD,CAFkB,CAAf,EADe,EAKnB5d,MALmB,CAKZ,SAAAkR,IAAI,QAAIA,KAAI,CAACxQ,KAAL,CAAW,SAAA3D,CAAC,QAAI,OAAOA,EAAP,GAAa,QAAjB,EAAZ,CAAJ,EALQ,CAAtB,CAOA,GAAI+gB,aAAa,CAAC1hB,MAAd,CAAuB,CAA3B,CAA8B,CAC5B,GAAM4hB,OAAM,CAAGC,uEAAqB,CAClCH,aAAa,CAACjc,GAAd,CAAkBqc,mDAAlB,CADkC,CAApC,CAGA,GAAMC,UAAS,CAAGC,QAAlB,CACA,GAAMC,WAAU,CAAGC,iDAAU,CAACR,aAAD,CAAgBK,SAAhB,CAA7B,CACA,GAAIE,UAAJ,CAAgB,CACd,GAAME,eAAc,CAAGC,qDAAQ,CAACR,MAAD,CAAR,CAAiBS,QAAjB,CAA0BC,WAAjD,CACAb,eAAe,CAAC7gB,IAAhB,CAAqB,CACnBkN,IAAI,CAAEgT,WADa,CAEnBvU,IAAI,CAAEuU,WAAW,CAACA,WAAW,CAAC9gB,MAAZ,CAAqB,CAAtB,CAFE,CAGnBuiB,IAAI,CAAEN,UAHa,CAInBlU,KAAK,CAAE6R,SAJY,CAKnBwC,QAAQ,CAAED,cALS,CAArB,EAOD,CACF,CACF,CACF,CAjCD,EAkCA,MAAOV,gBAAP,CACD,CAED;;;;;;;;;;;;GAaO,QAASe,yBAAT,CAAkClF,QAAlC,CAA4CsD,iBAA5C,CAA+DQ,QAA/D,CAAyE7W,KAAzE,CAAgF,CACrF,GAAMuE,MAAK,CAAG,EAAd,CACA8R,iBAAiB,CAACrgB,OAAlB,CAA0B,SAACugB,WAAD,CAAiB,CACzC,GAAM9D,KAAI,CAAGK,sBAAsB,CAACC,QAAD,CAAWwD,WAAX,CAAnC,CACA,GAAI9D,IAAJ,CAAU,qBACR,GAAM+D,QAAO,CAAGzE,SAAS,CAACU,IAAD,CAAzB,CACA,GAAM4C,UAAS,CAAG,CAAAwB,QAAQ,OAAR,EAAAA,QAAQ,SAAR,yBAAAA,QAAQ,CAAE/U,IAAV,CAAe,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASgT,WAAT,CAAX,EAAhB,2DAAmD/S,KAAnD,GACbzD,uEAAe,CAACC,KAAD,CADpB,CAEAuE,KAAK,CAAClO,IAAN,CAAW,CACT7B,GAAG,CAAEqd,WAAW,EADP,CAET7P,IAAI,CAAEyQ,IAAI,CAACzQ,IAFF,CAGT8T,IAAI,CAAEU,OAAO,CAAC/gB,MAHL,CAIT+N,KAAK,CAAE6R,SAJE,CAAX,EAMD,CACF,CAbD,EAcA,MAAO9Q,MAAP,CACD,CAED;;;;;;GAOO,QAAS2T,WAAT,CAAoBzF,IAApB,CAA0BoC,QAA1B,CAAoCsD,UAApC,CAAgD,CACrD,GAAIzL,qDAAO,uNAAKmI,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAA2BmW,UAA3B,CAAX,CAAmD,CACjD,MAAO,KAAP,CACD,CACD,GAAI,CAAC1F,IAAI,CAACtP,QAAV,CAAoB,CAClB,MAAOsP,KAAP,CACD,CACD,OAAO,2MACFA,IADL,EAEEtP,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CAAcjI,GAAd,CACR,SAAA5B,CAAC,QAAI4e,WAAU,CAAC5e,CAAD,uNAAQub,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAA8BmW,UAA9B,CAAd,EADO,EAER9e,MAFQ,CAEDwD,OAFC,CAFZ,GAMD,CAEM,QAASub,2BAAT,CAAoCrF,QAApC,CAA8CqB,YAA9C,CAA4D,CACjE,GAAIxK,OAAM,CAAG,IAAb,CACA,GAAImJ,QAAJ,CAAc,CACZA,QAAQ,CAACpQ,IAAT,CAAc3M,OAAd,CAAsB,SAACqiB,GAAD,CAAS,CAC7B,GAAMC,cAAa,CAAG,CAACD,GAAG,CAACrW,IAAL,CAAtB,CACA,GAAMgD,OAAM,CAAGkN,YAAY,CAACmG,GAAD,CAA3B,CACAE,mDAAK,CAACvT,MAAD,CAAL,CAAchP,OAAd,CAAsB,SAACI,CAAD,CAAO,CAC3B,GAAMoiB,WAAU,CAAGpiB,CAAC,CAAG,CAAvB,CACA,GAAMqiB,eAAc,CAAG7D,8BAA8B,CAACyD,GAAD,CAAMG,UAAN,CAAkB,EAAlB,CAAsB,IAAtB,CAArD,CACA,GAAI9L,qDAAO,CAAC+L,cAAD,CAAiBrE,YAAjB,CAAX,CAA2C,CACzCxK,MAAM,CAAG,CAAE0O,aAAa,CAAbA,aAAF,CAAiBE,UAAU,CAAVA,UAAjB,CAAT,CACD,CACF,CAND,EAOD,CAVD,EAWD,CACD,MAAO5O,OAAP,CACD,CAEM,QAAS8O,cAAT,CAAuBhV,QAAvB,CAAiCiV,YAAjC,CAA+C,CACpD,GAAMC,MAAK,CAAG,EAAd,CACA,GAAMC,UAAS,CAAG,EAAlB,CACA,GAAIC,YAAW,CAAG,KAAlB,CAEA,QAASC,SAAT,CAAkBtG,IAAlB,CAAwBoC,QAAxB,CAAkC,CAChC+D,KAAK,CAACviB,IAAN,uNAAewe,QAAf,GAAyBpC,IAAI,CAACzQ,IAA9B,IACA,GAAIyQ,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAcnN,OAAd,CAAsB,SAAAsD,CAAC,QAAIyf,SAAQ,CAACzf,CAAD,uNAAQub,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAAZ,EAAvB,EACD,CACF,CACD0B,QAAQ,CAACf,IAAT,CAAc3M,OAAd,CAAsB,SAAAqiB,GAAG,QAAIU,SAAQ,CAACV,GAAD,CAAM,EAAN,CAAZ,EAAzB,EAEA,QAASW,aAAT,CAAsBvG,IAAtB,CAA4BoC,QAA5B,CAAsC,CACpCgE,SAAS,CAACxiB,IAAV,uNAAmBwe,QAAnB,GAA6BpC,IAAI,CAACzQ,IAAlC,IACA,GAAIyQ,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAcnN,OAAd,CAAsB,SAAAsD,CAAC,QAAIyf,SAAQ,CAACzf,CAAD,uNAAQub,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAAZ,EAAvB,EACD,CACF,CACD2W,YAAY,CAAChW,IAAb,CAAkB3M,OAAlB,CAA0B,SAAAqiB,GAAG,QAAIW,aAAY,CAACX,GAAD,CAAM,EAAN,CAAhB,EAA7B,EAEAQ,SAAS,CAAC7iB,OAAV,CAAkB,SAACyW,QAAD,CAAc,CAC9B,GAAImM,KAAK,CAAC9W,IAAN,CAAW,SAAAoU,CAAC,QAAIxJ,sDAAO,CAACwJ,CAAD,CAAIzJ,QAAJ,CAAX,EAAZ,CAAJ,CAA2C,CACzCqM,WAAW,CAAG,IAAd,CACD,CACF,CAJD,EAKA,MAAOA,YAAP,CACD,CAEM,QAASG,uBAAT,CAAgCvV,QAAhC,CAA0CtB,YAA1C,CAAwD,CAC7D,GAAM8W,iBAAgB,6MAAQ9W,YAAY,EAAI,EAAxB,CAAtB,CACA,GAAM+W,yBAAwB,CAAGzV,QAAQ,CAACf,IAAT,CAAczH,GAAd,CAAkB,SAAAyH,IAAI,QAAI7L,MAAK,CAC7Dmd,IADwD,CACnD,CACJxe,MAAM,CAAEyc,YAAY,CAACvP,IAAD,CAAZ,CAAqB,CAAG;AAD5B,CADmD,EAGtDyW,IAHsD,CAGjD,CAHiD,CAAJ,EAAtB,CAAjC,CAKA,QAASC,YAAT,CAAqB5G,IAArB,CAA2BoC,QAA3B,CAAqCyE,cAArC,CAAqDC,SAArD,CAAgE,CAC9D,GAAMC,MAAK,CAAGL,wBAAwB,CAACI,SAAD,CAAxB,CAAoCD,cAApC,CAAd,CACA,GAAMrE,SAAQ,uNAAOJ,QAAP,GAAiBpC,IAAI,CAACzQ,IAAtB,EAAd,CAEA,GAAMqT,UAAS,CAAG6D,gBAAgB,CAACpX,IAAjB,CAAsB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAAS0R,QAAT,CAAX,EAAvB,CAAlB,CACA,GAAI,CAACI,SAAL,CAAgB,CACd;AACA;AACA,GAAMoE,eAAc,CAAIhH,IAAI,CAACjP,KAAL,CAAaiP,IAAI,CAACjP,KAAlB,CAA0BvD,uDAAO,CAACuZ,KAAK,CAAGvZ,uDAAO,CAACxK,MAAjB,CAAzD,CACAyjB,gBAAgB,CAAC7iB,IAAjB,CAAsB,CACpBkN,IAAI,CAAE0R,QADc,CAEpBzR,KAAK,CAAEiW,cAFa,CAAtB,EAID,CACDN,wBAAwB,CAACI,SAAD,CAAxB,CAAoCD,cAApC,GAAuD,CAAvD,CACA,GAAI7G,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAcnN,OAAd,CAAsB,SAAAsD,CAAC,QAAI+f,YAAW,CAAC/f,CAAD,CAAI2b,QAAJ,CAAcqE,cAAc,CAAG,CAA/B,CAAkCC,SAAlC,CAAf,EAAvB,EACD,CACF,CAED7V,QAAQ,CAACf,IAAT,CAAc3M,OAAd,CAAsB,SAACqiB,GAAD,CAAMkB,SAAN,QAAoBF,YAAW,CAAChB,GAAD,CAAM,EAAN,CAAU,CAAV,CAAakB,SAAb,CAA/B,EAAtB,EACA,MAAOL,iBAAP,CACD,CAEM,QAASQ,mBAAT,CAA4BC,MAA5B,CAAoC,IAEvC/a,MAFuC,CAQrC+a,MARqC,CAEvC/a,KAFuC,CAGvCqY,OAHuC,CAQrC0C,MARqC,CAGvC1C,OAHuC,CAIvCvT,QAJuC,CAQrCiW,MARqC,CAIvCjW,QAJuC,CAKvCkW,gBALuC,CAQrCD,MARqC,CAKvCC,gBALuC,CAMvCxX,YANuC,CAQrCuX,MARqC,CAMvCvX,YANuC,CAOvCpC,KAPuC,CAQrC2Z,MARqC,CAOvC3Z,KAPuC,CASzC,GAAI4Z,gBAAgB,EAAIA,gBAAgB,CAACnkB,MAAjB,CAA0B,CAA9C,EAAmDiO,QAAnD,EAA+D9E,KAAnE,CAA0E,CACxE,MAAOoY,6BAA4B,CACjCtT,QADiC,CACvB9E,KADuB,CAChBqY,OADgB,CACP2C,gBADO,CACWxX,YADX,CACyBpC,KADzB,CAAnC,CAGD,CACD,MAAO,EAAP,CACD,C;;;;;;;;;;;;;;gDCxoBD;;;;GAKO,GAAM6Z,4BAA2B,0PACrCnpB,mEAAgB,CAACE,QADoB,CACT,MADS,iOAErCF,mEAAgB,CAACG,YAFoB,CAEL,MAFK,iOAGrCH,mEAAgB,CAACI,kBAHoB,CAGC,YAHD,iOAIrCJ,mEAAgB,CAACM,cAJoB,CAIH,IAJG,iOAKrCN,mEAAgB,CAACO,kBALoB,CAKC,CALD,iOAMrCP,mEAAgB,CAACQ,kBANoB,CAMC,IAND,iOAOrCR,mEAAgB,CAACS,kBAPoB,CAOC,IAPD,iOAQrCT,mEAAgB,CAACU,kBARoB,CAQC,CARD,iOASrCV,mEAAgB,CAACW,kCAToB,CASiB,KATjB,iOAUrCX,mEAAgB,CAACY,gCAVoB,CAUe,KAVf,iOAWrCZ,mEAAgB,CAACa,4BAXoB,CAWW,EAXX,iOAYrCb,mEAAgB,CAACc,oBAZoB,CAYG,CAZH,iOAarCd,mEAAgB,CAACe,yBAboB,CAaQ,MAbR,iOAcrCf,mEAAgB,CAACgB,qBAdoB,CAcI,CAdJ,iOAerChB,mEAAgB,CAACiB,0BAfoB,CAeS,MAfT,iOAgBrCjB,mEAAgB,CAACkB,YAhBoB,CAgBL,IAhBK,iOAiBrClB,mEAAgB,CAACmB,gBAjBoB,CAiBD,CAjBC,iOAkBrCnB,mEAAgB,CAACoB,gBAlBoB,CAkBD,IAlBC,iOAmBrCpB,mEAAgB,CAACqB,gBAnBoB,CAmBD,IAnBC,iOAoBrCrB,mEAAgB,CAACsB,gBApBoB,CAoBD,IApBC,iOAqBrCtB,mEAAgB,CAACuB,kBArBoB,CAqBC,IArBD,iOAsBrCvB,mEAAgB,CAACwB,kBAtBoB,CAsBC,IAtBD,iOAuBrCxB,mEAAgB,CAACyB,kBAvBoB,CAuBC,IAvBD,iOAwBrCzB,mEAAgB,CAAC4B,kBAxBoB,CAwBC,KAxBD,iOAyBrC5B,mEAAgB,CAAC0B,sBAzBoB,CAyBK,CAzBL,iOA0BrC1B,mEAAgB,CAAC2B,kBA1BoB,CA0BC,GA1BD,iOA2BrC3B,mEAAgB,CAAC6C,mBA3BoB,CA2BE,IA3BF,iOA4BrC7C,mEAAgB,CAAC8C,0BA5BoB,CA4BS,IA5BT,iOA6BrC9C,mEAAgB,CAAC+C,mBA7BoB,CA6BE,IA7BF,iOA8BrC/C,mEAAgB,CAACgD,0BA9BoB,CA8BS,IA9BT,iOA+BrChD,mEAAgB,CAAC6B,cA/BoB,CA+BH,CA/BG,iOAgCrC7B,mEAAgB,CAAC8B,cAhCoB,CAgCH,CAhCG,iOAiCrC9B,mEAAgB,CAAC+B,gBAjCoB,CAiCD,CAjCC,iOAkCrC/B,mEAAgB,CAACgC,gBAlCoB,CAkCD,CAlCC,iOAmCrChC,mEAAgB,CAACyC,sBAnCoB,CAmCK,QAnCL,iOAoCrCzC,mEAAgB,CAAC2C,4BApCoB,CAoCW,CAAC,GAAD,CAAM,GAAN,CApCX,iOAqCrC3C,mEAAgB,CAAC0C,uBArCoB,CAqCM,IArCN,iOAsCrC1C,mEAAgB,CAACyD,mCAtCoB,CAsCkB,CAtClB,iOAuCrCzD,mEAAgB,CAACsC,cAvCoB,CAuCH,IAvCG,iOAwCrCtC,mEAAgB,CAACuC,iBAxCoB,CAwCA,IAxCA,iOAyCrCvC,mEAAgB,CAACwC,iBAzCoB,CAyCA,IAzCA,iOA0CrCxC,mEAAgB,CAACiC,UA1CoB,CA0CP,IA1CO,iOA2CrCjC,mEAAgB,CAACkC,aA3CoB,CA2CJ,IA3CI,iOA4CrClC,mEAAgB,CAACmC,iBA5CoB,CA4CA,IA5CA,iOA6CrCnC,mEAAgB,CAACoC,iBA7CoB,CA6CA,IA7CA,iOA8CrCpC,mEAAgB,CAACqC,aA9CoB,CA8CJ,IA9CI,iOA+CrCrC,mEAAgB,CAAC4C,kBA/CoB,CA+CC,kBA/CD,iOAgDrC5C,mEAAgB,CAACiD,cAhDoB,CAgDH,CAhDG,iOAiDrCjD,mEAAgB,CAACkD,cAjDoB,CAiDH,CAjDG,iOAkDrClD,mEAAgB,CAACmD,gBAlDoB,CAkDD,YAlDC,iOAmDrCnD,mEAAgB,CAACoD,gBAnDoB,CAmDD,YAnDC,iOAoDrCpD,mEAAgB,CAACqD,mBApDoB,CAoDE,IApDF,iOAqDrCrD,mEAAgB,CAACsD,kBArDoB,CAqDC,IArDD,iOAsDrCtD,mEAAgB,CAACuD,0BAtDoB,CAsDS,IAtDT,iOAuDrCvD,mEAAgB,CAACwD,0BAvDoB,CAuDS,IAvDT,wBAAjC,CA0DP;AACA;AACA;AACA;AACA;AACA;AACO,GAAM4lB,oCAAmC,CAAG,CACjDppB,mEAAgB,CAAC6B,cADgC,CAEjD7B,mEAAgB,CAAC8B,cAFgC,CAGjD9B,mEAAgB,CAAC+B,gBAHgC,CAIjD/B,mEAAgB,CAACgC,gBAJgC,CAKjDhC,mEAAgB,CAACM,cALgC,CAMjDN,mEAAgB,CAACQ,kBANgC,CAOjDR,mEAAgB,CAACS,kBAPgC,CAQjDT,mEAAgB,CAACU,kBARgC,CASjDV,mEAAgB,CAACW,kCATgC,CAUjDX,mEAAgB,CAACY,gCAVgC,CAWjDZ,mEAAgB,CAACa,4BAXgC,CAYjDb,mEAAgB,CAACc,oBAZgC,CAajDd,mEAAgB,CAACgB,qBAbgC,CAA5C,CAgBP;;;;;;;KAQO,GAAMqoB,6BAA4B,0PACtCvrB,4DAAS,CAACK,WAD4B,CACd,CACvB6B,mEAAgB,CAACC,OADM,CAEvBD,mEAAgB,CAACE,QAFM,CAGvBF,mEAAgB,CAACG,YAHM,CAIvBH,mEAAgB,CAACI,kBAJM,CAKvBJ,mEAAgB,CAACK,cALM,CAMvBL,mEAAgB,CAACM,cANM,CAOvBN,mEAAgB,CAACO,kBAPM,CAQvBP,mEAAgB,CAACQ,kBARM,CASvBR,mEAAgB,CAACS,kBATM,CAUvBT,mEAAgB,CAACU,kBAVM,CAWvBV,mEAAgB,CAACW,kCAXM,CAYvBX,mEAAgB,CAACY,gCAZM,CAavBZ,mEAAgB,CAACa,4BAbM,CAcvBb,mEAAgB,CAACc,oBAdM,CAevBd,mEAAgB,CAACe,yBAfM,CAgBvBf,mEAAgB,CAACgB,qBAhBM,CAiBvBhB,mEAAgB,CAACiB,0BAjBM,CAkBvBjB,mEAAgB,CAACiC,UAlBM,CAmBvBjC,mEAAgB,CAACkC,aAnBM,CAoBvBlC,mEAAgB,CAACmC,iBApBM,CAqBvBnC,mEAAgB,CAACoC,iBArBM,CAsBvBpC,mEAAgB,CAACqC,aAtBM,CAuBvBrC,mEAAgB,CAACuC,iBAvBM,CAwBvBvC,mEAAgB,CAACwC,iBAxBM,CAyBvBxC,mEAAgB,CAACyC,sBAzBM,CA0BvBzC,mEAAgB,CAAC2C,4BA1BM,CA2BvB3C,mEAAgB,CAAC4C,kBA3BM,CA4BvB5C,mEAAgB,CAACqD,mBA5BM,CADc,iOA+BtCvF,4DAAS,CAACa,MA/B4B,CA+BnB,CAClBqB,mEAAgB,CAACC,OADC,CAElBD,mEAAgB,CAACE,QAFC,CAGlBF,mEAAgB,CAACG,YAHC,CAIlBH,mEAAgB,CAACI,kBAJC,CAKlBJ,mEAAgB,CAACK,cALC,CAMlBL,mEAAgB,CAACM,cANC,CAOlBN,mEAAgB,CAACO,kBAPC,CAQlBP,mEAAgB,CAACQ,kBARC,CASlBR,mEAAgB,CAACS,kBATC,CAUlBT,mEAAgB,CAACU,kBAVC,CAWlBV,mEAAgB,CAACW,kCAXC,CAYlBX,mEAAgB,CAACY,gCAZC,CAalBZ,mEAAgB,CAACa,4BAbC,CAclBb,mEAAgB,CAACc,oBAdC,CAelBd,mEAAgB,CAACe,yBAfC,CAgBlBf,mEAAgB,CAACgB,qBAhBC,CAiBlBhB,mEAAgB,CAACiB,0BAjBC,CAkBlBjB,mEAAgB,CAACiC,UAlBC,CAmBlBjC,mEAAgB,CAACkC,aAnBC,CAoBlBlC,mEAAgB,CAACmC,iBApBC,CAqBlBnC,mEAAgB,CAACoC,iBArBC,CAsBlBpC,mEAAgB,CAACqC,aAtBC,CAuBlBrC,mEAAgB,CAACuC,iBAvBC,CAwBlBvC,mEAAgB,CAACwC,iBAxBC,CAyBlBxC,mEAAgB,CAACyC,sBAzBC,CA0BlBzC,mEAAgB,CAAC2C,4BA1BC,CA2BlB3C,mEAAgB,CAAC4C,kBA3BC,CA4BlB5C,mEAAgB,CAACqD,mBA5BC,CA6BlBrD,mEAAgB,CAAC0C,uBA7BC,CA8BlB1C,mEAAgB,CAACyD,mCA9BC,CA+BlBzD,mEAAgB,CAACuD,0BA/BC,CAgClBvD,mEAAgB,CAACwD,0BAhCC,CA/BmB,iOAiEtC1F,4DAAS,CAACM,OAjE4B,CAiElB,CACnB4B,mEAAgB,CAACC,OADE,CAEnBD,mEAAgB,CAACE,QAFE,CAGnBF,mEAAgB,CAACG,YAHE,CAInBH,mEAAgB,CAACI,kBAJE,CAKnBJ,mEAAgB,CAACkB,YALE,CAMnBlB,mEAAgB,CAACmB,gBANE,CAOnBnB,mEAAgB,CAAC6C,mBAPE,CAQnB7C,mEAAgB,CAAC8C,0BARE,CASnB9C,mEAAgB,CAAC+C,mBATE,CAUnB/C,mEAAgB,CAACgD,0BAVE,CAWnBhD,mEAAgB,CAACoB,gBAXE,CAYnBpB,mEAAgB,CAACqB,gBAZE,CAanBrB,mEAAgB,CAACsB,gBAbE,CAcnBtB,mEAAgB,CAACuB,kBAdE,CAenBvB,mEAAgB,CAACwB,kBAfE,CAgBnBxB,mEAAgB,CAACyB,kBAhBE,CAiBnBzB,mEAAgB,CAAC0B,sBAjBE,CAkBnB1B,mEAAgB,CAAC2B,kBAlBE,CAmBnB3B,mEAAgB,CAAC4B,kBAnBE,CAoBnB5B,mEAAgB,CAACiC,UApBE,CAqBnBjC,mEAAgB,CAACkC,aArBE,CAsBnBlC,mEAAgB,CAACmC,iBAtBE,CAuBnBnC,mEAAgB,CAACoC,iBAvBE,CAwBnBpC,mEAAgB,CAACqC,aAxBE,CAyBnBrC,mEAAgB,CAACuC,iBAzBE,CA0BnBvC,mEAAgB,CAACwC,iBA1BE,CA2BnBxC,mEAAgB,CAACyC,sBA3BE,CA4BnBzC,mEAAgB,CAAC2C,4BA5BE,CA6BnB3C,mEAAgB,CAAC4C,kBA7BE,CA8BnB5C,mEAAgB,CAACqD,mBA9BE,CA+BnBrD,mEAAgB,CAACsD,kBA/BE,CAjEkB,iOAkGtCxF,4DAAS,CAACO,OAlG4B,CAkGlB,CACnB2B,mEAAgB,CAACC,OADE,CAEnBD,mEAAgB,CAACE,QAFE,CAGnBF,mEAAgB,CAACG,YAHE,CAInBH,mEAAgB,CAACI,kBAJE,CAKnBJ,mEAAgB,CAAC6B,cALE,CAMnB7B,mEAAgB,CAAC8B,cANE,CAOnB9B,mEAAgB,CAAC+B,gBAPE,CAQnB/B,mEAAgB,CAACgC,gBARE,CASnBhC,mEAAgB,CAACiC,UATE,CAUnBjC,mEAAgB,CAACkC,aAVE,CAWnBlC,mEAAgB,CAACmC,iBAXE,CAYnBnC,mEAAgB,CAACoC,iBAZE,CAanBpC,mEAAgB,CAACqC,aAbE,CAcnBrC,mEAAgB,CAACsC,cAdE,CAenBtC,mEAAgB,CAACuC,iBAfE,CAgBnBvC,mEAAgB,CAACwC,iBAhBE,CAiBnBxC,mEAAgB,CAACyC,sBAjBE,CAkBnBzC,mEAAgB,CAAC2C,4BAlBE,CAmBnB3C,mEAAgB,CAAC4C,kBAnBE,CAoBnB5C,mEAAgB,CAACqD,mBApBE,CAlGkB,iOAwHtCvF,4DAAS,CAACI,SAxH4B,CAwHhB,CACrB8B,mEAAgB,CAACC,OADI,CAErBD,mEAAgB,CAACE,QAFI,CAGrBF,mEAAgB,CAACmC,iBAHI,CAIrBnC,mEAAgB,CAACoC,iBAJI,CAKrBpC,mEAAgB,CAACqC,aALI,CAMrBrC,mEAAgB,CAAC4C,kBANI,CAOrB5C,mEAAgB,CAACqD,mBAPI,CAQrBrD,mEAAgB,CAACwC,iBARI,CAxHgB,iOAkItC1E,4DAAS,CAACS,cAlI4B,CAkIX,CAC1ByB,mEAAgB,CAACC,OADS,CAE1BD,mEAAgB,CAACE,QAFS,CAG1BF,mEAAgB,CAACmC,iBAHS,CAI1BnC,mEAAgB,CAACoC,iBAJS,CAK1BpC,mEAAgB,CAACqC,aALS,CAM1BrC,mEAAgB,CAACqD,mBANS,CAlIW,iOA0ItCvF,4DAAS,CAACE,MA1I4B,CA0InB,CAClBgC,mEAAgB,CAACC,OADC,CAElBD,mEAAgB,CAACkC,aAFC,CAGlBlC,mEAAgB,CAACuC,iBAHC,CAIlBvC,mEAAgB,CAACoC,iBAJC,CAKlBpC,mEAAgB,CAACsD,kBALC,CA1ImB,iOAiJtCxF,4DAAS,CAACG,KAjJ4B,CAiJpB,CACjB+B,mEAAgB,CAACC,OADA,CAEjBD,mEAAgB,CAACG,YAFA,CAGjBH,mEAAgB,CAACsC,cAHA,CAIjBtC,mEAAgB,CAACuC,iBAJA,CAKjBvC,mEAAgB,CAACwC,iBALA,CAMjBxC,mEAAgB,CAAC4C,kBANA,CAOjB5C,mEAAgB,CAACmC,iBAPA,CAjJoB,iOA0JtCrE,4DAAS,CAACW,mBA1J4B,CA0JN,CAC/BuB,mEAAgB,CAACC,OADc,CAE/BD,mEAAgB,CAACE,QAFc,CAG/BF,mEAAgB,CAACG,YAHc,CAI/BH,mEAAgB,CAACI,kBAJc,CAK/BJ,mEAAgB,CAACwC,iBALc,CAM/BxC,mEAAgB,CAAC0C,uBANc,CAO/B1C,mEAAgB,CAACyD,mCAPc,CAQ/BzD,mEAAgB,CAACmC,iBARc,CAS/BnC,mEAAgB,CAACoC,iBATc,CAU/BpC,mEAAgB,CAACqC,aAVc,CAW/BrC,mEAAgB,CAACqD,mBAXc,CA1JM,iOAuKtCvF,4DAAS,CAACY,oBAvK4B,CAuKL,CAChCsB,mEAAgB,CAACC,OADe,CAEhCD,mEAAgB,CAACE,QAFe,CAGhCF,mEAAgB,CAACG,YAHe,CAIhCH,mEAAgB,CAACI,kBAJe,CAKhCJ,mEAAgB,CAACwC,iBALe,CAvKK,iOA8KtC1E,4DAAS,CAACQ,gBA9K4B,CA8KT,CAC5B0B,mEAAgB,CAACC,OADW,CAE5BD,mEAAgB,CAACE,QAFW,CAG5BF,mEAAgB,CAACG,YAHW,CAI5BH,mEAAgB,CAACI,kBAJW,CAK5BJ,mEAAgB,CAAC6C,mBALW,CAM5B7C,mEAAgB,CAAC8C,0BANW,CAO5B9C,mEAAgB,CAAC+C,mBAPW,CAQ5B/C,mEAAgB,CAACgD,0BARW,CAS5BhD,mEAAgB,CAACkB,YATW,CAU5BlB,mEAAgB,CAACoB,gBAVW,CAW5BpB,mEAAgB,CAACqB,gBAXW,CAY5BrB,mEAAgB,CAACsB,gBAZW,CAa5BtB,mEAAgB,CAACuB,kBAbW,CAc5BvB,mEAAgB,CAACwB,kBAdW,CAe5BxB,mEAAgB,CAACyB,kBAfW,CAgB5BzB,mEAAgB,CAAC0B,sBAhBW,CAiB5B1B,mEAAgB,CAAC2B,kBAjBW,CA9KS,iOAiMtC7D,4DAAS,CAACU,gBAjM4B,CAiMT,CAC5BwB,mEAAgB,CAACC,OADW,CAE5BD,mEAAgB,CAACE,QAFW,CAG5BF,mEAAgB,CAACG,YAHW,CAI5BH,mEAAgB,CAACI,kBAJW,CAK5BJ,mEAAgB,CAACiD,cALW,CAM5BjD,mEAAgB,CAACkD,cANW,CAO5BlD,mEAAgB,CAACmD,gBAPW,CAQ5BnD,mEAAgB,CAACoD,gBARW,CAS5BpD,mEAAgB,CAACsC,cATW,CAU5BtC,mEAAgB,CAACuC,iBAVW,CAW5BvC,mEAAgB,CAACwC,iBAXW,CAY5BxC,mEAAgB,CAACmC,iBAZW,CAa5BnC,mEAAgB,CAACoC,iBAbW,CAc5BpC,mEAAgB,CAACqC,aAdW,CAe5BrC,mEAAgB,CAACqD,mBAfW,CAjMS,iOAkNtCvF,4DAAS,CAACC,WAlN4B,CAkNd,CACvBiC,mEAAgB,CAACC,OADM,CAEvBD,mEAAgB,CAAC6C,mBAFM,CAlNc,2OAsN9B,CACP7C,mEAAgB,CAACC,OADV,CAEPD,mEAAgB,CAACiD,cAFV,CAGPjD,mEAAgB,CAACkD,cAHV,CAIPlD,mEAAgB,CAACmD,gBAJV,CAKPnD,mEAAgB,CAACoD,gBALV,CAMPpD,mEAAgB,CAACsC,cANV,CAOPtC,mEAAgB,CAACuC,iBAPV,CAQPvC,mEAAgB,CAACwC,iBARV,CAtN8B,wBAAlC,C;;;;;;;;AC/FP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,GAAM8mB,iBAAgB,CAAG,kBAAzB,CACP,GAAMC,KAAI,+BAA0BD,gBAA1B,CAAV,CACO,GAAMlW,aAAY,WAAMmW,IAAN,eAAlB,CACA,GAAMC,eAAc,WAAMD,IAAN,iBAApB,CACA,GAAME,WAAU,WAAMF,IAAN,aAAhB,CACA,GAAMG,WAAU,CAAG,OAAnB,CACA,GAAMC,YAAW,WAAMvW,YAAN,WAAjB,CACA,GAAMqC,mBAAkB,CAAG,oBAA3B,C;;;;;;;ACPP;AAAe;AACf;AACA;AACA;AACA;AACA,C;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEO,GAAMmU,cAAa,CAAG,CAAC,GAAD,CAAM,GAAN,CAAtB,CAEA,GAAMC,2BAA0B,CAAG,SAAnC,CAEA,GAAMC,2BAA0B,CAAG,CACxCC,OAAO,CAAE,IAD+B,CAExCC,QAAQ,CAAE,IAF8B,CAGxCC,OAAO,CAAE,CAH+B,CAIxCC,UAAU,CAAEL,0BAJ4B,CAKxCM,gBAAgB,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CALsB,CAMxCC,aAAa,CAAEC,6DAAe,CAACC,QANS,CAOxCC,KAAK,CAAE,KAPiC,CAAnC,CAUA,GAAMvK,wBAAuB,CAAG,CACrCiK,OAAO,CAAE,CAD4B,CACzBO,MAAM,CAAE,EADiB,CACbT,OAAO,CAAE,IADI,CAAhC,CAGA,GAAM/L,oBAAmB,CAAG,CACjCiM,OAAO,CAAE,CADwB,CACrBO,MAAM,CAAE,EADa,CACTT,OAAO,CAAE,IADA,CACMrb,OAAO,CAAE,KADf,CAA5B,CAGA,GAAM2R,4BAA2B,CAAG,CACzC0J,OAAO,CAAE,KADgC,CAApC,CAIA,GAAMU,4BAA2B,CAAG,CACzC,WADyC,CAEzC,OAFyC,CAGzC,eAHyC,CAIzC,QAJyC,CAApC,C;;;;;;AC1BP,oC;;;;;;ACAA,4C;;;;;;;;;;ACAA;;;MAIqBlQ,oB,yBACnB,6BAAYzK,OAAZ,CAAqB,CAAC,mOACpB,KAAKA,OAAL,CAAeA,OAAf,CACD,CAED;8QACgB,CACd,KAAM,IAAI4a,MAAJ,CAAU,sDAAV,CAAN,CACD,C;;;;;;ACZH,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGe,QAASC,iBAAT,EAA4B,CACzC,mBACE,8CAAK,SAAS,CAAC,4BAAf,eACE,8CAAK,SAAS,CAAC,6BAAf,eACE,uCAAC,0BAAD,MADF,CADF,CADF,CAOD,C;;;;;;ACID,GAAMC,UAAS,CAAGC,6BAAU,CAAC,SAAAvb,KAAK,QAAK,CACrCwb,UAAU,CAAE,CACVC,MAAM,CAAE,MADE,CAEVC,UAAU,CAAE,CAFF,CAGVC,UAAU,CAAE,MAHF,CAIVnY,KAAK,CAAExD,KAAK,CAAC4b,OAAN,CAAcC,iBAJX,CAKVC,WAAW,CAAE,QALH,CAMVC,YAAY,CAAE,QANJ,CAOVC,YAAY,CAAE,KAPJ,CAQV,UAAW,CACTC,eAAe,CAAEjc,KAAK,CAAC4b,OAAN,CAAcM,sBADtB,CARD,CAWV,gBAAiB,CACfR,UAAU,CAAE,QADG,CAXP,CAcV,eAAgB,CACdS,WAAW,CAAE,QADC,CAdN,CAiBV,QAAS,CACPlX,KAAK,CAAE,OADA,CAEPD,MAAM,CAAE,OAFD,CAGPoX,aAAa,CAAE,QAHR,CAIPC,QAAQ,CAAE,SAJH,CAjBC,CADyB,CAyBrCC,YAAY,CAAE,CACZ9Y,KAAK,CAAExD,KAAK,CAAC4b,OAAN,CAAcC,iBADT,CAzBuB,CAAL,EAAN,CAA5B,CA8BA,QAASU,sBAAT,MAAyC,IAARC,KAAQ,MAARA,IAAQ,CACvC,mBACE,2FACE,uCAAC,kBAAD,MADF,CAEGA,IAAI,cAAG,uCAAC,qBAAD,MAAH,cAAyB,uCAAC,uBAAD,MAFhC,CADF,CAMD,CAED,QAASC,YAAT,CAAqB7Y,KAArB,CAA4B,IAClB8Y,QADkB,CACN9Y,KADM,CAClB8Y,OADkB,eAEFrW,mCAAQ,CAAC,KAAD,CAFN,kEAEnBmW,IAFmB,eAEbG,OAFa,eAG1B,GAAMC,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,gCAAD,EACE,IAAI,CAAEkB,IADR,CAEE,OAAO,CAAEG,OAFX,CAGE,UAAU,cAAE,uCAAC,qBAAD,EAAuB,IAAI,CAAEH,IAA7B,EAHd,CAIE,eAAe,CAAEI,OAAO,CAACpB,UAJ3B,CAKE,SAAS,CAAC,YALZ,EAOGkB,OAPH,CADF,CAWD,CAED,QAASG,2BAAT,OAA8C,IAARL,KAAQ,OAARA,IAAQ,CAC5C,mBACE,2FACE,uCAAC,uBAAD,MADF,CAEGA,IAAI,cAAG,uCAAC,qBAAD,MAAH,cAAyB,uCAAC,uBAAD,MAFhC,CADF,CAMD,CAED,QAASM,gBAAT,CAAyBlZ,KAAzB,CAAgC,IACtBiF,KADsB,CACbjF,KADa,CACtBiF,IADsB,gBAENxC,mCAAQ,CAAC,KAAD,CAFF,mEAEvBmW,IAFuB,eAEjBG,OAFiB,eAG9B,GAAMC,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,gCAAD,EACE,IAAI,CAAEkB,IADR,CAEE,OAAO,CAAEG,OAFX,CAGE,UAAU,cAAE,uCAAC,0BAAD,EAA4B,IAAI,CAAEH,IAAlC,EAHd,CAIE,eAAe,CAAEI,OAAO,CAACpB,UAJ3B,CAKE,SAAS,CAAC,YALZ,EAOG3S,IAAI,CAAC3N,GAAL,CAAS,mBAAG8N,IAAH,OAAGA,GAAH,CAAQhH,IAAR,OAAQA,IAAR,oBACR,uCAAC,kBAAD,EAAU,KAAK,KAAf,CAAgB,GAAG,CAAEgH,GAArB,eACE,uCAAC,cAAD,EAAM,SAAS,CAAC,MAAhB,CAAuB,IAAI,CAAEA,GAA7B,CAAkC,MAAM,CAAC,QAAzC,CAAkD,GAAG,CAAC,UAAtD,CAAiE,SAAS,CAAE4T,OAAO,CAACN,YAApF,cACYta,IADZ,CADF,CADQ,EAAT,CAPH,CADF,CAiBD,CAED,QAAS+a,gBAAT,CAAyBnZ,KAAzB,CAAgC,IACtBoZ,oBADsB,CACEpZ,KADF,CACtBoZ,mBADsB,CAE9B,GAAMJ,QAAO,CAAGtB,SAAS,EAAzB,CACA,mBACE,uCAAC,oBAAD,EACE,OAAO,CAAE0B,mBADX,CAEE,IAAI,CAAC,OAFP,CAGE,SAAS,CAAEJ,OAAO,CAACpB,UAHrB,CAIE,KAAK,CAAC,OAJR,eAME,uCAAC,eAAD,MANF,CADF,CAUD,CAEc,QAASyB,UAAT,CAAmBrZ,KAAnB,CAA0B,IAErCC,MAFqC,CAInCD,KAJmC,CAErCC,KAFqC,CAE9BrE,IAF8B,CAInCoE,KAJmC,CAE9BpE,IAF8B,CAExB2D,QAFwB,CAInCS,KAJmC,CAExBT,QAFwB,CAEd+Z,QAFc,CAInCtZ,KAJmC,CAEdsZ,QAFc,CAEJC,SAFI,CAInCvZ,KAJmC,CAEJuZ,SAFI,CAEOH,mBAFP,CAInCpZ,KAJmC,CAEOoZ,mBAFP,CAE4BnU,IAF5B,CAInCjF,KAJmC,CAE4BiF,IAF5B,CAGrCF,OAHqC,CAInC/E,KAJmC,CAGrC+E,OAHqC,CAG5B+T,OAH4B,CAInC9Y,KAJmC,CAG5B8Y,OAH4B,CAKvC;AACA,GAAMU,eAAc,CAAGF,QAAQ,CAAG7C,iCAAH,CAAkB8C,SAAS,CAAGhD,gCAAH,CAAgBD,oCAA1E,CACA,oBACE;AACA,2FACE,8CAAK,SAAS,CAAC,OAAf,eACE,8CAAK,SAAS,CAAC,YAAf,EACGrW,KADH,CADF,cAIE,8CAAK,SAAS,CAAC,YAAf,CAA4B,KAAK,CAAErE,IAAnC,EACGA,IADH,CAJF,cAOE,8CAAK,SAAS,CAAC,eAAf,EACIkd,OAAO,eACP,uCAAC,WAAD,EACE,OAAO,CAAEA,OADX,EAFJ,CAMG7T,IAAI,EAAIA,IAAI,CAACpT,MAAL,CAAc,CAAtB,eACC,uCAAC,eAAD,EACE,IAAI,CAAEoT,IADR,EAPJ,cAWE,uCAAC,eAAD,EACE,mBAAmB,CAAEmU,mBADvB,EAXF,CAPF,CADF,cAwBE,8CAAK,SAAS,CAAEI,cAAhB,EACI,CAACzU,OAAD,eAAY,uCAAC,gBAAD,MADhB,CAEGxF,QAFH,CAxBF,CA6BA;AA/BF,EAiCD,C;;;;;;;AC9JD;AAAe;AACf;;AAEA,wCAAwC,SAAS;AACjD;AACA;;AAEA;AACA,C;;;;;;ACRA,4C;;;;;;;;ACAA;AAAA;AAAkD;AACnC;AACf;AACA,oCAAoC,yEAAgB;AACpD;AACA;AACA;AACA,sFAAsF,yEAAgB;AACtG,C;;;;;;;;;;;;;;;;;;;;;;;;0BCNA;;;;GAKO,GAAMka,4BAA2B,2FACrCztB,6BAAQ,CAACC,UAD4B,CACfP,6BAAQ,CAACC,KADM,kEAErCK,6BAAQ,CAACE,cAF4B,CAEXR,6BAAQ,CAACV,SAFE,kEAGrCgB,6BAAQ,CAACG,sBAH4B,CAGHT,6BAAQ,CAACE,iBAHN,kEAIrCI,6BAAQ,CAACI,qBAJ4B,CAIJV,6BAAQ,CAACJ,gBAJL,kEAKrCU,6BAAQ,CAACK,cAL4B,CAKXX,6BAAQ,CAACG,SALE,kEAMrCG,6BAAQ,CAACM,kBAN4B,CAMPZ,6BAAQ,CAACI,aANF,kEAOrCE,6BAAQ,CAACO,WAP4B,CAOdb,6BAAQ,CAACK,MAPK,kEAQrCC,6BAAQ,CAACQ,eAR4B,CAQVd,6BAAQ,CAACK,MARC,kEASrCC,6BAAQ,CAACS,aAT4B,CASZf,6BAAQ,CAACE,iBATG,kEAUrCI,6BAAQ,CAACU,UAV4B,CAUfhB,6BAAQ,CAACE,iBAVM,kEAWrCI,6BAAQ,CAACW,sBAX4B,CAWHjB,6BAAQ,CAACV,SAXN,kEAYrCgB,6BAAQ,CAACY,kBAZ4B,CAYPlB,6BAAQ,CAACC,KAZF,kEAarCK,6BAAQ,CAACa,8BAb4B,CAaKnB,6BAAQ,CAACE,iBAbd,wBAAjC,C;;;;;;;;;;;;;;;;;;;;;;;;;ACCP,GAAM8tB,YAAW,CAAG,sBAApB,CACA,GAAMC,sBAAqB,CAAG,WAA9B,CACA,GAAMC,8BAA6B,CAAG,mBAAtC,CACA,GAAMC,uCAAsC,CAAG,0BAA/C,CACA,GAAMC,sBAAqB,CAAG,WAA9B,CACA,GAAMC,uCAAsC,CAAG,yBAA/C,CACA,GAAMC,kCAAiC,CAAG,sBAA1C,CAEApY,MAAM,CAAC8X,WAAD,CAAN,CAAsB,EAAtB,CACA,GAAMO,QAAO,CAAGrY,MAAM,CAAC8X,WAAD,CAAtB,CAEA;AACAO,OAAO,CAACN,qBAAD,CAAP,CAAiCM,OAAO,CAACN,qBAAD,CAAP,EAAkC,EAAnE,CACAM,OAAO,CAACL,6BAAD,CAAP,CAAyCK,OAAO,CAACL,6BAAD,CAAP,EAA0C,EAAnF,CACAK,OAAO,CAACJ,sCAAD,CAAP,CACEI,OAAO,CAACJ,sCAAD,CAAP,EAAmD,EADrD,CAGAI,OAAO,CAACH,qBAAD,CAAP,CAAiCG,OAAO,CAACH,qBAAD,CAAP,EAAkC,EAAnE,CACAG,OAAO,CAACF,sCAAD,CAAP,CACEE,OAAO,CAACF,sCAAD,CAAP,EAAmD,EADrD,CAGAE,OAAO,CAACD,iCAAD,CAAP,CAA6CC,OAAO,CAACD,iCAAD,CAAP,EAA8C,EAA3F,CAEA;;;;GAKO,QAASE,+BAAT,CAAwCC,QAAxC,CAAkDC,YAAlD,CAAgE,CACrEH,OAAO,CAACL,6BAAD,CAAP,CAAuCO,QAAvC,EAAmDC,YAAnD,CACD,CAED;;;;;GAMO,QAASC,uBAAT,CAAgCC,QAAhC,CAA0CC,4BAA1C,CAAwEC,iBAAxE,CAA2F,CAChGP,OAAO,CAACN,qBAAD,CAAP,CAA+BW,QAA/B,EAA2CC,4BAA3C,CACA;AACA,GAAME,mBAAkB,CAAGR,OAAO,CAACJ,sCAAD,CAAlC,CACA,GAAI3mB,KAAK,CAACC,OAAN,CAAcsnB,kBAAkB,CAACH,QAAD,CAAhC,CAAJ,CAAiD,CAC/CE,iBAAiB,CAACpoB,OAAlB,CAA0B,SAAC2G,gBAAD,CAAsB,CAC9C,GAAI,CAAC0hB,kBAAkB,CAACH,QAAD,CAAlB,CAA6B1nB,QAA7B,CAAsCmG,gBAAtC,CAAL,CAA8D,CAC5D0hB,kBAAkB,CAACH,QAAD,CAAlB,CAA6B7nB,IAA7B,CAAkCsG,gBAAlC,EACD,CACF,CAJD,EAKD,CAND,IAMO,CACL0hB,kBAAkB,CAACH,QAAD,CAAlB,CAA+BE,iBAA/B,CACD,CACF,CAED;;;;;;GAOO,QAASE,uBAAT,CACL;AACAC,YAFK,CAESC,YAFT,CAEuBC,eAFvB,CAEwCC,eAFxC,CAGL,CACAb,OAAO,CAACH,qBAAD,CAAP,CAA+Ba,YAA/B,EAA+C,CAACG,eAAD,CAAkBD,eAAlB,CAA/C,CACAZ,OAAO,CAACF,sCAAD,CAAP,CAAgDY,YAAhD,EAAgEC,YAAhE,CACD,CAED;;;;;;GAOO,QAASG,kCAAT,CACL;AACAJ,YAFK,CAESK,iBAFT,CAGL,CACAf,OAAO,CAACD,iCAAD,CAAP,CAA2CW,YAA3C,EAA2DK,iBAA3D,CACD,CAGD;AAEO,QAASC,mBAAT,EAA8B,CACnC,MAAOnqB,OAAM,CAAC+H,IAAP,CAAYohB,OAAO,CAACN,qBAAD,CAAnB,CAAP,CACD,CAEM,QAASuB,kBAAT,CAA2BZ,QAA3B,CAAqC,CAC1C,MAAOL,QAAO,CAACN,qBAAD,CAAP,CAA+BW,QAA/B,CAAP,CACD,CAEM,QAASa,2BAAT,EAAsC,CAC3C,MAAOrqB,OAAM,CAAC+H,IAAP,CAAYohB,OAAO,CAACL,6BAAD,CAAnB,CAAP,CACD,CAEM,QAASwB,kCAAT,EAA6C,CAClD,MAAOnB,QAAO,CAACL,6BAAD,CAAd,CACD,CAEM,QAASyB,sCAAT,CAA+Cf,QAA/C,CAAyD,CAC9D,GAAIpnB,KAAK,CAACC,OAAN,CAAc8mB,OAAO,CAACJ,sCAAD,CAAP,CAAgDS,QAAhD,CAAd,CAAJ,CAA8E,CAC5E,MAAOL,QAAO,CAACJ,sCAAD,CAAP,CAAgDS,QAAhD,CAAP,CACD,CACD,MAAO,EAAP,CACD,CAEM,QAASgB,mBAAT,EAA8B,CACnC,MAAOxqB,OAAM,CAAC+H,IAAP,CAAYohB,OAAO,CAACH,qBAAD,CAAnB,CAAP,CACD,CACM,QAASyB,8BAAT,EAAyC,CAC9C,MAAOzqB,OAAM,CAAC+H,IAAP,CAAYohB,OAAO,CAACD,iCAAD,CAAnB,CAAP,CACD,CAEM,QAASwB,6BAAT,CAAsCC,QAAtC,CAAgD,CACrD,MAAOxB,QAAO,CAACF,sCAAD,CAAP,CAAgD0B,QAAhD,CAAP,CACD,CACM,QAASC,kCAAT,CAA2CD,QAA3C,CAAqD,CAC1D,MAAOxB,QAAO,CAACH,qBAAD,CAAP,CAA+B2B,QAA/B,CAAP,CACD,CACM,QAASE,iDAAT,CAA0DF,QAA1D,CAAoE,CACzE,MAAOxB,QAAO,CAACD,iCAAD,CAAP,CAA2CyB,QAA3C,CAAP,CACD,CAED;AACO,QAASG,aAAT,EAAwB,CAC7B,6DACK9qB,MAAM,CAACuG,MAAP,CAAcrL,6BAAd,CADL,+CAEKsvB,kBAAkB,EAFvB,GAID,CAEM,QAASO,qBAAT,EAAgC,CACrC,6DACK/qB,MAAM,CAACuG,MAAP,CAAcvK,qCAAd,CADL,+CAEKquB,0BAA0B,EAF/B,GAID,CAED;AACA;AACO,QAAS5R,6BAAT,EAAwC,CAC7C,OAAO,4CACF0M,mDADL,IAEKmF,iCAAiC,EAFtC,EAID,CAED;AACA;AACO,QAASU,8BAAT,EAAyC,CAC9C,OAAO,4CACF3F,oDADL,IAEK3lB,oCAAW,CAACyqB,kBAAkB,GAAG3jB,GAArB,CAAyB,SAAAgjB,QAAQ,QAAK,CACnDA,QADmD,CAEnDe,qCAAqC,CAACf,QAAD,CAFc,CAAL,EAAjC,CAAD,CAFhB,EAOD,CAEM,QAASyB,2BAAT,EAAsC,CAC3C,OAAO,4CACFtC,2BADL,IAEKjpB,oCAAW,CAAC8qB,kBAAkB,GAAGhkB,GAArB,CAAyB,SAAAmkB,QAAQ,QAAK,CACnDA,QADmD,CAEnDD,4BAA4B,CAACC,QAAD,CAFuB,CAAL,EAAjC,CAAD,CAFhB,EAOD,CAEM,QAASO,wBAAT,EAAmC,CACxC,OAAO,4CAEF/B,OAAO,CAACD,iCAAD,CAFZ,EAID,C;;;;;;;ACxLD,yD;;;;;;ACAA,qD;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUO,QAASiC,QAAT,CAAiBjc,KAAjB,CAAwB,IACrBT,SADqB,CACRS,KADQ,CACrBT,QADqB,CAE7B,GAAMyZ,QAAO,CAAGkD,8DAAM,EAAtB,CACA,mBAAO,mEAAM,SAAS,CAAElD,OAAO,CAACmD,IAAzB,EAAgC5c,QAAhC,CAAP,CACD,CAEM,QAAS6c,WAAT,CAAoBpc,KAApB,CAA2B,IAE9Bqc,WAF8B,CAQ5Brc,KAR4B,CAE9Bqc,UAF8B,CAG9BzD,IAH8B,CAQ5B5Y,KAR4B,CAG9B4Y,IAH8B,CAI9BG,OAJ8B,CAQ5B/Y,KAR4B,CAI9B+Y,OAJ8B,CAK9BxZ,QAL8B,CAQ5BS,KAR4B,CAK9BT,QAL8B,CAM9B+c,eAN8B,CAQ5Btc,KAR4B,CAM9Bsc,eAN8B,kBAQ5Btc,KAR4B,CAO9Buc,SAP8B,CAO9BA,SAP8B,2BAOlB,YAPkB,kBAShC,GAAMvD,QAAO,CAAGkD,8DAAM,EAAtB,CAEA,GAAMM,UAAS,CAAG1iB,oDAAM,EAAxB,CAEA,GAAM2iB,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB1D,OAAO,CAAC,SAAA1T,IAAI,QAAI,CAACA,IAAL,EAAL,CAAP,CACD,CAFD,CAIA,GAAMqX,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB3D,OAAO,CAAC,KAAD,CAAP,CACD,CAFD,CAIA,GAAM4D,GAAE,CAAG/D,IAAI,CAAG,gBAAH,CAAsBrhB,SAArC,CAEA,GAAMqlB,oBAAmB,CAAGxa,2EAAoB,CAACoa,SAAD,CAAhD,CAEA,mBACE,kEAAK,GAAG,CAAEA,SAAV,CAAqB,SAAS,CAAExD,OAAO,CAACxV,SAAxC,eACE,2DAAC,mEAAD,EACE,mBAAkBmZ,EADpB,CAEE,OAAO,CAAEF,WAFX,CAGE,IAAI,CAAC,OAHP,CAIE,SAAS,CAAEH,eAJb,EAMGD,UANH,CADF,cASE,2DAAC,+DAAD,EACE,EAAE,CAAEM,EADN,CAEE,IAAI,CAAE/D,IAFR,CAGE,QAAQ,CAAE4D,SAAS,EAAIA,SAAS,CAACxiB,OAHnC,CAIE,SAAS,CAAE4iB,mBAJb,CAKE,OAAO,CAAEF,WALX,CAME,SAAS,CAAEH,SANb,CAOE,UAAU,KAPZ,EASG,kBAAGM,gBAAH,MAAGA,eAAH,oBACC,2DAAC,0EAAD,EAAmB,WAAW,CAAEH,WAAhC,eACE,2DAAC,6DAAD,kBAAUG,eAAV,EAA2B,OAAO,CAAE,GAApC,gBACE,2DAAC,8DAAD,EAAO,SAAS,CAAE,CAAlB,CAAqB,SAAS,CAAE7D,OAAO,CAAC8D,KAAxC,eACE,2DAAC,iEAAD,MAAWvd,QAAX,CADF,CADF,CADF,CADD,EATH,CATF,CADF,CA+BD,C;;;;;;;ACxED;AAAe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;ACNA,oD;;;;;;;;;;;;;;ACAA,yC;;;;;;ACAA,uD;;;;;;ACAA,4C;;;;;;;;ACAA,qD;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGO,GAAM2c,OAAM,CAAGvE,2EAAU,CAAC,iBAAO,CACtCmF,KAAK,CAAE,CACLC,SAAS,CAAE,GADN,CAELtE,QAAQ,CAAE,MAFL,CAD+B,CAKtCjV,SAAS,CAAE,CACTwZ,QAAQ,CAAE,UADD,CAETC,IAAI,CAAE,CAFG,CAGTC,GAAG,CAAE,CAHI,CAL2B,CAUtCf,IAAI,CAAE,CACJ9a,KAAK,CAAE,MADH,CAEJ8b,SAAS,CAAE,QAFP,CAGJjF,WAAW,CAAE,KAHT,CAIJC,YAAY,CAAE,KAJV,CAVgC,CAAP,EAAD,CAAzB,CAkBA,GAAMiF,SAAQ,CAAG,CACtBC,IAAI,CAAEC,4EAAW,CAAC,CAChBtF,OAAO,CAAE,CACPuF,IAAI,CAAE,MADC,CAEPC,OAAO,CAAEC,6DAFF,CAGPC,SAAS,CAAED,6DAHJ,CAIPE,iBAAiB,CAAE,SAJZ,CAKPC,0BAA0B,CAAE,SALrB,CAMPC,sBAAsB,CAAE,SANjB,CAOPC,oBAAoB,CAAE,SAPf,CAQPxF,sBAAsB,CAAE,SARjB,CASPL,iBAAiB,CAAE,SATZ,CAUP8F,oBAAoB,CAAE,SAVf,CAWPC,uBAAuB,CAAE,SAXlB,CAYPC,mBAAmB,CAAE,SAZd,CAaPC,sBAAsB,CAAE,SAbjB,CAcPC,mBAAmB,CAAE,SAdd,CADO,CAiBhBne,KAAK,CAAE,CACLoe,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CADV,CAjBS,CAAD,CADK,CAwBtBC,KAAK,CAAEhB,4EAAW,CAAC,CACjBtF,OAAO,CAAE,CACPuF,IAAI,CAAE,OADC,CAEPC,OAAO,CAAEC,6DAFF,CAGPC,SAAS,CAAED,6DAHJ,CAIPE,iBAAiB,CAAE,SAJZ,CAKPC,0BAA0B,CAAE,SALrB,CAMPC,sBAAsB,CAAE,SANjB,CAOPC,oBAAoB,CAAE,SAPf,CAQPxF,sBAAsB,CAAE,SARjB,CASPL,iBAAiB,CAAE,SATZ,CAUP8F,oBAAoB,CAAE,SAVf,CAWPC,uBAAuB,CAAE,SAXlB,CAYPC,mBAAmB,CAAE,SAZd,CAaPC,sBAAsB,CAAE,SAbjB,CAcPC,mBAAmB,CAAE,SAdd,CADQ,CAiBjBne,KAAK,CAAE,CACLoe,aAAa,CAAE,CACbC,aAAa,CAAE,IADF,CADV,CAjBU,CAAD,CAxBI,CAAjB,C;;;;;;;;;ACrBP,6D;;;;;;ACAA,2D;;;;;;ACAA,0C;;;;;;;ACAA,oC;;;;;;;;;ACAA,gC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACaA;;;;;;GAOO,QAASE,6BAAT,CAAsCpP,QAAtC,CAAgD9P,QAAhD,CAA0D,CAC/D,GAAMmf,SAAQ,CAAG,GAAIC,2CAAJ,GAAUC,OAAV,CAAkBxf,uEAAoB,CAACG,QAAD,CAApB,CAA+BuH,MAAjD,CAAjB,CACA,GAAM+X,MAAK,CAAGH,QAAQ,CAACrP,QAAD,CAAtB,CACA,GAAI,CAACwP,KAAL,CAAY,CACV,GAAMC,cAAa,CAAGla,IAAI,CAACC,SAAL,CAAe6Z,QAAQ,CAACK,MAAxB,CAAgC,IAAhC,CAAsC,CAAtC,CAAtB,CACA,KAAM,IAAIrH,MAAJ,mCAAqCoH,aAArC,EAAN,CACD,CAHD,IAGO,IAAIzP,QAAQ,CAAC9P,QAAT,GAAsBA,QAA1B,CAAoC,CACzC,KAAM,IAAImY,MAAJ,mEACuDnY,QADvD,OAAN,CAGD,CACD,GAAI8P,QAAQ,CAAClQ,OAAT,GAAqB,OAAzB,CAAkC,CAChC;AACA;AACA,OAAO,2MACFkQ,QADL,EAEElQ,OAAO,CAAEC,uEAAoB,CAACG,QAAD,CAApB,CAA+BD,aAF1C,CAGEL,IAAI,CAAEoQ,QAAQ,CAACpQ,IAAT,CAAczH,GAAd,CAAkB,SAAA+X,aAAa,QAAIC,8EAAa,CACpDD,aADoD,CAEpD,SAAAlR,CAAC,QAAI,CAACA,CAAC,CAACoB,QAAH,EAAerM,KAAK,CAACC,OAAN,CAAcgL,CAAC,CAACzJ,GAAhB,CAAnB,EAFmD,CAGpD,SAAAyJ,CAAC,oNAAUA,CAAV,EAAazJ,GAAG,CAAEyJ,CAAC,CAACzJ,GAAF,CAAM4C,GAAN,CAAU,SAAAwnB,MAAM,QAAK,CAACA,MAAD,CAAS,IAAT,CAAL,EAAhB,CAAlB,IAHmD,CAGS,EAHT,CAAjB,EAA/B,CAHR,GASD,CACD,MAAO3P,SAAP,CACD,CAED;;;;;;;IAQA;AACO,QAAS4P,iBAAT,CAA0B/Y,MAA1B,CAAkC3G,QAAlC,CAA4CjD,KAA5C,CAAmD,CACxD,GAAI4iB,WAAU,CAAGta,IAAI,CAACua,KAAL,CAAWjZ,MAAX,CAAjB,CACA;AACAgZ,UAAU,CAAGT,4BAA4B,CAACS,UAAD,CAAa3f,QAAb,CAAzC,CACA,MAAO2f,WAAP,CACD,CAED;;;;;;;GAQO,QAASE,oBAAT,CAA6BlZ,MAA7B,CAAqC3G,QAArC,CAA+CjD,KAA/C,CAAsD,CAC3D,GAAM+iB,UAAS,CAAGC,wDAAS,CAAC3Y,oEAAD,CAA3B,CACA,GAAMuY,WAAU,CAAGG,SAAS,CAACF,KAAV,CAAgBjZ,MAAhB,CAAwB,SAAAqZ,GAAG,QAAK,CACjDC,SAAS,CAAED,GAAG,CAACC,SADkC,CAEjDC,OAAO,CAAEF,GAAG,CAACE,OAFoC,CAGjDtM,QAAQ,CAAGoM,GAAG,CAACpM,QAAJ,CAAe9K,yEAAkB,CAACkX,GAAG,CAACpM,QAAL,CAAjC,CAAkD9W,sEAAe,CAACC,KAAD,CAH3B,CAIjD+W,KAAK,CAAEkM,GAAG,CAAClM,KAJsC,CAKjDqM,eAAe,CAEX1M,mDAAK,CAACuM,GAAG,CAACG,eAAL,CAAL,EACGH,GAAG,CAACG,eAAJ,GAAwB9Y,mEAF7B,CAII,IAJJ,CAKI,CAAC2Y,GAAG,CAACG,eAXsC,CAAL,EAA3B,CAAnB,CAcA;AACA,GAAMhB,SAAQ,CAAG,GAAIC,2CAAJ,GAAUC,OAAV,CAAkB5X,kEAAe,CAACzH,QAAD,CAAf,CAA0BuH,MAA5C,CAAjB,CACA,GAAM+X,MAAK,CAAGH,QAAQ,CAACQ,UAAD,CAAtB,CACA,GAAI,CAACL,KAAL,CAAY,CACV,GAAMC,cAAa,CAAGla,IAAI,CAACC,SAAL,CAAe6Z,QAAQ,CAACK,MAAxB,CAAgC,IAAhC,CAAsC,CAAtC,CAAtB,CACA,KAAM,IAAIrH,MAAJ,qCAAuCoH,aAAvC,EAAN,CACD,CAHD,IAGO,CACL;AACA,GAAMa,aAAY,CAAG,CACnBxgB,OAAO,CAAEC,uEAAoB,CAACG,QAAD,CAApB,CAA+BD,aADrB,CAEnBC,QAAQ,CAARA,QAFmB,CAGnBN,IAAI,CAAE,EAHa,CAArB,CAKA,GAAM2gB,iBAAgB,CAAGxsB,KAAK,CAACmd,IAAN,CAAW,GAAIsP,IAAJ,CAAQX,UAAU,CAAC1nB,GAAX,CAAe,SAAAmI,CAAC,QAAIA,EAAC,CAAC6f,SAAN,EAAhB,CAAR,CAAX,CAAzB,CACAI,gBAAgB,CAACttB,OAAjB,CAAyB,SAACktB,SAAD,CAAe,CACtC,GAAMjQ,cAAa,CAAG,CACpBjR,IAAI,CAAEkhB,SADc,CAEpB/f,QAAQ,CAAE,EAFU,CAAtB,CAIA,GAAMqgB,UAAS,CAAGZ,UAAU,CAACvpB,MAAX,CAAkB,SAAAgK,CAAC,QAAIA,EAAC,CAAC6f,SAAF,GAAgBA,SAApB,EAAnB,CAAlB,CACA,GAAMO,eAAc,CAAG3sB,KAAK,CAACmd,IAAN,CAAW,GAAIsP,IAAJ,CAAQC,SAAS,CAACtoB,GAAV,CAAc,SAAAmI,CAAC,QAAIA,EAAC,CAAC8f,OAAN,EAAf,CAAR,CAAX,CAAvB,CACAM,cAAc,CAACztB,OAAf,CAAuB,SAACmtB,OAAD,CAAa,CAClC,GAAMO,QAAO,CAAGF,SAAS,CAACnqB,MAAV,CAAiB,SAAAgK,CAAC,QAAIA,EAAC,CAAC8f,OAAF,GAAcA,OAAlB,EAAlB,CAAhB,CADkC,GAE1BtM,SAF0B,CAEb6M,OAAO,CAAC,CAAD,CAFM,CAE1B7M,QAF0B,CAGlC,GAAM8M,aAAY,CAAG,CACnB3hB,IAAI,CAAEmhB,OADa,CAEnB3f,KAAK,CAAEqT,QAFY,CAGnBve,GAAG,CAAEorB,OAAO,CAACxoB,GAAR,CAAY,SAAAmI,CAAC,QAAK,CAACA,CAAC,CAAC0T,KAAH,CAAU1T,CAAC,CAAC+f,eAAZ,CAAL,EAAb,CAHc,CAArB,CAKAnQ,aAAa,CAAC9P,QAAd,CAAuB9M,IAAvB,CAA4BstB,YAA5B,EACD,CATD,EAUAN,YAAY,CAAC1gB,IAAb,CAAkBtM,IAAlB,CAAuB4c,aAAvB,EACD,CAlBD,EAmBA,MAAOoQ,aAAP,CACD,CACF,CAED;;;;GAKO,QAASO,iBAAT,CAA0Bha,MAA1B,CAAkC,CACvC,GAAMia,WAAU,CAAGvb,IAAI,CAACC,SAAL,CAAeqB,MAAf,CAAnB,CACA,GAAMka,WAAU,gBAAW5Z,iEAAX,2BAA2C6Z,kBAAkB,CAACF,UAAD,CAA7D,CAAhB,CACA,MAAOC,WAAP,CACD,CAED;;;;GAKO,QAASE,oBAAT,CAA6Bpa,MAA7B,CAAqC,CAC1C;AACA,GAAMqa,WAAU,CAAG,EAAnB,CACAra,MAAM,CAACjH,IAAP,CAAY3M,OAAZ,CAAoB,SAACid,aAAD,CAAmB,CACrCA,aAAa,CAAC9P,QAAd,CAAuBnN,OAAvB,CAA+B,SAAC2tB,YAAD,CAAkB,CAC/C,GAAIA,YAAY,CAACrrB,GAAjB,CAAsB,CACpBqrB,YAAY,CAACrrB,GAAb,CAAiBtC,OAAjB,CAAyB,cAAmB,2NAAjB+gB,KAAiB,UAAVN,IAAU,UAC1CwN,UAAU,CAAC5tB,IAAX,CAAgB,CACd6sB,SAAS,CAAEjQ,aAAa,CAACjR,IADX,CAEdmhB,OAAO,CAAEQ,YAAY,CAAC3hB,IAFR,CAGd6U,QAAQ,CAAEpL,yEAAkB,CAACkY,YAAY,CAACngB,KAAd,CAHd,CAIduT,KAAK,CAALA,KAJc,CAKdqM,eAAe,CAAE1M,mDAAK,CAACD,IAAD,CAAL,CAAcnM,mEAAd,CAAiCmM,IALpC,CAAhB,EAOD,CARD,EASD,CACF,CAZD,EAaD,CAdD,EAeA,GAAMyN,UAAS,CAAGC,sDAAQ,CAACF,UAAD,CAAa,CACrCG,MAAM,CAAE,CAAC,WAAD,CAAc,SAAd,CAAyB,UAAzB,CAAqC,OAArC,CAA8C,iBAA9C,CAD6B,CAErCC,SAAS,CAAEha,oEAF0B,CAAb,CAA1B,CAIA,GAAMyZ,WAAU,gBAAW1Z,oEAAX,2BAA8C2Z,kBAAkB,CAACG,SAAD,CAAhE,CAAhB,CACA,MAAOJ,WAAP,CACD,CAED;;;;GAKO,QAASQ,gBAAT,CAAyBR,UAAzB,CAAqCS,QAArC,CAA+C,CACpD,GAAMC,mBAAkB,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAA3B,CACAF,kBAAkB,CAACG,YAAnB,CAAgC,MAAhC,CAAwCb,UAAxC,EACAU,kBAAkB,CAACG,YAAnB,CAAgC,UAAhC,CAA4CJ,QAA5C,EACAE,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0BL,kBAA1B,EAA+C;AAC/CA,kBAAkB,CAACM,KAAnB,GACAN,kBAAkB,CAACO,MAAnB,GACD,C;;;;;;;AClLD,6D;;;;;;ACAA,mD;;;;;;ACAA,wD;;;;;;ACAA,qD;;;;;;ACAA,+D;;;;;;ACAA,uD;;;;;;ACAA,gE;;;;;;ACAA,mD;;;;;;ACAA,4C;;;;;;ACAA,yC;;;;;;;ACAA,uC;;;;;;;;;;;ACAe;AACf;AACA;AACA;AACA;;AAEA,aAAa,uBAAuB;AACpC;AACA;AACA;AACA;;AAEA;AACA,C;;ACbA;AAA0E;AAC3D;AACf;AACA,eAAe,6BAA4B;AAC3C;;AAEA;AACA;;AAEA,eAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA;;;ACIA;AACA;AACA;AACA;AACA;AAEO,GAAMC,aAAY,CAAG,OAArB,CAEP,QAASC,OAAT,CAAgBC,IAAhB,CAAsB,CACpB,MAAOA,KAAI,CAACC,OAAL,GAAiB,4CAAxB,CACD,CAED;;;;;;GAOe,QAASC,SAAT,CAAkBxhB,KAAlB,CAAyB,IAE9ByhB,YAF8B,CAKlCzhB,KALkC,CAEpCshB,IAFoC,CAGpCtuB,IAHoC,CAKlCgN,KALkC,CAGpChN,IAHoC,CAIpC0uB,eAJoC,CAKlC1hB,KALkC,CAIpC0hB,eAJoC,CAOtC,GAAMJ,KAAI,6CACLG,WADK,EAERzuB,IAAI,CAAGquB,MAAM,CAACI,WAAD,CAAN,EAEH,CAAErjB,IAAI,CAAEgjB,YAAR,CAFG,sDAGAK,WAAW,CAACzuB,IAHZ,GAKH,CAAEoL,IAAI,CAAEgjB,YAAR,CAPI,EAAV,CAWA,GAAMO,cAAa,CAAGjqB,kCAAO,CAAC,8BAC5B,uCAAC,4BAAD,EACE,IAAI,CAAE4pB,IADR,CAEE,IAAI,8CACDF,YADC,CACcpuB,IADd,CAFN,CAKE,eAAe,CAAE0uB,eALnB,CAME,OAAO,CAAE,GAAIE,kCAAJ,GAAcC,IANzB,CAOE,QAAQ,CAAC,QAPX,CAQE,WAAW,CAAE,CARf,EAD4B,EAAD,CAW1B,CAACP,IAAD,CAAOtuB,IAAP,CAAa0uB,eAAb,CAX0B,CAA7B,CAaA,MACEJ,KAAI,EAAItuB,IAAR,EAAgBA,IAAI,CAACnB,MAAL,CAAc,CAA9B,cACE,uCAAC,2BAAD,EAAU,QAAQ,cAAE,+DAApB,EACG8vB,aADH,CADF,CAII,IALN,CAOD,C;;AC7DD;;;GAIO,GAAMG,YAAW,CAAG,CACzBzE,IAAI,CAAE,CACJ;AACA;AACAtF,UAAU,CAAE,IAHR,CAIJ9X,KAAK,CAAE,CAAEL,KAAK,CAAE,MAAT,CAJH,CAKJmiB,KAAK,CAAE,CACL,cAAe,CACbvM,IAAI,CAAE,MADO,CADV,CAIL,cAAe,CACbA,IAAI,CAAE,MADO,CAJV,CALH,CAaJwM,IAAI,CAAE,CACJC,WAAW,CAAE,MADT,CAEJC,SAAS,CAAE,MAFP,CAGJC,SAAS,CAAE,MAHP,CAbF,CADmB,CAoBzB7D,KAAK,CAAE,CACL;AACAvG,UAAU,CAAE,IAFP,CApBkB,CAApB,C;;ACJP;AAAA;AAAA;;;;;;;;;ACAA,2C;;;;;;ACAA,uC;;;;;;;;;;;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;;;;;;;ACAA,oC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKA;;;;;;;;;;;;;;;;;;GAmBe,QAASqK,iBAAT,CAA0BpiB,KAA1B,CAAiC,IAEtCqiB,QAFsC,CAS1CriB,KAT0C,CAE5ChN,IAF4C,CAG5CoJ,KAH4C,CAS1C4D,KAT0C,CAG5C5D,KAH4C,CAI5CiF,KAJ4C,CAS1CrB,KAT0C,CAI5CqB,KAJ4C,CAK5CD,MAL4C,CAS1CpB,KAT0C,CAK5CoB,MAL4C,oBAS1CpB,KAT0C,CAM5CuY,WAN4C,CAM5CA,WAN4C,6BAM9B,EAN8B,wCAS1CvY,KAT0C,CAO5CsiB,YAP4C,CAO5CA,YAP4C,8BAO7B,GAP6B,sCAS1CtiB,KAT0C,CAQ5CuiB,SAR4C,CAQ5CA,SAR4C,2BAQhC,EARgC,kBAW9C;AACA;AACA;AACA;AACA;AACA,GAAMvvB,KAAI,CAAGqvB,OAAO,CAAC/qB,GAAR,CAAY,SAAAmI,CAAC,oNACrBA,CADqB,EAExB+iB,OAAO,CAAE/iB,CAAC,CAAC7O,GAAF,CAAQ6O,CAAC,CAACrB,IAFK,CAGxBgK,WAAW,CAAEP,yEAAkB,CAACpI,CAAC,CAACG,KAAH,CAHP,IAAb,CAAb,CAMA;AACA;AACA,GAAM6iB,OAAM,CAAG,CACbC,MAAM,CAAE1vB,IAAI,CAACsE,GAAL,CAAS,SAAAmI,CAAC,QAAIA,EAAC,CAAC7O,GAAN,EAAV,CADK,CAEb+jB,KAAK,CAAE3hB,IAAI,CAACsE,GAAL,CAAS,SAAAmI,CAAC,QAAIA,EAAC,CAAC2I,WAAN,EAAV,CAFM,CAAf,CAKA;AACA,GAAMvP,KAAI,CAAG7F,IAAI,CAACsE,GAAL,CAAS,SAAAmI,CAAC,QAAIA,EAAC,CAAC+iB,OAAN,EAAV,CAAb,CAEA,GAAMlB,KAAI,CAAG,CACXqB,IAAI,CAAE,CAAEpF,IAAI,CAAE,KAAR,CADK,CAEXqF,QAAQ,CAAE,CACRC,CAAC,CAAE,CACDC,KAAK,CAAE,SADN,CAEDvF,IAAI,CAAE,SAFL,CAGDyE,IAAI,CAAE,CAAEe,SAAS,kCAA4BR,SAA5B,KAAX,CAHL,CAIDtiB,KAAK,CAAE,UAJN,CAKD+iB,IAAI,CAAEnqB,IALL,CADK,CAQRoqB,CAAC,CAAE,CACDH,KAAK,CAAE,MADN,CAEDvF,IAAI,CAAE,cAFL,CAGDtd,KAAK,CAAE,eAHN,CARK,CAaRL,KAAK,CAAE,CACLkjB,KAAK,CAAE,KADF,CAELvF,IAAI,CAAE,SAFD,CAGL2F,KAAK,CAAET,MAHF,CAILU,MAAM,CAAE,IAJH,CAbC,CAmBRC,OAAO,CAAE,CACPN,KAAK,CAAE,MADA,CAEPvF,IAAI,CAAE,cAFC,CAnBD,CAFC,CA0BXlc,KAAK,CAAEgiB,mDAAK,CAAChiB,KAAK,CAAGkX,WAAT,CAAsB,EAAtB,CAA0B1E,QAA1B,CA1BD,CA2BXzS,MAAM,CAAEiiB,mDAAK,CAACjiB,MAAM,CAAGkhB,YAAV,CAAwB,EAAxB,CAA4BzO,QAA5B,CA3BF,CA4BXyP,MAAM,CAAExB,yDAAW,CAAC1lB,KAAD,CA5BR,CAAb,CA+BA,mBACE,2DAAC,sDAAD,EACE,IAAI,CAAEpJ,IADR,CAEE,IAAI,CAAEsuB,IAFR,EADF,CAMD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzFD;;;;GAKA,GAAMiC,KAAI,CAAGC,wBAAK,CAACC,UAAN,CAAiB,SAACzjB,KAAD,CAAQqC,GAAR,CAAgB,oBAE1CqhB,UAF0C,CAQxC1jB,KARwC,CAE1C0jB,SAF0C,CAG1CC,SAH0C,CAQxC3jB,KARwC,CAG1C2jB,SAH0C,CAI1CC,QAJ0C,CAQxC5jB,KARwC,CAI1C4jB,QAJ0C,CAK1CC,SAL0C,CAQxC7jB,KARwC,CAK1C6jB,SAL0C,CAM1CtkB,QAN0C,CAQxCS,KARwC,CAM1CT,QAN0C,CAO1CukB,SAP0C,CAQxC9jB,KARwC,CAO1C8jB,SAP0C,CAS5C,mBACE,uCAAC,0BAAD,gBACE,UAAU,CAAE,EADd,CAEE,GAAG,CAAEzhB,GAFP,EAGMrC,KAHN,EAIE,SAAS,CAAE+jB,6BAAU,CAACJ,SAAD,iFACfD,SADe,eACS,CAACE,QADV,kEAEfF,SAFe,gBAEUG,SAFV,eAJvB,CAQE,SAAS,CAAEC,SAAS,cAAG,+CAAM,SAAS,WAAKJ,SAAL,mBAAf,EAAH,CAAwDI,SAR9E,GAUGvkB,QAVH,CADF,CAcD,CAvBY,CAAb,CAyBAgkB,IAAI,CAACS,YAAL,CAAoB,CAClBC,OAAO,CAAE,KADS,CAElBH,SAAS,CAAE,KAFO,CAGlBF,QAAQ,CAAE,KAHQ,CAIlBC,SAAS,CAAE,IAJO,CAKlBH,SAAS,CAAE,SALO,CAApB,CAQeH,kDAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtCA;;;;;;;;;GAUe,QAASW,YAAT,CAAqBlkB,KAArB,CAA4B,IACjCC,MADiC,CACID,KADJ,CACjCC,KADiC,CAC1BkkB,OAD0B,CACInkB,KADJ,CAC1BmkB,OAD0B,CACjBC,gBADiB,CACIpkB,KADJ,CACjBokB,gBADiB,CAEzC,GAAMC,QAAO,CAAGvqB,iCAAM,EAAtB,CACA,GAAM8iB,oBAAmB,CAAGxa,6CAAoB,CAACiiB,OAAD,CAAhD,CAEA,GAAMC,QAAO,CAAGrkB,KAAK,EAAIkkB,OAAzB,CAEA,mBACE,2FACE,+CAAM,GAAG,CAAEE,OAAX,EADF,cAEE,uCAAC,6BAAD,gBACE,mBAAmB,CAAEzH,mBADvB,CAEE,gBAAgB,CAAEwH,gBAFpB,CAGE,OAAO,CAAEE,OAHX,EAIMtkB,KAJN,EAFF,CADF,CAWD,CAEDkkB,WAAW,CAACF,YAAZ,CAA2B,CACzBI,gBAAgB,CAAE,cADO,CAEzB7H,SAAS,CAAE,KAFc,CAGzBgI,OAAO,CAAE,OAHgB,CAIzBC,eAAe,CAAE,GAJQ,CAKzBC,eAAe,CAAE,CALQ,CAA3B,C;;AC/BA;;;;GAKe,QAASC,QAAT,CAAiB1kB,KAAjB,CAAwB,CACrC,mBACE,uCAAC,WAAD,CAAiBA,KAAjB,CADF,CAGD,CAED0kB,OAAO,CAACV,YAAR,CAAuB,CACrBI,gBAAgB,CAAE,SADG,CAErB7H,SAAS,CAAE,KAFU,CAGrBgI,OAAO,CAAE,OAHY,CAIrBC,eAAe,CAAE,CAJI,CAKrBC,eAAe,CAAE,CALI,CAAvB,C;;ACRA;;;;;;;;;;;;;;GAeA,QAASE,sBAAT,CAA+B3kB,KAA/B,CAAsC,IAElCC,MAFkC,CAIhCD,KAJgC,CAElCC,KAFkC,CAE3B2kB,QAF2B,CAIhC5kB,KAJgC,CAE3B4kB,QAF2B,CAEjBC,OAFiB,CAIhC7kB,KAJgC,CAEjB6kB,OAFiB,CAERC,OAFQ,CAIhC9kB,KAJgC,CAER8kB,OAFQ,CAECC,UAFD,CAIhC/kB,KAJgC,CAEC+kB,UAFD,CAEaC,OAFb,CAIhChlB,KAJgC,CAEaglB,OAFb,CAGlCnO,OAHkC,CAIhC7W,KAJgC,CAGlC6W,OAHkC,eAMIpU,mCAAQ,CAAC,KAAD,CANZ,kEAM7BwiB,YAN6B,eAMfC,eANe,eAQpCtiB,oCAAS,CAAC,UAAM,CACd;AACA;AACAsiB,eAAe,CAAC,KAAD,CAAf,CACD,CAJQ,CAIN,CAACrO,OAAD,CAJM,CAAT,CAMA,QAASsO,uBAAT,EAAkC,CAChC,GAAI,CAACH,OAAD,EAAYC,YAAhB,CAA8B,CAC5BJ,OAAO,GACPC,OAAO,GACR,CAHD,IAGO,CACLI,eAAe,CAAC,IAAD,CAAf,CACD,CACF,CAED,GAAME,iBAAgB,WAAMH,YAAY,CAAG,UAAH,CAAgB,EAAlC,SAAuChlB,KAAvC,CAAtB,CAEA,mBACE,iDACE,KAAK,CAAEmlB,gBADT,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAED,sBAHX,CAIE,UAAU,CAAE,oBAAA3a,CAAC,QAAI/C,4CAAkB,CAAC+C,CAAD,CAAIua,UAAJ,CAAgBI,sBAAhB,CAAtB,EAJf,EAKEC,gBALF,CAMGR,QAAQ,eAAK,2FAAE,iDAAF,cAAQ,+CAAM,SAAS,CAAC,OAAhB,EAAyBA,QAAzB,CAAR,CANhB,CADF,CAUD,CAED;;;;;;;;;;;;;;;GAgBA,QAASS,gBAAT,CAAyBrlB,KAAzB,CAAgC,IAE5BslB,WAF4B,CAQ1BtlB,KAR0B,CAE5BslB,UAF4B,CAG5BT,OAH4B,CAQ1B7kB,KAR0B,CAG5B6kB,OAH4B,cAQ1B7kB,KAR0B,CAI5BJ,KAJ4B,CAI5BA,KAJ4B,uBAIpB,IAJoB,6BAQ1BI,KAR0B,CAK5BgY,OAL4B,CAK5BA,OAL4B,yBAKlB,IALkB,gCAQ1BhY,KAR0B,CAM5BiT,QAN4B,CAM5BA,QAN4B,0BAMjB,IANiB,iBAO5B4D,OAP4B,CAQ1B7W,KAR0B,CAO5B6W,OAP4B,CAU9B,QAAS0O,kBAAT,MAAoC,IAAPC,IAAO,MAAPA,GAAO,CAClC,GAAIA,GAAG,EAAIvS,QAAX,CAAqB,CACnBA,QAAQ,CAAC,CAACuS,GAAG,CAACrzB,CAAL,CAAQqzB,GAAG,CAACxd,CAAZ,CAAewd,GAAG,CAACvd,CAAnB,CAAD,CAAR,CACD,CACF,CAED,GAAMwd,eAAc,CAAGzN,OAAO,CAC1BA,OAAO,CAAC1gB,GAAR,CAAYuQ,mCAAZ,CAD0B,CAE1BxL,mCAAO,CAACuT,MAAR,CAAe,CAAC,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAD,CAAkB,CAAC,GAAD,CAAM,GAAN,CAAW,GAAX,CAAlB,CAAmC,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAnC,CAAf,EAA8DtY,GAA9D,CAAkEuQ,mCAAlE,CAFJ,CAIA,mBACE,kDACGjI,KAAK,EAAIqT,QAAT,EAAqBwS,cAArB,eACC,uCAAC,sCAAD,EACE,SAAS,CAAC,oBADZ,CAEE,YAAY,KAFd,CAGE,KAAK,CAAE,GAHT,CAIE,QAAQ,CAAC,MAJX,CAKE,MAAM,CAAEA,cALV,CAME,KAAK,CAAE5d,2CAAkB,CAACjI,KAAD,CAN3B,CAOE,gBAAgB,CAAE2lB,iBAPpB,EAFJ,cAYE,6CAAI,SAAS,CAAC,mBAAd,EACGD,UAAU,CAAChuB,GAAX,CAAe,SAAAmN,IAAI,qBAClB,6CAAI,GAAG,CAAEA,IAAI,CAACxE,KAAL,CAAawE,IAAI,CAACmgB,QAA3B,eACE,uCAAC,qBAAD,kBACMngB,IADN,EAEE,OAAO,CAAEogB,OAFX,CAGE,OAAO,CAAEhO,OAHX,GADF,CADkB,EAAnB,CADH,CAZF,CADF,CA0BD,CAED;;;;;;;;;;;;;GAce,QAAS6O,YAAT,CAAqB1lB,KAArB,CAA4B,IAEvCslB,WAFuC,CAIrCtlB,KAJqC,CAEvCslB,UAFuC,CAE3B/I,SAF2B,CAIrCvc,KAJqC,CAE3Buc,SAF2B,CAEhBhd,QAFgB,CAIrCS,KAJqC,CAEhBT,QAFgB,eAIrCS,KAJqC,CAGvCJ,KAHuC,CAGvCA,KAHuC,wBAG/B,IAH+B,gCAIrCI,KAJqC,CAGzBiT,QAHyB,CAGzBA,QAHyB,2BAGd,IAHc,kCAIrCjT,KAJqC,CAGRgY,OAHQ,CAGRA,OAHQ,0BAGE,IAHF,gCAMXvV,mCAAQ,CAAC,KAAD,CANG,mEAMlCoU,OANkC,eAMzB8O,UANyB,eAQzC,mBACE,uCAAC,OAAD,EACE,OAAO,cACL,uCAAC,eAAD,EACE,UAAU,CAAEL,UADd,CAEE,OAAO,CAAE,yBAAMK,WAAU,CAAC,KAAD,CAAhB,EAFX,CAGE,KAAK,CAAE/lB,KAHT,CAIE,QAAQ,CAAEqT,QAJZ,CAKE,OAAO,CAAE+E,OALX,CAME,OAAO,CAAEnB,OANX,EAFJ,CAWE,SAAS,CAAE0F,SAXb,CAYE,OAAO,CAAE1F,OAZX,CAaE,eAAe,CAAE8O,UAbnB,EAeGpmB,QAfH,CADF,CAmBD,C;;ACnKD,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE3T,qDAAqD,+BAA+B,8DAA8D,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,0DAA0D,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B,yBAAyB,gCAAmB;AAC5C;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA,sBAAsB,gCAAmB;AACzC;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG;AACH;;AAEA,iBAAiB,6BAAgB;AACjC,sBAAsB,gCAAmB;AACzC;AACA,GAAG;AACH,CAAC;AACc,8DAAuB,mCAAmC,EAAC;;;ACpB1E;;;;GAKA,QAASqmB,uBAAT,CAAgC5lB,KAAhC,CAAuC,IAEnCL,KAFmC,CAejCK,KAfiC,CAEnCL,IAFmC,CAGnC5M,KAHmC,CAejCiN,KAfiC,CAGnCjN,KAHmC,CAInCqO,MAJmC,CAejCpB,KAfiC,CAInCoB,MAJmC,CAKnCykB,WALmC,CAejC7lB,KAfiC,CAKnC6lB,WALmC,CAMnCC,YANmC,CAejC9lB,KAfiC,CAMnC8lB,YANmC,CAOnCC,kBAPmC,CAejC/lB,KAfiC,CAOnC+lB,kBAPmC,CAQnCC,yBARmC,CAejChmB,KAfiC,CAQnCgmB,yBARmC,CASnCC,4BATmC,CAejCjmB,KAfiC,CASnCimB,4BATmC,CAUnCC,eAVmC,CAejClmB,KAfiC,CAUnCkmB,eAVmC,CAWnCpC,SAXmC,CAejC9jB,KAfiC,CAWnC8jB,SAXmC,CAYnCqC,QAZmC,CAejCnmB,KAfiC,CAYnCmmB,QAZmC,CAanCC,UAbmC,CAejCpmB,KAfiC,CAanComB,UAbmC,CAcnCC,OAdmC,CAejCrmB,KAfiC,CAcnCqmB,OAdmC,CAiBrC,6DACMF,QAAQ,CAAG,CACb,CACElmB,KAAK,CAAE,QADT,CAEE6kB,OAAO,CAAE,kBAAM,CAAEiB,kBAAkB,CAACpmB,IAAD,CAAO,IAAP,CAAlB,CAAiC,CAFpD,CAGEolB,UAAU,CAAE,GAHd,CADa,CAMb,CACE9kB,KAAK,CAAE,QADT,CAEE+kB,OAAO,CAAE,IAFX,CAGEF,OAAO,CAAE,kBAAM,CAAEgB,YAAY,CAACnmB,IAAD,CAAZ,CAAqB,CAHxC,CAIEolB,UAAU,CAAE,GAJd,CANa,CAAH,CAYR,EAbN,+CAcMhyB,KAAK,GAAK,CAAV,EAAeqzB,UAAf,EACF,CACEnmB,KAAK,CAAE,kBADT,CAEE2kB,QAAQ,CAAE,gBAFZ,CAGEE,OAAO,CAAE,kBAAM,CAAEkB,yBAAyB,CAACrmB,IAAD,CAAzB,CAAkC,CAHrD,CAIEolB,UAAU,CAAE,GAJd,CADE,sDAOE3jB,MAAM,EAAI,CAAV,CAAc,CAChB,CACEnB,KAAK,CAAE,kBADT,CAEE2kB,QAAQ,CAAE,eAFZ,CAGEE,OAAO,CAAE,kBAAM,CAAEmB,4BAA4B,CAACtmB,IAAD,CAA5B,CAAqC,CAHxD,CAIEolB,UAAU,CAAE,GAJd,CADgB,CAAd,CAOA,EAdF,GAeA,EA7BN,+CA8BMhyB,KAAK,CAAG,CAAR,wDACE+wB,SAAS,CAAG,CACd,CACE7jB,KAAK,CAAGomB,OAAO,CAAG,SAAH,CAAe,OADhC,CAEEvB,OAAO,CAAE,kBAAM,CAAEe,WAAW,CAAClmB,IAAD,CAAO,CAAC0mB,OAAR,CAAX,CAA8B,CAFjD,CAGEtB,UAAU,CAAE,GAHd,CADc,CAAH,CAMT,EAPF,+CAQEqB,UAAU,CAAG,CACf,CACEnmB,KAAK,CAAE,YADT,CAEE2kB,QAAQ,CAAE,gBAFZ,CAGEE,OAAO,CAAE,kBAAM,CAAEoB,eAAe,CAACvmB,IAAD,CAAf,CAAwB,CAH3C,CAIEolB,UAAU,CAAE,GAJd,CADe,CAAH,CAOV,EAfF,GAgBA,EA9CN,GAgDD,CAED;;;GAIA,QAASuB,mBAAT,CAA4BtmB,KAA5B,CAAmC,IAE/BC,MAF+B,CAsB7BD,KAtB6B,CAE/BC,KAF+B,CAG/BN,IAH+B,CAsB7BK,KAtB6B,CAG/BL,IAH+B,CAI/BsS,OAJ+B,CAsB7BjS,KAtB6B,CAI/BiS,OAJ+B,CAK/Blf,KAL+B,CAsB7BiN,KAtB6B,CAK/BjN,KAL+B,CAM/BqO,MAN+B,CAsB7BpB,KAtB6B,CAM/BoB,MAN+B,CAO/BxB,KAP+B,CAsB7BI,KAtB6B,CAO/BJ,KAP+B,CAQ/B2mB,QAR+B,CAsB7BvmB,KAtB6B,CAQ/BumB,QAR+B,CAS/BC,UAT+B,CAsB7BxmB,KAtB6B,CAS/BwmB,UAT+B,CAU/BrU,MAV+B,CAsB7BnS,KAtB6B,CAU/BmS,MAV+B,CAW/BsU,cAX+B,CAsB7BzmB,KAtB6B,CAW/BymB,cAX+B,CAY/BC,UAZ+B,CAsB7B1mB,KAtB6B,CAY/B0mB,UAZ+B,CAa/BC,QAb+B,CAsB7B3mB,KAtB6B,CAa/B2mB,QAb+B,CAc/BC,YAd+B,CAsB7B5mB,KAtB6B,CAc/B4mB,YAd+B,CAe/BC,gBAf+B,CAsB7B7mB,KAtB6B,CAe/B6mB,gBAf+B,CAgB/BC,iBAhB+B,CAsB7B9mB,KAtB6B,CAgB/B8mB,iBAhB+B,CAiB/BC,cAjB+B,CAsB7B/mB,KAtB6B,CAiB/B+mB,cAjB+B,CAkB/B7U,IAlB+B,CAsB7BlS,KAtB6B,CAkB/BkS,IAlB+B,CAmB/B7S,QAnB+B,CAsB7BW,KAtB6B,CAmB/BX,QAnB+B,CAoB/B8mB,QApB+B,CAsB7BnmB,KAtB6B,CAoB/BmmB,QApB+B,CAqB/B/pB,KArB+B,CAsB7B4D,KAtB6B,CAqB/B5D,KArB+B,CAuBjC,GAAM4qB,qBAAoB,CAAIj0B,KAAK,GAAK,CAAV,EAAe,CAAC4zB,QAA9C,CACA,GAAMM,iBAAgB,CACnBH,iBAAiB,EAAIhe,iBAAO,CAACnJ,IAAD,CAAOknB,gBAAP,CAA5B,EAAwDC,iBAAiB,CAAG1lB,MAA7E,CACI0lB,iBAAiB,CAAG,CADxB,CAEI,CAHN,CAKA,GAAMI,gBAAe,CAAG,GAAIC,KAAI,CAACC,YAAT,CAAsB,OAAtB,CAAxB,CACA,GAAMC,SAAQ,CAAGH,eAAe,CAACI,MAAhB,CAAuBpV,IAAvB,CAAjB,CACA,GAAIqV,YAAJ,CACA,GAAIP,oBAAJ,CAA0B,CACxBO,WAAW,CAAGhf,4CAAmB,CAAC0e,gBAAD,CAAjC,CACD,CAFD,IAEO,IAAI9U,MAAM,EAAI,CAACwU,QAAf,CAAyB,CAC9BY,WAAW,iCAA4BF,QAA5B,aAAwChoB,QAAxC,SAAoD6S,IAAI,GAAK,CAAT,CAAa,EAAb,CAAkB,GAAtE,KAAX,CACD,CAFM,IAEA,CACLqV,WAAW,CAAG,+BAAd,CACD,CACD;AACA;AACA;AACA;AACA,GAAM1C,QAAO,CAAI9xB,KAAK,GAAK,CAAV,EAAe,CAAC4zB,QAAhB,CACb,iBAAMC,aAAY,CAAC3U,OAAD,CAAUgV,gBAAV,CAAlB,EADa,CAEb,iBAAMP,WAAU,CAAC/mB,IAAD,CAAhB,EAFJ,CAIA,GAAM6nB,aAAY,CAAIT,cAAc,CAAG,CAAElQ,OAAO,CAAE,KAAX,CAAH,CAAwB,EAA5D,CACA,GAAM4Q,kBAAiB,CAAG7B,sBAAsB,CAAC5lB,KAAD,CAAhD,CACA,mBACE,gEACE,uCAAC,WAAD,gBAAa,KAAK,CAAEunB,WAApB,EAAqCC,YAArC,eACE,iDACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE3C,OAFX,CAGE,UAAU,CAAE,oBAAAra,CAAC,QAAI/C,4CAAkB,CAAC+C,CAAD,CAAI,GAAJ,CAAS,iBAAMkc,WAAU,CAAC/mB,IAAD,CAAhB,EAAT,CAAtB,EAHf,CAIE,SAAS,CAAC,cAJZ,EAMGM,KANH,CADF,CADF,CAWGwnB,iBAAiB,CAAC51B,MAAlB,CAA2B,CAA3B,cACC,uCAAC,WAAD,EACE,UAAU,CAAE+zB,sBAAsB,CAAC5lB,KAAD,CADpC,CAEE,KAAK,CAAEjN,KAAK,CAAG,CAAR,EAAaozB,QAAb,CAAyBvmB,KAAK,EAAIzD,mDAAe,CAACC,KAAD,CAAjD,CAA4D,IAFrE,CAGE,QAAQ,CAAE,kBAAA1G,CAAC,QAAI+wB,eAAc,CAAC9mB,IAAD,CAAOjK,CAAP,CAAlB,EAHb,eAKE,uCAAC,UAAD,EAAS,SAAS,CAAC,gBAAnB,EALF,CADD,CAQG,IAnBN,CAoBG3C,KAAK,CAAG,CAAR,EAAayzB,UAAb,CAA0BD,QAA1B,CAAqC,IApBxC,CAqBGxzB,KAAK,CAAG,CAAR,eAAc,+CAAM,SAAS,CAAC,iBAAhB,EAAmCs0B,QAAnC,CArBjB,CADF,CAyBD,CAED;;;;GAKA,QAASK,oBAAT,CAA6B1nB,KAA7B,CAAoC,IAEhCC,MAFgC,CAM9BD,KAN8B,CAEhCC,KAFgC,CAGhCN,IAHgC,CAM9BK,KAN8B,CAGhCL,IAHgC,CAIhCgoB,aAJgC,CAM9B3nB,KAN8B,CAIhC2nB,aAJgC,CAKhCC,kBALgC,CAM9B5nB,KAN8B,CAKhC4nB,kBALgC,eAOMnlB,mCAAQ,CAACxC,KAAD,CAPd,kEAO3B4nB,YAP2B,eAObC,eAPa,eASlC;AACA;AACA,GAAMC,aAAY,CAAGH,kBAAkB,CAACjoB,IAAD,CAAOkoB,YAAP,CAAvC,CACA,QAASG,WAAT,EAAsB,CACpB,GAAI,CAACD,YAAL,CAAmB,CACjBJ,aAAa,CAAChoB,IAAD,CAAOkoB,YAAP,CAAqB,IAArB,CAAb,CACD,CACF,CACD,mBACE,+CAAM,SAAS,CAAC,yBAAhB,eACE,gDACE;AACA,SAAS,KAFX,CAGE,SAAS,CAAC,aAHZ,CAIE,IAAI,CAAC,MAJP,CAKE,KAAK,CAAEA,YALT,CAME,QAAQ,CAAE,kBAACrd,CAAD,CAAO,CAAEsd,eAAe,CAACtd,CAAC,CAACyd,MAAF,CAAS/yB,KAAV,CAAf,CAAkC,CANvD,CAOE,UAAU,CAAE,oBAAAsV,CAAC,QAAI/C,4CAAkB,CACjC+C,CADiC,CAEjC,OAFiC,CAGjCwd,UAHiC,CAAtB,EAPf,CAYE,OAAO,CAAE,iBAAAxd,CAAC,QAAIA,EAAC,CAACyd,MAAF,CAASC,MAAT,EAAJ,EAZZ,EADF,CAeG,CAACH,YAAD,eACC,iDACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,mBAFZ,CAGE,OAAO,CAAEC,UAHX,SAhBJ,CADF,CA2BD,CAED;;;;GAKA,QAASG,aAAT,CAAsBnoB,KAAtB,CAA6B,IAEzBooB,UAFyB,CAIvBpoB,KAJuB,CAEzBooB,SAFyB,CAGzBC,YAHyB,CAIvBroB,KAJuB,CAGzBqoB,YAHyB,CAK3B,MACGD,UAAS,EAAIC,YAAd,cACK,uCAAC,mBAAD,CAAyBroB,KAAzB,CADL,cAEK,uCAAC,kBAAD,CAAwBA,KAAxB,CAHP,CAKD,CAED;;;;GAKA,QAASsoB,cAAT,CAAuBtoB,KAAvB,CAA8B,IAE1BiS,QAF0B,CASxBjS,KATwB,CAE1BiS,OAF0B,CAG1BtS,IAH0B,CASxBK,KATwB,CAG1BL,IAH0B,CAI1ByB,MAJ0B,CASxBpB,KATwB,CAI1BoB,MAJ0B,CAK1BwlB,YAL0B,CASxB5mB,KATwB,CAK1B4mB,YAL0B,CAM1BC,gBAN0B,CASxB7mB,KATwB,CAM1B6mB,gBAN0B,CAO1BC,iBAP0B,CASxB9mB,KATwB,CAO1B8mB,iBAP0B,CAQ1ByB,gBAR0B,CASxBvoB,KATwB,CAQ1BuoB,gBAR0B,CAU5B,QAASC,QAAT,CAAiB9gB,KAAjB,CAAwB,CACtB,GAAIA,KAAK,CAACugB,MAAN,CAAa5B,OAAjB,CAA0B,CACxB,GAAM9X,SAAQ,CAAGka,QAAQ,CAAC/gB,KAAK,CAACugB,MAAN,CAAa/yB,KAAd,CAAqB,EAArB,CAAzB,CACA0xB,YAAY,CAAC3U,OAAD,CAAU1D,QAAV,CAAZ,CACD,CACF,CACD,mBACE,8CAAK,SAAS,CAAC,yBAAf,EACGoG,eAAK,CAAC,CAAD,CAAIvT,MAAM,CAAG,CAAb,CAAL,CAAqB9J,GAArB,CAAyB,SAAC9E,CAAD,CAAO,CAC/B,GAAMk2B,UAAS,CAAG5f,iBAAO,CAACnJ,IAAD,CAAOknB,gBAAP,CAAP,EAAmCr0B,CAAC,GAAKs0B,iBAA3D,CACA,mBACE,8CAAK,SAAS,CAAC,eAAf,CAA+B,GAAG,CAAEt0B,CAApC,eACE,uCAAC,WAAD,EAAa,KAAK,CAAE+V,4CAAmB,CAAC/V,CAAD,CAAvC,eACE,gDACE,SAAS,CAAEm2B,uBAAI,CAAC,oBAAD,CAAuB,CAAEtC,OAAO,CAAEqC,SAAS,EAAI,CAACH,gBAAzB,CAAvB,CADjB,CAEE,IAAI,CAAC,UAFP,CAGE,KAAK,CAAE/1B,CAHT,CAIE,OAAO,CAAEk2B,SAAS,EAAIH,gBAJxB,CAKE,QAAQ,CAAEC,OALZ,EADF,CADF,CADF,CAaD,CAfA,CADH,CADF,CAoBD,CAED;;;;;GAMA,QAASI,aAAT,CAAsB5oB,KAAtB,CAA6B,IAEzBmS,OAFyB,CAGvBnS,KAHuB,CAEzBmS,MAFyB,CAEjB0W,MAFiB,CAGvB7oB,KAHuB,CAEjB6oB,MAFiB,CAETjpB,KAFS,CAGvBI,KAHuB,CAETJ,KAFS,CAI3B,GAAMkpB,SAAQ,CAAIlpB,KAAK,CAAGiI,2CAAkB,CAACjI,KAAD,CAArB,CAA+BrI,SAAtD,CACA,GAAI4a,MAAJ,CAAY,CACV,mBACE,4CACE,SAAS,CAAC,8CADZ,eAGE,8CACE,OAAO,CAAC,eADV,CAEE,SAAS,CAAC,OAFZ,CAGE,YAAU,YAHZ,CAIE,KAAK,CAAC,KAJR,CAKE,MAAM,CAAC,KALT,CAME,cAAY,MANd,eAQE,+CAAM,IAAI,CAAE2W,QAAZ,CAAsB,CAAC,CAAE,IAAM,CAA/B,CAAkC,CAAC,CAAE,IAAM,CAA3C,CAA8C,KAAK,CAAE,KAAO,GAA5D,CAAiE,MAAM,CAAE,KAAO,GAAhF,EARF,CAHF,CADF,CAgBD,CACD,mBACE,4CACE,SAAS,CAAC,kDADZ,eAGE,8CACE,OAAO,CAAC,eADV,CAEE,SAAS,CAAC,OAFZ,CAGE,YAAU,YAHZ,CAIE,KAAK,CAAC,KAJR,CAKE,MAAM,CAAC,KALT,CAME,cAAY,MANd,eAQE,+CACE,IAAI,CAAGD,MAAM,CAAG,MAAH,CAAYC,QAD3B,CAEE,CAAC,CAAC,oHAFJ,EARF,CAHF,CADF,CAmBD,CAED;;;MAIqBC,kB,mZAInBC,c,CAAiB,UAAM,iBAOjB,MAAKhpB,KAPY,CAEnBC,KAFmB,aAEnBA,KAFmB,CAGnBooB,YAHmB,aAGnBA,YAHmB,CAInBY,UAJmB,aAInBA,UAJmB,CAKnBb,SALmB,aAKnBA,SALmB,CAMNc,eANM,aAMnBC,WANmB,0BAajB,MAAKC,OAbY,CASnBC,MATmB,CAUNC,WAVM,sBAUjB5F,SAViB,CAWjB6F,SAXiB,sBAWjBA,SAXiB,CAerB,GAAMJ,YAAW,CAAG,QAAdA,YAAc,CAAC3e,CAAD,CAAO,CACzB0e,eAAe,GACf,MAAKC,WAAL,CAAiB3e,CAAjB,EACD,CAHD,CAKA,GAAMgf,UAAS,WAAMF,WAAN,yBAAf,CACA,GAAMG,YAAW,CAAI,CAACpB,YAAD,EAAiB,CAACD,SAAlB,EAA+BmB,SAApD,CACA,mBACE,+CACE,GAAG,CAAE,MAAKG,eADZ,CAEE,KAAK,CAAEzpB,KAFT,CAGE,SAAS,CAAE8jB,6BAAU,CACnByF,SADmB,WAEhBA,SAFgB,aAEH,MAAKG,YAAL,IAAuB,QAFpB,EAGnBV,UAAU,YAAOK,WAAP,kBAHS,CAInBG,WAAW,EAAI,WAJI,CAHvB,CASE,SAAS,CAAEA,WATb,CAUE,eAAcA,WAVhB,CAWE,WAAW,CAAEA,WAAW,CAAGN,WAAH,CAAiB5xB,SAX3C,eAaE,uCAAC,YAAD,kBACM,MAAKyI,KADX,EAEE,WAAW,CAAEspB,WAFf,CAGE,QAAQ,CAAE,MAAKM,cAAL,EAHZ,GAbF,CAkBG,MAAKC,YAAL,EAlBH,CADF,CAsBD,C,OAMDA,Y,CAAe,UAAM,kBACS,MAAK7pB,KADd,CACXjN,KADW,cACXA,KADW,CACJ4zB,QADI,cACJA,QADI,CAEnB,GAAI5zB,KAAK,GAAK,CAAV,EAAe4zB,QAAnB,CAA6B,CAC3B,MAAO,KAAP,CACD,CACD,mBACE,uCAAC,aAAD,CACM,MAAK3mB,KADX,CADF,CAKD,C,OAKD8pB,c,CAAiB,UAAM,kBACe,MAAK9pB,KADpB,CACb2mB,QADa,cACbA,QADa,CACHxU,MADG,cACHA,MADG,CACKvS,KADL,cACKA,KADL,2BAOjB,MAAKwpB,OAPY,CAGnBC,MAHmB,CAINC,WAJM,uBAIjB5F,SAJiB,CAKjBqG,YALiB,uBAKjBA,YALiB,CASrB,GAAMC,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACxf,CAAD,CAAO,CACjC;AACA,GAAI,CAAC2H,MAAL,CAAa,CACX4X,YAAY,CAACvf,CAAD,yDAAZ,CACD,CACF,CALD,CAOA,GAAMyf,cAAa,CAAGlG,6BAAU,WAC3BuF,WAD2B,qEAExBA,WAFwB,sBAEC3C,QAAQ,CAAG,MAAH,CAAY,OAFrB,EAEkC,CAACxU,MAFnC,EAAhC,CAIA,mBACE,+CACE,SAAS,CAAE8X,aADb,CAEE,OAAO,CAAED,mBAFX,CAGE,UAAU,CAAE,oBAAAxf,CAAC,QAAI/C,4CAAkB,CAAC+C,CAAD,CAAI,GAAJ,CAASwf,mBAAT,CAAtB,EAHf,CAIE,IAAI,CAAC,QAJP,CAKE,QAAQ,CAAC,GALX,eAOE,uCAAC,YAAD,EACE,MAAM,CAAE7X,MADV,CAEE,MAAM,CAAEwU,QAFV,CAGE,KAAK,CAAE/mB,KAHT,EAPF,CADF,CAeD,C,8EAED;;;;4BAKS,+CASH,KAAKI,KATF,CAEL+hB,KAFK,cAELA,KAFK,CAEEmI,OAFF,cAEEA,OAFF,CAEWn3B,KAFX,cAEWA,KAFX,CAGLo3B,QAHK,cAGLA,QAHK,CAGKC,cAHL,cAGKA,cAHL,CAGqBC,iBAHrB,cAGqBA,iBAHrB,CAILlY,MAJK,cAILA,MAJK,CAKLwU,QALK,cAKLA,QALK,CAKK2D,QALL,cAKKA,QALL,CAKejE,OALf,cAKeA,OALf,CAKwBkE,WALxB,cAKwBA,WALxB,CAMMC,aANN,cAMLC,SANK,CAOLC,UAPK,cAOLA,UAPK,CAQFC,UARE,wPAgBH,KAAKvB,OAhBF,CAWLC,MAXK,CAYQC,WAZR,uBAYH5F,SAZG,CAaHkH,cAbG,uBAaHA,cAbG,CAcHrB,SAdG,uBAcHA,SAdG,CAiBP,GAAMsB,SAAQ,CAAG,KAAKC,UAAL,EAAjB,CACA,GAAMC,0BAAyB,CAAGC,+BAAc,CAACL,UAAD,CAAhD,CAEA,GAAMF,UAAS,CAAG,QAAZA,UAAY,CAACjgB,CAAD,CAAO,CACvBggB,aAAa,GACb,MAAI,CAACC,SAAL,CAAejgB,CAAf,EACD,CAHD,CAKA,mBACE,2DACE,SAAS,CAAEuZ,6BAAU,CAAC,kBAAD,iBAA8BhxB,KAA9B,gGACfu2B,WADe,uBACmBuB,QADnB,mEAEfvB,WAFe,+BAEkB3C,QAAQ,CAAG,MAAH,CAAY,OAFtC,EAEkD,CAACxU,MAFnD,mEAGfmX,WAHe,+BAG2BjD,OAH3B,mEAIfiD,WAJe,qCAIiCiB,WAJjC,mEAKfjB,WALe,uBAKmBgB,QALnB,mEAMfhB,WANe,sBAMkBY,OANlB,yDAQnB,WARmB,CAQN,CAACW,QAAD,EAAaV,QARP,yDASnB,mBATmB,CASE,CAACU,QAAD,EAAaT,cATf,yDAUnB,sBAVmB,CAUK,CAACS,QAAD,EAAaR,iBAVlB,yDAWnB,aAXmB,CAWJO,cAAc,EAAIA,cAAc,CAAC,IAAD,CAX5B,gBADvB,CAcE,KAAK,CAAE7I,KAdT,CAeE,IAAI,CAAC,UAfP,CAgBE,WAAW,CAAEwH,SAAS,CAAG,KAAK0B,WAAR,CAAsB1zB,SAhB9C,CAiBE,UAAU,CAAEgyB,SAAS,CAAG,KAAK2B,UAAR,CAAqB3zB,SAjB5C,CAkBE,WAAW,CAAEgyB,SAAS,CAAG,KAAK4B,WAAR,CAAsB5zB,SAlB9C,CAmBE,MAAM,CAAEgyB,SAAS,CAAG,KAAK6B,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAH,CAA4B9zB,SAnB/C,CAoBE,SAAS,CAAEgyB,SAAS,CAAGkB,SAAH,CAAelzB,SApBrC,EAqBMwzB,yBArBN,EAuBGL,UAAU,CAAG,KAAKZ,cAAL,EAAH,CAA2B,IAvBxC,CAwBG,KAAKd,cAAL,EAxBH,CAyBG,KAAKsC,cAAL,EAzBH,CADF,CA6BD,C,sBArKmCC,6B;;;;;;;;AC3UtC,SAAS,aAAQ,IAAI,CAAC,aAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,aAAQ,wBAAwB;;AAE3T,SAAS,6BAAwB,oBAAoB,+BAA+B,cAAc,kCAA6B,mBAAmB,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,SAAS,kCAA6B,oBAAoB,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B;AACA;AACA;AACA;AACA,cAAc,6BAAwB;;AAEtC,sBAAsB,gCAAmB,QAAQ,aAAQ;AACzD;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG,8BAA8B,gCAAmB;AACpD;AACA,GAAG,eAAe,gCAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,IAAI,gBAAU,GAAG,6BAAgB;AACjC,sBAAsB,gCAAmB,WAAW,aAAQ;AAC5D;AACA,GAAG;AACH,CAAC;AACc,+DAAuB,oCAAoC,EAAC;;;ACxC3E,SAAS,oBAAQ,IAAI,CAAC,oBAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,oBAAQ,wBAAwB;;AAE3T,SAAS,oCAAwB,oBAAoB,+BAA+B,cAAc,yCAA6B,mBAAmB,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,SAAS,yCAA6B,oBAAoB,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B;AACA;AACA;AACA;AACA,cAAc,oCAAwB;;AAEtC,sBAAsB,gCAAmB,QAAQ,oBAAQ;AACzD;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG,8BAA8B,gCAAmB;AACpD;AACA,GAAG,eAAe,gCAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA,IAAI,uBAAU,GAAG,6BAAgB;AACjC,sBAAsB,gCAAmB,kBAAkB,oBAAQ;AACnE;AACA,GAAG;AACH,CAAC;AACc,sEAAuB,2CAA2C,EAAC;;;ACxClF,SAAS,kBAAQ,IAAI,CAAC,kBAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,kBAAQ,wBAAwB;;AAE3T,SAAS,kCAAwB,oBAAoB,+BAA+B,cAAc,uCAA6B,mBAAmB,YAAY,oCAAoC,6DAA6D,YAAY,6BAA6B,OAAO,2BAA2B,0CAA0C,wEAAwE,2BAA2B,EAAE,EAAE,eAAe;;AAE1e,SAAS,uCAA6B,oBAAoB,+BAA+B,iBAAiB,sCAAsC,YAAY,YAAY,uBAAuB,OAAO,qBAAqB,0CAA0C,2BAA2B,EAAE,eAAe;;AAElR;;AAE/B,IAAI,eAAK,gBAAgB,gCAAmB;AAC5C;AACA;AACA;AACA;AACA,CAAC;;AAED,yBAAyB,gCAAmB,yBAAyB,gCAAmB;AACxF;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,cAAc,kCAAwB;;AAEtC,sBAAsB,gCAAmB,QAAQ,kBAAQ;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,+BAA+B,gCAAmB;AACrD;AACA,GAAG,8BAA8B,gCAAmB,4BAA4B,gCAAmB;AACnG;AACA;AACA;AACA;AACA;AACA,GAAG,EAAE,eAAK,eAAe,gCAAmB;AAC5C;AACA,GAAG,eAAe,gCAAmB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA,IAAI,qBAAU,GAAG,6BAAgB;AACjC,sBAAsB,gCAAmB,gBAAgB,kBAAQ;AACjE;AACA,GAAG;AACH,CAAC;AACc,oEAAuB,yCAAyC,EAAC;;;AChDhF;;;;;;;;;;;;GAaO,QAASC,WAAT,CAAoBxrB,KAApB,CAA2B,IAE9BX,SAF8B,CAI5BW,KAJ4B,CAE9BX,QAF8B,CAEpBosB,OAFoB,CAI5BzrB,KAJ4B,CAEpByrB,OAFoB,CAEXC,YAFW,CAI5B1rB,KAJ4B,CAEX0rB,YAFW,CAEGC,qBAFH,CAI5B3rB,KAJ4B,CAEG2rB,qBAFH,CAG9BC,UAH8B,CAI5B5rB,KAJ4B,CAG9B4rB,UAH8B,CAGlBzF,QAHkB,CAI5BnmB,KAJ4B,CAGlBmmB,QAHkB,CAMhC;;;;;KAMA,GAAM0F,SAAQ,CAAGvxB,sCAAW,CAAC,SAACwxB,aAAD,CAAgBC,QAAhB,QAA6B,WAAM,CAC9D,GAAMC,gBAAe,CAAGnL,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAxB,CACAkL,eAAe,CAACjL,YAAhB,CAA6B,MAA7B,CAAqC,MAArC,EACAiL,eAAe,CAACjL,YAAhB,CAA6B,QAA7B,CAAuCgL,QAAvC,EACAlL,QAAQ,CAACG,IAAT,CAAcC,WAAd,CAA0B+K,eAA1B,EAA4C;AAC5CA,eAAe,CAAC9K,KAAhB,GACA8K,eAAe,CAAC/oB,gBAAhB,CAAiC,QAAjC,CAA2C,SAACyE,KAAD,CAAW,CACpD,GAAI,EAAE9F,MAAM,CAACqqB,IAAP,EAAerqB,MAAM,CAACsqB,UAAtB,EAAoCtqB,MAAM,CAACuqB,QAA3C,EAAuDvqB,MAAM,CAACwqB,IAAhE,CAAJ,CAA2E,CACzEX,OAAO,CAAC,kEAAD,CAAP,CACA,OACD,CAJmD,GAK5CY,MAL4C,CAKlC3kB,KAAK,CAACugB,MAL4B,CAK5CoE,KAL4C,CAMpD,GAAI,CAACA,KAAD,EAAUA,KAAK,CAACx6B,MAAN,GAAiB,CAA/B,CAAkC,CAChC45B,OAAO,CAAC,qCAAD,CAAP,CACA,OACD,CACD,GAAMa,OAAM,CAAG,GAAIJ,WAAJ,EAAf,CACAI,MAAM,CAACrpB,gBAAP,CAAwB,MAAxB,CAAgC,UAAM,IAC5B+C,OAD4B,CACjBsmB,MADiB,CAC5BtmB,MAD4B,CAEpC,GAAI,CACF,GAAMyZ,aAAY,CAAGqM,aAAa,CAAC9lB,MAAD,CAAS3G,QAAT,CAAlC,CACAosB,OAAO,CAAC,KAAD,CAAP,CAAgB;AAChBC,YAAY,CAACjM,YAAD,CAAZ,CACD,CAAC,MAAOjV,CAAP,CAAU,CACVihB,OAAO,CAACjhB,CAAC,CAAC5N,OAAH,CAAP,CACD,CACF,CATD,CASG,KATH,EAUA0vB,MAAM,CAACC,UAAP,CAAkBF,KAAK,CAAC,CAAD,CAAvB,EACD,CAtBD,EAuBAL,eAAe,CAAC7K,MAAhB,GACD,CA9B4B,EAAD,CA8BzB,CAAC9hB,QAAD,CAAWosB,OAAX,CAAoBC,YAApB,CA9ByB,CAA5B,CAgCA,GAAMpG,WAAU,wDACVa,QAAQ,CAAG,CACb,CACElmB,KAAK,CAAE,kBADT,CAEE6kB,OAAO,CAAE6G,qBAFX,CAGE5G,UAAU,CAAE,GAHd,CADa,CAAH,CAMR,EAPU,+CAQV6G,UAAU,CAAG,CACf,CACE3rB,KAAK,CAAE,kBADT,CAEE2kB,QAAQ,CAAE,iBAFZ,CAGEE,OAAO,CAAE+G,QAAQ,CAAC3M,iCAAD,CAAsB1Y,sCAAtB,CAHnB,CAIEue,UAAU,CAAE,GAJd,CADe,CAOf,CACE9kB,KAAK,CAAE,kBADT,CAEE2kB,QAAQ,CAAE,kBAFZ,CAGEE,OAAO,CAAE+G,QAAQ,CAAC9M,8BAAD,CAAmBzY,mCAAnB,CAHnB,CAIEye,UAAU,CAAE,GAJd,CAPe,CAAH,CAaV,EArBU,EAAhB,CAwBA,MAAQO,WAAU,CAACzzB,MAAX,CAAoB,CAApB,cACN,uCAAC,WAAD,EACE,UAAU,CAAEyzB,UADd,eAGE,iDAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,MAHF,CADM,CAMJ,IANJ,CAOD,CAED;;;;;;;;;GAUO,QAASkH,oBAAT,CAA6BxsB,KAA7B,CAAoC,IAEvCysB,QAFuC,CASrCzsB,KATqC,CAEvCysB,OAFuC,CAGvCC,cAHuC,CASrC1sB,KATqC,CAGvC0sB,cAHuC,CAIvCC,YAJuC,CASrC3sB,KATqC,CAIvC2sB,YAJuC,CAKvCC,UALuC,CASrC5sB,KATqC,CAKvC4sB,UALuC,CAMvCC,qBANuC,CASrC7sB,KATqC,CAMvC6sB,qBANuC,CAOvCC,yBAPuC,CASrC9sB,KATqC,CAOvC8sB,yBAPuC,CAQvCC,0BARuC,CASrC/sB,KATqC,CAQvC+sB,0BARuC,CAWzC,mBACE,8EACGH,UAAU,eACT,2FACE,iDACE,OAAO,CAAEH,OADX,CAEE,KAAK,CAAC,oCAFR,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,CAACI,qBAJb,eAME,uCAAC,gBAAD,MANF,CADF,cASE,iDACE,OAAO,CAAEH,cADX,CAEE,KAAK,CAAC,2CAFR,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,CAACI,yBAJb,eAME,uCAAC,uBAAD,MANF,CATF,cAiBE,iDACE,OAAO,CAAEH,YADX,CAEE,KAAK,CAAC,yCAFR,CAGE,IAAI,CAAC,QAHP,CAIE,QAAQ,CAAE,CAACI,0BAJb,eAME,uCAAC,qBAAD,MANF,CAjBF,CAFJ,CADF,CAgCD,C;;;;;;AC9JD,yCAUA,QAAStX,YAAT,CAAqB5G,IAArB,CAA2BoC,QAA3B,CAAqCgC,QAArC,CAA+C7W,KAA/C,CAAsD,oBACpD,GAAMiV,SAAQ,wDAAOJ,QAAP,GAAiBpC,IAAI,CAACzQ,IAAtB,EAAd,CACA,OAAO,4CACFyQ,IADL,IAEMA,IAAI,CAACtP,QAAL,CAAiB,CACnBA,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CACPjI,GADO,CACH,SAAA5B,CAAC,QAAI+f,YAAW,CAAC/f,CAAD,CAAI2b,QAAJ,CAAc4B,QAAd,CAAf,EADE,CADS,CAAjB,CAGC,EALP,EAMErT,KAAK,CAAE,CAAAqT,QAAQ,OAAR,EAAAA,QAAQ,SAAR,wBAAAA,QAAQ,CAAE/U,IAAV,CAAe,SAAAuB,CAAC,QAAIqJ,kBAAO,CAACrJ,CAAC,CAACE,IAAH,CAAS0R,QAAT,CAAX,EAAhB,yDAAgDzR,KAAhD,GAAyDzD,mDAAe,CAACC,KAAD,CANjF,GAQD,CAED,QAAS4wB,YAAT,CAAqBC,IAArB,CAA2Bha,QAA3B,CAAqC7W,KAArC,CAA4C,CAC1C,OAAO,4CACF6wB,IADL,EAEEluB,IAAI,CAAEkuB,IAAI,CAAGA,IAAI,CAACluB,IAAL,CAAUzH,GAAV,CAAc,SAAAmd,GAAG,QAAIgB,YAAW,CAAChB,GAAD,CAAM,EAAN,CAAUxB,QAAV,CAAoB7W,KAApB,CAAf,EAAjB,CAAH,CAAiE,EAF7E,GAID,CAED,QAAS8wB,WAAT,CAAoBre,IAApB,CAAqC,IAAXlP,KAAW,2DAAJ,EAAI,CACnC,GAAI,CAACkP,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CACD,GAAMc,QAAO,wDAAOhQ,IAAP,GAAakP,IAAI,CAACzQ,IAAlB,EAAb,CACA,GAAIyQ,IAAI,CAACtP,QAAT,CAAmB,CACjB,OAAQ2J,kCAAS,CAACyG,OAAD,CAAjB,sDAA+Bd,IAAI,CAACtP,QAAL,CAAc8O,OAAd,CAAsB,SAAA8e,CAAC,QAAID,WAAU,CAACC,CAAD,CAAIxd,OAAJ,CAAd,EAAvB,CAA/B,GACD,CACD,MAAOzG,mCAAS,CAACyG,OAAD,CAAhB,CACD,CAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAkDe,QAASyd,YAAT,CAAqBptB,KAArB,CAA4B,IAEvC5D,MAFuC,CAuCrC4D,KAvCqC,CAEvC5D,KAFuC,CAGvC6wB,IAHuC,CAuCrCjtB,KAvCqC,CAGvCitB,IAHuC,CAIvCI,cAJuC,CAuCrCrtB,KAvCqC,CAIvCqtB,cAJuC,CAKvCpa,QALuC,CAuCrCjT,KAvCqC,CAKvCiT,QALuC,CAMvBqa,YANuB,CAuCrCttB,KAvCqC,CAMvCutB,cANuC,CAOvCC,YAPuC,CAuCrCxtB,KAvCqC,CAOvCwtB,YAPuC,CAQvCC,YARuC,CAuCrCztB,KAvCqC,CAQvCytB,YARuC,CASvClF,gBATuC,CAuCrCvoB,KAvCqC,CASvCuoB,gBATuC,CAUvClpB,QAVuC,CAuCrCW,KAvCqC,CAUvCX,QAVuC,kBAuCrCW,KAvCqC,CAWvCupB,SAXuC,CAWvCA,SAXuC,2BAW3B,IAX2B,mCAuCrCvpB,KAvCqC,CAYvC8jB,SAZuC,CAYvCA,SAZuC,2BAY3B,IAZ2B,kCAuCrC9jB,KAvCqC,CAavCmmB,QAbuC,CAavCA,QAbuC,0BAa5B,IAb4B,mCAuCrCnmB,KAvCqC,CAcvC0qB,UAduC,CAcvCA,UAduC,4BAc1B,IAd0B,qCAuCrC1qB,KAvCqC,CAevC4sB,UAfuC,CAevCA,UAfuC,4BAe1B,IAf0B,qCAuCrC5sB,KAvCqC,CAgBvComB,UAhBuC,CAgBvCA,UAhBuC,4BAgB1B,IAhB0B,qCAuCrCpmB,KAvCqC,CAiBvC4rB,UAjBuC,CAiBvCA,UAjBuC,4BAiB1B,IAjB0B,mBAkBvCH,OAlBuC,CAuCrCzrB,KAvCqC,CAkBvCyrB,OAlBuC,CAmBvC5F,WAnBuC,CAuCrC7lB,KAvCqC,CAmBvC6lB,WAnBuC,CAoBvC6H,YApBuC,CAuCrC1tB,KAvCqC,CAoBvC0tB,YApBuC,CAqBvCC,UArBuC,CAuCrC3tB,KAvCqC,CAqBvC2tB,UArBuC,CAsBvC/G,YAtBuC,CAuCrC5mB,KAvCqC,CAsBvC4mB,YAtBuC,CAuBvCH,cAvBuC,CAuCrCzmB,KAvCqC,CAuBvCymB,cAvBuC,CAwBvCkB,cAxBuC,CAuCrC3nB,KAvCqC,CAwBvC2nB,aAxBuC,CAyBvCC,kBAzBuC,CAuCrC5nB,KAvCqC,CAyBvC4nB,kBAzBuC,CA0BvC9B,YA1BuC,CAuCrC9lB,KAvCqC,CA0BvC8lB,YA1BuC,CA2BvCY,UA3BuC,CAuCrC1mB,KAvCqC,CA2BvC0mB,UA3BuC,CA4BvCgF,YA5BuC,CAuCrC1rB,KAvCqC,CA4BvC0rB,YA5BuC,CA6BvCC,qBA7BuC,CAuCrC3rB,KAvCqC,CA6BvC2rB,qBA7BuC,CA8BvC3F,yBA9BuC,CAuCrChmB,KAvCqC,CA8BvCgmB,yBA9BuC,CA+BvCC,4BA/BuC,CAuCrCjmB,KAvCqC,CA+BvCimB,4BA/BuC,CAgCvCC,eAhCuC,CAuCrClmB,KAvCqC,CAgCvCkmB,eAhCuC,CAiCvCuG,OAjCuC,CAuCrCzsB,KAvCqC,CAiCvCysB,OAjCuC,CAkCvCC,cAlCuC,CAuCrC1sB,KAvCqC,CAkCvC0sB,cAlCuC,CAmCvCC,YAnCuC,CAuCrC3sB,KAvCqC,CAmCvC2sB,YAnCuC,CAoCvCE,qBApCuC,CAuCrC7sB,KAvCqC,CAoCvC6sB,qBApCuC,CAqCvCC,yBArCuC,CAuCrC9sB,KAvCqC,CAqCvC8sB,yBArCuC,CAsCvCC,0BAtCuC,CAuCrC/sB,KAvCqC,CAsCvC+sB,0BAtCuC,CAyCzC,GAAMvG,WAAU,CAAG,IAAnB,CACA,GAAMoH,iBAAgB,CAAG,IAAzB,CA1CyC,cA2CLnrB,mCAAQ,CAAC,KAAD,CA3CH,kEA2ClCorB,UA3CkC,eA2CtBC,aA3CsB,8BA4CSrrB,mCAAQ,CAAC,IAAD,CA5CjB,mEA4ClCsrB,iBA5CkC,eA4CfC,oBA5Ce,eA8CzC,GAAMC,cAAa,CAAGv2B,kCAAO,CAAC,iBAAMs1B,YAAW,CAC7CC,IAD6C,CACvCha,QADuC,CAC7B7W,KAD6B,CAAjB,EAAD,CAE1B,CAAC6wB,IAAD,CAAOha,QAAP,CAAiB7W,KAAjB,CAF0B,CAA7B,CAGA,GAAM8xB,wBAAuB,CAAGx2B,kCAAO,CAAC,iBAAMs1B,YAAW,CACvDK,cADuD,CACvCpa,QADuC,CAC7B7W,KAD6B,CAAjB,EAAD,CAEpC,CAACixB,cAAD,CAAiBpa,QAAjB,CAA2B7W,KAA3B,CAFoC,CAAvC,CAIA,GAAM+xB,kBAAiB,CAAID,uBAAuB,CAC9CA,uBAAuB,CAACnvB,IAAxB,CAA6BsP,OAA7B,CAAqC,SAAA8e,CAAC,QAAID,WAAU,CAACC,CAAD,CAAI,EAAJ,CAAd,EAAtC,CAD8C,CAE9C,EAFJ,CAKA,GAAMiB,oBAAmB,CAAG,CAACZ,YAAY,EAAI,EAAjB,EAAqBl2B,GAArB,CAAyB4R,0BAAzB,CAA5B,CACA,GAAMmlB,oBAAmB,CAAG,CAACZ,YAAY,EAAI,EAAjB,EAAqBn2B,GAArB,CAAyB4R,0BAAzB,CAA5B,CAEA,GAAMolB,iBAAgB,CAAGF,mBAAmB,CAAC34B,MAApB,CAA2B,SAAAgL,CAAC,QAAI,CAAC0tB,iBAAiB,CAACv7B,QAAlB,CAA2B6N,CAA3B,CAAL,EAA5B,CAAzB,CACA,GAAM8tB,iBAAgB,CAAGF,mBAAmB,CAAC54B,MAApB,CAA2B,SAAAgL,CAAC,QAAI,CAAC0tB,iBAAiB,CAACv7B,QAAlB,CAA2B6N,CAA3B,CAAL,EAA5B,CAAzB,CAEA,GAAM+tB,2BAA0B,CAAGJ,mBAAmB,CAAC34B,MAApB,CAA2B,SAAAgL,CAAC,QAAI0tB,kBAAiB,CAACv7B,QAAlB,CAA2B6N,CAA3B,CAAJ,EAA5B,CAAnC,CACA,GAAMguB,2BAA0B,CAAGJ,mBAAmB,CAAC54B,MAApB,CAA2B,SAAAgL,CAAC,QAAI0tB,kBAAiB,CAACv7B,QAAlB,CAA2B6N,CAA3B,CAAJ,EAA5B,CAAnC,CAEA;;;;KAKA,QAASiuB,gBAAT,CAAyB1wB,KAAzB,CAAgC2wB,QAAhC,CAA0Cjf,QAA1C,CAAoD,CAClD,GAAI,CAAC1R,KAAL,CAAY,CACV,MAAO,KAAP,CACD,CACD,MAAOA,MAAK,CAAC1G,GAAN,CAAU,SAACuX,IAAD,CAAU,CACzB,GAAMc,QAAO,wDAAOD,QAAP,GAAiBb,IAAI,CAACzQ,IAAtB,EAAb,CACA,mBACE,uCAAC,iBAAD,gBACE,KAAK,CAAEhC,KADT,CAEE,GAAG,CAAE8M,kCAAS,CAACyG,OAAD,CAFhB,EAGMqC,mDAAiB,CAACnD,IAAD,CAAOc,OAAP,CAAgBsD,QAAhB,CAHvB,EAKE,SAAS,CAAEnK,iBAAO,CAACilB,iBAAD,CAAoBpe,OAApB,CALpB,CAOE,QAAQ,CAAEtQ,QAPZ,CAQE,SAAS,CAAEkqB,SAAS,EAAI,CAACoF,QAR3B,CASE,QAAQ,CAAExI,QAAQ,EAAI,CAACwI,QATzB,CAUE,SAAS,CAAE7K,SAVb,CAWE,UAAU,CAAE4G,UAXd,CAYE,UAAU,CAAEtE,UAZd,CAcE,gBAAgB,CAAEmC,gBAdpB,CAeE,UAAU,CAAE/B,UAfd,CAgBE,gBAAgB,CAAE8G,YAAY,CAAGA,YAAY,CAAC5Y,aAAhB,CAAgC,IAhBhE,CAiBE,iBAAiB,CAAE4Y,YAAY,CAAGA,YAAY,CAAC1Y,UAAhB,CAA6B,IAjB9D,CAmBE,WAAW,CAAEiR,WAnBf,CAoBE,YAAY,CAAEe,YApBhB,CAqBE,UAAU,CAAEF,UArBd,CAsBE,cAAc,CAAED,cAtBlB,CAuBE,aAAa,CAAE,uBAAC7d,UAAD,CAAaxK,IAAb,CAAsB,CACnCupB,cAAa,CAAC/e,UAAD,CAAaxK,IAAb,CAAb,CACA4vB,oBAAoB,CAAC,IAAD,CAApB,CACD,CA1BH,CA2BE,kBAAkB,CAAEpG,kBA3BtB,CA4BE,kBAAkB,CAAEoG,oBA5BtB,CA6BE,YAAY,CAAElI,YA7BhB,CA8BE,yBAAyB,CAAEE,yBA9B7B,CA+BE,4BAA4B,CAAEC,4BA/BhC,CAgCE,eAAe,CAAEC,eAhCnB,CAkCE,cAAc,CAAE2H,UAlClB,CAmCE,WAAW,CAAE,6BAAMC,cAAa,CAAC,IAAD,CAAnB,EAnCf,CAoCE,SAAS,CAAE,2BAAMA,cAAa,CAAC,KAAD,CAAnB,EApCb,GAsCGY,eAAe,CAAC7f,IAAI,CAACtP,QAAN,CAAgBovB,QAAhB,CAA0Bhf,OAA1B,CAAmCvT,KAAnC,CAtClB,CADF,CA0CD,CA5CM,CAAP,CA6CD,CAED,mBACE,8CAAK,SAAS,CAAC,cAAf,eACE,8CAAK,SAAS,CAAC,mBAAf,eACE,uCAAC,SAAD,EACE,SAAS,CAAE,KADb,CAEE,SAAS,CAAE0nB,SAFb,CAIE,WAAW,CAAEwK,gBAJf,CAKE,YAAY,CAAEC,gBALhB,CAME,gBAAgB,CAAEX,gBANpB,CAQE,OAAO,CAAE,iBAACgB,WAAD,CAAchzB,IAAd,QAAuBiqB,YAAW,CACzCjqB,IAAI,CAACiT,IAAL,CAAU7O,KAAV,CAAgBiS,OADyB,CAEzCrW,IAAI,CAACyqB,OAFoC,CAAlC,EARX,CAYE,QAAQ,CAAE,kBAACwI,YAAD,CAAejzB,IAAf,QAAwB8xB,aAAY,CAC5CmB,YAD4C,CAE5CjzB,IAAI,CAACiT,IAAL,CAAU7O,KAAV,CAAgBiS,OAF4B,CAG5CrW,IAAI,CAAC+qB,QAHuC,CAApC,EAZZ,EAkBG+H,eAAe,CAACT,aAAa,CAAClvB,IAAf,CAAqB,IAArB,CAA2B,EAA3B,CAA+B3C,KAA/B,CAlBlB,CADF,cAqBE,uCAAC,SAAD,EACE,SAAS,KAAC,UADZ,CAEE,SAAS,CAAE0nB,SAFb,CAIE,WAAW,CAAE0K,0BAJf,CAKE,YAAY,CAAEC,0BALhB,CAME,gBAAgB,CAAEb,gBANpB,CAQE,OAAO,CAAE,iBAACgB,WAAD,CAAchzB,IAAd,QAAuBiqB,YAAW,CACzCjqB,IAAI,CAACiT,IAAL,CAAU7O,KAAV,CAAgBiS,OADyB,CAEzCrW,IAAI,CAACyqB,OAFoC,CAAlC,EARX,CAYE,QAAQ,CAAE,kBAACwI,YAAD,CAAejzB,IAAf,QAAwB8xB,aAAY,CAC5CmB,YAD4C,CAE5CjzB,IAAI,CAACiT,IAAL,CAAU7O,KAAV,CAAgBiS,OAF4B,CAG5CrW,IAAI,CAAC+qB,QAHuC,CAApC,EAZZ,CAiBE,MAAM,CAAE,gBAAC/qB,IAAD,CAAU,IACEkzB,QADF,CACclzB,IAAI,CAACiT,IAAL,CAAU7O,KADxB,CACR+uB,QADQ,IAEEC,QAFF,CAEcpzB,IAAI,CAACqzB,QAAL,CAAcjvB,KAF5B,CAER+uB,QAFQ,IAGRG,UAHQ,CAGoBtzB,IAHpB,CAGRszB,SAHQ,CAGGC,YAHH,CAGoBvzB,IAHpB,CAGGuzB,YAHH,CAIhBxB,UAAU,CAACmB,OAAD,CAAUE,OAAV,CAAmBG,YAAnB,CAAiCD,SAAjC,CAAV,CACD,CAtBH,EAwBGR,eAAe,CAACR,uBAAuB,CAACnvB,IAAzB,CAA+B,KAA/B,CAAsC,EAAtC,CAA0C3C,KAA1C,CAxBlB,CArBF,cAgDE,uCAAC,UAAD,EACE,QAAQ,CAAEiD,QADZ,CAEE,OAAO,CAAEosB,OAFX,CAGE,YAAY,CAAEC,YAHhB,CAIE,qBAAqB,CAAEC,qBAJzB,CAKE,UAAU,CAAEC,UALd,CAME,QAAQ,CAAEzF,QANZ,EAhDF,CADF,CA0DGK,UAAU,cACT,8CAAK,SAAS,CAAC,uBAAf,eACE,uCAAC,mBAAD,EACE,OAAO,CAAEiG,OADX,CAEE,cAAc,CAAEC,cAFlB,CAGE,YAAY,CAAEC,YAHhB,CAIE,UAAU,CAAEC,UAJd,CAME,qBAAqB,CAAEC,qBANzB,CAOE,yBAAyB,CAAEC,yBAP7B,CAQE,0BAA0B,CAAEC,0BAR9B,EADF,CADS,CAaP,IAvEN,CADF,CA2ED,C;;;;;;;;;;AChSD,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyDA,GAAMqC,qBAAoB,CAAG,CAAC,OAAD,CAAU,WAAV,CAA7B,CAEA;;;;;;;;;;GAWe,QAASC,0BAAT,CAAmCrvB,KAAnC,CAA0C,IAErD/J,mBAFqD,CAMnD+J,KANmD,CAErD/J,kBAFqD,CAGrDmjB,mBAHqD,CAMnDpZ,KANmD,CAGrDoZ,mBAHqD,CAIrDhd,KAJqD,CAMnD4D,KANmD,CAIrD5D,KAJqD,cAMnD4D,KANmD,CAKrDC,KALqD,CAKrDA,KALqD,uBAK7C,WAL6C,cAQvD,GAAMrL,QAAO,CAAG0E,2EAAU,EAA1B,CACA,GAAM3C,WAAU,CAAGyD,8EAAa,EAAhC,CAEA;AAXuD,qBAuBlDjD,gFAAe,CAACgf,4FAA4B,CAACrW,QAA9B,CAAwC7J,kBAAxC,CAvBmC,uRAarD2T,OAbqD,oBAarDA,OAbqD,CAcpCoM,gBAdoC,oBAcrDsZ,eAdqD,CAexC9wB,YAfwC,oBAerD+wB,WAfqD,CAgBlChxB,kBAhBkC,oBAgBrDixB,iBAhBqD,CAiBnCC,iBAjBmC,oBAiBrDC,gBAjBqD,0CAmBjCjxB,mBAnBiC,qBAmBrDkxB,kBAnBqD,CAoBhC/wB,oBApBgC,qBAoBrDgxB,mBApBqD,CAqBrCjxB,eArBqC,qBAqBrDkxB,cArBqD,CAsB/BnxB,qBAtB+B,qBAsBrDoxB,oBAtBqD,cAyBrB9qB,+DAAO,EAzBc,+NAyBhDC,IAzBgD,cAyB1CE,MAzB0C,cAyBlCG,SAzBkC,4BA+BnDtB,gEAAQ,CACVorB,oBADU,CA/B2C,iOA2BrDrqB,OA3BqD,eA4BrDV,cA5BqD,eA6BrDO,iBA7BqD,eA6BlC;AACnBE,eA9BqD,6BAmCPrC,sDAAQ,CAAC,EAAD,CAnCD,iOAmChDstB,gBAnCgD,eAmC9BC,mBAnC8B,eAqCvD;AACAptB,uDAAS,CAAC,UAAM,CACd0C,SAAS,GACTR,eAAe,GACfkrB,mBAAmB,CAAC,EAAD,CAAnB,CACF;AACC,CALQ,CAKN,CAACp7B,OAAD,CAAUgV,OAAV,CALM,CAAT,CAOA;AA7CuD,kBA8CvCG,yEAAY,CAACnV,OAAD,CAAUgV,OAAV,CAAmBvF,cAAnB,CAAmCc,MAAnC,CAA2C,IAA3C,CA9C2B,yOA8ChDnK,KA9CgD,wCA+CpC+P,4EAAe,CAChCnW,OADgC,CACvBgV,OADuB,CACdvF,cADc,CACEc,MADF,CACU,KADV,CAEhC,CAAEwqB,kBAAkB,CAAElxB,mBAAtB,CAA2CoxB,cAAc,CAAElxB,eAA3D,CAFgC,CAGhC,CAAE2wB,eAAe,CAAEtZ,gBAAnB,CAAqCuZ,WAAW,CAAE/wB,YAAlD,CAHgC,CA/CqB,+OA+ChDsB,QA/CgD,sBAqDvD;AACA8C,uDAAS,CAAC,UAAM,CACd,GAAIrE,kBAAJ,CAAwB,CACtB,GAAI0xB,iBAAJ,CACA,GAAI,CACFA,gBAAgB,CAAG1R,iFAA4B,CAAChgB,kBAAD,CAAqBY,sEAArB,CAA/C,CACD,CAAC,MAAOqL,CAAP,CAAU,CACV7T,UAAU,CAAC6T,CAAC,CAAC5N,OAAH,CAAV,CACA,OACD,CACD8B,qBAAqB,CAACuxB,gBAAD,CAArB,CACD,CACF,CAXQ,CAWN,CAAC1xB,kBAAD,CAAqBG,qBAArB,CAA4C/H,UAA5C,CAXM,CAAT,CAaA;AACA,GAAMu5B,WAAU,CAAGx4B,qDAAO,CAAC,iBAAOsD,MAAK,CAAGlK,MAAM,CAAC+H,IAAP,CAAYmC,KAAZ,CAAH,CAAwB,EAApC,EAAD,CAA0C,CAACA,KAAD,CAA1C,CAA1B,CAEA;AACA;AACA,QAASm1B,wBAAT,EAAmC,CACjCvxB,oBAAoB,CAAC,kBAAD,CAApB,CACD,CAED;AACA;AACA,GAAMwxB,eAAc,CAAG14B,qDAAO,CAC5B,iBAAMmI,sEAAa,CAACC,QAAD,CAAWvB,kBAAX,CAAnB,EAD4B,CAE5B,CAACuB,QAAD,CAAWvB,kBAAX,CAF4B,CAA9B,CAKA;AACA,GAAM+uB,aAAY,CAAG51B,qDAAO,CAAC,UAAM,CACjC,GAAIse,gBAAgB,EAAIA,gBAAgB,CAACnkB,MAAjB,CAA0B,CAA9C,EACDu+B,cADC,EACiBA,cAAc,CAACrxB,IAAf,CAAoBlN,MAApB,CAA6B,CADlD,CACqD,CACnD,MAAO2iB,4FAA0B,CAAC4b,cAAD,CAAiBpa,gBAAjB,CAAjC,CACD,CACD,MAAO,KAAP,CACD,CAN2B,CAMzB,CAACA,gBAAD,CAAmBoa,cAAnB,CANyB,CAA5B,CAQA;AAEA;AACA,QAASxJ,aAAT,CAAsByJ,aAAtB,CAAqCzb,UAArC,CAAiD,CAC/C,GAAMH,IAAG,CAAG2b,cAAc,CAACrxB,IAAf,CAAoBb,IAApB,CAAyB,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAF,GAAWiyB,aAAf,EAA1B,CAAZ,CACA,GAAI5b,GAAJ,CAAS,CACP,GAAM6b,oBAAmB,CAAGtf,+FAA8B,CAACyD,GAAD,CAAMG,UAAN,CAAkB,EAAlB,CAAsB,IAAtB,CAA1D,CACAnW,mBAAmB,CAAC6xB,mBAAD,CAAnB,CACAH,uBAAuB,GACxB,CACF,CAED;AACA,QAAStK,YAAT,CAAqB0K,SAArB,CAAgClK,OAAhC,CAAyC,CACvC,GAAMzd,WAAU,CAAI1V,KAAK,CAACC,OAAN,CAAco9B,SAAd,EAA2BA,SAA3B,CAAuCA,SAAS,CAACC,KAAV,CAAgBvnB,wDAAhB,CAA3D,CACA,GAAI,CAACsnB,SAAL,CAAgB,CACd,OACD,CACD,GAAIlK,OAAJ,CAAa,CACX5nB,mBAAmB,uNAAKuX,gBAAL,GAAuBpN,UAAvB,GAAnB,CACD,CAFD,IAEO,CACLnK,mBAAmB,CAACuX,gBAAgB,CAACvgB,MAAjB,CAAwB,SAAAgK,CAAC,QAAI,CAACqJ,qDAAO,CAACrJ,CAAD,CAAImJ,UAAJ,CAAZ,EAAzB,CAAD,CAAnB,CACD,CACDunB,uBAAuB,GACxB,CAED;AACA,QAASzC,aAAT,CAAsBmB,YAAtB,CAAoC0B,SAApC,CAA+C5J,QAA/C,CAAyD,CACvD,GAAIA,QAAJ,CAAc,CACZqJ,mBAAmB,CAAC,SAAA3qB,IAAI,8NAASA,IAAT,GAAekrB,SAAS,CAACC,KAAV,CAAgBvnB,wDAAhB,CAAf,IAAL,CAAnB,CACD,CAFD,IAEO,CACL+mB,mBAAmB,CAAC,SAAA3qB,IAAI,QAAIA,KAAI,CAAC5P,MAAL,CAAY,SAAAgK,CAAC,QAAI,CAACqJ,qDAAO,CAACrJ,CAAD,CAAI8wB,SAAS,CAACC,KAAV,CAAgBvnB,wDAAhB,CAAJ,CAAZ,EAAb,CAAJ,EAAL,CAAnB,CACD,CACF,CAED;AACA;AACA;AACA;AACA,QAAS0kB,WAAT,CAAoBmB,OAApB,CAA6BE,OAA7B,CAAsCG,YAAtC,CAAoDD,SAApD,CAA+D,CAC7D,GAAMuB,SAAQ,CAAG3B,OAAO,CAAC0B,KAAR,CAAcvnB,wDAAd,CAAjB,CACA,GAAMynB,SAAQ,CAAGxhB,uFAAsB,CAAC3Q,kBAAD,CAAqBkyB,QAArB,CAAvC,CACA,GAAI,CAACC,QAAQ,CAACnxB,QAAV,EAAsB,CAAC2vB,SAA3B,CAAsC,CACpC;AACA;AACA,OACD,CACD,GAAMyB,cAAa,CAAGF,QAAQ,CAAC5+B,MAAT,CAAkB,CAAxC,CACA,GAAM++B,oBAAmB,CAAGD,aAAa,GAAK,CAA9C,CAEA;AACA,GAAME,SAAQ,CAAG7B,OAAO,CAACwB,KAAR,CAAcvnB,wDAAd,CAAjB,CACA,GAAMgmB,SAAQ,CAAG/f,uFAAsB,CAAC3Q,kBAAD,CAAqBsyB,QAArB,CAAvC,CAEA,GAAID,mBAAmB,EAAI1B,SAAvB,EAAoC,CAACD,QAAQ,CAAC1vB,QAAlD,CAA4D,CAC1D;AACA,OACD,CAED,GAAIuxB,eAAJ,CACA,GAAIC,eAAJ,CACA,GAAIC,kBAAJ,CACA,GAAI,CAACJ,mBAAL,CAA0B,CACxBG,cAAc,CAAGN,QAAQ,CAACj/B,KAAT,CAAe,CAAf,CAAkB,CAAC,CAAnB,CAAjB,CACAs/B,cAAc,CAAG5hB,uFAAsB,CAAC3Q,kBAAD,CAAqBwyB,cAArB,CAAvC,CACAC,iBAAiB,CAAGF,cAAc,CAACvxB,QAAf,CAAwB0xB,SAAxB,CAAkC,SAAAv7B,CAAC,QAAIA,EAAC,CAAC0I,IAAF,GAAWsyB,QAAQ,CAACtyB,IAAxB,EAAnC,CAApB,CACD,CAJD,IAIO,CACL4yB,iBAAiB,CAAGzyB,kBAAkB,CAACQ,IAAnB,CAAwBkyB,SAAxB,CAClB,SAAAxc,GAAG,QAAIA,IAAG,CAACrW,IAAJ,GAAasyB,QAAQ,CAACtyB,IAA1B,EADe,CAApB,CAGD,CACD;AACA;AACA,GAAI8yB,uBAAJ,CACA,GAAMC,aAAY,CAAGlC,QAAQ,CAAC7wB,IAA9B,CACA,GAAI,CAACwyB,mBAAD,EAAwB1B,SAA5B,CAAuC,CACrCgC,sBAAsB,CAAGJ,cAAc,CAACvxB,QAAf,CACtBrB,IADsB,CACjB,SAAAxI,CAAC,QAAIA,EAAC,GAAKu5B,QAAN,EAAkBv5B,CAAC,CAAC0I,IAAF,GAAW+yB,YAAjC,EADgB,CAAzB,CAED,CAHD,IAGO,IAAI,CAACjC,SAAL,CAAgB,CACrBgC,sBAAsB,CAAGR,QAAQ,CAACnxB,QAAT,CACtBrB,IADsB,CACjB,SAAAxI,CAAC,QAAIA,EAAC,GAAKu5B,QAAN,EAAkBv5B,CAAC,CAAC0I,IAAF,GAAW+yB,YAAjC,EADgB,CAAzB,CAED,CAHM,IAGA,CACLD,sBAAsB,CAAG3yB,kBAAkB,CAACQ,IAAnB,CACtBb,IADsB,CACjB,SAAAuW,GAAG,QAAIA,IAAG,GAAKwa,QAAR,EAAoBxa,GAAG,CAACrW,IAAJ,GAAa+yB,YAArC,EADc,CAAzB,CAED,CAED,GAAID,sBAAJ,CAA4B,CAC1B,OACD,CAED;AACA;AACA;AACA;AACA;AACA,GAAMlyB,uBAAsB,4MACvBT,kBADuB,EAE1BQ,IAAI,CAAER,kBAAkB,CAACQ,IAAnB,CAAwBzH,GAAxB,CAA4B,SAAAmd,GAAG,QAAIH,4EAAU,CAACG,GAAD,CAAM,EAAN,CAAUoc,QAAV,CAAd,EAA/B,EAAkEp7B,MAAlE,CAAyEwD,OAAzE,CAFoB,EAA5B,CAKA;AACA;AACA,GAAI,CAAC23B,mBAAL,CAA0B,CACxBI,iBAAiB,CAAGF,cAAc,CAACvxB,QAAf,CAAwB0xB,SAAxB,CAAkC,SAAAv7B,CAAC,QAAIA,EAAC,CAAC0I,IAAF,GAAWsyB,QAAQ,CAACtyB,IAAxB,EAAnC,CAApB,CACD,CAFD,IAEO,CACL4yB,iBAAiB,CAAGhyB,sBAAsB,CAACD,IAAvB,CAA4BkyB,SAA5B,CAClB,SAAAxc,GAAG,QAAIA,IAAG,CAACrW,IAAJ,GAAasyB,QAAQ,CAACtyB,IAA1B,EADe,CAApB,CAGD,CACD,GAAIgzB,YAAW,CAAG,EAAlB,CACA,GAAI,CAAClC,SAAD,EAAc,CAAC0B,mBAAnB,CAAwC,CACtC,GAAIS,iBAAJ,CACA,GAAIC,kBAAJ,CACA,GAAM3hB,QAAO,CAAG,EAAhB,CACA,GAAI,CAACuf,SAAL,CAAgB,CACd;AACA;AACAmC,gBAAgB,CAAG,0BAAAlzB,CAAC,QAAI4R,iFAAe,CAAC5R,CAAD,CAAI8wB,QAAJ,CAAnB,EAApB,CACAqC,iBAAiB,CAAG,2BAAA3xB,IAAI,QAAImJ,sDAAO,CAACnJ,IAAD,CAAO8wB,QAAP,CAAX,EAAxB,CACD,CALD,IAKO,IAAI,CAACG,mBAAL,CAA0B,CAC/B;AACA;AACA;AACAU,iBAAiB,CAAG,2BAAA3xB,IAAI,QAAImJ,sDAAO,CAACnJ,IAAD,CAAOoxB,cAAP,CAAX,EAAxB,CACA,GAAI5B,YAAY,GAAK,CAAC,CAAtB,CAAyB,CACvB;AACAkC,gBAAgB,CAAG,0BAAAlzB,CAAC,QAAI8R,kFAAgB,CAAC9R,CAAD,CAAI8wB,QAAJ,CAApB,EAApB,CACD,CAHD,IAGO,CACL;AACA,GAAM9e,YAAW,CAAG6gB,iBAAiB,EAAI7B,YAAY,CAAG6B,iBAAf,CAAmC,CAAnC,CAAuC,CAA3C,CAArC,CACAK,gBAAgB,CAAG,0BAAAlzB,CAAC,QAAI+R,iFAAe,CAAC/R,CAAD,CAAI8wB,QAAJ,CAAc9e,WAAd,CAAnB,EAApB,CACD,CACF,CACDnR,sBAAsB,CAACD,IAAvB,CAA8BC,sBAAsB,CAACD,IAAvB,CAA4BzH,GAA5B,CAC5B,SAAAuX,IAAI,QAAIS,+EAAa,CACnBT,IADmB,CAEnB,SAAC1Q,CAAD,CAAIwB,IAAJ,QAAa2xB,kBAAiB,CAAC3xB,IAAD,CAA9B,EAFmB,CAGnB,SAACxB,CAAD,CAAO,CACL,GAAM2R,QAAO,CAAGuhB,gBAAgB,CAAClzB,CAAD,CAAhC,CACA,MAAO2R,QAAP,CACD,CANkB,CAOnBH,OAPmB,CAAjB,EADwB,CAA9B,CAWA;AACAjR,qBAAqB,CAACM,sBAAD,CAArB,CACAoyB,WAAW,uNAAOzhB,OAAO,CAAC,CAAD,CAAd,GAAmBsf,QAAQ,CAAC7wB,IAA5B,EAAX,CACAK,mBAAmB,CAAC,CAAC2yB,WAAD,CAAD,CAAnB,CACD,CAtCD,IAsCO,IAAIjC,YAAY,GAAK,CAAC,CAAtB,CAAyB,CAC9B;AACA;AACA;AACAnwB,sBAAsB,CAACD,IAAvB,CAA4BzM,OAA5B,CAAoC28B,QAApC,EACAvwB,qBAAqB,CAACM,sBAAD,CAArB,CACAoyB,WAAW,CAAG,CAACnC,QAAQ,CAAC7wB,IAAV,CAAd,CACAK,mBAAmB,CAAC,CAAC2yB,WAAD,CAAD,CAAnB,CACD,CARM,IAQA,CACL;AACA,GAAMjhB,aAAW,CAAG6gB,iBAAiB,EAAI7B,YAAY,CAAG6B,iBAAf,CAAmC,CAAnC,CAAuC,CAA3C,CAArC,CACA,GAAMO,aAAY,CAAGr+B,KAAK,CAACmd,IAAN,CAAWrR,sBAAsB,CAACD,IAAlC,CAArB,CACAwyB,YAAY,CAACjhB,MAAb,CAAoBH,YAApB,CAAiC,CAAjC,CAAoC8e,QAApC,EACAjwB,sBAAsB,CAACD,IAAvB,CAA8BwyB,YAA9B,CACA7yB,qBAAqB,CAACM,sBAAD,CAArB,CACAoyB,WAAW,CAAG,CAACnC,QAAQ,CAAC7wB,IAAV,CAAd,CACAK,mBAAmB,CAAC,CAAC2yB,WAAD,CAAD,CAAnB,CACD,CACD,GAAMI,UAAS,CAAGhzB,YAAY,CAAC/I,MAAb,CAChB,SAAAjD,CAAC,QAAImW,wEAAe,CAACkoB,QAAD,CAAWr+B,CAAC,CAACmN,IAAb,CAAnB,EADe,CAAlB,CAGA,GAAM8xB,UAAS,CAAGD,SAAS,CAACl6B,GAAV,CAChB,SAAA9E,CAAC,oNAEMA,CAFN,EAGGmN,IAAI,CAAE,CAACmJ,qDAAO,CAACtW,CAAC,CAACmN,IAAH,CAASkxB,QAAT,CAAR,CACFO,WAAW,CAACxhB,MAAZ,CAAmBpd,CAAC,CAACmN,IAAF,CAAOnO,KAAP,CAAaq/B,QAAQ,CAACh/B,MAAtB,CAAnB,CADE,CAEFu/B,WALP,IADe,CAAlB,CAUA,GAAMM,gBAAe,CAAGlzB,YAAY,CAAC/I,MAAb,CACtB,SAAAjD,CAAC,QAAI,CAACmW,uEAAe,CAACkoB,QAAD,CAAWr+B,CAAC,CAACmN,IAAb,CAApB,EADqB,CAAxB,CAGA+xB,eAAe,CAACj/B,IAAhB,OAAAi/B,eAAe,6MAASD,SAAT,EAAf,CACA9yB,eAAe,CAAC+yB,eAAD,CAAf,CACD,CAED;AACA,QAASjL,eAAT,CAAwB7d,UAAxB,CAAoChJ,KAApC,CAA2C,CACzC;AACA,GAAM+xB,cAAa,CAAGnzB,YAAH,SAAGA,YAAH,iBAAGA,YAAY,CAAEN,IAAd,CAAmB,SAAAuB,CAAC,QAAIqJ,sDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASiJ,UAAT,CAAX,EAApB,CAAtB,CACA,GAAI,CAAC+oB,aAAL,CAAoB,CAClBhzB,eAAe,uNACTH,YAAY,EAAI,EADP,GAEb,CACEmB,IAAI,CAAEiJ,UADR,CAEEhJ,KAAK,CAALA,KAFF,CAFa,GAAf,CAOD,CARD,IAQO,CACLjB,eAAe,uNACVH,YAAY,CAAC/I,MAAb,CAAoB,SAAAgK,CAAC,QAAI,CAACqJ,qDAAO,CAACrJ,CAAC,CAACE,IAAH,CAASiJ,UAAT,CAAZ,EAArB,CADU,GAEb,CACEjJ,IAAI,CAAEiJ,UADR,CAEEhJ,KAAK,CAALA,KAFF,CAFa,GAAf,CAOD,CACF,CAED;AACA,QAAS+nB,cAAT,CAAuB/e,UAAvB,CAAmCxK,IAAnC,CAAyC,CACvC,GAAMwzB,aAAY,6MAAOhpB,UAAP,CAAlB,CACAgpB,YAAY,CAACC,GAAb,GACAD,YAAY,CAACn/B,IAAb,CAAkB2L,IAAlB,EAEA;AACA;AACA;AACA,QAAS0zB,WAAT,CAAoBjjB,IAApB,CAA0BoC,QAA1B,CAAoC,CAClC,GAAInI,qDAAO,uNAAKmI,QAAL,GAAepC,IAAI,CAACzQ,IAApB,GAA2BwK,UAA3B,CAAX,CAAmD,CACjD,OAAO,2MACFiG,IADL,EAEEzQ,IAAI,CAAJA,IAFF,GAID,CACD,GAAI,CAACyQ,IAAI,CAACtP,QAAV,CAAoB,CAClB,MAAOsP,KAAP,CACD,CACD,OAAO,2MACFA,IADL,EAEEtP,QAAQ,CAAEsP,IAAI,CAACtP,QAAL,CAAcjI,GAAd,CAAkB,SAAA5B,CAAC,QAAIo8B,WAAU,CAACp8B,CAAD,uNAAQub,QAAR,GAAkBpC,IAAI,CAACzQ,IAAvB,GAAd,EAAnB,CAFZ,GAID,CACD,GAAMY,uBAAsB,4MACvBT,kBADuB,EAE1BQ,IAAI,CAAER,kBAAkB,CAACQ,IAAnB,CAAwBzH,GAAxB,CAA4B,SAAAmd,GAAG,QAAIqd,WAAU,CAACrd,GAAD,CAAM,EAAN,CAAd,EAA/B,CAFoB,EAA5B,CAIA;AACA,GAAMa,iBAAgB,CAAG9W,YAAY,CAAClH,GAAb,CAAiB,SAAAmI,CAAC,QAAK,CAC9CE,IAAI,CAAEoJ,qEAAa,CAACH,UAAD,CAAanJ,CAAC,CAACE,IAAf,CAAqBiyB,YAArB,CAD2B,CAE9ChyB,KAAK,CAAEH,CAAC,CAACG,KAFqC,CAAL,EAAlB,CAAzB,CAIA,GAAMmyB,qBAAoB,CAAG/b,gBAAgB,CAAC1e,GAAjB,CAAqB,SAAAmI,CAAC,QACjDsJ,sEAAa,CAACH,UAAD,CAAanJ,CAAb,CAAgBmyB,YAAhB,CADoC,EAAtB,CAA7B,CAGA,GAAMI,qBAAoB,CAAGjC,gBAAgB,CAACz4B,GAAjB,CAAqB,SAAAmI,CAAC,QACjDsJ,sEAAa,CAACH,UAAD,CAAanJ,CAAb,CAAgBmyB,YAAhB,CADoC,EAAtB,CAA7B,CAGA;AACAlzB,qBAAqB,CAACM,sBAAD,CAArB,CACAL,eAAe,CAAC2W,gBAAD,CAAf,CACA7W,mBAAmB,CAACszB,oBAAD,CAAnB,CACA/B,mBAAmB,CAACgC,oBAAD,CAAnB,CACD,CAED;AACA;AACA;AACA;AACA,QAASpK,mBAAT,CAA4Bhf,UAA5B,CAAwCxK,IAAxC,CAA8C,CAC5C,GAAMwzB,aAAY,6MAAOhpB,UAAP,CAAlB,CACAgpB,YAAY,CAACC,GAAb,GACAD,YAAY,CAACn/B,IAAb,CAAkB2L,IAAlB,EACA,GAAM2pB,aAAY,CAChB,CAACjf,qDAAO,CAACF,UAAD,CAAagpB,YAAb,CAAR,EACG1iB,uFAAsB,CAAC3Q,kBAAD,CAAqBqzB,YAArB,CAF3B,CAIA,MAAO7J,aAAP,CACD,CAED;AACA,QAASjC,aAAT,CAAsBld,UAAtB,CAAkC,CAChC;AACA;AACA;AACA;AACA,GAAM5J,uBAAsB,4MACvBT,kBADuB,EAE1BQ,IAAI,CAAER,kBAAkB,CAACQ,IAAnB,CAAwBzH,GAAxB,CAA4B,SAAAmd,GAAG,QAAIH,4EAAU,CAACG,GAAD,CAAM,EAAN,CAAU7L,UAAV,CAAd,EAA/B,EAAoEnT,MAApE,CAA2EwD,OAA3E,CAFoB,EAA5B,CAIA;AACA;AACA,GAAMqc,iBAAgB,CAAG9W,YAAY,CAAC/I,MAAb,CAAoB,SAAAgK,CAAC,QAAI,CAACkJ,uEAAe,CAACC,UAAD,CAAanJ,CAAC,CAACE,IAAf,CAApB,EAArB,CAAzB,CACA,GAAMoyB,qBAAoB,CAAG/b,gBAAgB,CAACvgB,MAAjB,CAAwB,SAAAgK,CAAC,QAAI,CAACkJ,uEAAe,CAACC,UAAD,CAAanJ,CAAb,CAApB,EAAzB,CAA7B,CACA,GAAMuyB,qBAAoB,CAAGjC,gBAAgB,CAACt6B,MAAjB,CAAwB,SAAAgK,CAAC,QAAI,CAACkJ,uEAAe,CAACC,UAAD,CAAanJ,CAAb,CAApB,EAAzB,CAA7B,CACAf,qBAAqB,CAACM,sBAAD,CAArB,CACAL,eAAe,CAAC2W,gBAAD,CAAf,CACA7W,mBAAmB,CAACszB,oBAAD,CAAnB,CACA/B,mBAAmB,CAACgC,oBAAD,CAAnB,CACD,CAED;AACA;AACA,QAAStL,WAAT,CAAoB9d,UAApB,CAAgC,CAC9B;AACA;AACA,GAAMqpB,WAAU,CAAG,EAAnB,CACA;AACA,QAASC,SAAT,CAAkBrjB,IAAlB,CAAwBwC,QAAxB,CAAkC,CAChC,GAAI0e,gBAAgB,CAAC7xB,IAAjB,CAAsB,SAAAi0B,YAAY,QAAIrpB,sDAAO,CAACuI,QAAD,CAAW8gB,YAAX,CAAX,EAAlC,CAAJ,CAA4E,CAC1E,GAAItjB,IAAI,CAACtP,QAAT,CAAmB,CACjBsP,IAAI,CAACtP,QAAL,CAAcnN,OAAd,CAAsB,SAACsD,CAAD,CAAO,CAC3Bw8B,QAAQ,CAACx8B,CAAD,uNAAQ2b,QAAR,GAAkB3b,CAAC,CAAC0I,IAApB,GAAR,CACD,CAFD,EAGD,CAJD,IAIO,CACL6zB,UAAU,CAACx/B,IAAX,CAAgB4e,QAAhB,EACD,CACF,CARD,IAQO,CACL4gB,UAAU,CAACx/B,IAAX,CAAgB4e,QAAhB,EACD,CACF,CACD,GAAM+gB,WAAU,CAAGljB,uFAAsB,CAACkhB,cAAD,CAAiBxnB,UAAjB,CAAzC,CACAspB,QAAQ,CAACE,UAAD,CAAaxpB,UAAb,CAAR,CACAnK,mBAAmB,CAACwzB,UAAD,CAAnB,CACA9B,uBAAuB,GACxB,CAED;AACA,QAASxE,sBAAT,EAAiC,CAC/B,GAAMrsB,SAAQ,CAAGvB,+EAAuB,CAACQ,kBAAD,SAACA,kBAAD,iBAACA,kBAAkB,CAAEQ,IAArB,CAA2B,eAA3B,CAAxC,CACAL,qBAAqB,CAAC,2MAChBH,kBAAkB,EAAIwT,+EAAc,CAAC5S,sEAAD,CADrB,EAEnBJ,IAAI,uNACER,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EADjD,GAEF,CACEX,IAAI,CAAEkB,QADR,CAEEC,QAAQ,CAAE,EAFZ,CAFE,EAFe,GAArB,CAUD,CAED;AACA;AACA,QAASktB,QAAT,EAAmB,CACjB,GAAM4F,OAAM,CAAG9hB,4EAAW,CAAC6f,cAAD,CAAiBpa,gBAAjB,CAA1B,CACA3X,wEAAgB,CACdg0B,MADc,CACN9zB,kBADM,CACcC,YADd,CAEdC,mBAFc,CAEOC,qBAFP,CAE8BC,eAF9B,CAGdC,oBAHc,CAId,QAJc,CAAhB,CAMD,CAED;AACA;AACA,QAAS8tB,eAAT,EAA0B,CACxB,GAAM2F,OAAM,CAAGzhB,mFAAkB,CAACwf,cAAD,CAAiBpa,gBAAjB,CAAjC,CACA3X,wEAAgB,CACdg0B,MADc,CACN9zB,kBADM,CACcC,YADd,CAEdC,mBAFc,CAEOC,qBAFP,CAE8BC,eAF9B,CAGdC,oBAHc,CAId,eAJc,CAAhB,CAMD,CAED;AACA;AACA,QAAS+tB,aAAT,EAAwB,CACtB,GAAM0F,OAAM,CAAGxhB,iFAAgB,CAACuf,cAAD,CAAiBpa,gBAAjB,CAAmCka,UAAnC,CAA/B,CACA7xB,wEAAgB,CACdg0B,MADc,CACN9zB,kBADM,CACcC,YADd,CAEdC,mBAFc,CAEOC,qBAFP,CAE8BC,eAF9B,CAGdC,oBAHc,CAId,aAJc,CAAhB,CAMD,CAED;AACA;AACA,QAAS8sB,aAAT,CAAsBjM,YAAtB,CAAoC,CAClC;AACA;AACA,GAAMvK,YAAW,CAAGJ,8EAAa,CAACsb,cAAD,CAAiB3Q,YAAjB,CAAjC,CACA,GAAI,CAACvK,WAAL,CAAkB,CAChBxW,qBAAqB,CAAC,2MAChBH,kBAAkB,EAAIwT,+EAAc,CAAC5S,sEAAD,CADrB,EAEnBJ,IAAI,uNACER,kBAAkB,CAAGA,kBAAkB,CAACQ,IAAtB,CAA6B,EADjD,8MAEC0gB,YAAY,CAAC1gB,IAFd,EAFe,GAArB,CAOA;AACA,GAAMuzB,oBAAmB,CAAGjd,uFAAsB,CAACoK,YAAD,CAAejhB,YAAf,CAAlD,CACAG,eAAe,uNACVH,YADU,8MAEV8zB,mBAFU,GAAf,CAID,CACF,CAED;AACA,QAAStM,0BAAT,CAAmC3U,QAAnC,CAA6C,2BAGvCD,wFAAuB,CAACgf,cAAD,CAAiB/e,QAAjB,CAA2BlS,sEAA3B,CAA+CX,YAA/C,CAA6DpC,KAA7D,CAHgB,CAEzCuV,YAFyC,uBAEzCA,YAFyC,CAE3BC,QAF2B,uBAE3BA,QAF2B,CAI3C8O,oEAAe,CACbV,qEAAgB,CAACrO,YAAD,CADH,WAEVC,QAFU,aAEE2gB,0CAAW,CAACn0B,IAFd,aAEsBe,sEAFtB,uBAEsDkH,uEAFtD,EAAf,CAID,CAED;AACA,QAAS4f,6BAAT,CAAsC5U,QAAtC,CAAgD,4BAG1CD,wFAAuB,CAACgf,cAAD,CAAiB/e,QAAjB,CAA2BlS,sEAA3B,CAA+CX,YAA/C,CAA6DpC,KAA7D,CAHmB,CAE5CuV,YAF4C,wBAE5CA,YAF4C,CAE9BC,QAF8B,wBAE9BA,QAF8B,CAI9C8O,oEAAe,CACbN,wEAAmB,CAACzO,YAAD,CADN,WAEVC,QAFU,aAEE2gB,0CAAW,CAACn0B,IAFd,aAEsBe,sEAFtB,uBAEsDoH,0EAFtD,EAAf,CAID,CAED;AACA,QAAS2f,gBAAT,CAAyB7U,QAAzB,CAAmC,oBACCQ,8EAAa,CAACue,cAAD,CAAiB/e,QAAjB,CADd,CACzBS,WADyB,gBACzBA,WADyB,CACZF,QADY,gBACZA,QADY,CAEjC8O,oEAAe,CACbV,qEAAgB,CAAClO,WAAD,CADH,WAEVF,QAFU,aAEE2gB,0CAAW,CAACn0B,IAFd,aAEsBe,sEAFtB,iBAEgDkH,uEAFhD,EAGbA,uEAHa,CAAf,CAKD,CACD,mBACE,2DAAC,0DAAD,EACE,KAAK,CAAEpG,KADT,CAEE,QAAQ,KAFV,CAGE,mBAAmB,CAAEmZ,mBAHvB,CAIE,IAAI,CAAEnU,IAJR,CAKE,KAAK,CAAE7I,KALT,CAME,OAAO,CAAE2I,OANX,eAQE,2DAAC,4DAAD,EACE,QAAQ,CAAEvG,YADZ,CAEE,IAAI,CAAEsB,QAFR,CAGE,cAAc,CAAEvB,kBAHlB,CAIE,cAAc,CAAE+uB,YAJlB,CAKE,YAAY,CAAEtX,gBALhB,CAME,YAAY,CAAE+Z,gBANhB,CAOE,gBAAgB,CAAEN,iBAAiB,GAAK,kBAP1C,CAQE,SAAS,KARX,CASE,QAAQ,CAAEtwB,sEATZ,CAUE,OAAO,CAAExI,UAVX,CAWE,WAAW,CAAEkvB,WAXf,CAYE,YAAY,CAAE6H,YAZhB,CAaE,UAAU,CAAEC,UAbd,CAcE,YAAY,CAAE/G,YAdhB,CAeE,cAAc,CAAEH,cAflB,CAgBE,aAAa,CAAEkB,aAhBjB,CAiBE,kBAAkB,CAAEC,kBAjBtB,CAkBE,YAAY,CAAE9B,YAlBhB,CAmBE,UAAU,CAAEY,UAnBd,CAoBE,YAAY,CAAEgF,YApBhB,CAqBE,qBAAqB,CAAEC,qBArBzB,CAsBE,yBAAyB,CAAE3F,yBAtB7B,CAuBE,4BAA4B,CAAEC,4BAvBhC,CAwBE,eAAe,CAAEC,eAxBnB,CAyBE,OAAO,CAAEuG,OAzBX,CA0BE,cAAc,CAAEC,cA1BlB,CA2BE,YAAY,CAAEC,YA3BhB,CA4BE,qBAAqB,CAAE,CAAA3W,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,QAAAA,gBAAgB,CAAEnkB,MAAlB,EAA2B,CA5BpD,CA6BE,yBAAyB,CAAE,CAAAmkB,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,QAAAA,gBAAgB,CAAEnkB,MAAlB,EAA2B,CA7BxD,CA8BE,0BAA0B,CAAE,CAAAmkB,gBAAgB,OAAhB,EAAAA,gBAAgB,SAAhB,QAAAA,gBAAgB,CAAEnkB,MAAlB,EAA2B,CA9BzD,CA+BE,KAAK,CAAEuK,KA/BT,EARF,CADF,CA4CD,C;;;;;;;;;;;;;;;;;;;AC1mBD,GAAMo2B,0BAAyB,CAAG,CAAC,WAAD,CAAlC,CAEA;;;;;;;;;;GAWe,QAASC,2BAAT,CAAoCzyB,KAApC,CAA2C,IAEtD/J,mBAFsD,CAMpD+J,KANoD,CAEtD/J,kBAFsD,CAGtDmjB,mBAHsD,CAMpDpZ,KANoD,CAGtDoZ,mBAHsD,CAItDhd,KAJsD,CAMpD4D,KANoD,CAItD5D,KAJsD,cAMpD4D,KANoD,CAKtDC,KALsD,CAKtDA,KALsD,uBAK9C,gBAL8C,cAQxD,GAAMrL,QAAO,CAAG0E,2EAAU,EAA1B,CAEA;AAVwD,qBAmBnDnC,gFAAe,CAACgf,4FAA4B,CAACuc,YAA9B,CAA4Cz8B,kBAA5C,CAnBoC,uRAYtD2T,OAZsD,oBAYtDA,OAZsD,CAarCoM,gBAbqC,oBAatDsZ,eAbsD,CAczC9wB,YAdyC,oBActD+wB,WAdsD,CAenChxB,kBAfmC,oBAetDixB,iBAfsD,0CAiBlC/wB,mBAjBkC,qBAiBtDkxB,kBAjBsD,CAkBtChxB,eAlBsC,qBAkBtDkxB,cAlBsD,sBAqBlB1sB,sEAAe,EArBG,+OAqBjD9B,KArBiD,sBAqB1CD,MArB0C,sBAqBlCgC,YArBkC,mCAsBtB4B,8DAAO,EAtBe,+NAsBjDC,IAtBiD,cAsB3CE,MAtB2C,cAsBnCG,SAtBmC,4BA4BpDtB,+DAAQ,CACVwuB,yBADU,CA5B4C,iOAwBtDztB,OAxBsD,eAyBtDV,cAzBsD,eA0BtDO,iBA1BsD,eA0BnC;AACnBE,eA3BsD,eAgCxD;AACAlC,uDAAS,CAAC,UAAM,CACd0C,SAAS,GACTR,eAAe,GACjB;AACC,CAJQ,CAIN,CAAClQ,OAAD,CAAUgV,OAAV,CAJM,CAAT,CAMA;AAvCwD,qBAwCrCmB,2EAAe,CAChCnW,OADgC,CACvBgV,OADuB,CACdvF,cADc,CACEc,MADF,CACU,IADV,CAEhC,CAAEwqB,kBAAkB,CAAElxB,mBAAtB,CAA2CoxB,cAAc,CAAElxB,eAA3D,CAFgC,CAGhC,CAAE2wB,eAAe,CAAEtZ,gBAAnB,CAAqCuZ,WAAW,CAAE/wB,YAAlD,CAHgC,CAxCsB,+OAwCjDsB,QAxCiD,sBA8CxD,GAAMswB,eAAc,CAAG14B,qDAAO,CAC5B,iBAAMmI,qEAAa,CAACC,QAAD,CAAWvB,kBAAX,CAAnB,EAD4B,CAE5B,CAACuB,QAAD,CAAWvB,kBAAX,CAF4B,CAA9B,CAKA;AACA;AACA,GAAMvL,KAAI,CAAG0E,qDAAO,CAAC,iBAAO04B,eAAc,EAAIpa,gBAAlB,EAAsCxX,YAAtC,CACxB6V,wFAAwB,CAAC+b,cAAD,CAAiBpa,gBAAjB,CAAmCxX,YAAnC,CAAiDpC,KAAjD,CADA,CAExB,EAFiB,EAAD,CAGjB,CAACg0B,cAAD,CAAiBpa,gBAAjB,CAAmCxX,YAAnC,CAAiDpC,KAAjD,CAHiB,CAApB,CAKA,mBACE,2DAAC,0DAAD,EACE,KAAK,CAAE6D,KADT,CAEE,mBAAmB,CAAEmZ,mBAFvB,CAGE,IAAI,CAAEnU,IAHR,CAIE,KAAK,CAAE7I,KAJT,CAKE,OAAO,CAAE2I,OALX,eAOE,kEAAK,GAAG,CAAE3B,YAAV,CAAwB,SAAS,CAAC,gBAAlC,eACE,2DAAC,iEAAD,EACE,IAAI,CAAEpQ,IADR,CAEE,KAAK,CAAEoJ,KAFT,CAGE,KAAK,CAAEiF,KAHT,CAIE,MAAM,CAAED,MAJV,EADF,CAPF,CADF,CAkBD,C;;;;;;;;;ACnGD,mC;;;;;;ACAA,qC;;;;;;;;ACAA,iC;;;;;;ACAA,4C;;;;;;ACAA,wC;;;;;;ACAA,uC;;;;;;;;;;;;;;;;;ACAA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","file":"sets.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 215);\n","/**\n * This file defines the current constant values.\n * To deprecate a value, add it to ./constants-old.js\n * with a corresponding log message.\n */\nexport const Component = {\n  DESCRIPTION: 'description',\n  STATUS: 'status',\n  GENES: 'genes',\n  CELL_SETS: 'cellSets',\n  SCATTERPLOT: 'scatterplot',\n  SPATIAL: 'spatial',\n  HEATMAP: 'heatmap',\n  LAYER_CONTROLLER: 'layerController',\n  CELL_SET_SIZES: 'cellSetSizes',\n  GENOMIC_PROFILES: 'genomicProfiles',\n  CELL_SET_EXPRESSION: 'cellSetExpression',\n  EXPRESSION_HISTOGRAM: 'expressionHistogram',\n  GATING: 'gating',\n};\n\nexport const DataType = {\n  CELLS: 'cells',\n  CELL_SETS: 'cell-sets',\n  EXPRESSION_MATRIX: 'expression-matrix',\n  GENOMIC_PROFILES: 'genomic-profiles',\n  MOLECULES: 'molecules',\n  NEIGHBORHOODS: 'neighborhoods',\n  RASTER: 'raster',\n};\n\n\nexport const FileType = {\n  CELLS_JSON: 'cells.json',\n  CELL_SETS_JSON: 'cell-sets.json',\n  EXPRESSION_MATRIX_ZARR: 'expression-matrix.zarr',\n  GENOMIC_PROFILES_ZARR: 'genomic-profiles.zarr',\n  MOLECULES_JSON: 'molecules.json',\n  NEIGHBORHOODS_JSON: 'neighborhoods.json',\n  RASTER_JSON: 'raster.json',\n  RASTER_OME_ZARR: 'raster.ome-zarr',\n  CLUSTERS_JSON: 'clusters.json',\n  GENES_JSON: 'genes.json',\n  ANNDATA_CELL_SETS_ZARR: 'anndata-cell-sets.zarr',\n  ANNDATA_CELLS_ZARR: 'anndata-cells.zarr',\n  ANNDATA_EXPRESSION_MATRIX_ZARR: 'anndata-expression-matrix.zarr',\n};\n\n/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const CoordinationType = {\n  DATASET: 'dataset',\n  // Entity types\n  OBS_TYPE: 'obsType',\n  FEATURE_TYPE: 'featureType',\n  FEATURE_VALUE_TYPE: 'featureValueType',\n  // Other types\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_OBS_SET_POLYGONS_VISIBLE: 'embeddingObsSetPolygonsVisible',\n  EMBEDDING_OBS_SET_LABELS_VISIBLE: 'embeddingObsSetLabelsVisible',\n  EMBEDDING_OBS_SET_LABEL_SIZE: 'embeddingObsSetLabelSize',\n  EMBEDDING_OBS_RADIUS: 'embeddingObsRadius',\n  EMBEDDING_OBS_RADIUS_MODE: 'embeddingObsRadiusMode',\n  EMBEDDING_OBS_OPACITY: 'embeddingObsOpacity',\n  EMBEDDING_OBS_OPACITY_MODE: 'embeddingObsOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  OBS_FILTER: 'obsFilter',\n  OBS_HIGHLIGHT: 'obsHighlight',\n  OBS_SET_SELECTION: 'obsSetSelection',\n  OBS_SET_HIGHLIGHT: 'obsSetHighlight',\n  OBS_SET_COLOR: 'obsSetColor',\n  FEATURE_FILTER: 'featureFilter',\n  FEATURE_HIGHLIGHT: 'featureHighlight',\n  FEATURE_SELECTION: 'featureSelection',\n  FEATURE_VALUE_COLORMAP: 'featureValueColormap',\n  FEATURE_VALUE_TRANSFORM: 'featureValueTransform',\n  FEATURE_VALUE_COLORMAP_RANGE: 'featureValueColormapRange',\n  OBS_COLOR_ENCODING: 'obsColorEncoding',\n  SPATIAL_IMAGE_LAYER: 'spatialImageLayer',\n  SPATIAL_SEGMENTATION_LAYER: 'spatialSegmentationLayer',\n  SPATIAL_POINT_LAYER: 'spatialPointLayer',\n  SPATIAL_NEIGHBORHOOD_LAYER: 'spatialNeighborhoodLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_OBS_SETS: 'additionalObsSets',\n  // TODO: use obsHighlight rather than moleculeHighlight.\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n  GATING_FEATURE_SELECTION_X: 'gatingFeatureSelectionX',\n  GATING_FEATURE_SELECTION_Y: 'gatingFeatureSelectionY',\n  FEATURE_VALUE_TRANSFORM_COEFFICIENT: 'featureValueTransformCoefficient',\n};\n","module.exports = require(\"react\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Get the longest string in the array of strings.\n * @param {string[]} strings The array of strings.\n * @returns The longest string.\n */\nexport function getLongestString(strings) {\n  return strings.reduce(\n    (prevLongest, currentValue) => (\n      prevLongest.length > currentValue.length ? prevLongest : currentValue\n    ),\n  );\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { CoordinationType } from '../constants';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: uid => set((state) => {\n    const newLayout = state.viewConfig.layout.filter(c => c.uid !== uid);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialImageLayer` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Get a mapping from dataset coordination scopes to dataset UIDs.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {object} Mapping from dataset coordination scope names to dataset UIDs.\n */\nexport function useDatasetUids(coordinationScopes) {\n  const parameter = CoordinationType.DATASET;\n  const datasetScopes = coordinationScopes[parameter];\n\n  // Mapping from dataset coordination scope name to dataset uid\n  const datasetUids = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    // Convert a single scope to an array of scopes to be consistent.\n    const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][datasetScope];\n        return [datasetScope, value];\n      }\n      return [datasetScope, undefined];\n    }));\n  }, shallow);\n\n  return datasetUids;\n}\n\n/**\n * Use coordination values and coordination setter functions corresponding to\n * dataset-specific coordination scopes for each coordination type.\n * @param {string[]} parameters An array of coordination types supported by a view.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {array} [cValues, cSetters] where\n * cValues is a mapping from coordination scope name to { coordinationType: coordinationValue },\n * and cSetters is a mapping from coordination scope name to { setCoordinationType }\n * setter functions.\n */\nexport function useMultiDatasetCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const datasetScopes = coordinationScopes[CoordinationType.DATASET];\n\n  // Convert a single scope to an array of scopes to be consistent.\n  const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      const datasetValues = fromEntries(parameters.map((parameter) => {\n        if (coordinationSpace && coordinationSpace[parameter]) {\n          let value;\n          const parameterSpace = coordinationSpace[parameter];\n          const parameterScope = coordinationScopes[parameter];\n          if (typeof parameterScope === 'object') {\n            value = parameterSpace[parameterScope[datasetScope]];\n          } else if (typeof parameterScope === 'string') {\n            value = parameterSpace[parameterScope];\n          } else {\n            console.error(`coordination scope for ${parameter} must be of type string or object.`);\n          }\n          return [parameter, value];\n        }\n        return [parameter, undefined];\n      }));\n      return [datasetScope, datasetValues];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(datasetScopesArr.map((datasetScope) => {\n    const datasetSetters = fromEntries(parameters.map((parameter) => {\n      const setterName = `set${capitalize(parameter)}`;\n      let setterFunc;\n      const parameterScope = coordinationScopes[parameter];\n      if (typeof parameterScope === 'object') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope[datasetScope],\n          value,\n        });\n      } else if (typeof parameterScope === 'string') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope,\n          value,\n        });\n      } else {\n        console.error(`coordination scope for ${parameter} must be of type string or object.`);\n      }\n      return [setterName, setterFunc];\n    }));\n    return [datasetScope, datasetSetters];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialImageLayer: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_DARK_COLOR = [50, 50, 50];\nexport const DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nexport function getDefaultColor(theme) {\n  return theme === 'dark' ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateTracksHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateTracksHover: ${hoverInfo}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n\n\nexport function formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  // eslint-disable-next-line no-restricted-properties\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport const getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf('y')];\n  const width = shape[labels.indexOf('x')];\n  const depth = shape[labels.indexOf('z')];\n  // eslint-disable-next-line no-bitwise\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  // Check memory allocation limits for Float32Array (used in XR3DLayer for rendering)\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height, width, depthDownsampled, totalBytes,\n  };\n};\n\nexport const canLoadResolution = (loader, resolution) => {\n  const {\n    totalBytes, height, width, depthDownsampled,\n  } = getStatsForResolution(\n    loader,\n    resolution,\n  );\n  const maxHeapSize = window.performance?.memory\n    && window.performance?.memory?.jsHeapSizeLimit / 2;\n  const maxSize = maxHeapSize || (2 ** 31) - 1;\n  // 2048 is a normal texture size limit although some browsers go larger.\n  return (\n    totalBytes < maxSize\n    && height <= 2048\n    && depthDownsampled <= 2048\n    && width <= 2048\n    && depthDownsampled > 1\n  );\n};\n","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@deck.gl/core\");","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","module.exports = require(\"@material-ui/core/styles\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class DatasetNotFoundError extends AbstractLoaderError {\n  constructor(datasetUid) {\n    super(`Error finding dataset for ${datasetUid}. Please check that at least one dataset exists in the view config.`);\n    this.name = 'DatasetNotFoundError';\n\n    this.datasetUid = datasetUid;\n  }\n\n  warnInConsole() {\n    const {\n      datasetUid,\n    } = this;\n    if (datasetUid) {\n      console.warn(\n        `Unable to find dataset for ${datasetUid}`,\n      );\n    } else {\n      console.warn('No dataset uid specified.');\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\nexport { default as DatasetNotFoundError } from './DatasetNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n  DatasetNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { getDefaultCoordinationValues } from '../app/plugins';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  const defaultCoordinationValues = getDefaultCoordinationValues();\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, defaultCoordinationValues[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialSegmentationLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialPointLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      if (isRequired) {\n        warn(new DatasetNotFoundError(dataset), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport centroid from '@turf/centroid';\nimport concaveman from 'concaveman';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { getDefaultColor, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Get the size associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {number} The length of all the node's children\n */\nexport function getNodeLength(currNode) {\n  if (!currNode) {\n    return 0;\n  }\n  if (!currNode.children) {\n    return (currNode.set?.length || 0);\n  }\n  return currNode.children.reduce((acc, curr) => acc + getNodeLength(curr), 0);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodePath The path of the node of interest.\n * @param {string} dataType Datatype (i.e cell sets)\n * @param {Array} cellSetColors Array of objects of cell set colors and paths\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors, theme) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color\n      ?? getDefaultColor(theme);\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: getNodeLength(node),\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor, theme) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  let cellsArray = [];\n  for (let i = 0; i < selectedNamePaths.length; i += 1) {\n    const setNamePath = selectedNamePaths[i];\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      cellsArray = cellsArray.concat(nodeSet.map(([cellId]) => ({\n        obsId: cellId,\n        name: node.name,\n        color: nodeColor,\n      })));\n    }\n  }\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor, theme,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme)\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(cell => cell.every(i => typeof i === 'number'));\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const concavity = Infinity;\n        const hullCoords = concaveman(cellPositions, concavity);\n        if (hullCoords) {\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor, theme) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || getDefaultColor(theme);\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      // If there is a color for the node specified via the cell set tree,\n      // then use it. Otherwise, use a color from the default color palette.\n      const nodeColorArray = (node.color ? node.color : PALETTE[index % PALETTE.length]);\n      nextCellSetColor.push({\n        path: nodePath,\n        color: nodeColorArray,\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n    theme,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(\n      cellSets, cells, mapping, cellSetSelection, cellSetColor, theme,\n    );\n  }\n  return [];\n}\n","import { CoordinationType, Component } from '../constants';\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [CoordinationType.OBS_TYPE]: 'cell',\n  [CoordinationType.FEATURE_TYPE]: 'gene',\n  [CoordinationType.FEATURE_VALUE_TYPE]: 'expression',\n  [CoordinationType.EMBEDDING_ZOOM]: null,\n  [CoordinationType.EMBEDDING_ROTATION]: 0,\n  [CoordinationType.EMBEDDING_TARGET_X]: null,\n  [CoordinationType.EMBEDDING_TARGET_Y]: null,\n  [CoordinationType.EMBEDDING_TARGET_Z]: 0,\n  [CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE]: 14,\n  [CoordinationType.EMBEDDING_OBS_RADIUS]: 1,\n  [CoordinationType.EMBEDDING_OBS_RADIUS_MODE]: 'auto',\n  [CoordinationType.EMBEDDING_OBS_OPACITY]: 1,\n  [CoordinationType.EMBEDDING_OBS_OPACITY_MODE]: 'auto',\n  [CoordinationType.SPATIAL_ZOOM]: null,\n  [CoordinationType.SPATIAL_ROTATION]: 0,\n  [CoordinationType.SPATIAL_TARGET_X]: null,\n  [CoordinationType.SPATIAL_TARGET_Y]: null,\n  [CoordinationType.SPATIAL_TARGET_Z]: null,\n  [CoordinationType.SPATIAL_ROTATION_X]: null,\n  [CoordinationType.SPATIAL_ROTATION_Y]: null,\n  [CoordinationType.SPATIAL_ROTATION_Z]: null,\n  [CoordinationType.SPATIAL_AXIS_FIXED]: false,\n  [CoordinationType.SPATIAL_ROTATION_ORBIT]: 0,\n  [CoordinationType.SPATIAL_ORBIT_AXIS]: 'Y',\n  [CoordinationType.SPATIAL_IMAGE_LAYER]: null,\n  [CoordinationType.SPATIAL_SEGMENTATION_LAYER]: null,\n  [CoordinationType.SPATIAL_POINT_LAYER]: null,\n  [CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER]: null,\n  [CoordinationType.HEATMAP_ZOOM_X]: 0,\n  [CoordinationType.HEATMAP_ZOOM_Y]: 0,\n  [CoordinationType.HEATMAP_TARGET_X]: 0,\n  [CoordinationType.HEATMAP_TARGET_Y]: 0,\n  [CoordinationType.FEATURE_VALUE_COLORMAP]: 'plasma',\n  [CoordinationType.FEATURE_VALUE_COLORMAP_RANGE]: [0.0, 1.0],\n  [CoordinationType.FEATURE_VALUE_TRANSFORM]: null,\n  [CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT]: 1,\n  [CoordinationType.FEATURE_FILTER]: null,\n  [CoordinationType.FEATURE_HIGHLIGHT]: null,\n  [CoordinationType.FEATURE_SELECTION]: null,\n  [CoordinationType.OBS_FILTER]: null,\n  [CoordinationType.OBS_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_SELECTION]: null,\n  [CoordinationType.OBS_SET_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_COLOR]: null,\n  [CoordinationType.OBS_COLOR_ENCODING]: 'cellSetSelection',\n  [CoordinationType.GENOMIC_ZOOM_X]: 0,\n  [CoordinationType.GENOMIC_ZOOM_Y]: 0,\n  [CoordinationType.GENOMIC_TARGET_X]: 1549999999.5,\n  [CoordinationType.GENOMIC_TARGET_Y]: 1549999999.5,\n  [CoordinationType.ADDITIONAL_OBS_SETS]: null,\n  [CoordinationType.MOLECULE_HIGHLIGHT]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_X]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_Y]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  CoordinationType.HEATMAP_ZOOM_X,\n  CoordinationType.HEATMAP_ZOOM_Y,\n  CoordinationType.HEATMAP_TARGET_X,\n  CoordinationType.HEATMAP_TARGET_Y,\n  CoordinationType.EMBEDDING_ZOOM,\n  CoordinationType.EMBEDDING_TARGET_X,\n  CoordinationType.EMBEDDING_TARGET_Y,\n  CoordinationType.EMBEDDING_TARGET_Z,\n  CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n  CoordinationType.EMBEDDING_OBS_RADIUS,\n  CoordinationType.EMBEDDING_OBS_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  [Component.SCATTERPLOT]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.GATING]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.GATING_FEATURE_SELECTION_X,\n    CoordinationType.GATING_FEATURE_SELECTION_Y,\n  ],\n  [Component.SPATIAL]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_ROTATION,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n    CoordinationType.SPATIAL_AXIS_FIXED,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.HEATMAP]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.HEATMAP_ZOOM_X,\n    CoordinationType.HEATMAP_ZOOM_Y,\n    CoordinationType.HEATMAP_TARGET_X,\n    CoordinationType.HEATMAP_TARGET_Y,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.CELL_SETS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.CELL_SET_SIZES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.STATUS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.GENES]: [\n    CoordinationType.DATASET,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.OBS_SET_SELECTION,\n  ],\n  [Component.CELL_SET_EXPRESSION]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.EXPRESSION_HISTOGRAM]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.LAYER_CONTROLLER]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n  ],\n  [Component.GENOMIC_PROFILES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.DESCRIPTION]: [\n    CoordinationType.DATASET,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n  ],\n  higlass: [\n    CoordinationType.DATASET,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n};\n","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","module.exports = require(\"lodash/debounce\");","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","module.exports = require(\"lodash/range\");","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","module.exports = require(\"zustand/shallow\");","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import { FileType, DataType } from './constants';\n\n/**\n * Mapping from file types to data types. Each file type\n * should correspond to one data type. Multiple file types\n * can map onto the same data type.\n */\nexport const FILE_TYPE_DATA_TYPE_MAPPING = {\n  [FileType.CELLS_JSON]: DataType.CELLS,\n  [FileType.CELL_SETS_JSON]: DataType.CELL_SETS,\n  [FileType.EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENOMIC_PROFILES_ZARR]: DataType.GENOMIC_PROFILES,\n  [FileType.MOLECULES_JSON]: DataType.MOLECULES,\n  [FileType.NEIGHBORHOODS_JSON]: DataType.NEIGHBORHOODS,\n  [FileType.RASTER_JSON]: DataType.RASTER,\n  [FileType.RASTER_OME_ZARR]: DataType.RASTER,\n  [FileType.CLUSTERS_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENES_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.ANNDATA_CELL_SETS_ZARR]: DataType.CELL_SETS,\n  [FileType.ANNDATA_CELLS_ZARR]: DataType.CELLS,\n  [FileType.ANNDATA_EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n};\n","import { fromEntries } from '../utils';\nimport { FILE_TYPE_DATA_TYPE_MAPPING } from './constant-relationships';\nimport { FileType, CoordinationType } from './constants';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n} from './state/coordination';\n\nconst PLUGINS_KEY = '__VITESSCE_PLUGINS__';\nconst PLUGIN_VIEW_TYPES_KEY = 'viewTypes';\nconst PLUGIN_COORDINATION_TYPES_KEY = 'coordinationTypes';\nconst PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY = 'coordinationTypesPerView';\nconst PLUGIN_FILE_TYPES_KEY = 'fileTypes';\nconst PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY = 'fileTypeDataTypeMapping';\nconst PLUGIN_CONVENIENCE_FILE_TYPES_KEY = 'convenienceFileTypes';\n\nwindow[PLUGINS_KEY] = {};\nconst PLUGINS = window[PLUGINS_KEY];\n\n// Reference: https://github.com/higlass/higlass-register/blob/master/src/index.js\nPLUGINS[PLUGIN_VIEW_TYPES_KEY] = PLUGINS[PLUGIN_VIEW_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_KEY] = PLUGINS[PLUGIN_COORDINATION_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] = (\n  PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] || {}\n);\nPLUGINS[PLUGIN_FILE_TYPES_KEY] = PLUGINS[PLUGIN_FILE_TYPES_KEY] || {};\nPLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] = (\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] || {}\n);\nPLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] = PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] || {};\n\n/**\n * Register a new coordination type.\n * @param {string} typeName Name for the new coordination type.\n * @param {*} defaultValue A default value for the coordination type.\n */\nexport function registerPluginCoordinationType(typeName, defaultValue) {\n  PLUGINS[PLUGIN_COORDINATION_TYPES_KEY][typeName] = defaultValue;\n}\n\n/**\n * Register a new view type.\n * @param {string} viewType A name\n * @param {function} viewSubscriberReactComponent A react component.\n * @param {string[]} coordinationTypes A list of coordination types that this view supports.\n */\nexport function registerPluginViewType(viewType, viewSubscriberReactComponent, coordinationTypes) {\n  PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType] = viewSubscriberReactComponent;\n  // Register the supported coordination types.\n  const pluginTypesPerView = PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY];\n  if (Array.isArray(pluginTypesPerView[viewType])) {\n    coordinationTypes.forEach((coordinationType) => {\n      if (!pluginTypesPerView[viewType].includes(coordinationType)) {\n        pluginTypesPerView[viewType].push(coordinationType);\n      }\n    });\n  } else {\n    pluginTypesPerView[viewType] = coordinationTypes;\n  }\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {string} dataTypeName Name for the data type associated with the file type.\n * @param {class} dataSourceClass Data source class definition.\n * @param {class} dataLoaderClass Data loader class definition.\n */\nexport function registerPluginFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, dataTypeName, dataLoaderClass, dataSourceClass,\n) {\n  PLUGINS[PLUGIN_FILE_TYPES_KEY][fileTypeName] = [dataSourceClass, dataLoaderClass];\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileTypeName] = dataTypeName;\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {function} expansionFunction The file type expansion function.\n * Should take in a single file definition and return an array of\n * file definitions with valid fileType values.\n */\nexport function registerPluginConvenienceFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, expansionFunction,\n) {\n  PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileTypeName] = expansionFunction;\n}\n\n\n// Plugin getter functions.\n\nexport function getPluginViewTypes() {\n  return Object.keys(PLUGINS[PLUGIN_VIEW_TYPES_KEY]);\n}\n\nexport function getPluginViewType(viewType) {\n  return PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType];\n}\n\nexport function getPluginCoordinationTypes() {\n  return Object.keys(PLUGINS[PLUGIN_COORDINATION_TYPES_KEY]);\n}\n\nexport function getPluginCoordinationTypeDefaults() {\n  return PLUGINS[PLUGIN_COORDINATION_TYPES_KEY];\n}\n\nexport function getPluginCoordinationTypesForViewType(viewType) {\n  if (Array.isArray(PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType])) {\n    return PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType];\n  }\n  return [];\n}\n\nexport function getPluginFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_FILE_TYPES_KEY]);\n}\nexport function getPluginConvenienceFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY]);\n}\n\nexport function getDataTypeForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileType];\n}\nexport function getLoaderClassesForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPES_KEY][fileType];\n}\nexport function getExpansionFunctionForPluginConvenienceFileType(fileType) {\n  return PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileType];\n}\n\n// Getters that depend on plugins.\nexport function getFileTypes() {\n  return [\n    ...Object.values(FileType),\n    ...getPluginFileTypes(),\n  ];\n}\n\nexport function getCoordinationTypes() {\n  return [\n    ...Object.values(CoordinationType),\n    ...getPluginCoordinationTypes(),\n  ];\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getDefaultCoordinationValues() {\n  return {\n    ...DEFAULT_COORDINATION_VALUES,\n    ...getPluginCoordinationTypeDefaults(),\n  };\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getComponentCoordinationTypes() {\n  return {\n    ...COMPONENT_COORDINATION_TYPES,\n    ...fromEntries(getPluginViewTypes().map(viewType => ([\n      viewType,\n      getPluginCoordinationTypesForViewType(viewType),\n    ]))),\n  };\n}\n\nexport function getFileTypeDataTypeMapping() {\n  return {\n    ...FILE_TYPE_DATA_TYPE_MAPPING,\n    ...fromEntries(getPluginFileTypes().map(fileType => ([\n      fileType,\n      getDataTypeForPluginFileType(fileType),\n    ]))),\n  };\n}\n\nexport function getConvenienceFileTypes() {\n  return {\n    // TODO: import built-in convenience file types and include them here.\n    ...PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY],\n  };\n}\n","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n    placement = 'bottom-end',\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement={placement}\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"lodash/clamp\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","module.exports = require(\"@material-ui/core/Popper\");","import { makeStyles, createTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"@turf/helpers\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"ajv\");","import Ajv from 'ajv';\nimport isNil from 'lodash/isNil';\nimport { dsvFormat } from 'd3-dsv';\nimport { parse as json2csv } from 'json2csv';\nimport { colorArrayToString, colorStringToArray } from './utils';\nimport { nodeTransform } from './cell-set-utils';\nimport { getDefaultColor } from '../utils';\nimport {\n  HIERARCHICAL_SCHEMAS, TABULAR_SCHEMAS,\n  MIME_TYPE_JSON, MIME_TYPE_TABULAR,\n  SEPARATOR_TABULAR, NA_VALUE_TABULAR,\n} from './constants';\n\n/**\n * Check if an imported tree has an old schema version that we know how to\n * \"upgrade\" to the latest schema version.  Validate against the schema.\n * @param {object} currTree A hierarchical tree object with a .version property,\n * which has already passed schema validation, but may not have the latest schema version.\n * @param {string} datatype The data type of the items in the schema.\n */\nexport function tryUpgradeTreeToLatestSchema(currTree, datatype) {\n  const validate = new Ajv().compile(HIERARCHICAL_SCHEMAS[datatype].schema);\n  const valid = validate(currTree);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Tree validation failed: ${failureReason}`);\n  } else if (currTree.datatype !== datatype) {\n    throw new Error(\n      `The data type does not match the expected data type of '${datatype}'.`,\n    );\n  }\n  if (currTree.version === '0.1.2') {\n    // To upgrade from cell-sets schema 0.1.2 to 0.1.3,\n    // add a confidence value of null for each cell ID.\n    return {\n      ...currTree,\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      tree: currTree.tree.map(levelZeroNode => nodeTransform(\n        levelZeroNode,\n        n => !n.children && Array.isArray(n.set),\n        n => ({ ...n, set: n.set.map(itemId => ([itemId, null])) }), [],\n      )),\n    };\n  }\n  return currTree;\n}\n\n/**\n * Handler for JSON imports. Validates and upgrades against the hierarchical sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\n// eslint-disable-next-line no-unused-vars\nexport function handleImportJSON(result, datatype, theme) {\n  let importData = JSON.parse(result);\n  // Validate the imported file.\n  importData = tryUpgradeTreeToLatestSchema(importData, datatype);\n  return importData;\n}\n\n/**\n * Handler for tabular imports. Validates against the tabular sets schema.\n * @param {string} result The data passed from the FileReader as a string.\n * @param {string} datatype The data type to validate against.\n * @param {string} theme \"light\" or \"dark\" for the vitessce theme\n * @returns {object} The imported tree object.\n * @throws {Error} Throws error if validation fails or if the datatype does not match.\n */\nexport function handleImportTabular(result, datatype, theme) {\n  const dsvParser = dsvFormat(SEPARATOR_TABULAR);\n  const importData = dsvParser.parse(result, row => ({\n    groupName: row.groupName,\n    setName: row.setName,\n    setColor: (row.setColor ? colorStringToArray(row.setColor) : getDefaultColor(theme)),\n    obsId: row.obsId,\n    predictionScore: (\n      (\n        isNil(row.predictionScore)\n        || row.predictionScore === NA_VALUE_TABULAR\n      )\n        ? null\n        : +row.predictionScore\n    ),\n  }));\n  // Validate the imported file.\n  const validate = new Ajv().compile(TABULAR_SCHEMAS[datatype].schema);\n  const valid = validate(importData);\n  if (!valid) {\n    const failureReason = JSON.stringify(validate.errors, null, 2);\n    throw new Error(`Import validation failed: ${failureReason}`);\n  } else {\n    // Convert the validated array to a tree representation.\n    const treeToImport = {\n      version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n      datatype,\n      tree: [],\n    };\n    const uniqueGroupNames = Array.from(new Set(importData.map(d => d.groupName)));\n    uniqueGroupNames.forEach((groupName) => {\n      const levelZeroNode = {\n        name: groupName,\n        children: [],\n      };\n      const groupRows = importData.filter(d => d.groupName === groupName);\n      const uniqueSetNames = Array.from(new Set(groupRows.map(d => d.setName)));\n      uniqueSetNames.forEach((setName) => {\n        const setRows = groupRows.filter(d => d.setName === setName);\n        const { setColor } = setRows[0];\n        const levelOneNode = {\n          name: setName,\n          color: setColor,\n          set: setRows.map(d => ([d.obsId, d.predictionScore])),\n        };\n        levelZeroNode.children.push(levelOneNode);\n      });\n      treeToImport.tree.push(levelZeroNode);\n    });\n    return treeToImport;\n  }\n}\n\n/**\n * Convert a tree object to a JSON representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportJSON(result) {\n  const jsonString = JSON.stringify(result);\n  const dataString = `data:${MIME_TYPE_JSON};charset=utf-8,${encodeURIComponent(jsonString)}`;\n  return dataString;\n}\n\n/**\n * Convert a tree object with one level (height === 1) to a tabular representation.\n * @param {object} result The object to export.\n * @returns {string} The data in a string representation.\n */\nexport function handleExportTabular(result) {\n  // Convert a tree object to an array of JSON objects.\n  const exportData = [];\n  result.tree.forEach((levelZeroNode) => {\n    levelZeroNode.children.forEach((levelOneNode) => {\n      if (levelOneNode.set) {\n        levelOneNode.set.forEach(([obsId, prob]) => {\n          exportData.push({\n            groupName: levelZeroNode.name,\n            setName: levelOneNode.name,\n            setColor: colorArrayToString(levelOneNode.color),\n            obsId,\n            predictionScore: isNil(prob) ? NA_VALUE_TABULAR : prob,\n          });\n        });\n      }\n    });\n  });\n  const csvString = json2csv(exportData, {\n    fields: ['groupName', 'setName', 'setColor', 'obsId', 'predictionScore'],\n    delimiter: SEPARATOR_TABULAR,\n  });\n  const dataString = `data:${MIME_TYPE_TABULAR};charset=utf-8,${encodeURIComponent(csvString)}`;\n  return dataString;\n}\n\n/**\n * Download a file. Appends and removes an anchor node in the DOM.\n * @param {string} dataString The function that converts the data to a string.\n * @param {string} fileName The name of the file to be downloaded.\n */\nexport function downloadForUser(dataString, fileName) {\n  const downloadAnchorNode = document.createElement('a');\n  downloadAnchorNode.setAttribute('href', dataString);\n  downloadAnchorNode.setAttribute('download', fileName);\n  document.body.appendChild(downloadAnchorNode); // required for firefox\n  downloadAnchorNode.click();\n  downloadAnchorNode.remove();\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"tinycolor2\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","// See https://reactjs.org/docs/code-splitting.html#named-exports\nexport { Vega as default } from 'react-vega';\n","import React, { Suspense, useMemo } from 'react';\nimport { Handler } from 'vega-tooltip';\nimport ReactVega from './ReactVega';\n\n// TODO: React.lazy is not working with Vitessce in the portal-ui.\n// For now, we can work around this by not using React.lazy,\n// but for performance benefits that come with lazy-loading\n// we should eventually try to resolve this issue.\n// const ReactVega = React.lazy(() => import('./ReactVega'));\n\nexport const DATASET_NAME = 'table';\n\nfunction isVega(spec) {\n  return spec.$schema === 'https://vega.github.io/schema/vega/v5.json';\n}\n\n/**\n * A wrapper around the react-vega Vega component.\n * @param {object} props\n * @param {object} spec A vega or vega-lite spec.\n * @param {object[]} data The plot data as an array of objects.\n * @param {object} signalListeners Vega signal listeners. Optional.\n */\nexport default function VegaPlot(props) {\n  const {\n    spec: partialSpec,\n    data,\n    signalListeners,\n  } = props;\n\n  const spec = {\n    ...partialSpec,\n    data: (isVega(partialSpec)\n      ? [\n        { name: DATASET_NAME },\n        ...partialSpec.data,\n      ]\n      : { name: DATASET_NAME }\n    ),\n  };\n\n  const vegaComponent = useMemo(() => (\n    <ReactVega\n      spec={spec}\n      data={{\n        [DATASET_NAME]: data,\n      }}\n      signalListeners={signalListeners}\n      tooltip={new Handler().call}\n      renderer=\"canvas\"\n      scaleFactor={3}\n    />\n  ), [spec, data, signalListeners]);\n\n  return (\n    spec && data && data.length > 0 ? (\n      <Suspense fallback={<div>Loading...</div>}>\n        {vegaComponent}\n      </Suspense>\n    ) : null\n  );\n}\n","/**\n * Vega-Lite themes that can be passed to the `config` property\n * of the vega-lite spec.\n */\nexport const VEGA_THEMES = {\n  dark: {\n    // The vega-themes dark theme.\n    // Reference: https://github.com/vega/vega-themes/blob/master/src/theme-dark.ts\n    background: null,\n    title: { color: '#fff' },\n    style: {\n      'guide-label': {\n        fill: '#fff',\n      },\n      'guide-title': {\n        fill: '#fff',\n      },\n    },\n    axis: {\n      domainColor: '#fff',\n      gridColor: '#888',\n      tickColor: '#fff',\n    },\n  },\n  light: {\n    // The default vega theme.\n    background: null,\n  },\n};\n","export { default as VegaPlot, DATASET_NAME } from './VegaPlot';\nexport { VEGA_THEMES } from './utils';\n","module.exports = require(\"@turf/centroid\");","module.exports = require(\"concaveman\");","module.exports = require(\"classnames\");","module.exports = require(\"rc-tree\");","import React from 'react';\nimport clamp from 'lodash/clamp';\nimport { VegaPlot, VEGA_THEMES } from '../vega';\nimport { colorArrayToString } from './utils';\n\n/**\n * Cell set sizes displayed as a bar chart,\n * implemented with the VegaPlot component.\n * @param {object} props\n * @param {object[]} props.data The set size data, an array\n * of objects with properties `name`, `key`, `color`, and `size`.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {number} props.width The container width.\n * @param {number} props.height The container height.\n * @param {number} props.marginRight The size of the margin\n * on the right side of the plot, to account for the vega menu button.\n * By default, 90.\n * @param {number} props.marginBottom The size of the margin\n * on the bottom of the plot, to account for long x-axis labels.\n * By default, 120.\n * @param {number} props.keyLength The length of the `key` property of\n * each data point. Assumes all key strings have the same length.\n * By default, 36.\n */\nexport default function CellSetSizesPlot(props) {\n  const {\n    data: rawData,\n    theme,\n    width,\n    height,\n    marginRight = 90,\n    marginBottom = 120,\n    keyLength = 36,\n  } = props;\n\n  // Add a property `keyName` which concatenates the key and the name,\n  // which is both unique and can easily be converted\n  // back to the name by taking a substring.\n  // Add a property `colorString` which contains the `[r, g, b]` color\n  // after converting to a color hex string.\n  const data = rawData.map(d => ({\n    ...d,\n    keyName: d.key + d.name,\n    colorString: colorArrayToString(d.color),\n  }));\n\n  // Manually set the color scale so that Vega-Lite does\n  // not choose the colors automatically.\n  const colors = {\n    domain: data.map(d => d.key),\n    range: data.map(d => d.colorString),\n  };\n\n  // Get an array of keys for sorting purposes.\n  const keys = data.map(d => d.keyName);\n\n  const spec = {\n    mark: { type: 'bar' },\n    encoding: {\n      x: {\n        field: 'keyName',\n        type: 'nominal',\n        axis: { labelExpr: `substring(datum.label, ${keyLength})` },\n        title: 'Cell Set',\n        sort: keys,\n      },\n      y: {\n        field: 'size',\n        type: 'quantitative',\n        title: 'Cell Set Size',\n      },\n      color: {\n        field: 'key',\n        type: 'nominal',\n        scale: colors,\n        legend: null,\n      },\n      tooltip: {\n        field: 'size',\n        type: 'quantitative',\n      },\n    },\n    width: clamp(width - marginRight, 10, Infinity),\n    height: clamp(height - marginBottom, 10, Infinity),\n    config: VEGA_THEMES[theme],\n  };\n\n  return (\n    <VegaPlot\n      data={data}\n      spec={spec}\n    />\n  );\n}\n","import React from 'react';\nimport RcTree from 'rc-tree';\nimport classNames from 'classnames';\n\n/**\n * A helper component around the rc-tree\n * library's tree component, to set\n * default props.\n */\nconst Tree = React.forwardRef((props, ref) => {\n  const {\n    prefixCls,\n    className,\n    showIcon,\n    blockNode,\n    children,\n    checkable,\n  } = props;\n  return (\n    <RcTree\n      itemHeight={32}\n      ref={ref}\n      {...props}\n      className={classNames(className, {\n        [`${prefixCls}-icon-hide`]: !showIcon,\n        [`${prefixCls}-block-node`]: blockNode,\n      })}\n      checkable={checkable ? <span className={`${prefixCls}-checkbox-inner`} /> : checkable}\n    >\n      {children}\n    </RcTree>\n  );\n});\n\nTree.defaultProps = {\n  virtual: false,\n  checkable: false,\n  showIcon: false,\n  blockNode: true,\n  prefixCls: 'rc-tree',\n};\n\nexport default Tree;\n","import React, { useRef } from 'react';\nimport RcTooltip from 'rc-tooltip';\nimport { useVitessceContainer } from '../hooks';\n\n/**\n * This is a small wrapper around the Tooltip component from the rc-tooltip library,\n * which is required to be able to apply theme styles to the tooltip.\n * The default `getTooltipContainer` function used by rc-tooltip\n * just returns `document.body` (see https://github.com/react-component/tooltip#props),\n * We want theme styles to be applied relative to the closest `.vitessce-container`\n * ancestor element.\n * https://github.com/vitessce/vitessce/pull/494#discussion_r395957914\n * @param {object} props Props are passed through to the <RcTooltip/> from the library.\n */\nexport default function HelpTooltip(props) {\n  const { title, content, overlayClassName } = props;\n  const spanRef = useRef();\n  const getTooltipContainer = useVitessceContainer(spanRef);\n\n  const overlay = title || content;\n\n  return (\n    <>\n      <span ref={spanRef} />\n      <RcTooltip\n        getTooltipContainer={getTooltipContainer}\n        overlayClassName={overlayClassName}\n        overlay={overlay}\n        {...props}\n      />\n    </>\n  );\n}\n\nHelpTooltip.defaultProps = {\n  overlayClassName: 'help-tooltip',\n  placement: 'top',\n  trigger: 'hover',\n  mouseEnterDelay: 0.2,\n  mouseLeaveDelay: 0,\n};\n","import React from 'react';\nimport HelpTooltip from './HelpTooltip';\n\n/**\n * This is a wrapper around the HelpTooltip component, to style it as a popover,\n * and change the trigger to \"click\" rather than \"hover\".\n * @param {*} props Props are passed through to the HelpTooltip component.\n */\nexport default function Popover(props) {\n  return (\n    <HelpTooltip {...props} />\n  );\n}\n\nPopover.defaultProps = {\n  overlayClassName: 'popover',\n  placement: 'top',\n  trigger: 'click',\n  mouseEnterDelay: 0,\n  mouseLeaveDelay: 0,\n};\n","import React, { useState, useEffect } from 'react';\nimport { TwitterPicker } from 'react-color';\nimport { colorArrayToString, callbackOnKeyPress } from './utils';\nimport { PALETTE } from '../utils';\nimport Popover from './Popover';\n\n/**\n * Wrapper around a button element that supports asking for confirmation.\n * @param {object} props\n * @param {string} props.title The main button text.\n * @param {string} props.subtitle Smaller text on a line beneath the main text. Optional.\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {function} props.handler A function to call on button click (or after confirmation).\n * @param {string} props.handlerKey A key associated with the button, to support accessibility.\n * @param {boolean} props.confirm Does the user need to press the button again to confirm?\n * By default, false.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, the button can clear its confirmation state.\n */\nfunction PopoverMenuListButton(props) {\n  const {\n    title, subtitle, onClick, handler, handlerKey, confirm,\n    visible,\n  } = props;\n\n  const [isConfirming, setIsConfirming] = useState(false);\n\n  useEffect(() => {\n    // Want to clear the \"confirming\",\n    // state if the user hides the popover.\n    setIsConfirming(false);\n  }, [visible]);\n\n  function handleOrRequireConfirm() {\n    if (!confirm || isConfirming) {\n      onClick();\n      handler();\n    } else {\n      setIsConfirming(true);\n    }\n  }\n\n  const titleWithConfirm = `${isConfirming ? 'Confirm ' : ''}${title}`;\n\n  return (\n    <button\n      title={titleWithConfirm}\n      type=\"button\"\n      onClick={handleOrRequireConfirm}\n      onKeyPress={e => callbackOnKeyPress(e, handlerKey, handleOrRequireConfirm)}\n    >{titleWithConfirm}\n      {subtitle && (<><br /><span className=\"small\">{subtitle}</span></>)}\n    </button>\n  );\n}\n\n/**\n * Helper component to create a list of buttons for the body of a popover.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {function} props.onClick A \"clean up\" handler passed from the parent,\n * to alert the parent Popover component that it should close the popover after the button has\n * fired its handler.\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {boolean} props.visible The visibility state from the parent popover,\n * so that on visibility change, buttons can clear confirmation states.\n */\nfunction PopoverMenuList(props) {\n  const {\n    menuConfig,\n    onClick,\n    color = null,\n    palette = null,\n    setColor = null,\n    visible,\n  } = props;\n\n  function handleColorChange({ rgb }) {\n    if (rgb && setColor) {\n      setColor([rgb.r, rgb.g, rgb.b]);\n    }\n  }\n\n  const defaultPalette = palette\n    ? palette.map(colorArrayToString)\n    : PALETTE.concat([[255, 255, 255], [128, 128, 128], [0, 0, 0]]).map(colorArrayToString);\n\n  return (\n    <div>\n      {color && setColor && defaultPalette && (\n        <TwitterPicker\n          className=\"popover-menu-color\"\n          disableAlpha\n          width={108}\n          triangle=\"hide\"\n          colors={defaultPalette}\n          color={colorArrayToString(color)}\n          onChangeComplete={handleColorChange}\n        />\n      )}\n      <ul className=\"popover-menu-list\">\n        {menuConfig.map(item => (\n          <li key={item.title + item.subtitle}>\n            <PopoverMenuListButton\n              {...item}\n              onClick={onClick}\n              visible={visible}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\n/**\n * Helper component to create a popover component with a list of buttons.\n * If the color, setColor, and palette props are provided then a color picker\n * will be rendered at the top of the button list.\n * @param {object} props\n * @param {object[]} props.menuConfig The list of button definition objects.\n * `{ title, subtitle, confirm, handler, handlerKey }`\n * @param {string} placement Where to place the popover (top, bottom, left, right).\n * @param {number[]} props.color The current color. Optional.\n * @param {string} props.palette The color palette for the color picker. Optional.\n * @param {boolean} props.setColor The handler to call when a color has been selected. Optional.\n * @param {Element|React.Component} props.children Children to render,\n * which will trigger the popover on click.\n */\nexport default function PopoverMenu(props) {\n  const {\n    menuConfig, placement, children,\n    color = null, setColor = null, palette = null,\n  } = props;\n\n  const [visible, setVisible] = useState(false);\n\n  return (\n    <Popover\n      content={(\n        <PopoverMenuList\n          menuConfig={menuConfig}\n          onClick={() => setVisible(false)}\n          color={color}\n          setColor={setColor}\n          palette={palette}\n          visible={visible}\n        />\n)}\n      placement={placement}\n      visible={visible}\n      onVisibleChange={setVisible}\n    >\n      {children}\n    </Popover>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 18c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3zm0-9c1.657 0 3 1.343 3 3s-1.343 3-3 3-3-1.343-3-3 1.343-3 3-3z\"\n});\n\nfunction SvgMenu(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgMenu, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/menu.bc56e94a.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react';\nimport clsx from 'clsx';\nimport { TreeNode as RcTreeNode } from 'rc-tree';\nimport { getDataAndAria } from 'rc-tree/es/util';\nimport classNames from 'classnames';\nimport range from 'lodash/range';\nimport isEqual from 'lodash/isEqual';\nimport PopoverMenu from './PopoverMenu';\nimport HelpTooltip from './HelpTooltip';\nimport { callbackOnKeyPress, colorArrayToString, getLevelTooltipText } from './utils';\nimport { ReactComponent as MenuSVG } from '../../assets/menu.svg';\nimport { getDefaultColor } from '../utils';\n\n\n/**\n * Construct a `menuConfig` array for the PopoverMenu component.\n * @param {object} props The props for the TreeNode component.\n * @returns {object[]} An array of menu items to pass to PopoverMenu.\n */\nfunction makeNodeViewMenuConfig(props) {\n  const {\n    path,\n    level,\n    height,\n    onCheckNode,\n    onNodeRemove,\n    onNodeSetIsEditing,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    checkable,\n    editable,\n    exportable,\n    checked,\n  } = props;\n\n  return [\n    ...(editable ? [\n      {\n        title: 'Rename',\n        handler: () => { onNodeSetIsEditing(path, true); },\n        handlerKey: 'r',\n      },\n      {\n        title: 'Delete',\n        confirm: true,\n        handler: () => { onNodeRemove(path); },\n        handlerKey: 'd',\n      },\n    ] : []),\n    ...(level === 0 && exportable ? [\n      {\n        title: 'Export hierarchy',\n        subtitle: '(to JSON file)',\n        handler: () => { onExportLevelZeroNodeJSON(path); },\n        handlerKey: 'j',\n      },\n      ...(height <= 1 ? [\n        {\n          title: 'Export hierarchy',\n          subtitle: '(to CSV file)',\n          handler: () => { onExportLevelZeroNodeTabular(path); },\n          handlerKey: 't',\n        },\n      ] : []),\n    ] : []),\n    ...(level > 0 ? [\n      ...(checkable ? [\n        {\n          title: (checked ? 'Uncheck' : 'Check'),\n          handler: () => { onCheckNode(path, !checked); },\n          handlerKey: 's',\n        },\n      ] : []),\n      ...(exportable ? [\n        {\n          title: 'Export set',\n          subtitle: '(to JSON file)',\n          handler: () => { onExportSetJSON(path); },\n          handlerKey: 'e',\n        },\n      ] : []),\n    ] : []),\n  ];\n}\n\n/**\n * The \"static\" node component to render when the user is not renaming.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeStatic(props) {\n  const {\n    title,\n    path,\n    nodeKey,\n    level,\n    height,\n    color,\n    checkbox,\n    isChecking,\n    isLeaf,\n    onNodeSetColor,\n    onNodeView,\n    expanded,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    disableTooltip,\n    size,\n    datatype,\n    editable,\n    theme,\n  } = props;\n  const shouldCheckNextLevel = (level === 0 && !expanded);\n  const nextLevelToCheck = (\n    (checkedLevelIndex && isEqual(path, checkedLevelPath) && checkedLevelIndex < height)\n      ? checkedLevelIndex + 1\n      : 1\n  );\n  const numberFormatter = new Intl.NumberFormat('en-US');\n  const niceSize = numberFormatter.format(size);\n  let tooltipText;\n  if (shouldCheckNextLevel) {\n    tooltipText = getLevelTooltipText(nextLevelToCheck);\n  } else if (isLeaf || !expanded) {\n    tooltipText = `Color individual set (${niceSize} ${datatype}${(size === 1 ? '' : 's')})`;\n  } else {\n    tooltipText = 'Color by expanded descendants';\n  }\n  // If this is a level zero node and is _not_ expanded, then upon click,\n  // the behavior should be to color by the first or next cluster level.\n  // If this is a level zero node and _is_ expanded, or if any other node,\n  // click should trigger onNodeView.\n  const onClick = (level === 0 && !expanded\n    ? () => onCheckLevel(nodeKey, nextLevelToCheck)\n    : () => onNodeView(path)\n  );\n  const tooltipProps = (disableTooltip ? { visible: false } : {});\n  const popoverMenuConfig = makeNodeViewMenuConfig(props);\n  return (\n    <span>\n      <HelpTooltip title={tooltipText} {...tooltipProps}>\n        <button\n          type=\"button\"\n          onClick={onClick}\n          onKeyPress={e => callbackOnKeyPress(e, 'v', () => onNodeView(path))}\n          className=\"title-button\"\n        >\n          {title}\n        </button>\n      </HelpTooltip>\n      {popoverMenuConfig.length > 0 ? (\n        <PopoverMenu\n          menuConfig={makeNodeViewMenuConfig(props)}\n          color={level > 0 && editable ? (color || getDefaultColor(theme)) : null}\n          setColor={c => onNodeSetColor(path, c)}\n        >\n          <MenuSVG className=\"node-menu-icon\" />\n        </PopoverMenu>\n      ) : null}\n      {level > 0 && isChecking ? checkbox : null}\n      {level > 0 && (<span className=\"node-size-label\">{niceSize}</span>)}\n    </span>\n  );\n}\n\n/**\n * The \"editing\" node component to render when the user is renaming,\n * containing a text input field and a save button.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNodeEditing(props) {\n  const {\n    title,\n    path,\n    onNodeSetName,\n    onNodeCheckNewName,\n  } = props;\n  const [currentTitle, setCurrentTitle] = useState(title);\n\n  // Do not allow the user to save a potential name if it conflicts with\n  // another name in the hierarchy.\n  const hasConflicts = onNodeCheckNewName(path, currentTitle);\n  function trySetName() {\n    if (!hasConflicts) {\n      onNodeSetName(path, currentTitle, true);\n    }\n  }\n  return (\n    <span className=\"title-button-with-input\">\n      <input\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus\n        className=\"title-input\"\n        type=\"text\"\n        value={currentTitle}\n        onChange={(e) => { setCurrentTitle(e.target.value); }}\n        onKeyPress={e => callbackOnKeyPress(\n          e,\n          'Enter',\n          trySetName,\n        )}\n        onFocus={e => e.target.select()}\n      />\n      {!hasConflicts && (\n        <button\n          type=\"button\"\n          className=\"title-save-button\"\n          onClick={trySetName}\n        >\n          Save\n        </button>\n      )}\n    </span>\n  );\n}\n\n/**\n * A \"delegation\" component, to decide whether to render\n * an \"editing\" vs. \"static\" node component.\n * @param {object} props The props for the TreeNode component.\n */\nfunction NamedSetNode(props) {\n  const {\n    isEditing,\n    isCurrentSet,\n  } = props;\n  return (\n    (isEditing || isCurrentSet)\n      ? (<NamedSetNodeEditing {...props} />)\n      : (<NamedSetNodeStatic {...props} />)\n  );\n}\n\n/**\n * Buttons for viewing each hierarchy level,\n * rendered below collapsed level zero nodes.\n * @param {object} props The props for the (level zero) TreeNode component.\n */\nfunction LevelsButtons(props) {\n  const {\n    nodeKey,\n    path,\n    height,\n    onCheckLevel,\n    checkedLevelPath,\n    checkedLevelIndex,\n    hasColorEncoding,\n  } = props;\n  function onCheck(event) {\n    if (event.target.checked) {\n      const newLevel = parseInt(event.target.value, 10);\n      onCheckLevel(nodeKey, newLevel);\n    }\n  }\n  return (\n    <div className=\"level-buttons-container\">\n      {range(1, height + 1).map((i) => {\n        const isChecked = isEqual(path, checkedLevelPath) && i === checkedLevelIndex;\n        return (\n          <div className=\"level-buttons\" key={i}>\n            <HelpTooltip title={getLevelTooltipText(i)}>\n              <input\n                className={clsx('level-radio-button', { checked: isChecked && !hasColorEncoding })}\n                type=\"checkbox\"\n                value={i}\n                checked={isChecked && hasColorEncoding}\n                onChange={onCheck}\n              />\n            </HelpTooltip>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/**\n * Render the \"switcher\" icon.\n * Arrow for collapsed/expanded non-leaf nodes,\n * or square for leaf nodes.\n * @param {object} props The props for the TreeNode component.\n */\nfunction SwitcherIcon(props) {\n  const {\n    isLeaf, isOpen, color,\n  } = props;\n  const hexColor = (color ? colorArrayToString(color) : undefined);\n  if (isLeaf) {\n    return (\n      <i\n        className=\"anticon anticon-circle rc-tree-switcher-icon\"\n      >\n        <svg\n          viewBox=\"0 0 1024 1024\"\n          focusable=\"false\"\n          data-icon=\"caret-down\"\n          width=\"1em\"\n          height=\"1em\"\n          aria-hidden=\"true\"\n        >\n          <rect fill={hexColor} x={600 / 2} y={600 / 2} width={1024 - 600} height={1024 - 600} />\n        </svg>\n      </i>\n    );\n  }\n  return (\n    <i\n      className=\"anticon anticon-caret-down rc-tree-switcher-icon\"\n    >\n      <svg\n        viewBox=\"0 0 1024 1024\"\n        focusable=\"false\"\n        data-icon=\"caret-down\"\n        width=\"1em\"\n        height=\"1em\"\n        aria-hidden=\"true\"\n      >\n        <path\n          fill={(isOpen ? '#444' : hexColor)}\n          d=\"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z\"\n        />\n      </svg>\n    </i>\n  );\n}\n\n/**\n * A custom TreeNode component.\n * @extends {RcTreeNode} TreeNode from the rc-tree library.\n */\nexport default class TreeNode extends RcTreeNode {\n  /**\n   * Override the main node text elements.\n   */\n  renderSelector = () => {\n    const {\n      title,\n      isCurrentSet,\n      isSelected,\n      isEditing,\n      onDragStart: onDragStartProp,\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        draggable,\n      },\n    } = this.context;\n\n    const onDragStart = (e) => {\n      onDragStartProp();\n      this.onDragStart(e);\n    };\n\n    const wrapClass = `${prefixClass}-node-content-wrapper`;\n    const isDraggable = (!isCurrentSet && !isEditing && draggable);\n    return (\n      <span\n        ref={this.setSelectHandle}\n        title={title}\n        className={classNames(\n          wrapClass,\n          `${wrapClass}-${this.getNodeState() || 'normal'}`,\n          isSelected && `${prefixClass}-node-selected`,\n          isDraggable && 'draggable',\n        )}\n        draggable={isDraggable}\n        aria-grabbed={isDraggable}\n        onDragStart={isDraggable ? onDragStart : undefined}\n      >\n        <NamedSetNode\n          {...this.props}\n          prefixClass={prefixClass}\n          checkbox={this.renderCheckbox()}\n        />\n        {this.renderLevels()}\n      </span>\n    );\n  };\n\n  /**\n   * Render the LevelsButtons component if this node\n   * is a collapsed level zero node.\n   */\n  renderLevels = () => {\n    const { level, expanded } = this.props;\n    if (level !== 0 || expanded) {\n      return null;\n    }\n    return (\n      <LevelsButtons\n        {...this.props}\n      />\n    );\n  }\n\n  /**\n   * Override the switcher element.\n   */\n  renderSwitcher = () => {\n    const { expanded, isLeaf, color } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        onNodeExpand,\n      },\n    } = this.context;\n\n    const onNodeExpandWrapper = (e) => {\n      // Do not call onNodeExpand if the node is a leaf node.\n      if (!isLeaf) {\n        onNodeExpand(e, this);\n      }\n    };\n\n    const switcherClass = classNames(\n      `${prefixClass}-switcher`,\n      { [`${prefixClass}-switcher_${(expanded ? 'open' : 'close')}`]: !isLeaf },\n    );\n    return (\n      <span\n        className={switcherClass}\n        onClick={onNodeExpandWrapper}\n        onKeyPress={e => callbackOnKeyPress(e, 'd', onNodeExpandWrapper)}\n        role=\"button\"\n        tabIndex=\"0\"\n      >\n        <SwitcherIcon\n          isLeaf={isLeaf}\n          isOpen={expanded}\n          color={color}\n        />\n      </span>\n    );\n  };\n\n  /**\n   * Override main render function,\n   * to enable overriding the sub-render functions\n   * for switcher, selector, etc.\n   */\n  render() {\n    const {\n      style, loading, level,\n      dragOver, dragOverGapTop, dragOverGapBottom,\n      isLeaf,\n      expanded, selected, checked, halfChecked,\n      onDragEnd: onDragEndProp,\n      expandable,\n      ...otherProps\n    } = this.props;\n    const {\n      rcTree: {\n        prefixCls: prefixClass,\n        filterTreeNode,\n        draggable,\n      },\n    } = this.context;\n    const disabled = this.isDisabled();\n    const dataAndAriaAttributeProps = getDataAndAria(otherProps);\n\n    const onDragEnd = (e) => {\n      onDragEndProp();\n      this.onDragEnd(e);\n    };\n\n    return (\n      <li\n        className={classNames('rc-tree-treenode', `level-${level}-treenode`, {\n          [`${prefixClass}-treenode-disabled`]: disabled,\n          [`${prefixClass}-treenode-switcher-${expanded ? 'open' : 'close'}`]: !isLeaf,\n          [`${prefixClass}-treenode-checkbox-checked`]: checked,\n          [`${prefixClass}-treenode-checkbox-indeterminate`]: halfChecked,\n          [`${prefixClass}-treenode-selected`]: selected,\n          [`${prefixClass}-treenode-loading`]: loading,\n\n          'drag-over': !disabled && dragOver,\n          'drag-over-gap-top': !disabled && dragOverGapTop,\n          'drag-over-gap-bottom': !disabled && dragOverGapBottom,\n          'filter-node': filterTreeNode && filterTreeNode(this),\n        })}\n        style={style}\n        role=\"treeitem\"\n        onDragEnter={draggable ? this.onDragEnter : undefined}\n        onDragOver={draggable ? this.onDragOver : undefined}\n        onDragLeave={draggable ? this.onDragLeave : undefined}\n        onDrop={draggable ? this.onDrop.bind(this) : undefined}\n        onDragEnd={draggable ? onDragEnd : undefined}\n        {...dataAndAriaAttributeProps}\n      >\n        {expandable ? this.renderSwitcher() : null}\n        {this.renderSelector()}\n        {this.renderChildren()}\n      </li>\n    );\n  }\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUnion(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 16.433999 10.234\",\n    height: 12,\n    width: 18,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0.117,-2.883)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgUnion, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/union.de5168c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgIntersection(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 18,\n    height: 12,\n    viewBox: \"0 0 16 10\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,-3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    }\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgIntersection, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/intersection.b0003109.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  x: \"5%\",\n  width: \"90%\",\n  height: \"100%\",\n  fill: \"white\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"rect\", {\n  x: 0,\n  y: 0,\n  width: 25.3804963846,\n  height: 16,\n  mask: \"url(#union-mask)\"\n}));\n\nfunction SvgComplement(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"svg14\",\n    viewBox: \"0 0 25.3804963846 16\",\n    height: 16,\n    width: 25.3804963846,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"mask\", {\n    id: \"union-mask\",\n    x: 0,\n    y: 0,\n    width: 25.3804963846,\n    height: 16\n  }, _ref2, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(4.69,0)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m 11.467471,11.811278 c 0.198237,-0.322177 0.508,-1.011333 0.653661,-1.454255 0.659343,-2.0049141 0.44323,-4.2620847 -0.577734,-6.0340822 l -0.168844,-0.2930481 0.105744,0.017887 c 0.759902,0.1285441 1.368762,0.3699553 1.856675,0.7361658 1.988296,1.4923476 2.192477,4.3353549 0.434717,6.0529895 -0.641216,0.626581 -1.299647,0.94683 -2.294136,1.115833 l -0.108488,0.01844 z M 4.3162122,11.919169 C 1.9278944,11.487872 0.46692382,9.0323123 1.234873,6.7401372 1.5621727,5.763213 2.2610593,4.9489746 3.1840041,4.4693005 3.5978035,4.2542401 3.9427842,4.145371 4.5197023,4.0477802 L 4.6254464,4.0298927 4.4571836,4.3223069 C 3.4332707,6.1017061 3.2180432,8.3476022 3.878868,10.357023 c 0.1458466,0.443487 0.4554716,1.132155 0.6542959,1.455285 0.054471,0.08853 0.087814,0.159599 0.074096,0.157937 -0.013718,-0.0017 -0.1446898,-0.02465 -0.2910477,-0.05108 z M 5.0000001,3 C 2.2,3 0,5.2 0,8 c 0,2.8 2.2,5 5.0000001,5 0.6,0 1.1,-0.1 1.6,-0.3 C 5.3000001,11.6 4.5,9.7999998 4.5,8 4.5,6.2 5.3000001,4.5 6.6000001,3.3 c -0.5,-0.2 -1,-0.3 -1.6,-0.3 z M 4.65,4.02 C 3.92,5.17 3.51,6.54 3.51,8 c 0,1.4599998 0.42,2.83 1.14,3.98 C 2.61,11.8 1.01,10.08 1.01,8 1.01,5.92 2.61,4.2 4.65,4.02 Z M 8,4 C 6.8,4.9 6,6.4 6,8 6,9.6 6.8,11.1 8,12 9.2,11.1 10,9.7 10,8 10,6.3 9.2,4.9 8,4 Z m 3,-1 c 2.8,0 5,2.2 5,5 0,2.8 -2.2,5 -5,5 C 10.4,13 9.9,12.9 9.4,12.7 10.7,11.6 11.5,9.8 11.5,8 11.5,6.2 10.7,4.5 9.4,3.3 9.9,3.1 10.4,3 11,3 Z m 0.35,1.02 c 0.73,1.15 1.14,2.52 1.14,3.98 0,1.46 -0.42,2.83 -1.14,3.98 2.04,-0.18 3.64,-1.9 3.64,-3.98 0,-2.08 -1.6,-3.8 -3.64,-3.98 z\",\n    style: {\n      strokeWidth: 0.234,\n      strokeMiterlimit: 4,\n      strokeDasharray: \"none\",\n      strokeOpacity: 1\n    },\n    fill: \"black\"\n  })))), _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgComplement, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/complement.c220ca8c.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\nimport PopoverMenu from './PopoverMenu';\nimport {\n  handleImportJSON,\n  handleImportTabular,\n} from './io';\nimport {\n  MIME_TYPE_JSON,\n  MIME_TYPE_TABULAR,\n} from './constants';\n\nimport { ReactComponent as SetUnionSVG } from '../../assets/sets/union.svg';\nimport { ReactComponent as SetIntersectionSVG } from '../../assets/sets/intersection.svg';\nimport { ReactComponent as SetComplementSVG } from '../../assets/sets/complement.svg';\n\n/**\n * A plus button for creating or importing set hierarchies.\n * @param {object} props\n * @param {string} props.datatype The data type to validate imported hierarchies against.\n * @param {function} props.onError A callback to pass error message strings.\n * @param {function} props.onImportTree A callback to pass successfully-validated tree objects.\n * @param {function} props.onCreateLevelZeroNode A callback to create a new empty\n * level zero node.\n * @param {boolean} props.importable Is importing allowed?\n * If not, the import button will not be rendered.\n * @param {boolean} props.editable Is editing allowed?\n * If not, the create button will not be rendered.\n */\nexport function PlusButton(props) {\n  const {\n    datatype, onError, onImportTree, onCreateLevelZeroNode,\n    importable, editable,\n  } = props;\n\n  /**\n   * Import a file, then process the imported data via the supplied handler function.\n   * @param {Function} importHandler The function to process the imported data.\n   * @param {string} mimeType The accepted mime type for the file upload input.\n   * @returns {Function} An import function corresponding to the supplied parameters.\n   */\n  const onImport = useCallback((importHandler, mimeType) => () => {\n    const uploadInputNode = document.createElement('input');\n    uploadInputNode.setAttribute('type', 'file');\n    uploadInputNode.setAttribute('accept', mimeType);\n    document.body.appendChild(uploadInputNode); // required for firefox\n    uploadInputNode.click();\n    uploadInputNode.addEventListener('change', (event) => {\n      if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n        onError('Local file reading APIs are not fully supported in this browser.');\n        return;\n      }\n      const { files } = event.target;\n      if (!files || files.length !== 1) {\n        onError('Incorrect number of files selected.');\n        return;\n      }\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        const { result } = reader;\n        try {\n          const treeToImport = importHandler(result, datatype);\n          onError(false); // Clear any previous import error.\n          onImportTree(treeToImport);\n        } catch (e) {\n          onError(e.message);\n        }\n      }, false);\n      reader.readAsText(files[0]);\n    });\n    uploadInputNode.remove();\n  }, [datatype, onError, onImportTree]);\n\n  const menuConfig = [\n    ...(editable ? [\n      {\n        title: 'Create hierarchy',\n        handler: onCreateLevelZeroNode,\n        handlerKey: 'n',\n      },\n    ] : []),\n    ...(importable ? [\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from CSV file)',\n        handler: onImport(handleImportTabular, MIME_TYPE_TABULAR),\n        handlerKey: 'c',\n      },\n      {\n        title: 'Import hierarchy',\n        subtitle: '(from JSON file)',\n        handler: onImport(handleImportJSON, MIME_TYPE_JSON),\n        handlerKey: 'j',\n      },\n    ] : []),\n  ];\n\n  return (menuConfig.length > 0 ? (\n    <PopoverMenu\n      menuConfig={menuConfig}\n    >\n      <button className=\"plus-button\" type=\"submit\">+</button>\n    </PopoverMenu>\n  ) : null);\n}\n\n/**\n * Set operations buttons (union, intersection, complement)\n * and a view checked sets button.\n * @param {object} props\n * @param {function} props.onUnion A callback for the union button.\n * @param {function} props.onIntersection A callback for the intersection button.\n * @param {function} props.onComplement A callback for the complement button.\n * @param {boolean} props.operatable Are set operations allowed?\n * If not, the union, intersection, and complement buttons will not be rendered.\n */\nexport function SetOperationButtons(props) {\n  const {\n    onUnion,\n    onIntersection,\n    onComplement,\n    operatable,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  return (\n    <>\n      {operatable && (\n        <>\n          <button\n            onClick={onUnion}\n            title=\"New set from union of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToUnion}\n          >\n            <SetUnionSVG />\n          </button>\n          <button\n            onClick={onIntersection}\n            title=\"New set from intersection of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToIntersect}\n          >\n            <SetIntersectionSVG />\n          </button>\n          <button\n            onClick={onComplement}\n            title=\"New set from complement of checked sets\"\n            type=\"submit\"\n            disabled={!hasCheckedSetsToComplement}\n          >\n            <SetComplementSVG />\n          </button>\n        </>\n      )}\n    </>\n  );\n}\n","/* eslint-disable no-underscore-dangle */\nimport React, { useState, useMemo } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport Tree from './Tree';\nimport TreeNode from './TreeNode';\nimport { PlusButton, SetOperationButtons } from './SetsManagerButtons';\nimport { nodeToRenderProps } from './cell-set-utils';\nimport { getDefaultColor } from '../utils';\nimport { pathToKey } from './utils';\n\nfunction processNode(node, prevPath, setColor, theme) {\n  const nodePath = [...prevPath, node.name];\n  return {\n    ...node,\n    ...(node.children ? ({\n      children: node.children\n        .map(c => processNode(c, nodePath, setColor)),\n    }) : {}),\n    color: setColor?.find(d => isEqual(d.path, nodePath))?.color || getDefaultColor(theme),\n  };\n}\n\nfunction processSets(sets, setColor, theme) {\n  return {\n    ...sets,\n    tree: sets ? sets.tree.map(lzn => processNode(lzn, [], setColor, theme)) : [],\n  };\n}\n\nfunction getAllKeys(node, path = []) {\n  if (!node) {\n    return null;\n  }\n  const newPath = [...path, node.name];\n  if (node.children) {\n    return [pathToKey(newPath), ...node.children.flatMap(v => getAllKeys(v, newPath))];\n  }\n  return pathToKey(newPath);\n}\n\n/**\n * A generic hierarchical set manager component.\n * @prop {object} tree An object representing set hierarchies.\n * @prop {string} datatype The data type for sets (e.g. \"cell\")\n * @prop {function} clearPleaseWait A callback to signal that loading is complete.\n * @prop {boolean} draggable Whether tree nodes can be rearranged via drag-and-drop.\n * By default, true.\n * @prop {boolean} checkable Whether to show the \"Check\" menu button\n * and checkboxes for selecting multiple sets. By default, true.\n * @prop {boolean} editable Whether to show rename, delete, color, or create options.\n * By default, true.\n * @prop {boolean} expandable Whether to allow hierarchies to be expanded\n * to show the list or tree of sets contained. By default, true.\n * @prop {boolean} operatable Whether to enable union, intersection,\n * and complement operations on checked sets. By default, true.\n * @prop {boolean} exportable Whether to enable exporting hierarchies and sets to files.\n * By default, true.\n * @prop {boolean} importable Whether to enable importing hierarchies from files.\n * By default, true.\n * @prop {function} onError Function to call with error messages (failed import validation, etc).\n * @prop {function} onCheckNode Function to call when a single node has been checked or un-checked.\n * @prop {function} onExpandNode Function to call when a node has been expanded.\n * @prop {function} onDropNode Function to call when a node has been dragged-and-dropped.\n * @prop {function} onCheckLevel Function to call when an entire hierarchy level has been selected,\n * via the \"Color by cluster\" and \"Color by subcluster\" buttons below collapsed level zero nodes.\n * @prop {function} onNodeSetColor Function to call when a new node color has been selected.\n * @prop {function} onNodeSetName Function to call when a node has been renamed.\n * @prop {function} onNodeRemove Function to call when the user clicks the \"Delete\" menu button\n * to remove a node.\n * @prop {function} onNodeView Function to call when the user wants to view the set associated\n * with a particular node.\n * @prop {function} onImportTree Function to call when a tree has been imported\n * using the \"plus\" button.\n * @prop {function} onCreateLevelZeroNode Function to call when a user clicks the \"Create hierarchy\"\n * menu option using the \"plus\" button.\n * @prop {function} onExportLevelZeroNode Function to call when a user wants to\n * export an entire hierarchy via the \"Export hierarchy\" menu button for a\n * particular level zero node.\n * @prop {function} onExportSet Function to call when a user wants to export a set associated with\n * a particular node via the \"Export set\" menu button.\n * @prop {function} onUnion Function to call when a user wants to create a new set from the union\n * of the sets associated with the currently-checked nodes.\n * @prop {function} onIntersection Function to call when a user wants to create a new set from the\n * intersection of the sets associated with the currently-checked nodes.\n * @prop {function} onComplement Function to call when a user wants to create a new set from the\n * complement of the (union of the) sets associated with the currently-checked nodes.\n * @prop {function} onView Function to call when a user wants to view the sets\n * associated with the currently-checked nodes.\n * @prop {string} theme \"light\" or \"dark\" for the vitessce theme\n */\nexport default function SetsManager(props) {\n  const {\n    theme,\n    sets,\n    additionalSets,\n    setColor, // TODO: use this\n    levelSelection: checkedLevel,\n    setSelection,\n    setExpansion,\n    hasColorEncoding,\n    datatype,\n    draggable = true,\n    checkable = true,\n    editable = true,\n    expandable = true,\n    operatable = true,\n    exportable = true,\n    importable = true,\n    onError,\n    onCheckNode,\n    onExpandNode,\n    onDropNode,\n    onCheckLevel,\n    onNodeSetColor,\n    onNodeSetName,\n    onNodeCheckNewName,\n    onNodeRemove,\n    onNodeView,\n    onImportTree,\n    onCreateLevelZeroNode,\n    onExportLevelZeroNodeJSON,\n    onExportLevelZeroNodeTabular,\n    onExportSetJSON,\n    onUnion,\n    onIntersection,\n    onComplement,\n    hasCheckedSetsToUnion,\n    hasCheckedSetsToIntersect,\n    hasCheckedSetsToComplement,\n  } = props;\n\n  const isChecking = true;\n  const autoExpandParent = true;\n  const [isDragging, setIsDragging] = useState(false);\n  const [isEditingNodeName, setIsEditingNodeName] = useState(null);\n\n  const processedSets = useMemo(() => processSets(\n    sets, setColor, theme,\n  ), [sets, setColor, theme]);\n  const processedAdditionalSets = useMemo(() => processSets(\n    additionalSets, setColor, theme,\n  ), [additionalSets, setColor, theme]);\n\n  const additionalSetKeys = (processedAdditionalSets\n    ? processedAdditionalSets.tree.flatMap(v => getAllKeys(v, []))\n    : []\n  );\n\n  const allSetSelectionKeys = (setSelection || []).map(pathToKey);\n  const allSetExpansionKeys = (setExpansion || []).map(pathToKey);\n\n  const setSelectionKeys = allSetSelectionKeys.filter(k => !additionalSetKeys.includes(k));\n  const setExpansionKeys = allSetExpansionKeys.filter(k => !additionalSetKeys.includes(k));\n\n  const additionalSetSelectionKeys = allSetSelectionKeys.filter(k => additionalSetKeys.includes(k));\n  const additionalSetExpansionKeys = allSetExpansionKeys.filter(k => additionalSetKeys.includes(k));\n\n  /**\n   * Recursively render TreeNode components.\n   * @param {object[]} nodes An array of node objects.\n   * @returns {TreeNode[]|null} Array of TreeNode components or null.\n   */\n  function renderTreeNodes(nodes, readOnly, currPath) {\n    if (!nodes) {\n      return null;\n    }\n    return nodes.map((node) => {\n      const newPath = [...currPath, node.name];\n      return (\n        <TreeNode\n          theme={theme}\n          key={pathToKey(newPath)}\n          {...nodeToRenderProps(node, newPath, setColor)}\n\n          isEditing={isEqual(isEditingNodeName, newPath)}\n\n          datatype={datatype}\n          draggable={draggable && !readOnly}\n          editable={editable && !readOnly}\n          checkable={checkable}\n          expandable={expandable}\n          exportable={exportable}\n\n          hasColorEncoding={hasColorEncoding}\n          isChecking={isChecking}\n          checkedLevelPath={checkedLevel ? checkedLevel.levelZeroPath : null}\n          checkedLevelIndex={checkedLevel ? checkedLevel.levelIndex : null}\n\n          onCheckNode={onCheckNode}\n          onCheckLevel={onCheckLevel}\n          onNodeView={onNodeView}\n          onNodeSetColor={onNodeSetColor}\n          onNodeSetName={(targetPath, name) => {\n            onNodeSetName(targetPath, name);\n            setIsEditingNodeName(null);\n          }}\n          onNodeCheckNewName={onNodeCheckNewName}\n          onNodeSetIsEditing={setIsEditingNodeName}\n          onNodeRemove={onNodeRemove}\n          onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n          onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n          onExportSetJSON={onExportSetJSON}\n\n          disableTooltip={isDragging}\n          onDragStart={() => setIsDragging(true)}\n          onDragEnd={() => setIsDragging(false)}\n        >\n          {renderTreeNodes(node.children, readOnly, newPath, theme)}\n        </TreeNode>\n      );\n    });\n  }\n\n  return (\n    <div className=\"sets-manager\">\n      <div className=\"sets-manager-tree\">\n        <Tree\n          draggable={false}\n          checkable={checkable}\n\n          checkedKeys={setSelectionKeys}\n          expandedKeys={setExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n        >\n          {renderTreeNodes(processedSets.tree, true, [], theme)}\n        </Tree>\n        <Tree\n          draggable /* TODO */\n          checkable={checkable}\n\n          checkedKeys={additionalSetSelectionKeys}\n          expandedKeys={additionalSetExpansionKeys}\n          autoExpandParent={autoExpandParent}\n\n          onCheck={(checkedKeys, info) => onCheckNode(\n            info.node.props.nodeKey,\n            info.checked,\n          )}\n          onExpand={(expandedKeys, info) => onExpandNode(\n            expandedKeys,\n            info.node.props.nodeKey,\n            info.expanded,\n          )}\n          onDrop={(info) => {\n            const { eventKey: dropKey } = info.node.props;\n            const { eventKey: dragKey } = info.dragNode.props;\n            const { dropToGap, dropPosition } = info;\n            onDropNode(dropKey, dragKey, dropPosition, dropToGap);\n          }}\n        >\n          {renderTreeNodes(processedAdditionalSets.tree, false, [], theme)}\n        </Tree>\n\n        <PlusButton\n          datatype={datatype}\n          onError={onError}\n          onImportTree={onImportTree}\n          onCreateLevelZeroNode={onCreateLevelZeroNode}\n          importable={importable}\n          editable={editable}\n        />\n      </div>\n      {isChecking ? (\n        <div className=\"set-operation-buttons\">\n          <SetOperationButtons\n            onUnion={onUnion}\n            onIntersection={onIntersection}\n            onComplement={onComplement}\n            operatable={operatable}\n\n            hasCheckedSetsToUnion={hasCheckedSetsToUnion}\n            hasCheckedSetsToIntersect={hasCheckedSetsToIntersect}\n            hasCheckedSetsToComplement={hasCheckedSetsToComplement}\n          />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","module.exports = require(\"react-vega\");","import React, {\n  useEffect,\n  useState,\n  useMemo,\n} from 'react';\nimport isEqual from 'lodash/isEqual';\nimport packageJson from '../../../package.json';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetWarning,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport SetsManager from './SetsManager';\nimport TitleInfo from '../TitleInfo';\nimport {\n  treeExportLevelZeroNode,\n  treeExportSet,\n  treeToExpectedCheckedLevel,\n  nodeToLevelDescendantNamePaths,\n  treeToIntersection,\n  treeToUnion,\n  treeToComplement,\n  treeFindNodeByNamePath,\n  treesConflict,\n  nodeTransform,\n  nodeAppendChild,\n  nodePrependChild,\n  nodeInsertChild,\n  filterNode,\n  treeInitialize,\n  initializeCellSetColor,\n} from './cell-set-utils';\nimport {\n  isEqualOrPrefix,\n  tryRenamePath,\n  PATH_SEP,\n} from './utils';\nimport {\n  downloadForUser,\n  handleExportJSON,\n  handleExportTabular,\n  tryUpgradeTreeToLatestSchema,\n} from './io';\nimport {\n  FILE_EXTENSION_JSON,\n  FILE_EXTENSION_TABULAR,\n  SETS_DATATYPE_CELL,\n} from './constants';\nimport { useUrls, useReady } from '../hooks';\nimport {\n  setCellSelection,\n  mergeCellSets,\n  getNextNumberedNodeName,\n} from '../utils';\nimport { useCellsData, useCellSetsData } from '../data-hooks';\n\nconst CELL_SETS_DATA_TYPES = ['cells', 'cell-sets'];\n\n/**\n * A subscriber wrapper around the SetsManager component\n * for the 'cell' datatype.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n */\nexport default function CellSetsManagerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Cell Sets',\n  } = props;\n\n  const loaders = useLoaders();\n  const setWarning = useSetWarning();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    obsSetSelection: cellSetSelection,\n    obsSetColor: cellSetColor,\n    additionalObsSets: additionalCellSets,\n    obsColorEncoding: cellColorEncoding,\n  }, {\n    setObsSetSelection: setCellSetSelection,\n    setObsColorEncoding: setCellColorEncoding,\n    setObsSetColor: setCellSetColor,\n    setAdditionalObsSets: setAdditionalCellSets,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSets, coordinationScopes);\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    CELL_SETS_DATA_TYPES,\n  );\n\n  const [cellSetExpansion, setCellSetExpansion] = useState([]);\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setCellSetExpansion([]);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells] = useCellsData(loaders, dataset, setItemIsReady, addUrl, true);\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    { setObsSetSelection: setCellSetSelection, setObsSetColor: setCellSetColor },\n    { obsSetSelection: cellSetSelection, obsSetColor: cellSetColor },\n  );\n\n  // Validate and upgrade the additionalCellSets.\n  useEffect(() => {\n    if (additionalCellSets) {\n      let upgradedCellSets;\n      try {\n        upgradedCellSets = tryUpgradeTreeToLatestSchema(additionalCellSets, SETS_DATATYPE_CELL);\n      } catch (e) {\n        setWarning(e.message);\n        return;\n      }\n      setAdditionalCellSets(upgradedCellSets);\n    }\n  }, [additionalCellSets, setAdditionalCellSets, setWarning]);\n\n  // Get an array of all cell IDs to use for set complement operations.\n  const allCellIds = useMemo(() => (cells ? Object.keys(cells) : []), [cells]);\n\n  // A helper function for updating the encoding for cell colors,\n  // which may have previously been set to 'geneSelection'.\n  function setCellSetColorEncoding() {\n    setCellColorEncoding('cellSetSelection');\n  }\n\n  // Merged cell sets are only to be used for convenience when reading\n  // (if writing: update either `cellSets` _or_ `additionalCellSets`).\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // Infer the state of the \"checked level\" radio button based on the selected cell sets.\n  const checkedLevel = useMemo(() => {\n    if (cellSetSelection && cellSetSelection.length > 0\n    && mergedCellSets && mergedCellSets.tree.length > 0) {\n      return treeToExpectedCheckedLevel(mergedCellSets, cellSetSelection);\n    }\n    return null;\n  }, [cellSetSelection, mergedCellSets]);\n\n  // Callback functions\n\n  // The user wants to select all nodes at a particular hierarchy level.\n  function onCheckLevel(levelZeroName, levelIndex) {\n    const lzn = mergedCellSets.tree.find(n => n.name === levelZeroName);\n    if (lzn) {\n      const newCellSetSelection = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n      setCellSetSelection(newCellSetSelection);\n      setCellSetColorEncoding();\n    }\n  }\n\n  // The user wants to check or uncheck a cell set node.\n  function onCheckNode(targetKey, checked) {\n    const targetPath = (Array.isArray(targetKey) ? targetKey : targetKey.split(PATH_SEP));\n    if (!targetKey) {\n      return;\n    }\n    if (checked) {\n      setCellSetSelection([...cellSetSelection, targetPath]);\n    } else {\n      setCellSetSelection(cellSetSelection.filter(d => !isEqual(d, targetPath)));\n    }\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to expand or collapse a node in the tree.\n  function onExpandNode(expandedKeys, targetKey, expanded) {\n    if (expanded) {\n      setCellSetExpansion(prev => ([...prev, targetKey.split(PATH_SEP)]));\n    } else {\n      setCellSetExpansion(prev => prev.filter(d => !isEqual(d, targetKey.split(PATH_SEP))));\n    }\n  }\n\n  // The user dragged a tree node and dropped it somewhere else in the tree\n  // to re-arrange or re-order the nodes.\n  // We need to verify that their drop target is valid, and if so, complete\n  // the tree re-arrangement.\n  function onDropNode(dropKey, dragKey, dropPosition, dropToGap) {\n    const dropPath = dropKey.split(PATH_SEP);\n    const dropNode = treeFindNodeByNamePath(additionalCellSets, dropPath);\n    if (!dropNode.children && !dropToGap) {\n      // Do not allow a node with a set (i.e. leaf) to become a child of another node with a set,\n      // as this will result in an internal node having a set, which we do not allow.\n      return;\n    }\n    const dropNodeLevel = dropPath.length - 1;\n    const dropNodeIsLevelZero = dropNodeLevel === 0;\n\n    // Get drag node.\n    const dragPath = dragKey.split(PATH_SEP);\n    const dragNode = treeFindNodeByNamePath(additionalCellSets, dragPath);\n\n    if (dropNodeIsLevelZero && dropToGap && !dragNode.children) {\n      // Do not allow a leaf node to become a level zero node.\n      return;\n    }\n\n    let dropParentNode;\n    let dropParentPath;\n    let dropNodeCurrIndex;\n    if (!dropNodeIsLevelZero) {\n      dropParentPath = dropPath.slice(0, -1);\n      dropParentNode = treeFindNodeByNamePath(additionalCellSets, dropParentPath);\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = additionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    // Further, only allow dragging if the dragged node will have a unique\n    // name among its new siblings.\n    let hasSiblingNameConflict;\n    const dragNodeName = dragNode.name;\n    if (!dropNodeIsLevelZero && dropToGap) {\n      hasSiblingNameConflict = dropParentNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else if (!dropToGap) {\n      hasSiblingNameConflict = dropNode.children\n        .find(c => c !== dragNode && c.name === dragNodeName);\n    } else {\n      hasSiblingNameConflict = additionalCellSets.tree\n        .find(lzn => lzn !== dragNode && lzn.name === dragNodeName);\n    }\n\n    if (hasSiblingNameConflict) {\n      return;\n    }\n\n    // Remove the dragged object from its current position.\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], dragPath)).filter(Boolean),\n    };\n\n    // Update index values after temporarily removing the dragged node.\n    // Names are unique as children of their parents.\n    if (!dropNodeIsLevelZero) {\n      dropNodeCurrIndex = dropParentNode.children.findIndex(c => c.name === dropNode.name);\n    } else {\n      dropNodeCurrIndex = nextAdditionalCellSets.tree.findIndex(\n        lzn => lzn.name === dropNode.name,\n      );\n    }\n    let newDragPath = [];\n    if (!dropToGap || !dropNodeIsLevelZero) {\n      let addChildFunction;\n      let checkPathFunction;\n      const newPath = [];\n      if (!dropToGap) {\n        // Append the dragNode to dropNode's children if dropping _onto_ the dropNode.\n        // Set dragNode as the last child of dropNode.\n        addChildFunction = n => nodeAppendChild(n, dragNode);\n        checkPathFunction = path => isEqual(path, dropPath);\n      } else if (!dropNodeIsLevelZero) {\n        // Prepend or insert the dragNode if dropping _between_ (above or below dropNode).\n        // The dropNode is at a level greater than zero,\n        // so it has a parent.\n        checkPathFunction = path => isEqual(path, dropParentPath);\n        if (dropPosition === -1) {\n          // Set dragNode as first child of dropParentNode.\n          addChildFunction = n => nodePrependChild(n, dragNode);\n        } else {\n          // Set dragNode before or after dropNode.\n          const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n          addChildFunction = n => nodeInsertChild(n, dragNode, insertIndex);\n        }\n      }\n      nextAdditionalCellSets.tree = nextAdditionalCellSets.tree.map(\n        node => nodeTransform(\n          node,\n          (n, path) => checkPathFunction(path),\n          (n) => {\n            const newNode = addChildFunction(n);\n            return newNode;\n          },\n          newPath,\n        ),\n      );\n      // Done\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [...newPath[0], dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else if (dropPosition === -1) {\n      // We need to drop the dragNode to level zero,\n      // and level zero nodes do not have parents.\n      // Set dragNode as first level zero node of the tree.\n      nextAdditionalCellSets.tree.unshift(dragNode);\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    } else {\n      // Set dragNode before or after dropNode in level zero.\n      const insertIndex = dropNodeCurrIndex + (dropPosition > dropNodeCurrIndex ? 1 : 0);\n      const newLevelZero = Array.from(nextAdditionalCellSets.tree);\n      newLevelZero.splice(insertIndex, 0, dragNode);\n      nextAdditionalCellSets.tree = newLevelZero;\n      setAdditionalCellSets(nextAdditionalCellSets);\n      newDragPath = [dragNode.name];\n      setCellSetSelection([newDragPath]);\n    }\n    const oldColors = cellSetColor.filter(\n      i => isEqualOrPrefix(dragPath, i.path),\n    );\n    const newColors = oldColors.map(\n      i => (\n        {\n          ...i,\n          path: !isEqual(i.path, dragPath)\n            ? newDragPath.concat(i.path.slice(dragPath.length))\n            : newDragPath,\n        }\n      ),\n    );\n    const newCellSetColor = cellSetColor.filter(\n      i => !isEqualOrPrefix(dragPath, i.path),\n    );\n    newCellSetColor.push(...newColors);\n    setCellSetColor(newCellSetColor);\n  }\n\n  // The user wants to change the color of a cell set node.\n  function onNodeSetColor(targetPath, color) {\n    // Replace the color if an array element for this path already exists.\n    const prevNodeColor = cellSetColor?.find(d => isEqual(d.path, targetPath));\n    if (!prevNodeColor) {\n      setCellSetColor([\n        ...(cellSetColor || []),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    } else {\n      setCellSetColor([\n        ...cellSetColor.filter(d => !isEqual(d.path, targetPath)),\n        {\n          path: targetPath,\n          color,\n        },\n      ]);\n    }\n  }\n\n  // The user wants to change the name of a cell set node.\n  function onNodeSetName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n\n    // Recursively check whether each node path\n    // matches the path or a prefix of the path of the node to rename.\n    // If so, rename the node using the new path.\n    function renameNode(node, prevPath) {\n      if (isEqual([...prevPath, node.name], targetPath)) {\n        return {\n          ...node,\n          name,\n        };\n      }\n      if (!node.children) {\n        return node;\n      }\n      return {\n        ...node,\n        children: node.children.map(c => renameNode(c, [...prevPath, node.name])),\n      };\n    }\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => renameNode(lzn, [])),\n    };\n    // Change all paths that have this node as a prefix (i.e. descendants).\n    const nextCellSetColor = cellSetColor.map(d => ({\n      path: tryRenamePath(targetPath, d.path, nextNamePath),\n      color: d.color,\n    }));\n    const nextCellSetSelection = cellSetSelection.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    const nextCellSetExpansion = cellSetExpansion.map(d => (\n      tryRenamePath(targetPath, d, nextNamePath)\n    ));\n    // Need to update the node path everywhere it may be present.\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // Each time the user types while renaming a cell set node,\n  // we need to check whether the potential new name conflicts\n  // with any existing cell set node names.\n  // If there are conflicts, we want to disable the \"Save\" button.\n  function onNodeCheckNewName(targetPath, name) {\n    const nextNamePath = [...targetPath];\n    nextNamePath.pop();\n    nextNamePath.push(name);\n    const hasConflicts = (\n      !isEqual(targetPath, nextNamePath)\n      && treeFindNodeByNamePath(additionalCellSets, nextNamePath)\n    );\n    return hasConflicts;\n  }\n\n  // The user wants to delete a cell set node, and has confirmed their choice.\n  function onNodeRemove(targetPath) {\n    // Recursively check whether each node path\n    // matches the path of the node to delete.\n    // If so, return null, and then always use\n    // .filter(Boolean) to eliminate any null array elements.\n    const nextAdditionalCellSets = {\n      ...additionalCellSets,\n      tree: additionalCellSets.tree.map(lzn => filterNode(lzn, [], targetPath)).filter(Boolean),\n    };\n    // Delete state for all paths that have this node\n    // path as a prefix (i.e. delete all descendents).\n    const nextCellSetColor = cellSetColor.filter(d => !isEqualOrPrefix(targetPath, d.path));\n    const nextCellSetSelection = cellSetSelection.filter(d => !isEqualOrPrefix(targetPath, d));\n    const nextCellSetExpansion = cellSetExpansion.filter(d => !isEqualOrPrefix(targetPath, d));\n    setAdditionalCellSets(nextAdditionalCellSets);\n    setCellSetColor(nextCellSetColor);\n    setCellSetSelection(nextCellSetSelection);\n    setCellSetExpansion(nextCellSetExpansion);\n  }\n\n  // The user wants to view (i.e. select) a particular node,\n  // or its expanded descendents.\n  function onNodeView(targetPath) {\n    // If parent node is clicked, and if it is expanded,\n    // then select the expanded descendent nodes.\n    const setsToView = [];\n    // Recursively determine which descendent nodes are currently expanded.\n    function viewNode(node, nodePath) {\n      if (cellSetExpansion.find(expandedPath => isEqual(nodePath, expandedPath))) {\n        if (node.children) {\n          node.children.forEach((c) => {\n            viewNode(c, [...nodePath, c.name]);\n          });\n        } else {\n          setsToView.push(nodePath);\n        }\n      } else {\n        setsToView.push(nodePath);\n      }\n    }\n    const targetNode = treeFindNodeByNamePath(mergedCellSets, targetPath);\n    viewNode(targetNode, targetPath);\n    setCellSetSelection(setsToView);\n    setCellSetColorEncoding();\n  }\n\n  // The user wants to create a new level zero node.\n  function onCreateLevelZeroNode() {\n    const nextName = getNextNumberedNodeName(additionalCellSets?.tree, 'My hierarchy ');\n    setAdditionalCellSets({\n      ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n      tree: [\n        ...(additionalCellSets ? additionalCellSets.tree : []),\n        {\n          name: nextName,\n          children: [],\n        },\n      ],\n    });\n  }\n\n  // The user wants to create a new node corresponding to\n  // the union of the selected sets.\n  function onUnion() {\n    const newSet = treeToUnion(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Union ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the intersection of the selected sets.\n  function onIntersection() {\n    const newSet = treeToIntersection(mergedCellSets, cellSetSelection);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Intersection ',\n    );\n  }\n\n  // The user wants to create a new node corresponding to\n  // the complement of the selected sets.\n  function onComplement() {\n    const newSet = treeToComplement(mergedCellSets, cellSetSelection, allCellIds);\n    setCellSelection(\n      newSet, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n      'Complement ',\n    );\n  }\n\n  // The user wants to import a cell set hierarchy,\n  // probably from a CSV or JSON file.\n  function onImportTree(treeToImport) {\n    // Check for any naming conflicts with the current sets\n    // (both user-defined and dataset-defined) before importing.\n    const hasConflict = treesConflict(mergedCellSets, treeToImport);\n    if (!hasConflict) {\n      setAdditionalCellSets({\n        ...(additionalCellSets || treeInitialize(SETS_DATATYPE_CELL)),\n        tree: [\n          ...(additionalCellSets ? additionalCellSets.tree : []),\n          ...treeToImport.tree,\n        ],\n      });\n      // Automatically initialize set colors for the imported sets.\n      const importAutoSetColors = initializeCellSetColor(treeToImport, cellSetColor);\n      setCellSetColor([\n        ...cellSetColor,\n        ...importAutoSetColors,\n      ]);\n    }\n  }\n\n  // The user wants to download a particular hierarchy to a JSON file.\n  function onExportLevelZeroNodeJSON(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(\n      handleExportJSON(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_JSON}`,\n    );\n  }\n\n  // The user wants to download a particular hierarchy to a CSV file.\n  function onExportLevelZeroNodeTabular(nodePath) {\n    const {\n      treeToExport, nodeName,\n    } = treeExportLevelZeroNode(mergedCellSets, nodePath, SETS_DATATYPE_CELL, cellSetColor, theme);\n    downloadForUser(\n      handleExportTabular(treeToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-hierarchy.${FILE_EXTENSION_TABULAR}`,\n    );\n  }\n\n  // The user wants to download a particular set to a JSON file.\n  function onExportSetJSON(nodePath) {\n    const { setToExport, nodeName } = treeExportSet(mergedCellSets, nodePath);\n    downloadForUser(\n      handleExportJSON(setToExport),\n      `${nodeName}_${packageJson.name}-${SETS_DATATYPE_CELL}-set.${FILE_EXTENSION_JSON}`,\n      FILE_EXTENSION_JSON,\n    );\n  }\n  return (\n    <TitleInfo\n      title={title}\n      isScroll\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <SetsManager\n        setColor={cellSetColor}\n        sets={cellSets}\n        additionalSets={additionalCellSets}\n        levelSelection={checkedLevel}\n        setSelection={cellSetSelection}\n        setExpansion={cellSetExpansion}\n        hasColorEncoding={cellColorEncoding === 'cellSetSelection'}\n        draggable\n        datatype={SETS_DATATYPE_CELL}\n        onError={setWarning}\n        onCheckNode={onCheckNode}\n        onExpandNode={onExpandNode}\n        onDropNode={onDropNode}\n        onCheckLevel={onCheckLevel}\n        onNodeSetColor={onNodeSetColor}\n        onNodeSetName={onNodeSetName}\n        onNodeCheckNewName={onNodeCheckNewName}\n        onNodeRemove={onNodeRemove}\n        onNodeView={onNodeView}\n        onImportTree={onImportTree}\n        onCreateLevelZeroNode={onCreateLevelZeroNode}\n        onExportLevelZeroNodeJSON={onExportLevelZeroNodeJSON}\n        onExportLevelZeroNodeTabular={onExportLevelZeroNodeTabular}\n        onExportSetJSON={onExportSetJSON}\n        onUnion={onUnion}\n        onIntersection={onIntersection}\n        onComplement={onComplement}\n        hasCheckedSetsToUnion={cellSetSelection?.length > 1}\n        hasCheckedSetsToIntersect={cellSetSelection?.length > 1}\n        hasCheckedSetsToComplement={cellSetSelection?.length > 0}\n        theme={theme}\n      />\n    </TitleInfo>\n  );\n}\n","import React, { useMemo, useEffect } from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { useUrls, useReady, useGridItemSize } from '../hooks';\nimport { mergeCellSets } from '../utils';\nimport { useCellSetsData } from '../data-hooks';\nimport { treeToSetSizesBySetNames } from './cell-set-utils';\nimport CellSetSizesPlot from './CellSetSizesPlot';\n\nconst CELL_SET_SIZES_DATA_TYPES = ['cell-sets'];\n\n/**\n * A subscriber component for `CellSetSizePlot`,\n * which listens for cell sets data updates and\n * `GRID_RESIZE` events.\n * @param {object} props\n * @param {function} props.removeGridComponent The grid component removal function.\n * @param {function} props.onReady The function to call when the subscriptions\n * have been made.\n * @param {string} props.theme The name of the current Vitessce theme.\n * @param {string} props.title The component title.\n */\nexport default function CellSetSizesPlotSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Cell Set Sizes',\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    obsSetSelection: cellSetSelection,\n    obsSetColor: cellSetColor,\n    additionalObsSets: additionalCellSets,\n  }, {\n    setObsSetSelection: setCellSetSelection,\n    setObsSetColor: setCellSetColor,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.cellSetSizes, coordinationScopes);\n\n  const [width, height, containerRef] = useGridItemSize();\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    CELL_SET_SIZES_DATA_TYPES,\n  );\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, true,\n    { setObsSetSelection: setCellSetSelection, setObsSetColor: setCellSetColor },\n    { obsSetSelection: cellSetSelection, obsSetColor: cellSetColor },\n  );\n\n  const mergedCellSets = useMemo(\n    () => mergeCellSets(cellSets, additionalCellSets),\n    [cellSets, additionalCellSets],\n  );\n\n  // From the cell sets hierarchy and the list of selected cell sets,\n  // generate the array of set sizes data points for the bar plot.\n  const data = useMemo(() => (mergedCellSets && cellSetSelection && cellSetColor\n    ? treeToSetSizesBySetNames(mergedCellSets, cellSetSelection, cellSetColor, theme)\n    : []\n  ), [mergedCellSets, cellSetSelection, cellSetColor, theme]);\n\n  return (\n    <TitleInfo\n      title={title}\n      removeGridComponent={removeGridComponent}\n      urls={urls}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div ref={containerRef} className=\"vega-container\">\n        <CellSetSizesPlot\n          data={data}\n          theme={theme}\n          width={width}\n          height={height}\n        />\n      </div>\n    </TitleInfo>\n  );\n}\n","module.exports = require(\"d3-dsv\");","module.exports = require(\"json2csv\");","module.exports = require(\"clsx\");","module.exports = require(\"rc-tree/es/util\");","module.exports = require(\"react-color\");","module.exports = require(\"rc-tooltip\");","module.exports = require(\"vega-tooltip\");","export { default as CellSetsManagerSubscriber } from './CellSetsManagerSubscriber';\nexport { default as SetsManager } from './SetsManager';\nexport { default as CellSetSizesPlot } from './CellSetSizesPlot';\nexport { default as CellSetSizesPlotSubscriber } from './CellSetSizesPlotSubscriber';\n"],"sourceRoot":""}