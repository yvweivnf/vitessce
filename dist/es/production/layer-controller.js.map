{"version":3,"sources":["../webpack/bootstrap","app/constants.js","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","utils.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../external \"@luma.gl/constants\"","../external \"lodash/isEqual\"","../external \"@deck.gl/core\"","components/hooks.js","../external \"@material-ui/core/styles\"","components/sets/constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/DatasetNotFoundError.js","loaders/errors/index.js","../external \"@hms-dbmi/viv\"","components/data-hooks.js","../external \"@material-ui/core/Grid\"","layers/constants.js","app/state/coordination.js","components/classNames.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/spatial/constants.js","../external \"zustand\"","../external \"lodash/debounce\"","loaders/errors/AbstractLoaderError.js","../external \"lodash/range\"","components/LoadingIndicator.js","components/TitleInfo.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","app/constant-relationships.js","app/plugins.js","../external \"@material-ui/core/Slider\"","../external \"@material-ui/core/IconButton\"","../external \"@material-ui/core/colors\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/Paper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../external \"@luma.gl/core\"","../external \"@material-ui/core/MenuItem\"","../external \"zustand/context\"","components/layer-controller/styles.js","../external \"mathjs\"","../external \"@material-ui/core/Popper\"","components/shared-mui/styles.js","../external \"math.gl\"","../external \"d3-array\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","components/layer-controller/utils.js","../external \"@material-ui/core/Select\"","../external \"@material-ui/core/Checkbox\"","layers/bitmask-layer-shaders.js","layers/BitmaskLayer.js","components/spatial/utils.js","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"@material-ui/core/Fade\"","../external \"fast-deep-equal\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"@material-ui/core/InputLabel\"","../external \"@material-ui/core/Button\"","components/layer-controller/constants.js","../external \"@material-ui/core/Typography\"","components/layer-controller/VectorLayerController.js","../external \"@material-ui/icons/Add\"","../external \"short-number\"","../external \"regenerator-runtime\"","components/layer-controller/LayerOptions.js","components/layer-controller/VolumeOptions.js","components/layer-controller/LayerController.js","../external \"@material-ui/core/Tab\"","components/layer-controller/ColorPalette.js","components/layer-controller/ChannelOptions.js","components/layer-controller/shared-channel-controls.js","components/layer-controller/RasterChannelController.js","components/layer-controller/BitmaskChannelController.js","components/layer-controller/ImageAddButton.js","components/layer-controller/LayerControllerSubscriber.js","../external \"@material-ui/icons/MoreVert\"","../external \"@material-ui/icons/Lens\"","../external \"@material-ui/core/AccordionSummary\"","../external \"@material-ui/core/AccordionDetails\"","../external \"@material-ui/icons/RemoveCircle\"","../external \"@material-ui/core/Tabs\"","../external \"@material-ui/core/Accordion\"","../external \"@material-ui/icons/ExpandMore\"","../external \"@material-ui/icons/Visibility\"","../external \"@material-ui/icons/VisibilityOff\"","../external \"@material-ui/core/FormControl\"","components/layer-controller/index.js"],"names":["Component","DESCRIPTION","STATUS","GENES","CELL_SETS","SCATTERPLOT","SPATIAL","HEATMAP","LAYER_CONTROLLER","CELL_SET_SIZES","GENOMIC_PROFILES","CELL_SET_EXPRESSION","EXPRESSION_HISTOGRAM","GATING","DataType","CELLS","EXPRESSION_MATRIX","MOLECULES","NEIGHBORHOODS","RASTER","FileType","CELLS_JSON","CELL_SETS_JSON","EXPRESSION_MATRIX_ZARR","GENOMIC_PROFILES_ZARR","MOLECULES_JSON","NEIGHBORHOODS_JSON","RASTER_JSON","RASTER_OME_ZARR","CLUSTERS_JSON","GENES_JSON","ANNDATA_CELL_SETS_ZARR","ANNDATA_CELLS_ZARR","ANNDATA_EXPRESSION_MATRIX_ZARR","CoordinationType","DATASET","OBS_TYPE","FEATURE_TYPE","FEATURE_VALUE_TYPE","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_OBS_SET_POLYGONS_VISIBLE","EMBEDDING_OBS_SET_LABELS_VISIBLE","EMBEDDING_OBS_SET_LABEL_SIZE","EMBEDDING_OBS_RADIUS","EMBEDDING_OBS_RADIUS_MODE","EMBEDDING_OBS_OPACITY","EMBEDDING_OBS_OPACITY_MODE","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","SPATIAL_ROTATION_X","SPATIAL_ROTATION_Y","SPATIAL_ROTATION_Z","SPATIAL_ROTATION_ORBIT","SPATIAL_ORBIT_AXIS","SPATIAL_AXIS_FIXED","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","OBS_FILTER","OBS_HIGHLIGHT","OBS_SET_SELECTION","OBS_SET_HIGHLIGHT","OBS_SET_COLOR","FEATURE_FILTER","FEATURE_HIGHLIGHT","FEATURE_SELECTION","FEATURE_VALUE_COLORMAP","FEATURE_VALUE_TRANSFORM","FEATURE_VALUE_COLORMAP_RANGE","OBS_COLOR_ENCODING","SPATIAL_IMAGE_LAYER","SPATIAL_SEGMENTATION_LAYER","SPATIAL_POINT_LAYER","SPATIAL_NEIGHBORHOOD_LAYER","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_OBS_SETS","MOLECULE_HIGHLIGHT","GATING_FEATURE_SELECTION_X","GATING_FEATURE_SELECTION_Y","FEATURE_VALUE_TRANSFORM_COEFFICIENT","fromEntries","iterable","reduce","obj","key","val","Object","assign","pluralize","singular","plural","count","capitalize","word","charAt","toUpperCase","slice","getLongestString","strings","prevLongest","currentValue","length","getNextScope","prevScopes","chars","nextCharIndices","next","r","forEach","charIndex","unshift","increment","i","push","join","nextScope","includes","getSourceFromLoader","loader","level","data","source","Array","isArray","isRgb","shape","dtype","labels","channelSize","indexOf","createContext","ViewConfigProviderLocal","Provider","useViewConfigStoreLocal","useStore","useViewConfigStoreApiLocal","useStoreApi","ViewConfigProvider","useViewConfigStore","useViewConfigStoreApi","AuxiliaryProviderLocal","useAuxiliaryStoreLocal","AuxiliaryProvider","useAuxiliaryStore","createViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","uid","newLayout","layout","filter","c","changeLayout","newComponentProps","newProps","useComponentLayout","component","scopes","coordinationScopes","l","every","createAuxiliaryStore","auxiliaryStore","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","values","map","undefined","shallow","setters","useMemo","setterName","setterFunc","useDatasetUids","datasetScopes","datasetUids","datasetScopesArr","datasetScope","useMultiDatasetCoordination","datasetValues","parameterSpace","parameterScope","console","error","datasetSetters","AUXILIARY_COORDINATION_TYPES_MAP","spatialImageLayer","mapCoordinationScopes","newCoordinationScopes","keys","newCoordinationTypes","coordinationType","mapParameters","Boolean","flat","useAuxiliaryCoordination","mappedCoordinationScopes","mappedParameters","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","viewConfigStoreApi","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","makeCellStatusMessage","cellInfoFactors","entries","factor","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_DARK_COLOR","DEFAULT_LIGHT_COLOR","getDefaultColor","theme","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateTracksHover","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","__esModule","default","formatBytes","bytes","decimals","k","dm","sizes","Math","floor","log","parseFloat","pow","toFixed","getStatsForResolution","resolution","height","width","depth","depthDownsampled","max","totalBytes","canLoadResolution","maxHeapSize","window","performance","memory","jsHeapSizeLimit","maxSize","getWindowDimensions","innerWidth","innerHeight","useVitessceContainer","ref","closest","VITESSCE_CONTAINER","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","onResizeDebounced","debounce","trailing","addEventListener","removeEventListener","useGridItemSize","containerRef","setHeight","setWidth","onWindowResize","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","JSON","stringify","setItemIsNotReady","notReadyItem","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","useClosestVitessceContainerSize","componentHeight","clientHeight","componentWidth","clientWidth","useExpressionValueGetter","attrs","expressionData","cellIdMap","result","rows","getExpressionValue","entry","cellIndex","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","LoaderValidationError","datasetType","datasetFileType","datasetUrl","reason","AbstractLoaderError","LoaderNotFoundError","DatasetNotFoundError","datasetUid","warnInConsole","initCoordinationSpace","initialValues","defaultCoordinationValues","getDefaultCoordinationValues","initialValue","shouldInit","equal","useDescription","dataset","description","setDescription","useCellsData","isRequired","coordinationSetters","initialCoordinationValues","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","coordinationValues","coordinationValuesOrDefault","spatialSegmentationLayer","DEFAULT_CELLS_LAYER","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","cols","matrix","useGeneSelection","selection","geneData","setGeneData","implementsGeneSelection","loadGeneSelection","expressionDataForSelection","sel","geneIndex","numGenes","numCells","useExpressionAttrs","setAttrs","implementsLoadAttrs","loadAttrs","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","a","b","spatialPointLayer","DEFAULT_MOLECULES_LAYER","useNeighborhoodsData","neighborhoods","setNeighborhoods","spatialNeighborhoodLayer","DEFAULT_NEIGHBORHOODS_LAYER","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","nextImageLoaders","nextImageMeta","meta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","GLSL_COLORMAPS","GLSL_COLORMAP_DEFAULT","COLORMAP_SHADER_PLACEHOLDER","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","GLOBAL_LABELS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","visible","colormap","opacity","domainType","transparentColor","renderingMode","RENDERING_MODES","ADDITIVE","use3d","radius","DEFAULT_LAYER_TYPE_ORDERING","Error","LoadingIndicator","useStyles","makeStyles","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","overflow","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","setOpen","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","FILE_TYPE_DATA_TYPE_MAPPING","PLUGINS_KEY","PLUGIN_VIEW_TYPES_KEY","PLUGIN_COORDINATION_TYPES_KEY","PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY","PLUGIN_FILE_TYPES_KEY","PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY","PLUGIN_CONVENIENCE_FILE_TYPES_KEY","PLUGINS","registerPluginCoordinationType","typeName","defaultValue","registerPluginViewType","viewType","viewSubscriberReactComponent","coordinationTypes","pluginTypesPerView","registerPluginFileType","fileTypeName","dataTypeName","dataLoaderClass","dataSourceClass","registerPluginConvenienceFileType","expansionFunction","getPluginViewTypes","getPluginViewType","getPluginCoordinationTypes","getPluginCoordinationTypeDefaults","getPluginCoordinationTypesForViewType","getPluginFileTypes","getPluginConvenienceFileTypes","getDataTypeForPluginFileType","fileType","getLoaderClassesForPluginFileType","getExpansionFunctionForPluginConvenienceFileType","getFileTypes","getCoordinationTypes","getComponentCoordinationTypes","getFileTypeDataTypeMapping","getConvenienceFileTypes","MuiSpan","styles","span","PopperMenu","buttonIcon","buttonClassName","placement","anchorRef","handleClick","handleClose","id","getTooltipContainer","TransitionProps","paper","useSelectStyles","selectRoot","padding","margin","useOptionStyles","withStyles","textAlign","colors","popper","zIndex","sharedControllerStyles","flexDirection","useControllerSectionStyles","root","StyledAccordionDetails","AccordionDetails","StyledAccordionSummary","content","minWidth","expanded","marginBottom","spacing","top","expandIcon","AccordionSummary","StyledInputLabel","fontSize","InputLabel","OverflowEllipsisGrid","whiteSpace","textOverflow","Grid","StyledSelectionSlider","marginTop","markActive","Slider","maxHeight","position","left","muiTheme","dark","createTheme","type","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","getSingleSelectionStats2D","getRaster","selectionStats","getChannelStats","domain","slider","contrastLimits","getSingleSelectionStats3D","lowResSource","sizeZ","z","raster0","rasterMid","rasterTop","stats0","statsMid","statsTop","min","getSingleSelectionStats","getStats","getMultiSelectionStats","selections","Promise","all","stats","domains","stat","sliders","getPhysicalSizeScalingMatrix","physicalSizes","x","y","size","ratio","Matrix4","scale","identity","getBoundingCube","physicalSizeScalingMatrix","xSlice","ySlice","zSlice","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","format","toExponential","vs","fs","padWithDefault","padWidth","defaultProps","hoveredCell","compare","cellColorData","BitmaskLayer","modules","project32","picking","defines","oldProps","changeFlags","setColorTexture","cellTexHeight","cellTexWidth","expressionTex","dataToTexture","setState","gl","context","model","delete","_getModel","getAttributeManager","invalidateAll","colorTex","Texture2D","mipmaps","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","RGB","dataFormat","UNSIGNED_BYTE","opts","uniforms","channelsVisible","colorScaleLo","colorScaleHi","isExpressionMode","textures","setUniforms","hovered","colorTexHeight","colorTexWidth","uColorScaleRange","uIsExpressionMode","draw","isWebGL2On","isWebGL2","Float32Array","R32F","LUMINANCE","RED","FLOAT","XRLayer","layerName","square","sortLayers","layers","sort","getDefaultGlobalSelection","globalIndices","dim","buildDefaultSelection","globalSelection","firstNonGlobalDimension","isInterleaved","lastDimSize","initializeLayerChannels","defaultSelection","channel","getMetaWithTransformMatrices","imageMeta","imageLoaders","sources","metadata","transform","translate","some","minPhysicalSize","acc","hasZPhyscialSize","unit","replace","imageMetaWithTransform","j","divide","isEqual","newMeta","toArray","initializeRasterLayersAndChannels","rasterLayers","rasterRenderLayers","usePhysicalSizeScaling","nextImageMetaAndLayers","autoImageLayerDefPromises","layer","loaderCreator","layerIndex","autoImageLayerDefPromise","channels","resolve","isBitmask","index","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","useRaster","initialTargetX","Infinity","initialTargetY","initialTargetZ","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","xy","cellCoordinates","xExtent","extent","yExtent","xRange","yRange","getViewExtentFromPolygonExtents","extents","polygonExtentsX","poly","polygonExtentsY","log2","getLayerLoaderTuple","VolumeLayer","Layer","MultiscaleImageLayer","ImageLayer","renderSubBitmaskLayers","tile","bbox","right","bottom","v","base","bounds","tileSize","channelData","tileId","getDomains","needMin","DTYPE_VALUES","DOMAINS","VectorLayerController","label","layerType","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","DOMAIN_OPTIONS","VolumeDropdown","loaderWithMeta","handleMultiPropertyChange","currResolution","disable3d","setRasterLayerCallback","setAreAllChannelsLoading","setViewState","spatialHeight","spatialWidth","handleChange","shouldUse3D","propertiesChanged","ch","defaultViewState","rotationX","rotationOrbit","newChannels","spatialAxisFixed","orbitAxis","hasZStack","from","fill","_","ColormapSelect","inputId","TransparentColorCheckbox","float","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","field","possibleValues","event","newValue","LayerOption","LayerOptions","handleColormapChange","handleOpacityChange","handleTransparentColorChange","globalControlLabels","globalLabelValues","handleGlobalChannelsSelectionChange","handleDomainChange","disableChannelsIfRgbDetected","shouldShowTransparentColor","shouldShowDomain","shouldShowColormap","hasDimensionsAndChannels","hasViewableResolutions","res","range","useSlicerStyles","createStyles","enabled","disabled","text","Slicer","handleSlicerSetting","xSliceInit","ySliceInit","zSliceInit","sliceValuesAndSetSliceFunctions","xSliceNew","ySliceNew","zSliceNew","Slicers","setVal","renderingOptions","RenderingModeSelect","handleRenderingModeChange","ReCenterButton","VolumeOptions","TabPanel","other","getDomainsAndSliders","buttonStyles","borderStyle","fontWeight","LayerController","handleLayerRemove","ChannelController","setAreLayerChannelsLoading","areLayerChannelsLoading","shouldShowRemoveLayerButton","channelRef","firstSelection","channelOptions","tab","setTab","handleTabChange","newTab","setDomainType","isExpanded","setIsExpanded","o","setGlobalLabelValues","setVisible","setColormap","setOpacity","setChannels","setTransparentColor","setRenderingMode","setChannelsAndDomainType","newDomainType","setChannel","addChannel","removeChannel","splice","newAreLayerChannelsLoading","handleChannelAdd","newChannelId","areLayerChannelsLoadingCallback","canUpdateChannels","newChannelsWithSelection","newChannelsWithSliders","channelControllers","channelLabel","channelId","setIsLoading","handleChannelPropertyChange","property","update","handleChannelRemove","handleIQRUpdate","loaderData","q1","q3","controllerSectionClasses","visibleSetting","Visibility","VisibilityIcon","VisibilityOffIcon","useVolumeTabs","FullController","MAX_CHANNELS","attributes","role","enter","stopPropagation","nextVisible","minHeight","display","justifyContent","alignItems","flexWrap","button","icon","stroke","action","selected","ColorPalette","menuButton","ChannelOptions","handlePropertyChange","handleColorSelect","handleRemove","ChannelSelectionDropdown","selectionIndex","opt","ChannelVisibilityCheckbox","checked","toggle","toRgbUIString","on","ChannelSlider","sliderCopy","handleChangeDebounced","step","RasterChannelController","visibility","dimName","colormapOn","isLoading","newUse3d","setDomain","setUse3d","setSelection","rgbColor","mounted","hasDomainChanged","has3dChanged","hasSelectionChanged","newDomain","createSelection","BitmaskChannelController","disableOptions","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","LAYER_CONTROLLER_DATA_TYPES","LayerControllerMemoized","React","memo","forwardRef","moleculesLayer","setMoleculesLayer","cellsLayer","canShowCellVecmask","setCellsLayer","rasterLayersCallbacks","setRasterLayersCallbacks","areLoadingRasterChannnels","setAreLoadingRasterChannnels","handleRasterLayerChange","handleRasterLayerRemove","globalDisable3d","layerIs3DIndex","setZoom","setTargetX","setTargetY","setTargetZ","setRotationX","setRotationOrbit","spatialLayout","enableLayerButtonsWithOneLayer","shouldShowImageLayerButton","layerMeta","isRaster","cb","newRasterLayersCallbacks","newAreLoadingRasterChannnels","newZoom","newRotationX","newRotationOrbit","h","w","LayerControllerSubscriber","layerController","setRasterLayers","setSpatialImageLayer","setSpatialSegmentationLayer","setSpatialPointLayer","setSpatialTargetX","setSpatialTargetY","setSpatialTargetZ","setSpatialRotationX","setSpatialRotationOrbit","setSpatialZoom","layerControllerRef","windowHeight","windowWidth","newLayer","newLayers","hasNoBitmask"],"mappings":"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","file":"layer-controller.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 213);\n","/**\n * This file defines the current constant values.\n * To deprecate a value, add it to ./constants-old.js\n * with a corresponding log message.\n */\nexport const Component = {\n  DESCRIPTION: 'description',\n  STATUS: 'status',\n  GENES: 'genes',\n  CELL_SETS: 'cellSets',\n  SCATTERPLOT: 'scatterplot',\n  SPATIAL: 'spatial',\n  HEATMAP: 'heatmap',\n  LAYER_CONTROLLER: 'layerController',\n  CELL_SET_SIZES: 'cellSetSizes',\n  GENOMIC_PROFILES: 'genomicProfiles',\n  CELL_SET_EXPRESSION: 'cellSetExpression',\n  EXPRESSION_HISTOGRAM: 'expressionHistogram',\n  GATING: 'gating',\n};\n\nexport const DataType = {\n  CELLS: 'cells',\n  CELL_SETS: 'cell-sets',\n  EXPRESSION_MATRIX: 'expression-matrix',\n  GENOMIC_PROFILES: 'genomic-profiles',\n  MOLECULES: 'molecules',\n  NEIGHBORHOODS: 'neighborhoods',\n  RASTER: 'raster',\n};\n\n\nexport const FileType = {\n  CELLS_JSON: 'cells.json',\n  CELL_SETS_JSON: 'cell-sets.json',\n  EXPRESSION_MATRIX_ZARR: 'expression-matrix.zarr',\n  GENOMIC_PROFILES_ZARR: 'genomic-profiles.zarr',\n  MOLECULES_JSON: 'molecules.json',\n  NEIGHBORHOODS_JSON: 'neighborhoods.json',\n  RASTER_JSON: 'raster.json',\n  RASTER_OME_ZARR: 'raster.ome-zarr',\n  CLUSTERS_JSON: 'clusters.json',\n  GENES_JSON: 'genes.json',\n  ANNDATA_CELL_SETS_ZARR: 'anndata-cell-sets.zarr',\n  ANNDATA_CELLS_ZARR: 'anndata-cells.zarr',\n  ANNDATA_EXPRESSION_MATRIX_ZARR: 'anndata-expression-matrix.zarr',\n};\n\n/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const CoordinationType = {\n  DATASET: 'dataset',\n  // Entity types\n  OBS_TYPE: 'obsType',\n  FEATURE_TYPE: 'featureType',\n  FEATURE_VALUE_TYPE: 'featureValueType',\n  // Other types\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_OBS_SET_POLYGONS_VISIBLE: 'embeddingObsSetPolygonsVisible',\n  EMBEDDING_OBS_SET_LABELS_VISIBLE: 'embeddingObsSetLabelsVisible',\n  EMBEDDING_OBS_SET_LABEL_SIZE: 'embeddingObsSetLabelSize',\n  EMBEDDING_OBS_RADIUS: 'embeddingObsRadius',\n  EMBEDDING_OBS_RADIUS_MODE: 'embeddingObsRadiusMode',\n  EMBEDDING_OBS_OPACITY: 'embeddingObsOpacity',\n  EMBEDDING_OBS_OPACITY_MODE: 'embeddingObsOpacityMode',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  SPATIAL_ROTATION_X: 'spatialRotationX',\n  SPATIAL_ROTATION_Y: 'spatialRotationY',\n  SPATIAL_ROTATION_Z: 'spatialRotationZ',\n  SPATIAL_ROTATION_ORBIT: 'spatialRotationOrbit',\n  SPATIAL_ORBIT_AXIS: 'spatialOrbitAxis',\n  SPATIAL_AXIS_FIXED: 'spatialAxisFixed',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  OBS_FILTER: 'obsFilter',\n  OBS_HIGHLIGHT: 'obsHighlight',\n  OBS_SET_SELECTION: 'obsSetSelection',\n  OBS_SET_HIGHLIGHT: 'obsSetHighlight',\n  OBS_SET_COLOR: 'obsSetColor',\n  FEATURE_FILTER: 'featureFilter',\n  FEATURE_HIGHLIGHT: 'featureHighlight',\n  FEATURE_SELECTION: 'featureSelection',\n  FEATURE_VALUE_COLORMAP: 'featureValueColormap',\n  FEATURE_VALUE_TRANSFORM: 'featureValueTransform',\n  FEATURE_VALUE_COLORMAP_RANGE: 'featureValueColormapRange',\n  OBS_COLOR_ENCODING: 'obsColorEncoding',\n  SPATIAL_IMAGE_LAYER: 'spatialImageLayer',\n  SPATIAL_SEGMENTATION_LAYER: 'spatialSegmentationLayer',\n  SPATIAL_POINT_LAYER: 'spatialPointLayer',\n  SPATIAL_NEIGHBORHOOD_LAYER: 'spatialNeighborhoodLayer',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_OBS_SETS: 'additionalObsSets',\n  // TODO: use obsHighlight rather than moleculeHighlight.\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n  GATING_FEATURE_SELECTION_X: 'gatingFeatureSelectionX',\n  GATING_FEATURE_SELECTION_Y: 'gatingFeatureSelectionY',\n  FEATURE_VALUE_TRANSFORM_COEFFICIENT: 'featureValueTransformCoefficient',\n};\n","module.exports = require(\"react\");","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Get the longest string in the array of strings.\n * @param {string[]} strings The array of strings.\n * @returns The longest string.\n */\nexport function getLongestString(strings) {\n  return strings.reduce(\n    (prevLongest, currentValue) => (\n      prevLongest.length > currentValue.length ? prevLongest : currentValue\n    ),\n  );\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n\n/**\n * Get a representative PixelSource from a loader object returned from\n * the Vitessce imaging loaders\n * @param {object} loader { data: (PixelSource[]|PixelSource), metadata, channels } object\n * @param {number=} level Level of the multiscale loader from which to get a PixelSource\n * @returns {object} PixelSource object\n */\nexport function getSourceFromLoader(loader, level) {\n  const { data } = loader;\n  const source = Array.isArray(data) ? data[(level || data.length - 1)] : data;\n  return source;\n}\n\n/*\n * Helper method to determine whether pixel data is interleaved and rgb or not.\n * @param {object} loader\n */\nexport function isRgb(loader) {\n  const source = getSourceFromLoader(loader);\n  const { shape, dtype, labels } = source;\n  const channelSize = shape[labels.indexOf('c')];\n  return (channelSize === 3) && dtype === 'Uint8';\n}\n","import { useRef, useCallback, useMemo } from 'react';\nimport create from 'zustand';\nimport createContext from 'zustand/context';\nimport shallow from 'zustand/shallow';\nimport { CoordinationType } from '../constants';\nimport { fromEntries, capitalize } from '../../utils';\n\n// Reference: https://github.com/pmndrs/zustand#react-context\n// Reference: https://github.com/pmndrs/zustand/blob/e47ea03/tests/context.test.tsx#L60\nconst {\n  Provider: ViewConfigProviderLocal,\n  useStore: useViewConfigStoreLocal,\n  useStoreApi: useViewConfigStoreApiLocal,\n} = createContext();\n\nexport const ViewConfigProvider = ViewConfigProviderLocal;\nexport const useViewConfigStore = useViewConfigStoreLocal;\nexport const useViewConfigStoreApi = useViewConfigStoreApiLocal;\n\nconst {\n  Provider: AuxiliaryProviderLocal,\n  useStore: useAuxiliaryStoreLocal,\n} = createContext();\n\nexport const AuxiliaryProvider = AuxiliaryProviderLocal;\nexport const useAuxiliaryStore = useAuxiliaryStoreLocal;\n\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const createViewConfigStore = () => create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: uid => set((state) => {\n    const newLayout = state.viewConfig.layout.filter(c => c.uid !== uid);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * Hook for getting components' layout from the view config based on\n * matching all coordination scopes.\n * @returns {Object} The components' layout.\n */\nexport const useComponentLayout = (component, scopes, coordinationScopes) => useViewConfigStore(\n  state => state.viewConfig.layout.filter(l => l.component === component).filter(\n    l => scopes.every(scope => l.coordinationScopes[scope]\n          === coordinationScopes[scope]),\n  ),\n);\n\n/**\n * The useAuxiliaryStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * It is meant to be used for non-viewconfig-based coordination between components.\n * For example, as currently happens, the layer controller can coordinate\n * on-load callbacks with spatial view based on whether or not they are\n * coordinated via `spatialImageLayer` - the callbacks are not part of the view config\n * though so they live here.\n * @returns {function} The useStore hook.\n */\nexport const createAuxiliaryStore = () => create(set => ({\n  auxiliaryStore: null,\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    auxiliaryStore: {\n      ...state.auxiliaryStore,\n      [parameter]: {\n        [scope]: value,\n      },\n    },\n  })),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Get a mapping from dataset coordination scopes to dataset UIDs.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {object} Mapping from dataset coordination scope names to dataset UIDs.\n */\nexport function useDatasetUids(coordinationScopes) {\n  const parameter = CoordinationType.DATASET;\n  const datasetScopes = coordinationScopes[parameter];\n\n  // Mapping from dataset coordination scope name to dataset uid\n  const datasetUids = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    // Convert a single scope to an array of scopes to be consistent.\n    const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][datasetScope];\n        return [datasetScope, value];\n      }\n      return [datasetScope, undefined];\n    }));\n  }, shallow);\n\n  return datasetUids;\n}\n\n/**\n * Use coordination values and coordination setter functions corresponding to\n * dataset-specific coordination scopes for each coordination type.\n * @param {string[]} parameters An array of coordination types supported by a view.\n * @param {object} coordinationScopes The coordination scope mapping object for a view.\n * @returns {array} [cValues, cSetters] where\n * cValues is a mapping from coordination scope name to { coordinationType: coordinationValue },\n * and cSetters is a mapping from coordination scope name to { setCoordinationType }\n * setter functions.\n */\nexport function useMultiDatasetCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const datasetScopes = coordinationScopes[CoordinationType.DATASET];\n\n  // Convert a single scope to an array of scopes to be consistent.\n  const datasetScopesArr = Array.isArray(datasetScopes) ? datasetScopes : [datasetScopes];\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(datasetScopesArr.map((datasetScope) => {\n      const datasetValues = fromEntries(parameters.map((parameter) => {\n        if (coordinationSpace && coordinationSpace[parameter]) {\n          let value;\n          const parameterSpace = coordinationSpace[parameter];\n          const parameterScope = coordinationScopes[parameter];\n          if (typeof parameterScope === 'object') {\n            value = parameterSpace[parameterScope[datasetScope]];\n          } else if (typeof parameterScope === 'string') {\n            value = parameterSpace[parameterScope];\n          } else {\n            console.error(`coordination scope for ${parameter} must be of type string or object.`);\n          }\n          return [parameter, value];\n        }\n        return [parameter, undefined];\n      }));\n      return [datasetScope, datasetValues];\n    }));\n  }, shallow);\n\n  const setters = useMemo(() => fromEntries(datasetScopesArr.map((datasetScope) => {\n    const datasetSetters = fromEntries(parameters.map((parameter) => {\n      const setterName = `set${capitalize(parameter)}`;\n      let setterFunc;\n      const parameterScope = coordinationScopes[parameter];\n      if (typeof parameterScope === 'object') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope[datasetScope],\n          value,\n        });\n      } else if (typeof parameterScope === 'string') {\n        setterFunc = value => setCoordinationValue({\n          parameter,\n          scope: parameterScope,\n          value,\n        });\n      } else {\n        console.error(`coordination scope for ${parameter} must be of type string or object.`);\n      }\n      return [setterName, setterFunc];\n    }));\n    return [datasetScope, datasetSetters];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\nconst AUXILIARY_COORDINATION_TYPES_MAP = {\n  spatialImageLayer: ['rasterLayersCallbacks', 'areLoadingRasterChannnels'],\n};\n\n/**\n * The maps the coordination types of incoming scopes to new types\n * for the auxiliary store.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {object} Mapping of coordination types\n * to new scope names for the auxiliary store.\n */\nconst mapCoordinationScopes = (coordinationScopes) => {\n  const newCoordinationScopes = {};\n  Object.keys(coordinationScopes).forEach((key) => {\n    const newCoordinationTypes = AUXILIARY_COORDINATION_TYPES_MAP[key] || [];\n    newCoordinationTypes.forEach((coordinationType) => {\n      newCoordinationScopes[coordinationType || key] = coordinationScopes[key];\n    });\n  });\n  return newCoordinationScopes;\n};\n\nconst mapParameters = parameters => parameters\n  .map(parameter => AUXILIARY_COORDINATION_TYPES_MAP[parameter]).filter(Boolean).flat();\n\n/**\n * The useAuxiliaryCoordination hook returns both the\n * values and setter functions for the auxiliary coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those auxiliary coordination\n * objects and setter functions of relevance, for example \"on load\" callbacks.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useAuxiliaryCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useAuxiliaryStore(state => state.setCoordinationValue);\n  const mappedCoordinationScopes = mapCoordinationScopes(coordinationScopes);\n  const mappedParameters = mapParameters(parameters);\n  const values = useAuxiliaryStore((state) => {\n    const { auxiliaryStore } = state;\n    return fromEntries(mappedParameters.map((parameter) => {\n      if (auxiliaryStore && auxiliaryStore[parameter]) {\n        const value = auxiliaryStore[parameter][mappedCoordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n  const setters = useMemo(() => fromEntries(mappedParameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: mappedCoordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  })), [parameters, coordinationScopes]);\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig(viewConfigStoreApi) {\n  const setViewConfigRef = useRef(viewConfigStoreApi.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","module.exports = require(\"regenerator-runtime\");\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_DARK_COLOR = [50, 50, 50];\nexport const DEFAULT_LIGHT_COLOR = [200, 200, 200];\n\nexport function getDefaultColor(theme) {\n  return theme === 'dark' ? DEFAULT_DARK_COLOR : DEFAULT_LIGHT_COLOR;\n}\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateTracksHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateTracksHover: ${hoverInfo}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n\n\nexport function formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  // eslint-disable-next-line no-restricted-properties\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nexport const getStatsForResolution = (loader, resolution) => {\n  const { shape, labels } = loader[resolution];\n  const height = shape[labels.indexOf('y')];\n  const width = shape[labels.indexOf('x')];\n  const depth = shape[labels.indexOf('z')];\n  // eslint-disable-next-line no-bitwise\n  const depthDownsampled = Math.max(1, depth >> resolution);\n  // Check memory allocation limits for Float32Array (used in XR3DLayer for rendering)\n  const totalBytes = 4 * height * width * depthDownsampled;\n  return {\n    height, width, depthDownsampled, totalBytes,\n  };\n};\n\nexport const canLoadResolution = (loader, resolution) => {\n  const {\n    totalBytes, height, width, depthDownsampled,\n  } = getStatsForResolution(\n    loader,\n    resolution,\n  );\n  const maxHeapSize = window.performance?.memory\n    && window.performance?.memory?.jsHeapSizeLimit / 2;\n  const maxSize = maxHeapSize || (2 ** 31) - 1;\n  // 2048 is a normal texture size limit although some browsers go larger.\n  return (\n    totalBytes < maxSize\n    && height <= 2048\n    && depthDownsampled <= 2048\n    && width <= 2048\n    && depthDownsampled > 1\n  );\n};\n","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","module.exports = require(\"@luma.gl/constants\");","module.exports = require(\"lodash/isEqual\");","module.exports = require(\"@deck.gl/core\");","import {\n  useRef, useState, useEffect, useCallback, useMemo,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\nimport { VITESSCE_CONTAINER } from './classNames';\n\nfunction getWindowDimensions() {\n  const { innerWidth: width, innerHeight: height } = window;\n  return {\n    width,\n    height,\n  };\n}\n\nexport function useVitessceContainer(ref) {\n  return useCallback(() => {\n    if (ref.current) {\n      return ref.current.closest(`.${VITESSCE_CONTAINER}`);\n    }\n    return null;\n  }, [ref]);\n}\n\n/**\n * Custom hook, gets the full window dimensions.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useWindowDimensions() {\n  const [windowDimensions, setWindowDimensions] = useState(\n    getWindowDimensions(),\n  );\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowDimensions(getWindowDimensions());\n    }\n    const onResizeDebounced = debounce(handleResize, 100, { trailing: true });\n\n    window.addEventListener('resize', onResizeDebounced);\n    return () => window.removeEventListener('resize', onResizeDebounced);\n  }, []);\n\n  return windowDimensions;\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * setItemIsNotReady marks one item as not ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const setItemIsNotReady = useCallback((notReadyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = [...waitingItems, notReadyItem];\n      // eslint-disable-next-line no-console\n      console.log(`waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, setItemIsNotReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n\n/**\n * Custom hook, subscribes to the width and height of the closest .vitessce-container\n * element and updates upon window resize events.\n * @param {Ref} ref A React ref object within the `.vitessce-container`.\n * @returns {array} `[width, height]` where width and height\n * are numbers.\n */\nexport function useClosestVitessceContainerSize(ref) {\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  useEffect(() => {\n    function onWindowResize() {\n      if (ref.current) {\n        const {\n          clientHeight: componentHeight, clientWidth: componentWidth,\n        } = ref.current.closest('.vitessce-container');\n        setWidth(componentWidth);\n        setHeight(componentHeight);\n      }\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [ref]);\n\n  return [width, height];\n}\n\nexport function useExpressionValueGetter({ attrs, expressionData }) {\n  // Get a mapping from cell ID to row index in the gene expression matrix.\n  const cellIdMap = useMemo(() => {\n    const result = {};\n    if (attrs && attrs.rows) {\n      // eslint-disable-next-line no-plusplus\n      for (let i = 0; i < attrs.rows.length; i++) {\n        result[attrs.rows[i]] = i;\n      }\n    }\n    return result;\n  }, [attrs]);\n\n  // Set up a getter function for gene expression values, to be used\n  // by the DeckGL layer to obtain values for instanced attributes.\n  const getExpressionValue = useCallback((entry) => {\n    const cellId = entry[0];\n    if (cellIdMap && expressionData && expressionData[0]) {\n      const cellIndex = cellIdMap[cellId];\n      const val = expressionData[0][cellIndex];\n      return val;\n    }\n    return 0;\n  }, [cellIdMap, expressionData]);\n  return getExpressionValue;\n}\n","module.exports = require(\"@material-ui/core/styles\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class DatasetNotFoundError extends AbstractLoaderError {\n  constructor(datasetUid) {\n    super(`Error finding dataset for ${datasetUid}. Please check that at least one dataset exists in the view config.`);\n    this.name = 'DatasetNotFoundError';\n\n    this.datasetUid = datasetUid;\n  }\n\n  warnInConsole() {\n    const {\n      datasetUid,\n    } = this;\n    if (datasetUid) {\n      console.warn(\n        `Unable to find dataset for ${datasetUid}`,\n      );\n    } else {\n      console.warn('No dataset uid specified.');\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\nexport { default as DatasetNotFoundError } from './DatasetNotFoundError';\n","module.exports = require(\"@hms-dbmi/viv\");","import { useState, useEffect } from 'react';\nimport equal from 'fast-deep-equal';\nimport { capitalize } from '../utils';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n  DatasetNotFoundError,\n} from '../loaders/errors/index';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './spatial/constants';\nimport { getDefaultCoordinationValues } from '../app/plugins';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Initialize values in the coordination space.\n * @param {object} values Object where\n * keys are coordination type names,\n * values are initial coordination values.\n * @param {object} setters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialValues Object where\n * keys are coordination type names and keys are values.\n */\nfunction initCoordinationSpace(values, setters, initialValues) {\n  if (!values || !setters) {\n    return;\n  }\n  const defaultCoordinationValues = getDefaultCoordinationValues();\n  Object.entries(values).forEach(([coordinationType, value]) => {\n    const setterName = `set${capitalize(coordinationType)}`;\n    const setterFunc = setters[setterName];\n    const initialValue = initialValues && initialValues[coordinationType];\n    const shouldInit = equal(initialValue, defaultCoordinationValues[coordinationType]);\n    if (shouldInit && setterFunc) {\n      setterFunc(value);\n    }\n  });\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        // This dataset has cells, so set up the\n        // spatial cells layer coordination value\n        // using the cell layer singleton.\n        const coordinationValuesOrDefault = {\n          spatialSegmentationLayer: DEFAULT_CELLS_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters, initialCoordinationValues,\n        );\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names and values are the current values.\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get (potentially filtered) data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionAttrs as this returns a potentially filtered set of attributes\n * specifically for the returned expression data.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from the expression matrix data type loader for a given gene selection.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {boolean} selection A list of gene names to get expression data for.\n * @returns {array} [geneData] where geneData is an array [Uint8Array, ..., Uint8Array]\n * for however many genes are in the selection.\n */\nexport function useGeneSelection(\n  loaders,\n  dataset,\n  setItemIsReady,\n  isRequired,\n  selection,\n  setItemIsNotReady,\n) {\n  const [geneData, setGeneData] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    if (!selection) {\n      setItemIsReady('expression-matrix');\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      setItemIsNotReady('expression-matrix');\n      const implementsGeneSelection = typeof loader.loadGeneSelection === 'function';\n      if (implementsGeneSelection) {\n        loaders[dataset].loaders['expression-matrix']\n          .loadGeneSelection({ selection })\n          .catch(e => warn(e, setWarning))\n          .then((payload) => {\n            if (!payload) return;\n            const { data } = payload;\n            setGeneData(data);\n            setItemIsReady('expression-matrix');\n          });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data } = payload;\n          const [attrs, { data: matrix }] = data;\n          const expressionDataForSelection = selection.map((sel) => {\n            const geneIndex = attrs.cols.indexOf(sel);\n            const numGenes = attrs.cols.length;\n            const numCells = attrs.rows.length;\n            const expressionData = new Uint8Array(numCells);\n            for (let cellIndex = 0; cellIndex < numCells; cellIndex += 1) {\n              expressionData[cellIndex] = matrix[cellIndex * numGenes + geneIndex];\n            }\n            return expressionData;\n          });\n          setGeneData(expressionDataForSelection);\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setGeneData(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset, selection]);\n\n  return [geneData];\n}\n\n/**\n * Get the attributes for the expression matrix data type loader,\n * i.e names of cells and genes.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.  Should not be used in conjunction (called in the same component)\n * with useExpressionMatrixData.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {object} [attrs] { rows, cols } object containing cell and gene names.\n */\nexport function useExpressionAttrs(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [attrs, setAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n    const loader = loaders[dataset].loaders['expression-matrix'];\n    if (loader) {\n      const implementsLoadAttrs = typeof loader.loadAttrs === 'function';\n      if (implementsLoadAttrs) {\n        loader.loadAttrs().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      } else {\n        loader.load().catch(e => warn(e, setWarning)).then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setAttrs(data[0]);\n          addUrl(url, 'Expression Matrix');\n          setItemIsReady('expression-matrix');\n        });\n      }\n    } else {\n      setAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [attrs];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url, coordinationValues } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        const coordinationValuesOrDefault = {\n          spatialPointLayer: DEFAULT_MOLECULES_LAYER,\n          ...coordinationValues,\n        };\n        initCoordinationSpace(\n          coordinationValuesOrDefault,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          const coordinationValuesOrDefault = {\n            spatialNeighborhoodLayer: DEFAULT_NEIGHBORHOODS_LAYER,\n            ...coordinationValues,\n          };\n          initCoordinationSpace(\n            coordinationValuesOrDefault,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      if (isRequired) {\n        warn(new DatasetNotFoundError(dataset), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url: urls, coordinationValues } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n        const { loaders: nextImageLoaders, meta: nextImageMeta } = data;\n        setImageLayerLoaders(nextImageLoaders);\n        setImageLayerMeta(nextImageMeta);\n        initCoordinationSpace(\n          coordinationValues,\n          coordinationSetters,\n          initialCoordinationValues,\n        );\n        setItemIsReady('raster');\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {object} coordinationSetters Object where\n * keys are coordination type names with the prefix 'set',\n * values are coordination setter functions.\n * @param {object} initialCoordinationValues Object where\n * keys are coordination type names with the prefix 'initialize',\n * values are initialization preferences as boolean values.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired,\n  coordinationSetters, initialCoordinationValues,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url, coordinationValues } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          initCoordinationSpace(\n            coordinationValues,\n            coordinationSetters,\n            initialCoordinationValues,\n          );\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","module.exports = require(\"@material-ui/core/Grid\");","// List of the GLSL colormaps available,\n// to validate against before string replacing.\nexport const GLSL_COLORMAPS = [\n  'plasma',\n  'viridis',\n  'jet',\n];\nexport const GLSL_COLORMAP_DEFAULT = 'plasma';\nexport const COLORMAP_SHADER_PLACEHOLDER = 'COLORMAP_FUNC';\n","import { CoordinationType, Component } from '../constants';\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [CoordinationType.OBS_TYPE]: 'cell',\n  [CoordinationType.FEATURE_TYPE]: 'gene',\n  [CoordinationType.FEATURE_VALUE_TYPE]: 'expression',\n  [CoordinationType.EMBEDDING_ZOOM]: null,\n  [CoordinationType.EMBEDDING_ROTATION]: 0,\n  [CoordinationType.EMBEDDING_TARGET_X]: null,\n  [CoordinationType.EMBEDDING_TARGET_Y]: null,\n  [CoordinationType.EMBEDDING_TARGET_Z]: 0,\n  [CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE]: false,\n  [CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE]: 14,\n  [CoordinationType.EMBEDDING_OBS_RADIUS]: 1,\n  [CoordinationType.EMBEDDING_OBS_RADIUS_MODE]: 'auto',\n  [CoordinationType.EMBEDDING_OBS_OPACITY]: 1,\n  [CoordinationType.EMBEDDING_OBS_OPACITY_MODE]: 'auto',\n  [CoordinationType.SPATIAL_ZOOM]: null,\n  [CoordinationType.SPATIAL_ROTATION]: 0,\n  [CoordinationType.SPATIAL_TARGET_X]: null,\n  [CoordinationType.SPATIAL_TARGET_Y]: null,\n  [CoordinationType.SPATIAL_TARGET_Z]: null,\n  [CoordinationType.SPATIAL_ROTATION_X]: null,\n  [CoordinationType.SPATIAL_ROTATION_Y]: null,\n  [CoordinationType.SPATIAL_ROTATION_Z]: null,\n  [CoordinationType.SPATIAL_AXIS_FIXED]: false,\n  [CoordinationType.SPATIAL_ROTATION_ORBIT]: 0,\n  [CoordinationType.SPATIAL_ORBIT_AXIS]: 'Y',\n  [CoordinationType.SPATIAL_IMAGE_LAYER]: null,\n  [CoordinationType.SPATIAL_SEGMENTATION_LAYER]: null,\n  [CoordinationType.SPATIAL_POINT_LAYER]: null,\n  [CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER]: null,\n  [CoordinationType.HEATMAP_ZOOM_X]: 0,\n  [CoordinationType.HEATMAP_ZOOM_Y]: 0,\n  [CoordinationType.HEATMAP_TARGET_X]: 0,\n  [CoordinationType.HEATMAP_TARGET_Y]: 0,\n  [CoordinationType.FEATURE_VALUE_COLORMAP]: 'plasma',\n  [CoordinationType.FEATURE_VALUE_COLORMAP_RANGE]: [0.0, 1.0],\n  [CoordinationType.FEATURE_VALUE_TRANSFORM]: null,\n  [CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT]: 1,\n  [CoordinationType.FEATURE_FILTER]: null,\n  [CoordinationType.FEATURE_HIGHLIGHT]: null,\n  [CoordinationType.FEATURE_SELECTION]: null,\n  [CoordinationType.OBS_FILTER]: null,\n  [CoordinationType.OBS_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_SELECTION]: null,\n  [CoordinationType.OBS_SET_HIGHLIGHT]: null,\n  [CoordinationType.OBS_SET_COLOR]: null,\n  [CoordinationType.OBS_COLOR_ENCODING]: 'cellSetSelection',\n  [CoordinationType.GENOMIC_ZOOM_X]: 0,\n  [CoordinationType.GENOMIC_ZOOM_Y]: 0,\n  [CoordinationType.GENOMIC_TARGET_X]: 1549999999.5,\n  [CoordinationType.GENOMIC_TARGET_Y]: 1549999999.5,\n  [CoordinationType.ADDITIONAL_OBS_SETS]: null,\n  [CoordinationType.MOLECULE_HIGHLIGHT]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_X]: null,\n  [CoordinationType.GATING_FEATURE_SELECTION_Y]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  CoordinationType.HEATMAP_ZOOM_X,\n  CoordinationType.HEATMAP_ZOOM_Y,\n  CoordinationType.HEATMAP_TARGET_X,\n  CoordinationType.HEATMAP_TARGET_Y,\n  CoordinationType.EMBEDDING_ZOOM,\n  CoordinationType.EMBEDDING_TARGET_X,\n  CoordinationType.EMBEDDING_TARGET_Y,\n  CoordinationType.EMBEDDING_TARGET_Z,\n  CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n  CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n  CoordinationType.EMBEDDING_OBS_RADIUS,\n  CoordinationType.EMBEDDING_OBS_OPACITY,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  [Component.SCATTERPLOT]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.GATING]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.EMBEDDING_TYPE,\n    CoordinationType.EMBEDDING_ZOOM,\n    CoordinationType.EMBEDDING_ROTATION,\n    CoordinationType.EMBEDDING_TARGET_X,\n    CoordinationType.EMBEDDING_TARGET_Y,\n    CoordinationType.EMBEDDING_TARGET_Z,\n    CoordinationType.EMBEDDING_OBS_SET_POLYGONS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABELS_VISIBLE,\n    CoordinationType.EMBEDDING_OBS_SET_LABEL_SIZE,\n    CoordinationType.EMBEDDING_OBS_RADIUS,\n    CoordinationType.EMBEDDING_OBS_RADIUS_MODE,\n    CoordinationType.EMBEDDING_OBS_OPACITY,\n    CoordinationType.EMBEDDING_OBS_OPACITY_MODE,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.GATING_FEATURE_SELECTION_X,\n    CoordinationType.GATING_FEATURE_SELECTION_Y,\n  ],\n  [Component.SPATIAL]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_ROTATION,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n    CoordinationType.SPATIAL_AXIS_FIXED,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.HEATMAP]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.HEATMAP_ZOOM_X,\n    CoordinationType.HEATMAP_ZOOM_Y,\n    CoordinationType.HEATMAP_TARGET_X,\n    CoordinationType.HEATMAP_TARGET_Y,\n    CoordinationType.OBS_FILTER,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_COLORMAP,\n    CoordinationType.FEATURE_VALUE_COLORMAP_RANGE,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.CELL_SETS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.CELL_SET_SIZES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.STATUS]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_HIGHLIGHT,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.MOLECULE_HIGHLIGHT,\n  ],\n  [Component.GENES]: [\n    CoordinationType.DATASET,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_COLOR_ENCODING,\n    CoordinationType.OBS_SET_SELECTION,\n  ],\n  [Component.CELL_SET_EXPRESSION]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.FEATURE_VALUE_TRANSFORM,\n    CoordinationType.FEATURE_VALUE_TRANSFORM_COEFFICIENT,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.EXPRESSION_HISTOGRAM]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n  [Component.LAYER_CONTROLLER]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n    CoordinationType.SPATIAL_SEGMENTATION_LAYER,\n    CoordinationType.SPATIAL_POINT_LAYER,\n    CoordinationType.SPATIAL_NEIGHBORHOOD_LAYER,\n    CoordinationType.SPATIAL_ZOOM,\n    CoordinationType.SPATIAL_TARGET_X,\n    CoordinationType.SPATIAL_TARGET_Y,\n    CoordinationType.SPATIAL_TARGET_Z,\n    CoordinationType.SPATIAL_ROTATION_X,\n    CoordinationType.SPATIAL_ROTATION_Y,\n    CoordinationType.SPATIAL_ROTATION_Z,\n    CoordinationType.SPATIAL_ROTATION_ORBIT,\n    CoordinationType.SPATIAL_ORBIT_AXIS,\n  ],\n  [Component.GENOMIC_PROFILES]: [\n    CoordinationType.DATASET,\n    CoordinationType.OBS_TYPE,\n    CoordinationType.FEATURE_TYPE,\n    CoordinationType.FEATURE_VALUE_TYPE,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n    CoordinationType.OBS_SET_SELECTION,\n    CoordinationType.OBS_SET_HIGHLIGHT,\n    CoordinationType.OBS_SET_COLOR,\n    CoordinationType.ADDITIONAL_OBS_SETS,\n  ],\n  [Component.DESCRIPTION]: [\n    CoordinationType.DATASET,\n    CoordinationType.SPATIAL_IMAGE_LAYER,\n  ],\n  higlass: [\n    CoordinationType.DATASET,\n    CoordinationType.GENOMIC_ZOOM_X,\n    CoordinationType.GENOMIC_ZOOM_Y,\n    CoordinationType.GENOMIC_TARGET_X,\n    CoordinationType.GENOMIC_TARGET_Y,\n    CoordinationType.FEATURE_FILTER,\n    CoordinationType.FEATURE_HIGHLIGHT,\n    CoordinationType.FEATURE_SELECTION,\n  ],\n};\n","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\nexport const VITESSCE_CONTAINER = 'vitessce-container';\n","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import { RENDERING_MODES } from '@hms-dbmi/viv';\n\nexport const GLOBAL_LABELS = ['z', 't'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  visible: true,\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n  renderingMode: RENDERING_MODES.ADDITIVE,\n  use3d: false,\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","module.exports = require(\"zustand\");","module.exports = require(\"lodash/debounce\");","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","module.exports = require(\"lodash/range\");","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.25em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n      overflow: 'visible',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title\">\n        <div className=\"title-left\">\n          {title}\n        </div>\n        <div className=\"title-info\" title={info}>\n          {info}\n        </div>\n        <div className=\"title-buttons\">\n          { options && (\n            <PlotOptions\n              options={options}\n            />\n          ) }\n          {urls && urls.length > 0 && (\n            <DownloadOptions\n              urls={urls}\n            />\n          )}\n          <ClosePaneButton\n            removeGridComponent={removeGridComponent}\n          />\n        </div>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","module.exports = require(\"zustand/shallow\");","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import { FileType, DataType } from './constants';\n\n/**\n * Mapping from file types to data types. Each file type\n * should correspond to one data type. Multiple file types\n * can map onto the same data type.\n */\nexport const FILE_TYPE_DATA_TYPE_MAPPING = {\n  [FileType.CELLS_JSON]: DataType.CELLS,\n  [FileType.CELL_SETS_JSON]: DataType.CELL_SETS,\n  [FileType.EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENOMIC_PROFILES_ZARR]: DataType.GENOMIC_PROFILES,\n  [FileType.MOLECULES_JSON]: DataType.MOLECULES,\n  [FileType.NEIGHBORHOODS_JSON]: DataType.NEIGHBORHOODS,\n  [FileType.RASTER_JSON]: DataType.RASTER,\n  [FileType.RASTER_OME_ZARR]: DataType.RASTER,\n  [FileType.CLUSTERS_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.GENES_JSON]: DataType.EXPRESSION_MATRIX,\n  [FileType.ANNDATA_CELL_SETS_ZARR]: DataType.CELL_SETS,\n  [FileType.ANNDATA_CELLS_ZARR]: DataType.CELLS,\n  [FileType.ANNDATA_EXPRESSION_MATRIX_ZARR]: DataType.EXPRESSION_MATRIX,\n};\n","import { fromEntries } from '../utils';\nimport { FILE_TYPE_DATA_TYPE_MAPPING } from './constant-relationships';\nimport { FileType, CoordinationType } from './constants';\nimport {\n  COMPONENT_COORDINATION_TYPES,\n  DEFAULT_COORDINATION_VALUES,\n} from './state/coordination';\n\nconst PLUGINS_KEY = '__VITESSCE_PLUGINS__';\nconst PLUGIN_VIEW_TYPES_KEY = 'viewTypes';\nconst PLUGIN_COORDINATION_TYPES_KEY = 'coordinationTypes';\nconst PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY = 'coordinationTypesPerView';\nconst PLUGIN_FILE_TYPES_KEY = 'fileTypes';\nconst PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY = 'fileTypeDataTypeMapping';\nconst PLUGIN_CONVENIENCE_FILE_TYPES_KEY = 'convenienceFileTypes';\n\nwindow[PLUGINS_KEY] = {};\nconst PLUGINS = window[PLUGINS_KEY];\n\n// Reference: https://github.com/higlass/higlass-register/blob/master/src/index.js\nPLUGINS[PLUGIN_VIEW_TYPES_KEY] = PLUGINS[PLUGIN_VIEW_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_KEY] = PLUGINS[PLUGIN_COORDINATION_TYPES_KEY] || {};\nPLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] = (\n  PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY] || {}\n);\nPLUGINS[PLUGIN_FILE_TYPES_KEY] = PLUGINS[PLUGIN_FILE_TYPES_KEY] || {};\nPLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] = (\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY] || {}\n);\nPLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] = PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY] || {};\n\n/**\n * Register a new coordination type.\n * @param {string} typeName Name for the new coordination type.\n * @param {*} defaultValue A default value for the coordination type.\n */\nexport function registerPluginCoordinationType(typeName, defaultValue) {\n  PLUGINS[PLUGIN_COORDINATION_TYPES_KEY][typeName] = defaultValue;\n}\n\n/**\n * Register a new view type.\n * @param {string} viewType A name\n * @param {function} viewSubscriberReactComponent A react component.\n * @param {string[]} coordinationTypes A list of coordination types that this view supports.\n */\nexport function registerPluginViewType(viewType, viewSubscriberReactComponent, coordinationTypes) {\n  PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType] = viewSubscriberReactComponent;\n  // Register the supported coordination types.\n  const pluginTypesPerView = PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY];\n  if (Array.isArray(pluginTypesPerView[viewType])) {\n    coordinationTypes.forEach((coordinationType) => {\n      if (!pluginTypesPerView[viewType].includes(coordinationType)) {\n        pluginTypesPerView[viewType].push(coordinationType);\n      }\n    });\n  } else {\n    pluginTypesPerView[viewType] = coordinationTypes;\n  }\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {string} dataTypeName Name for the data type associated with the file type.\n * @param {class} dataSourceClass Data source class definition.\n * @param {class} dataLoaderClass Data loader class definition.\n */\nexport function registerPluginFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, dataTypeName, dataLoaderClass, dataSourceClass,\n) {\n  PLUGINS[PLUGIN_FILE_TYPES_KEY][fileTypeName] = [dataSourceClass, dataLoaderClass];\n  PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileTypeName] = dataTypeName;\n}\n\n/**\n * Register a new file type.\n * @param {string} fileTypeName Name for the new file type.\n * @param {function} expansionFunction The file type expansion function.\n * Should take in a single file definition and return an array of\n * file definitions with valid fileType values.\n */\nexport function registerPluginConvenienceFileType(\n  // eslint-disable-next-line no-unused-vars\n  fileTypeName, expansionFunction,\n) {\n  PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileTypeName] = expansionFunction;\n}\n\n\n// Plugin getter functions.\n\nexport function getPluginViewTypes() {\n  return Object.keys(PLUGINS[PLUGIN_VIEW_TYPES_KEY]);\n}\n\nexport function getPluginViewType(viewType) {\n  return PLUGINS[PLUGIN_VIEW_TYPES_KEY][viewType];\n}\n\nexport function getPluginCoordinationTypes() {\n  return Object.keys(PLUGINS[PLUGIN_COORDINATION_TYPES_KEY]);\n}\n\nexport function getPluginCoordinationTypeDefaults() {\n  return PLUGINS[PLUGIN_COORDINATION_TYPES_KEY];\n}\n\nexport function getPluginCoordinationTypesForViewType(viewType) {\n  if (Array.isArray(PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType])) {\n    return PLUGINS[PLUGIN_COORDINATION_TYPES_PER_VIEW_KEY][viewType];\n  }\n  return [];\n}\n\nexport function getPluginFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_FILE_TYPES_KEY]);\n}\nexport function getPluginConvenienceFileTypes() {\n  return Object.keys(PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY]);\n}\n\nexport function getDataTypeForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPE_DATA_TYPE_MAPPING_KEY][fileType];\n}\nexport function getLoaderClassesForPluginFileType(fileType) {\n  return PLUGINS[PLUGIN_FILE_TYPES_KEY][fileType];\n}\nexport function getExpansionFunctionForPluginConvenienceFileType(fileType) {\n  return PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY][fileType];\n}\n\n// Getters that depend on plugins.\nexport function getFileTypes() {\n  return [\n    ...Object.values(FileType),\n    ...getPluginFileTypes(),\n  ];\n}\n\nexport function getCoordinationTypes() {\n  return [\n    ...Object.values(CoordinationType),\n    ...getPluginCoordinationTypes(),\n  ];\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getDefaultCoordinationValues() {\n  return {\n    ...DEFAULT_COORDINATION_VALUES,\n    ...getPluginCoordinationTypeDefaults(),\n  };\n}\n\n// Need to do this in a function since the plugin coordination\n// types are dynamic.\nexport function getComponentCoordinationTypes() {\n  return {\n    ...COMPONENT_COORDINATION_TYPES,\n    ...fromEntries(getPluginViewTypes().map(viewType => ([\n      viewType,\n      getPluginCoordinationTypesForViewType(viewType),\n    ]))),\n  };\n}\n\nexport function getFileTypeDataTypeMapping() {\n  return {\n    ...FILE_TYPE_DATA_TYPE_MAPPING,\n    ...fromEntries(getPluginFileTypes().map(fileType => ([\n      fileType,\n      getDataTypeForPluginFileType(fileType),\n    ]))),\n  };\n}\n\nexport function getConvenienceFileTypes() {\n  return {\n    // TODO: import built-in convenience file types and include them here.\n    ...PLUGINS[PLUGIN_CONVENIENCE_FILE_TYPES_KEY],\n  };\n}\n","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"@material-ui/core/IconButton\");","module.exports = require(\"@material-ui/core/colors\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Fade from '@material-ui/core/Fade';\nimport { useVitessceContainer } from '../hooks';\nimport { styles } from './styles';\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    setOpen,\n    children,\n    buttonClassName,\n    placement = 'bottom-end',\n  } = props;\n  const classes = styles();\n\n  const anchorRef = useRef();\n\n  const handleClick = () => {\n    setOpen(prev => !prev);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const id = open ? 'v-popover-menu' : undefined;\n\n  const getTooltipContainer = useVitessceContainer(anchorRef);\n\n  return (\n    <div ref={anchorRef} className={classes.container}>\n      <IconButton\n        aria-describedby={id}\n        onClick={handleClick}\n        size=\"small\"\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <Popper\n        id={id}\n        open={open}\n        anchorEl={anchorRef && anchorRef.current}\n        container={getTooltipContainer}\n        onClose={handleClose}\n        placement={placement}\n        transition\n      >\n        {({ TransitionProps }) => (\n          <ClickAwayListener onClickAway={handleClose}>\n            <Fade {...TransitionProps} timeout={100}>\n              <Paper elevation={4} className={classes.paper}>\n                <MenuList>{children}</MenuList>\n              </Paper>\n            </Fade>\n          </ClickAwayListener>\n        )}\n      </Popper>\n    </div>\n  );\n}\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/Paper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"zustand/context\");","import { makeStyles, withStyles } from '@material-ui/core/styles';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport Grid from '@material-ui/core/Grid';\n\nexport const useSelectStyles = makeStyles(() => ({\n  selectRoot: {\n    padding: 0,\n    height: 'auto',\n    margin: '4px 0',\n  },\n}));\n\nexport const useOptionStyles = withStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nconst sharedControllerStyles = {\n  width: '100%',\n  flexDirection: 'column',\n};\n\nexport const useControllerSectionStyles = makeStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '0px 8px',\n  },\n}));\n\nexport const StyledAccordionDetails = withStyles(() => ({\n  root: {\n    ...sharedControllerStyles,\n    padding: '8px 8px 24px 8px',\n  },\n}))(AccordionDetails);\n\nexport const StyledAccordionSummary = withStyles(theme => ({\n  root: {\n    padding: '0px 8px',\n  },\n  content: {\n    margin: '4px 0px',\n    minWidth: '0px',\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1),\n  },\n  expandIcon: {\n    '&$expanded': {\n      top: theme.spacing(-1.3),\n    },\n  },\n}))(AccordionSummary);\n\nexport const StyledInputLabel = withStyles(() => ({\n  root: {\n    fontSize: '14px',\n  },\n}))(InputLabel);\n\nexport const OverflowEllipsisGrid = withStyles(() => ({\n  item: {\n    width: '100%',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n  },\n}))(Grid);\n\nexport const StyledSelectionSlider = withStyles(() => ({\n  root: {\n    marginTop: '7px',\n  },\n  markActive: {\n    backgroundColor: 'rgba(128, 128, 128, 0.7)',\n  },\n}))(Slider);\n","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Popper\");","import { makeStyles, createTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n  },\n  container: {\n    position: 'relative',\n    left: 0,\n    top: 0,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\nexport const muiTheme = {\n  dark: createTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"math.gl\");","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","import { getChannelStats } from '@hms-dbmi/viv';\nimport { Matrix4 } from 'math.gl';\n\nasync function getSingleSelectionStats2D({ loader, selection }) {\n  const data = Array.isArray(loader) ? loader[loader.length - 1] : loader;\n  const raster = await data.getRaster({ selection });\n  const selectionStats = getChannelStats(raster.data);\n  const { domain, contrastLimits: slider } = selectionStats;\n  return { domain, slider };\n}\n\nasync function getSingleSelectionStats3D({ loader, selection }) {\n  const lowResSource = loader[loader.length - 1];\n  const { shape, labels } = lowResSource;\n  // eslint-disable-next-line no-bitwise\n  const sizeZ = shape[labels.indexOf('z')] >> (loader.length - 1);\n  const raster0 = await lowResSource.getRaster({\n    selection: { ...selection, z: 0 },\n  });\n  const rasterMid = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.floor(sizeZ / 2) },\n  });\n  const rasterTop = await lowResSource.getRaster({\n    selection: { ...selection, z: Math.max(0, sizeZ - 1) },\n  });\n  const stats0 = getChannelStats(raster0.data);\n  const statsMid = getChannelStats(rasterMid.data);\n  const statsTop = getChannelStats(rasterTop.data);\n  return {\n    domain: [\n      Math.min(stats0.domain[0], statsMid.domain[0], statsTop.domain[0]),\n      Math.max(stats0.domain[1], statsMid.domain[1], statsTop.domain[1]),\n    ],\n    slider: [\n      Math.min(\n        stats0.contrastLimits[0],\n        statsMid.contrastLimits[0],\n        statsTop.contrastLimits[0],\n      ),\n      Math.max(\n        stats0.contrastLimits[1],\n        statsMid.contrastLimits[1],\n        statsTop.contrastLimits[1],\n      ),\n    ],\n  };\n}\n\n/**\n * Get bounding cube for a given loader i.e [[0, width], [0, height], [0, depth]]\n * @param {Object} loader PixelSource|PixelSource[]\n * @param {[]} selection Selection for stats.\n * @param {boolean} use3d Whether or not to get 3d stats.\n * @returns {Object} { domains, sliders }\n */\nexport const getSingleSelectionStats = async ({ loader, selection, use3d }) => {\n  const getStats = use3d\n    ? getSingleSelectionStats3D\n    : getSingleSelectionStats2D;\n  return getStats({ loader, selection });\n};\n\nexport const getMultiSelectionStats = async ({ loader, selections, use3d }) => {\n  const stats = await Promise.all(\n    selections.map(selection => getSingleSelectionStats({ loader, selection, use3d })),\n  );\n  const domains = stats.map(stat => stat.domain);\n  const sliders = stats.map(stat => stat.slider);\n  return { domains, sliders };\n};\n\n/**\n * Get physical size scaling Matrix4\n * @param {Object} loader PixelSource\n * @returns {Object} matrix\n */\nexport function getPhysicalSizeScalingMatrix(loader) {\n  const { x, y, z } = loader?.meta?.physicalSizes ?? {};\n  if (x?.size && y?.size && z?.size) {\n    const min = Math.min(z.size, x.size, y.size);\n    const ratio = [x.size / min, y.size / min, z.size / min];\n    return new Matrix4().scale(ratio);\n  }\n  return new Matrix4().identity();\n}\n\n/**\n * Get bounding cube for a given loader\n * @param {Object} loader PixelSource|PixelSource[]\n * @returns {Array} [0, width], [0, height], [0, depth]]\n */\nexport function getBoundingCube(loader) {\n  const source = Array.isArray(loader) ? loader[0] : loader;\n  const { shape, labels } = source;\n  const physicalSizeScalingMatrix = getPhysicalSizeScalingMatrix(source);\n  const xSlice = [0, physicalSizeScalingMatrix[0] * shape[labels.indexOf('x')]];\n  const ySlice = [0, physicalSizeScalingMatrix[5] * shape[labels.indexOf('y')]];\n  const zSlice = [\n    0,\n    physicalSizeScalingMatrix[10] * shape[labels.indexOf('z')],\n  ];\n  return [xSlice, ySlice, zSlice];\n}\n\nexport function abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"@material-ui/core/Checkbox\");","import glsl from 'glslify';\n\nexport const vs = glsl`\n#define SHADER_NAME bitmask-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\nattribute vec3 instancePickingColors;\n\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  vTexCoord = texCoords;\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\nexport const fs = glsl`\n#define SHADER_NAME bitmask-layer-fragment-shader\nprecision highp float;\n\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: greys = require(\"glsl-colormap/greys\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: bone = require(\"glsl-colormap/bone\")\n#pragma glslify: copper = require(\"glsl-colormap/copper\")\n#pragma glslify: density = require(\"glsl-colormap/density\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: cool = require(\"glsl-colormap/cool\")\n#pragma glslify: hot = require(\"glsl-colormap/hot\")\n#pragma glslify: spring = require(\"glsl-colormap/spring\")\n#pragma glslify: summer = require(\"glsl-colormap/summer\")\n#pragma glslify: autumn = require(\"glsl-colormap/autumn\")\n#pragma glslify: winter = require(\"glsl-colormap/winter\")\n\n// Data (mask) texture\nuniform sampler2D channel0;\nuniform sampler2D channel1;\nuniform sampler2D channel2;\nuniform sampler2D channel3;\nuniform sampler2D channel4;\nuniform sampler2D channel5;\n\n// Color texture\nuniform sampler2D colorTex;\nuniform float colorTexHeight;\nuniform float colorTexWidth;\nuniform float hovered;\n// range\nuniform bool channelsVisible[6];\n\n// Expression mapping\nuniform vec2 uColorScaleRange;\nuniform bool uIsExpressionMode;\nuniform sampler2D expressionTex;\n\n// opacity\nuniform float opacity;\n\nvarying vec2 vTexCoord;\n\nvec4 sampleAndGetColor(sampler2D dataTex, vec2 coord, bool isOn){\n  float sampledData = texture(dataTex, coord).r;\n  vec4 hoveredColor = float(sampledData == hovered && sampledData > 0. && hovered > 0.) * vec4(0., 0., 1., 1.);\n  // Colors are laid out corresponding to ids in row-major order in the texture.  So if width of the texture is 10, and you want ID 25,\n  // you need coordinate (1, 4) (i.e 2 rows down, and 5 columns over indexed from 0 for a total of 25 units covered in row major order).\n  vec2 colorTexCoord = vec2(mod(sampledData, colorTexWidth) / colorTexWidth, floor(sampledData / colorTexWidth) / (colorTexHeight - 1.));\n  float expressionValue = texture(expressionTex, colorTexCoord).r / 255.;\n  float scaledExpressionValue = (expressionValue - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n  vec4 sampledColor = float(uIsExpressionMode) * COLORMAP_FUNC(clamp(scaledExpressionValue, 0.0, 1.0)) +  (1. - float(uIsExpressionMode)) * vec4(texture(colorTex, colorTexCoord).rgb, 1.);\n  // Only return a color if the data is non-zero.\n  return max(0., min(sampledData, 1.)) * float(isOn) * (sampledColor + hoveredColor);\n}\n\nvoid main() {\n\n  gl_FragColor = sampleAndGetColor(channel0, vTexCoord, channelsVisible[0]);\n\n  // If the sampled color and the currently stored color (gl_FragColor) are identical, don't blend and use the sampled color,\n  // otherwise just use the currently stored color.  Repeat this for all channels.\n  vec4 sampledColor = sampleAndGetColor(channel1, vTexCoord, channelsVisible[1]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel2, vTexCoord, channelsVisible[2]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel3, vTexCoord, channelsVisible[3]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel4, vTexCoord, channelsVisible[4]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  sampledColor = sampleAndGetColor(channel5, vTexCoord, channelsVisible[5]);\n  gl_FragColor = (sampledColor == gl_FragColor || sampledColor == vec4(0.)) ? gl_FragColor : sampledColor;\n  // Apply the opacity if there is pixel data, and if the pixel data is empty i.e no segmentation, use 0 opacity.\n  gl_FragColor = vec4(gl_FragColor.rgb, (gl_FragColor.rgb == vec3(0., 0., 0.)) ? 0.0 : opacity);\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants'; // eslint-disable-line import/no-extraneous-dependencies\nimport { project32, picking } from '@deck.gl/core'; // eslint-disable-line import/no-extraneous-dependencies\nimport { Texture2D, isWebGL2 } from '@luma.gl/core';\nimport { XRLayer } from '@hms-dbmi/viv';\nimport { fs, vs } from './bitmask-layer-shaders';\nimport {\n  GLSL_COLORMAPS,\n  GLSL_COLORMAP_DEFAULT,\n  COLORMAP_SHADER_PLACEHOLDER,\n} from './constants';\n\nfunction padWithDefault(arr, defaultValue, padWidth) {\n  const newArr = [...arr];\n  for (let i = 0; i < padWidth; i += 1) {\n    newArr.push(defaultValue);\n  }\n  return newArr;\n}\n\nconst defaultProps = {\n  hoveredCell: { type: 'number', value: null, compare: true },\n  cellColorData: { type: 'object', value: null, compare: true },\n  colormap: { type: 'string', value: GLSL_COLORMAP_DEFAULT, compare: true },\n  expressionData: { type: 'object', value: null, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class BitmaskLayer extends XRLayer {\n  // eslint-disable-next-line class-methods-use-this\n  getShaders() {\n    const { colormap } = this.props;\n    return {\n      fs,\n      vs,\n      modules: [project32, picking],\n      defines: {\n        [COLORMAP_SHADER_PLACEHOLDER]: GLSL_COLORMAPS.includes(colormap)\n          ? colormap\n          : GLSL_COLORMAP_DEFAULT,\n      },\n    };\n  }\n\n  updateState({ props, oldProps, changeFlags }) {\n    super.updateState({ props, oldProps, changeFlags });\n    if (props.cellColorData !== oldProps.cellColorData) {\n      this.setColorTexture();\n    }\n    if (props.expressionData !== oldProps.expressionData) {\n      const { expressionData, cellTexHeight, cellTexWidth } = this.props;\n      const expressionTex = this.dataToTexture(\n        expressionData,\n        cellTexWidth,\n        cellTexHeight,\n      );\n      this.setState({ expressionTex });\n    }\n    if (props.colormap !== oldProps.colormap) {\n      const { gl } = this.context;\n      if (this.state.model) {\n        this.state.model.delete();\n      }\n      // eslint-disable-next-line no-underscore-dangle\n      this.setState({ model: this._getModel(gl) });\n\n      this.getAttributeManager().invalidateAll();\n    }\n  }\n\n  setColorTexture() {\n    const {\n      cellColorData: data,\n      cellTexHeight: height,\n      cellTexWidth: width,\n    } = this.props;\n    const colorTex = new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data,\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: GL.RGB,\n      dataFormat: GL.RGB,\n      type: GL.UNSIGNED_BYTE,\n    });\n    this.setState({ colorTex });\n  }\n\n  draw(opts) {\n    const { uniforms } = opts;\n    const {\n      channelsVisible,\n      hoveredCell,\n      colorScaleLo,\n      colorScaleHi,\n      isExpressionMode,\n    } = this.props;\n    const {\n      textures, model, colorTex, expressionTex,\n    } = this.state;\n    // Render the image\n    if (textures && model && colorTex) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            hovered: hoveredCell || 0,\n            colorTex,\n            expressionTex,\n            colorTexHeight: colorTex.height,\n            colorTexWidth: colorTex.width,\n            channelsVisible: padWithDefault(\n              channelsVisible,\n              false,\n              // There are six texture entries on the shaders\n              6 - channelsVisible.length,\n            ),\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n            uIsExpressionMode: isExpressionMode,\n            ...textures,\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * This function creates textures from the data\n   */\n  dataToTexture(data, width, height) {\n    const isWebGL2On = isWebGL2(this.context.gl);\n    return new Texture2D(this.context.gl, {\n      width,\n      height,\n      // Only use Float32 so we don't have to write two shaders\n      data: new Float32Array(data),\n      // we don't want or need mimaps\n      mipmaps: false,\n      parameters: {\n        // NEAREST for integer data\n        [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n        [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n        // CLAMP_TO_EDGE to remove tile artifacts\n        [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n        [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n      },\n      format: isWebGL2On ? GL.R32F : GL.LUMINANCE,\n      dataFormat: isWebGL2On ? GL.RED : GL.LUMINANCE,\n      type: GL.FLOAT,\n    });\n  }\n}\nBitmaskLayer.layerName = 'BitmaskLayer';\nBitmaskLayer.defaultProps = defaultProps;\n","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport isEqual from 'lodash/isEqual';\nimport {\n  getDefaultInitialViewState,\n  MultiscaleImageLayer,\n  ImageLayer,\n  VolumeLayer,\n} from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize, getSourceFromLoader, isRgb } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_LABELS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\nimport BitmaskLayer from '../../layers/BitmaskLayer';\nimport { getMultiSelectionStats } from '../layer-controller/utils';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(source) {\n  const globalIndices = source.labels\n    .filter(dim => GLOBAL_LABELS.includes(dim));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim] = Math.floor(\n      (source.shape[source.labels.indexOf(dim)] || 0) / 2,\n    );\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object} source PixelSource object from Viv\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(source) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(source);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = source.labels.filter(\n    dim => !GLOBAL_LABELS.includes(dim)\n      && source.shape[source.labels.indexOf(dim)],\n  )[0];\n  for (let i = 0; i < Math.min(4, source.shape[\n    source.labels.indexOf(firstNonGlobalDimension)\n  ]); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * @param {Array.<number>} shape loader shape\n */\nexport function isInterleaved(shape) {\n  const lastDimSize = shape[shape.length - 1];\n  return lastDimSize === 3 || lastDimSize === 4;\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance with channel names appended by Vitessce loaders\n * of the form { data: (PixelSource[]|PixelSource), metadata: Object, channels }\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader, use3d) {\n  const result = [];\n  const source = getSourceFromLoader(loader);\n  // Add channel automatically as the first avaialable value for each dimension.\n  let defaultSelection = buildDefaultSelection(source);\n  defaultSelection = isInterleaved(source.shape)\n    ? [{ ...defaultSelection[0], c: 0 }] : defaultSelection;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data, selections: defaultSelection, use3d,\n  });\n\n  const domains = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.domains;\n  const colors = isRgb(loader)\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = isRgb(loader)\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.sliders;\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      // eslint-disable-next-line no-nested-ternary\n      color: colors ? colors[i]\n        : defaultSelection.length !== 1\n          ? VIEWER_PALETTE[i] : [255, 255, 255],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  const sources = imageLoaders.map(loader => getSourceFromLoader(loader));\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n    || sources.every(\n      source => !source.meta?.physicalSizes?.x || !source.meta?.physicalSizes?.y,\n    )\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = sources.reduce((acc, source) => {\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    acc[2] = (acc[2] === undefined || compare(sizes[2], acc[2]) === -1) ? sizes[2] : acc[2];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const source = sources[j];\n    const hasZPhyscialSize = source.meta?.physicalSizes?.z?.size;\n    const sizes = [\n      unit(`${source.meta?.physicalSizes.x.size} ${source.meta?.physicalSizes.x.unit}`.replace('µ', 'u')),\n      unit(`${source.meta?.physicalSizes.y.size} ${source.meta?.physicalSizes.y.unit}`.replace('µ', 'u')),\n    ];\n    if (hasZPhyscialSize) {\n      sizes.push(unit(`${source.meta?.physicalSizes.z.size} ${source.meta?.physicalSizes.z.unit}`.replace('µ', 'u')));\n    }\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // Add in z dimension needed for Matrix4 scale API.\n    if (!scale[2]) {\n      scale[2] = 1;\n    }\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMetaAndLayers = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMetaAndLayers[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMetaAndLayers = getMetaWithTransformMatrices(nextImageMetaAndLayers, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n        index: layerIndex,\n        ...DEFAULT_RASTER_LAYER_PROPS,\n        channels: channels.map((channel, j) => ({\n          ...channel,\n          ...(nextImageMetaAndLayers[layerIndex].channels\n            ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n        })),\n        modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n        transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: nextImageMetaAndLayers[layerIndex]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n          index: layerIndex,\n          ...DEFAULT_RASTER_LAYER_PROPS,\n          channels: channels.map((channel, j) => ({\n            ...channel,\n            ...(nextImageMetaAndLayers[layerIndex].channels\n              ? nextImageMetaAndLayers[layerIndex].channels[j] : []),\n          })),\n          domainType: 'Min/Max',\n          modelMatrix: nextImageMetaAndLayers[layerIndex]?.metadata?.transform?.matrix,\n          transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMetaAndLayers];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n  useRaster,\n  use3d,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialTargetZ = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = use3d ? 1.5 : 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0 && useRaster) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i].data,\n        viewSize,\n        zoomBackoff,\n        use3d,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[2] > initialTargetZ) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetZ = target[2];\n        initialZoom = newViewStateZoom;\n      } else {\n        initialTargetZ = null;\n      }\n    }\n  } else if (cellValues.length > 0\n    // Only use cellValues in quadtree calculation if there is\n    // centroid data in the cells (i.e not just ids).\n    && cellValues[0].xy\n    && !useRaster) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    let xExtent = extent(cellCoordinates, c => c[0]);\n    let yExtent = extent(cellCoordinates, c => c[1]);\n    let xRange = xExtent[1] - xExtent[0];\n    let yRange = yExtent[1] - yExtent[0];\n    const getViewExtentFromPolygonExtents = extents => [\n      Math.min(...extents.map(i => i[0])),\n      Math.max(...extents.map(i => i[1])),\n    ];\n    if (xRange === 0) {\n      // The fall back is the cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsX = cellValues.map(cell => extent(cell.poly, i => i[0]));\n      xExtent = getViewExtentFromPolygonExtents(polygonExtentsX);\n      xRange = xExtent[1] - xExtent[0];\n    }\n    if (yRange === 0) {\n      // The fall back is the first cells' polygon coordinates, if the original range\n      // is 0 i.e the centroids are all on the same axis.\n      const polygonExtentsY = cellValues.map(cell => extent(cell.poly, i => i[1]));\n      yExtent = getViewExtentFromPolygonExtents(polygonExtentsY);\n      yRange = yExtent[1] - yExtent[0];\n    }\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialTargetZ = null;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  } else {\n    return {\n      initialTargetX: null, initialTargetY: null, initialTargetZ: null, initialZoom: null,\n    };\n  }\n  return {\n    initialTargetX, initialTargetY, initialZoom, initialTargetZ,\n  };\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} data PixelSource | PixelSource[]\n * @returns {Array} [Layer, PixelSource | PixelSource[]] tuple.\n */\nexport function getLayerLoaderTuple(data, use3d) {\n  const loader = ((Array.isArray(data) && data.length > 1) || !Array.isArray(data))\n    ? data : data[0];\n  if (use3d) {\n    return [VolumeLayer, Array.isArray(loader) ? loader : [loader]];\n  }\n  const Layer = (Array.isArray(data) && data.length > 1) ? MultiscaleImageLayer : ImageLayer;\n  return [Layer, loader];\n}\n\n\nexport function renderSubBitmaskLayers(props) {\n  const {\n    bbox: {\n      left, top, right, bottom,\n    },\n    x,\n    y,\n    z,\n  } = props.tile;\n  const {\n    data, id, loader,\n  } = props;\n  // Only render in positive coorinate system\n  if ([left, bottom, right, top].some(v => v < 0) || !data) {\n    return null;\n  }\n  const base = loader[0];\n  const [height, width] = loader[0].shape.slice(-2);\n  // Tiles are exactly fitted to have height and width such that their bounds\n  // match that of the actual image (not some padded version).\n  // Thus the right/bottom given by deck.gl are incorrect since\n  // they assume tiles are of uniform sizes, which is not the case for us.\n  const bounds = [\n    left,\n    data.height < base.tileSize ? height : bottom,\n    data.width < base.tileSize ? width : right,\n    top,\n  ];\n  return new BitmaskLayer(props, {\n    channelData: data,\n    // Uncomment to help debugging - shades the tile being hovered over.\n    // autoHighlight: true,\n    // highlightColor: [80, 80, 80, 50],\n    // Shared props with BitmapLayer:\n    bounds,\n    id: `sub-layer-${bounds}-${id}`,\n    tileId: { x, y, z },\n  });\n}\n","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"@material-ui/core/Fade\");","module.exports = require(\"fast-deep-equal\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/Button\");","import { DTYPE_VALUES } from '@hms-dbmi/viv';\n\nfunction getDomains() {\n  const domains = {};\n  const needMin = ['Int8', 'Int16', 'Int32'];\n  Object.keys(DTYPE_VALUES).forEach((dtype) => {\n    const { max } = DTYPE_VALUES[dtype];\n    const min = needMin.includes(dtype) ? -(max + 1) : 0;\n    domains[dtype] = [min, max];\n  });\n  return domains;\n}\n\nexport const DOMAINS = getDomains();\n","module.exports = require(\"@material-ui/core/Typography\");","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { useControllerSectionStyles } from './styles';\n\nexport default function VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    layerType,\n    handleLayerChange,\n  } = props;\n\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layerType === 'cells') {\n      const stroked = v < 0.7;\n      handleLayerChange({ ...layer, opacity: v, stroked });\n    } else {\n      handleLayerChange({ ...layer, opacity: v });\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  const classes = useControllerSectionStyles();\n  return (\n    <Grid item style={{ marginTop: '10px' }}>\n      <Paper className={classes.root}>\n        <Typography\n          style={{\n            padding: '15px 8px 0px 8px',\n            marginBottom: '-5px',\n          }}\n        >\n          {label}\n        </Typography>\n        <Grid container direction=\"row\" justifyContent=\"space-between\">\n          <Grid item xs={2}>\n            <Checkbox color=\"primary\" checked={isOn} onChange={(e, v) => handleCheckBoxChange(v)} />\n          </Grid>\n          <Grid item xs={9} style={{ paddingRight: '8px' }}>\n            <Slider\n              value={slider}\n              min={0}\n              max={1}\n              step={0.001}\n              onChange={(e, v) => handleSliderChange(v)}\n              style={{ marginTop: '7px' }}\n              orientation=\"horizontal\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n}\n","module.exports = require(\"@material-ui/icons/Add\");","module.exports = require(\"short-number\");","module.exports = require(\"regenerator-runtime\");","import React from 'react';\nimport range from 'lodash/range';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { getDefaultInitialViewState } from '@hms-dbmi/viv';\n\nimport {\n  getBoundingCube, getMultiSelectionStats,\n} from './utils';\nimport {\n  COLORMAP_OPTIONS,\n  canLoadResolution,\n  formatBytes,\n  getStatsForResolution,\n} from '../utils';\nimport { DEFAULT_RASTER_DOMAIN_TYPE } from '../spatial/constants';\nimport { StyledSelectionSlider, useSelectStyles } from './styles';\n\nconst DOMAIN_OPTIONS = ['Full', 'Min/Max'];\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {Object} loader Loader object with metadata.\n * @prop {function} handleMultiPropertyChange Function to propgate multiple layer changes at once.\n * This prevents updates from overridding each other.\n * @prop {number} resolution Current 3D resolution.\n * @prop {boolean} disable3d Whether or not to enable 3D selection\n * @prop {function} setRasterLayerCallback Setter for callbacks that fire after raster/volume loads.\n * @prop {function} setAreAllChannelsLoading Setter for whether or not a given channel is loading.\n * @prop {Object} setViewState Setter for the current view state.\n * @prop {number} spatialHeight Height of the spatial component.\n * @prop {number} spatialWidth Width of the spatial component.\n * @prop {object} channels Channels object.\n * @prop {boolean} use3d Whether or not 3D is enabled for this layer.\n */\nfunction VolumeDropdown({\n  loader: loaderWithMeta,\n  handleMultiPropertyChange,\n  resolution: currResolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  channels,\n  use3d,\n  modelMatrix,\n}) {\n  const classes = useSelectStyles();\n  const selections = channels.map(i => i.selection);\n  const { data: loader } = loaderWithMeta;\n  const handleChange = async (val) => {\n    // val is the resolution - null indicates 2D\n    const shouldUse3D = typeof val === 'number';\n    setAreAllChannelsLoading(true);\n    setRasterLayerCallback(() => {\n      setAreAllChannelsLoading(false);\n      setRasterLayerCallback(null);\n    });\n    if (shouldUse3D) {\n      const [xSlice, ySlice, zSlice] = getBoundingCube(loader);\n      const propertiesChanged = {\n        resolution: val,\n        xSlice,\n        ySlice,\n        zSlice,\n        use3d: shouldUse3D,\n      };\n      // Only make the fetch if needed i.e if the 3d was just being turned on.\n      if (!use3d) {\n        const { sliders } = await getMultiSelectionStats({\n          loader,\n          selections,\n          use3d: shouldUse3D,\n        });\n        propertiesChanged.channels = [...channels];\n        propertiesChanged.channels.forEach((ch, i) => {\n          // eslint-disable-next-line no-param-reassign\n          ch.slider = sliders[i];\n        });\n      }\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange(propertiesChanged);\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 1.5, true, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: 0,\n        rotationOrbit: 0,\n      });\n    } else {\n      const { sliders } = await getMultiSelectionStats({\n        loader, selections, use3d: shouldUse3D,\n      });\n      const newChannels = [...channels];\n      newChannels.forEach((ch, i) => {\n        // eslint-disable-next-line no-param-reassign\n        ch.slider = sliders[i];\n      });\n      // Update all properties at once to avoid overriding calls.\n      handleMultiPropertyChange({\n        resolution: val,\n        use3d: shouldUse3D,\n        spatialAxisFixed: false,\n        channels: newChannels,\n      });\n      const defaultViewState = getDefaultInitialViewState(loader,\n        { height: spatialHeight, width: spatialWidth }, 0.5, false, new Matrix4(modelMatrix));\n      setViewState({\n        ...defaultViewState,\n        rotationX: null,\n        rotationOrbit: null,\n        orbitAxis: null,\n      });\n    }\n  };\n  const { labels, shape } = Array.isArray(loader) ? loader[0] : loader;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  return (\n    <>\n      <Select\n        native\n        value={currResolution}\n        onChange={e => handleChange(\n          e.target.value === '2D' ? e.target.value : Number(e.target.value),\n        )\n        }\n        classes={{ root: classes.selectRoot }}\n      >\n        {\n          <option key=\"2D\" value=\"2D\">\n            2D Visualization\n          </option>\n        }\n        {Array.from({ length: loader.length })\n          .fill(0)\n          // eslint-disable-next-line no-unused-vars\n          .map((_, resolution) => {\n            if (loader) {\n              if (canLoadResolution(loader, resolution)) {\n                const {\n                  height,\n                  width,\n                  depthDownsampled,\n                  totalBytes,\n                } = getStatsForResolution(loader, resolution);\n                return (\n                  <option\n                    key={`(${height}, ${width}, ${depthDownsampled})`}\n                    value={resolution}\n                    disabled={\n                      disable3d\n                      || !hasZStack\n                    }\n                  >\n                    {`3D: ${resolution}x Downsampled, ~${formatBytes(\n                      totalBytes,\n                    )} per channel, (${height}, ${width}, ${depthDownsampled})`}\n                  </option>\n                );\n              }\n            }\n            return null;\n          })}\n      </Select>\n    </>\n  );\n}\n\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {string} value Currently selected value for the colormap.\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in colormap.\n */\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value === '' ? null : e.target.value)}\n      value={value}\n      inputProps={{ name: 'colormap', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      <option aria-label=\"None\" value=\"\">None</option>\n      {COLORMAP_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return (\n    <Checkbox\n      style={{ float: 'left', padding: 0 }}\n      color=\"default\"\n      onChange={() => {\n        if (value) {\n          handleChange(null);\n        } else {\n          handleChange([0, 0, 0]);\n        }\n      }}\n      checked={Boolean(value)}\n    />\n  );\n}\n\n/**\n * Wrapper for the slider that updates opacity.\n * @prop {string} value Currently selected value between 0 and 1.\n * @prop {function} handleChange Callback for every change in opacity.\n */\nfunction OpacitySlider({ value, handleChange }) {\n  return (\n    <Slider\n      value={value}\n      onChange={(e, v) => handleChange(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => 'opacity slider'}\n      min={0}\n      max={1}\n      step={0.01}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Wrapper for the dropdown that chooses the domain type.\n * @prop {string} value Currently selected value (i.e 'Max/Min').\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in domain.\n */\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value)}\n      value={value}\n      inputProps={{ name: 'domain-selector', id: inputId }}\n      style={{ width: '100%' }}\n      classes={{ root: classes.selectRoot }}\n    >\n      {DOMAIN_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Wrapper for the slider that chooses global selections (z, t etc.).\n * @prop {string} field The dimension this selects for (z, t etc.).\n * @prop {number} value Currently selected index (1, 4, etc.).\n * @prop {function} handleChange Callback for every change in selection.\n * @prop {function} possibleValues All available values for the field.\n */\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues,\n}) {\n  return (\n    <StyledSelectionSlider\n      value={value}\n      // See https://github.com/hms-dbmi/viv/issues/176 for why\n      // we have the two handlers.\n      onChange={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      onChangeCommitted={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${field} slider`}\n      marks={possibleValues.map(val => ({ value: val }))}\n      min={Number(possibleValues[0])}\n      max={Number(possibleValues.slice(-1))}\n      orientation=\"horizontal\"\n      step={null}\n    />\n  );\n}\n\n/**\n * Wrapper for each of the options to show its name and then its UI component.\n * @prop {string} name Display name for option.\n * @prop {number} opacity Current opacity value.\n * @prop {string} inputId An id for css.\n * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).\n */\nfunction LayerOption({ name, inputId, children }) {\n  return (\n    <Grid container direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n      <Grid item xs={6}>\n        <InputLabel htmlFor={inputId}>{name}:</InputLabel>\n      </Grid>\n      <Grid item xs={6}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\n/**\n * Gloabl options for all channels (opacity, colormap, etc.).\n * @prop {string} colormap What colormap is currently selected (None, viridis etc.).\n * @prop {number} opacity Current opacity value.\n * @prop {function} handleColormapChange Callback for when colormap changes.\n * @prop {function} handleOpacityChange Callback for when opacity changes.\n * @prop {object} globalControlLabels All available options for global control (z and t).\n * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.\n * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).\n * @prop {array} channels Current channel object for inferring the current global selection.\n * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).\n * @prop {string} domainType One of Max/Min or Full (soon presets as well).\n * @prop {boolean} disableChannelsIfRgbDetected Whether or not we need colormap controllers if RGB.\n */\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlLabels,\n  globalLabelValues,\n  handleGlobalChannelsSelectionChange,\n  handleSliderChange,\n  handleDomainChange,\n  transparentColor,\n  channels,\n  domainType,\n  disableChannelsIfRgbDetected,\n  shouldShowTransparentColor,\n  shouldShowDomain,\n  shouldShowColormap,\n  use3d,\n  loader,\n  handleMultiPropertyChange,\n  resolution,\n  disable3d,\n  setRasterLayerCallback,\n  setAreAllChannelsLoading,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) {\n  const { labels, shape } = Array.isArray(loader.data) ? loader.data[0] : loader.data;\n  const hasDimensionsAndChannels = labels.length > 0 && channels.length > 0;\n  const hasZStack = shape[labels.indexOf('z')] > 1;\n  // Only show volume button if we can actually view resolutions.\n  const hasViewableResolutions = Boolean(Array.from({\n    length: loader.data.length,\n  }).filter((_, res) => canLoadResolution(loader.data, res)).length);\n  return (\n    <Grid container direction=\"column\" style={{ width: '100%' }}>\n      {hasZStack\n        && !disable3d\n        && hasViewableResolutions\n        && (\n        <VolumeDropdown\n          loader={loader}\n          handleSliderChange={handleSliderChange}\n          handleDomainChange={handleDomainChange}\n          channels={channels}\n          handleMultiPropertyChange={handleMultiPropertyChange}\n          resolution={resolution}\n          disable3d={disable3d}\n          setRasterLayerCallback={setRasterLayerCallback}\n          setAreAllChannelsLoading={setAreAllChannelsLoading}\n          setViewState={setViewState}\n          spatialHeight={spatialHeight}\n          spatialWidth={spatialWidth}\n          use3d={use3d}\n          modelMatrix={modelMatrix}\n        />\n        )\n      }\n      {hasDimensionsAndChannels\n        && !use3d\n        && globalControlLabels.map(\n          field => shape[labels.indexOf(field)] > 1 && (\n          <LayerOption name={field} inputId={`${field}-slider`} key={field}>\n            <GlobalSelectionSlider\n              field={field}\n              value={globalLabelValues[field]}\n              handleChange={handleGlobalChannelsSelectionChange}\n              possibleValues={range(shape[labels.indexOf(field)])}\n            />\n          </LayerOption>\n          ),\n        )}\n      {!disableChannelsIfRgbDetected ? (\n        <>\n          {shouldShowColormap && (\n            <Grid item>\n              <LayerOption name=\"Colormap\" inputId=\"colormap-select\">\n                <ColormapSelect\n                  value={colormap || ''}\n                  inputId=\"colormap-select\"\n                  handleChange={handleColormapChange}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n          {shouldShowDomain && (\n            <Grid item>\n              <LayerOption name=\"Domain\" inputId=\"domain-selector\">\n                <SliderDomainSelector\n                  value={domainType || DEFAULT_RASTER_DOMAIN_TYPE}\n                  handleChange={(value) => {\n                    handleDomainChange(value);\n                  }}\n                />\n              </LayerOption>\n            </Grid>\n          )}\n        </>\n      ) : null}\n      {!use3d && (\n        <Grid item>\n          <LayerOption name=\"Opacity\" inputId=\"opacity-slider\">\n            <OpacitySlider value={opacity} handleChange={handleOpacityChange} />\n          </LayerOption>\n        </Grid>\n      )}\n      {shouldShowTransparentColor && !use3d && (\n        <Grid item>\n          <LayerOption\n            name=\"Zero Transparent\"\n            inputId=\"transparent-color-selector\"\n          >\n            <TransparentColorCheckbox\n              value={transparentColor}\n              handleChange={handleTransparentColorChange}\n            />\n          </LayerOption>\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n\nexport default LayerOptions;\n","import React from 'react';\nimport { Matrix4 } from 'math.gl';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Slider from '@material-ui/core/Slider';\nimport { RENDERING_MODES, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { abbreviateNumber, getBoundingCube } from './utils';\nimport { useSelectStyles } from './styles';\n\nconst useSlicerStyles = makeStyles(theme => createStyles({\n  enabled: {},\n  disabled: {\n    color: theme.palette.text.disabled,\n    // Because of the .5 opacity of the disabled color in the theme, and the fact\n    // that there are multiple overlaid parts to the slider,\n    // this needs to be set manually for the desired effect.\n    '& .MuiSlider-thumb': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n    '&  .MuiSlider-track': {\n      color: 'rgb(100, 100, 100, 1.0)',\n    },\n  },\n}));\n\nconst Slicer = ({\n  xSlice,\n  ySlice,\n  zSlice,\n  handleSlicerSetting,\n  loader,\n  use3d,\n}) => {\n  const [xSliceInit, ySliceInit, zSliceInit] = getBoundingCube(loader.data);\n  const sliceValuesAndSetSliceFunctions = [\n    [\n      xSlice,\n      xSliceNew => handleSlicerSetting('x', xSliceNew),\n      'x',\n      xSliceInit,\n    ],\n    [\n      ySlice,\n      ySliceNew => handleSlicerSetting('y', ySliceNew),\n      'y',\n      ySliceInit,\n    ],\n    [\n      zSlice,\n      zSliceNew => handleSlicerSetting('z', zSliceNew),\n      'z',\n      zSliceInit,\n    ],\n  ];\n  const classes = useSlicerStyles();\n  const Slicers = sliceValuesAndSetSliceFunctions.map(\n    ([val, setVal, label, [min, max]]) => (\n      <Grid\n        container\n        direction=\"row\"\n        justifyContent=\"flex-start\"\n        alignItems=\"center\"\n        key={label}\n      >\n        <Grid item xs={1}>\n          <Typography\n            className={!use3d ? classes.disabled : classes.enabled}\n            style={{ marginBottom: 0 }}\n          >\n            {label}:\n          </Typography>\n        </Grid>\n        <Grid item xs={11}>\n          <Slider\n            disabled={!use3d}\n            className={!use3d ? classes.disabled : classes.enabled}\n            value={val}\n            onChange={(e, v) => setVal(v)}\n            valueLabelDisplay=\"auto\"\n            valueLabelFormat={v => abbreviateNumber(v)}\n            getAriaLabel={() => `${label} slider`}\n            min={min}\n            max={max}\n            step={0.005}\n            orientation=\"horizontal\"\n          />\n        </Grid>\n      </Grid>\n    ),\n  );\n  return (\n    <>\n      <Typography\n        className={!use3d ? classes.disabled : classes.enabled}\n        style={{ marginTop: 16, marginBottom: 0 }}\n      >\n        Clipping Planes:{' '}\n      </Typography>{' '}\n      {Slicers}\n    </>\n  );\n};\n\nconst renderingOptions = Object.values(RENDERING_MODES);\n\nfunction RenderingModeSelect({\n  handleRenderingModeChange,\n  renderingMode,\n  use3d,\n}) {\n  const classes = useSelectStyles();\n  // Empty option allows for displaying the title of the dropdown fully in the UI.\n  const options = !use3d ? [...renderingOptions, ''] : renderingOptions;\n  return (\n    <FormControl fullWidth>\n      <InputLabel htmlFor=\"rendering-mode-select\">Rendering Mode</InputLabel>\n      <Select\n        native\n        onChange={e => handleRenderingModeChange(e.target.value)}\n        value={use3d ? renderingMode : ''}\n        inputProps={{\n          name: 'rendering-mode',\n          id: 'rendering-mode-select',\n        }}\n        disabled={!use3d}\n        classes={{ root: classes.selectRoot }}\n      >\n        {options.map(name => (\n          <option key={name} value={name}>\n            {name}\n          </option>\n        ))}\n      </Select>\n    </FormControl>\n  );\n}\n\nconst ReCenterButton = ({\n  setViewState,\n  use3d,\n  spatialHeight,\n  spatialWidth,\n  loader,\n  modelMatrix,\n}) => (\n  <Grid item xs=\"auto\" key=\"recenter\">\n    <Button\n      onClick={() => {\n        const defaultViewState = getDefaultInitialViewState(\n          loader.data,\n          { height: spatialHeight, width: spatialWidth },\n          1.5,\n          use3d,\n          new Matrix4(modelMatrix),\n        );\n        setViewState({\n          ...defaultViewState,\n          rotationX: 0,\n          rotationOrbit: 0,\n        });\n      }\n        }\n      disabled={!use3d}\n      style={{\n        padding: 0,\n        marginBottom: 6,\n      }}\n    >\n        Re-Center\n    </Button>\n  </Grid>\n);\n\nconst VolumeOptions = ({\n  handleSlicerSetting,\n  handleRenderingModeChange,\n  renderingMode,\n  xSlice,\n  ySlice,\n  zSlice,\n  use3d,\n  loader,\n  setViewState,\n  spatialHeight,\n  spatialWidth,\n  modelMatrix,\n}) => (\n  <>\n    <RenderingModeSelect\n      handleRenderingModeChange={handleRenderingModeChange}\n      renderingMode={renderingMode}\n      use3d={use3d}\n    />\n    <Slicer\n      xSlice={xSlice}\n      ySlice={ySlice}\n      zSlice={zSlice}\n      handleSlicerSetting={handleSlicerSetting}\n      use3d={use3d}\n      loader={loader}\n    />\n    <ReCenterButton\n      setViewState={setViewState}\n      use3d={use3d}\n      spatialHeight={spatialHeight}\n      spatialWidth={spatialWidth}\n      loader={loader}\n      modelMatrix={modelMatrix}\n    />\n  </>\n);\n\nexport default VolumeOptions;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { MAX_CHANNELS, getChannelStats } from '@hms-dbmi/viv';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\nimport Slider from '@material-ui/core/Slider';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport Accordion from '@material-ui/core/Accordion';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport VisibilityOffIcon from '@material-ui/icons/VisibilityOff';\n\nimport LayerOptions from './LayerOptions';\nimport VolumeOptions from './VolumeOptions';\nimport {\n  useControllerSectionStyles,\n  StyledAccordionDetails,\n  StyledAccordionSummary,\n  StyledInputLabel,\n  OverflowEllipsisGrid,\n} from './styles';\nimport { getMultiSelectionStats } from './utils';\n\nimport { GLOBAL_LABELS } from '../spatial/constants';\nimport { getSourceFromLoader, isRgb } from '../../utils';\nimport { canLoadResolution } from '../utils';\nimport { DOMAINS } from './constants';\n\nfunction TabPanel(props) {\n  const {\n    children, value, index, ...other\n  } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && children}\n    </div>\n  );\n}\n\n// Set the domain of the sliders based on either a full range or min/max.\nasync function getDomainsAndSliders(loader, selections, domainType, use3d) {\n  let domains;\n  const stats = await getMultiSelectionStats({\n    loader: loader.data,\n    selections,\n    use3d,\n  });\n  const { sliders } = stats;\n  if (domainType === 'Min/Max') {\n    // eslint-disable-next-line prefer-destructuring\n    domains = stats.domains;\n  }\n  if (domainType === 'Full') {\n    const source = getSourceFromLoader(loader);\n    domains = selections.map(() => DOMAINS[source.dtype]);\n  }\n  return { domains, sliders };\n}\n\nconst buttonStyles = {\n  borderStyle: 'dashed',\n  marginTop: '10px',\n  fontWeight: 400,\n};\n\n/**\n * Controller for the various imaging options (color, opactiy, sliders etc.)\n * @prop {object} imageData Image config object, one of the `images` in the raster schema.\n * @prop {object} layerId Randomly generated id for the image layer that this controller handles.\n * @prop {function} handleLayerRemove Callback for handling the removal of a layer.\n * @prop {object} loader Loader object for the current imaging layer.\n * @prop {function} handleLayerChange Callback for handling the changing of layer properties.\n */\nexport default function LayerController(props) {\n  const {\n    layer,\n    name,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n    shouldShowTransparentColor,\n    shouldShowDomain,\n    shouldShowColormap,\n    ChannelController,\n    setViewState,\n    disable3d,\n    setRasterLayerCallback,\n    setAreLayerChannelsLoading,\n    areLayerChannelsLoading,\n    disabled,\n    spatialHeight,\n    spatialWidth,\n    disableChannelsIfRgbDetected,\n    shouldShowRemoveLayerButton,\n  } = props;\n\n  const {\n    colormap,\n    opacity,\n    channels,\n    transparentColor,\n    renderingMode,\n    xSlice,\n    ySlice,\n    zSlice,\n    resolution,\n    use3d,\n    modelMatrix,\n  } = layer;\n  // Channels are used in a lot of callbacks and change handlers\n  // so ensuring they have an up to date copy of the data ensures consistency.\n  // See: https://github.com/vitessce/vitessce/issues/1036\n  const channelRef = useRef(channels);\n  useEffect(() => {\n    channelRef.current = channels;\n    return undefined;\n  }, [channels]);\n\n  const firstSelection = channels[0]?.selection || {};\n\n  const { data, channels: channelOptions } = loader;\n  const [tab, setTab] = useState(0);\n\n  const handleTabChange = (event, newTab) => {\n    setTab(newTab);\n  };\n  const { labels, shape } = Array.isArray(data) ? data[data.length - 1] : data;\n  const [domainType, setDomainType] = useState(layer.domainType);\n  const [isExpanded, setIsExpanded] = useState(true);\n  const [globalLabelValues, setGlobalLabelValues] = useState(\n    GLOBAL_LABELS.filter(\n      field => typeof firstSelection[field] === 'number',\n    ).reduce((o, key) => ({ ...o, [key]: firstSelection[key] }), {}),\n  );\n\n  function setVisible(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  function setColormap(v) {\n    handleLayerChange({ ...layer, colormap: v });\n  }\n\n  function setOpacity(v) {\n    handleLayerChange({ ...layer, opacity: v });\n  }\n\n  function setChannels(v) {\n    handleLayerChange({ ...layer, channels: v });\n  }\n  function setTransparentColor(v) {\n    handleLayerChange({ ...layer, transparentColor: v });\n  }\n  function setRenderingMode(v) {\n    handleLayerChange({ ...layer, renderingMode: v });\n  }\n\n  function handleMultiPropertyChange(obj) {\n    handleLayerChange({ ...layer, ...obj });\n  }\n\n  function handleSlicerSetting(slice, val) {\n    handleLayerChange({ ...layer, [`${slice}Slice`]: val });\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange({\n      ...layer,\n      channels: newChannels,\n      domainType: newDomainType,\n    });\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channelRef.current];\n    newChannels[i] = v;\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channelRef.current, v];\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channelRef.current];\n    newChannels.splice(i, 1);\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  const setAreAllChannelsLoading = (val) => {\n    const newAreLayerChannelsLoading = channelRef.current.map(() => val);\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n  };\n\n  // Handles adding a channel, creating a default selection\n  // for the current global settings and domain type.\n  const handleChannelAdd = async () => {\n    const selection = {};\n    labels.forEach((label) => {\n      // Set new image to default selection for non-global selections (0)\n      // and use current global selection otherwise.\n      selection[label] = GLOBAL_LABELS.includes(label)\n        ? globalLabelValues[label] || 0\n        : 0;\n    });\n    const { domains, sliders } = await getDomainsAndSliders(\n      loader,\n      [selection],\n      domainType,\n      use3d,\n    );\n    const domain = domains[0];\n    const slider = domain;\n    const color = [255, 255, 255];\n    const visible = true;\n    const newChannelId = channels.length;\n    const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n    newAreLayerChannelsLoading[newChannelId] = true;\n    setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n    const channel = {\n      selection,\n      slider,\n      visible,\n      color,\n    };\n    setRasterLayerCallback(() => {\n      setChannel({ ...channel, slider: sliders[0] }, newChannelId);\n      const areLayerChannelsLoadingCallback = [...newAreLayerChannelsLoading];\n      areLayerChannelsLoadingCallback[newChannelId] = false;\n      setAreLayerChannelsLoading(areLayerChannelsLoadingCallback);\n      setRasterLayerCallback(null);\n    });\n    addChannel(channel);\n  };\n\n  const handleDomainChange = async (value) => {\n    setDomainType(value);\n    const selections = channels.map(channel => channel.selection);\n    let sliders = channels.map(channel => channel.slider);\n    const { domains } = await getDomainsAndSliders(\n      loader,\n      selections,\n      value,\n      use3d,\n    );\n\n    // If it's the right-most slider, we take the minimum of that and the new value.\n    // Otherwise, we use the maximum of the left-hand side and the new value.\n    sliders = sliders.map((slider, i) => {\n      const [left, right] = slider;\n      return [Math.max(left, domains[i][0]), Math.min(right, domains[i][1])];\n    });\n\n    const newChannels = channels.map((c, i) => ({ ...c, slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  };\n\n  // This call updates all channel selections with new global selection from the UI.\n  const handleGlobalChannelsSelectionChange = async ({ selection, event }) => {\n    const selections = channels.map(channel => ({\n      ...channel.selection,\n      ...selection,\n    }));\n    const canUpdateChannels = event.type === 'mouseup' || event.type === 'keydown';\n    // Only update domains on a mouseup event for the same reason as above.\n    if (canUpdateChannels) {\n      setAreAllChannelsLoading(true);\n      getDomainsAndSliders(loader, selections, domainType, use3d).then(\n        ({ sliders }) => {\n          const newChannelsWithSelection = channels.map(c => ({\n            ...c,\n            selection: { ...c.selection, ...selection },\n          }));\n          // Set the callback before changing the selection\n          // so the callback is used when the layer (re)loads its data.\n          setRasterLayerCallback(() => {\n            setRasterLayerCallback(null);\n            setAreAllChannelsLoading(false);\n            const newChannelsWithSliders = [...newChannelsWithSelection].map(\n              (c, i) => ({\n                ...c,\n                slider: sliders[i],\n              }),\n            );\n            setChannels(newChannelsWithSliders);\n          });\n          setChannels(newChannelsWithSelection);\n        },\n      );\n    }\n    setGlobalLabelValues(prev => ({ ...prev, ...selection }));\n  };\n\n  let channelControllers = [];\n  if (labels.length > 0) {\n    const channelLabel = labels.find(c => c === 'channel' || c === 'c') || labels[0];\n    // Create the channel controllers for each channel.\n    channelControllers = channels.map(\n      // c is an object like { color, selection, slider, visible }.\n      (c, channelId) => {\n        // Update the auxiliary store with the current loading state of a channel.\n        const setIsLoading = (val) => {\n          const newAreLayerChannelsLoading = [...areLayerChannelsLoading];\n          newAreLayerChannelsLoading[channelId] = val;\n          setAreLayerChannelsLoading(newAreLayerChannelsLoading);\n        };\n        // Change one property of a channel (for now - soon\n        // nested structures allowing for multiple z/t selecitons at once, for example).\n        const handleChannelPropertyChange = (property, value) => {\n          // property is something like \"selection\" or \"slider.\"\n          // value is the actual change, like { channel: \"DAPI\" }.\n          const update = { [property]: value };\n          if (property === 'selection') {\n            // Channel is loading until the layer callback is called\n            // by the layer, which fetches the raster data.\n            setIsLoading(true);\n            update.selection = {\n              ...globalLabelValues,\n              ...update.selection,\n            };\n            setChannel({ ...c, ...update }, channelId);\n            // Call back for raster layer handles update of UI\n            // like sliders and the loading state of the channel.\n            setRasterLayerCallback(async () => {\n              const selections = [\n                { ...channels[channelId][property], ...value },\n              ];\n              const { sliders } = await getDomainsAndSliders(\n                loader,\n                selections,\n                domainType,\n                use3d,\n              );\n              [update.slider] = sliders;\n              setChannel({ ...c, ...update }, channelId);\n              setRasterLayerCallback(null);\n              setIsLoading(false);\n            });\n          } else {\n            setChannel({ ...c, ...update }, channelId);\n          }\n        };\n        const handleChannelRemove = () => {\n          removeChannel(channelId);\n        };\n        const handleIQRUpdate = async () => {\n          const { data: loaderData } = loader;\n          const source = Array.isArray(loaderData)\n            ? loaderData[loaderData.length - 1]\n            : loaderData;\n          const raster = await source.getRaster({\n            selection: channels[channelId].selection,\n          });\n          const stats = getChannelStats(raster.data);\n          const { q1, q3 } = stats;\n          setChannel({ ...c, slider: [q1, q3] }, channelId);\n        };\n        return (\n          <ChannelController\n            // eslint-disable-next-line react/no-array-index-key\n            key={`channel-controller-${channelId}`}\n            dimName={channelLabel}\n            visibility={c.visible}\n            selectionIndex={c.selection[channelLabel]}\n            slider={c.slider}\n            color={c.color}\n            channels={channels}\n            channelId={channelId}\n            domainType={domainType}\n            loader={loader}\n            globalLabelValues={globalLabelValues}\n            theme={theme}\n            channelOptions={channelOptions}\n            colormapOn={Boolean(colormap)}\n            handlePropertyChange={handleChannelPropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            setRasterLayerCallback={setRasterLayerCallback}\n            isLoading={areLayerChannelsLoading[channelId]}\n            use3d={use3d}\n          />\n        );\n      },\n    );\n  }\n\n  const controllerSectionClasses = useControllerSectionStyles();\n\n  const { visible } = layer;\n  const visibleSetting = typeof visible === 'boolean' ? visible : true;\n  const Visibility = visibleSetting ? VisibilityIcon : VisibilityOffIcon;\n  // Only show Volume tabs if 3D is available.\n  const hasViewableResolutions = Boolean(\n    Array.from({\n      length: loader.data.length,\n    }).filter((_, res) => canLoadResolution(loader.data, res)).length,\n  );\n  const useVolumeTabs = !disable3d && shape[labels.indexOf('z')] > 1 && hasViewableResolutions;\n  const FullController = (\n    <>\n      <LayerOptions\n        channels={channels}\n        opacity={opacity}\n        colormap={colormap}\n        transparentColor={transparentColor}\n        domainType={domainType}\n        // Only allow for global dimension controllers that\n        // exist in the `dimensions` part of the loader.\n        globalControlLabels={labels.filter(label => GLOBAL_LABELS.includes(label))}\n        globalLabelValues={globalLabelValues}\n        handleOpacityChange={setOpacity}\n        handleColormapChange={setColormap}\n        handleGlobalChannelsSelectionChange={\n          handleGlobalChannelsSelectionChange\n        }\n        handleTransparentColorChange={setTransparentColor}\n        disableChannelsIfRgbDetected={\n          isRgb(loader) && disableChannelsIfRgbDetected\n        }\n        handleDomainChange={handleDomainChange}\n        shouldShowTransparentColor={shouldShowTransparentColor}\n        shouldShowDomain={shouldShowDomain}\n        shouldShowColormap={shouldShowColormap}\n        use3d={use3d}\n        loader={loader}\n        handleMultiPropertyChange={handleMultiPropertyChange}\n        resolution={resolution}\n        disable3d={disable3d}\n        setRasterLayerCallback={setRasterLayerCallback}\n        setAreAllChannelsLoading={setAreAllChannelsLoading}\n        setViewState={setViewState}\n        spatialHeight={spatialHeight}\n        spatialWidth={spatialWidth}\n        modelMatrix={modelMatrix}\n      />\n      {isRgb(loader) && disableChannelsIfRgbDetected\n        ? null\n        : channelControllers}\n      {isRgb(loader) && disableChannelsIfRgbDetected ? null : (\n        <Button\n          disabled={channels.length === MAX_CHANNELS}\n          onClick={handleChannelAdd}\n          fullWidth\n          variant=\"outlined\"\n          style={buttonStyles}\n          startIcon={<AddIcon />}\n          size=\"small\"\n        >\n          Add Channel\n        </Button>\n      )}\n    </>\n  );\n  return (\n    <Accordion\n      className={controllerSectionClasses.root}\n      onChange={(e, expanded) => !disabled\n        && setIsExpanded(\n          expanded && e?.target?.attributes?.role?.value === 'presentation',\n        )\n      }\n      TransitionProps={{ enter: false }}\n      expanded={!disabled && isExpanded}\n    >\n      <StyledAccordionSummary\n        expandIcon={<ExpandMoreIcon role=\"presentation\" />}\n        aria-controls={`layer-${name}-controls`}\n      >\n        <Grid container direction=\"column\" m={1} justifyContent=\"center\">\n          <OverflowEllipsisGrid item>\n            <Button\n              onClick={(e) => {\n                if (!disabled) {\n                  // Needed to prevent affecting the expansion panel from changing\n                  e.stopPropagation();\n                  const nextVisible = typeof visible === 'boolean' ? !visible : false;\n                  setVisible(nextVisible);\n                }\n              }}\n              style={{\n                marginRight: 8,\n                marginBottom: 2,\n                padding: 0,\n                minWidth: 0,\n              }}\n            >\n              <Visibility />\n            </Button>\n            {name}\n          </OverflowEllipsisGrid>\n          {!disabled && !isExpanded && !use3d && (\n            <Grid\n              container\n              direction=\"row\"\n              alignItems=\"center\"\n              justifyContent=\"center\"\n            >\n              <Grid item xs={6}>\n                <StyledInputLabel htmlFor={`layer-${name}-opacity-closed`}>\n                  Opacity:\n                </StyledInputLabel>\n              </Grid>\n              <Grid item xs={6}>\n                <Slider\n                  id={`layer-${name}-opacity-closed`}\n                  value={opacity}\n                  onChange={(e, v) => setOpacity(v)}\n                  valueLabelDisplay=\"auto\"\n                  getAriaLabel={() => 'opacity slider'}\n                  min={0}\n                  max={1}\n                  step={0.01}\n                  orientation=\"horizontal\"\n                />\n              </Grid>\n            </Grid>\n          )}\n        </Grid>\n      </StyledAccordionSummary>\n      <StyledAccordionDetails>\n        {useVolumeTabs ? (\n          <>\n            <Tabs\n              value={tab}\n              onChange={handleTabChange}\n              aria-label=\"simple tabs example\"\n              style={{ height: '24px', minHeight: '24px' }}\n            >\n              <Tab\n                label=\"Channels\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n                disableRipple\n              />\n              <Tab\n                label=\"Volume\"\n                style={{\n                  fontSize: '.75rem',\n                  bottom: 12,\n                  width: '50%',\n                  minWidth: '50%',\n                }}\n              />\n            </Tabs>\n            <TabPanel value={tab} index={0}>\n              {FullController}\n            </TabPanel>\n            <TabPanel value={tab} index={1} style={{ marginTop: 4 }}>\n              <VolumeOptions\n                loader={loader}\n                handleSlicerSetting={handleSlicerSetting}\n                handleRenderingModeChange={setRenderingMode}\n                renderingMode={renderingMode}\n                xSlice={xSlice}\n                ySlice={ySlice}\n                zSlice={zSlice}\n                use3d={use3d}\n                setViewState={setViewState}\n                spatialHeight={spatialHeight}\n                spatialWidth={spatialWidth}\n                modelMatrix={modelMatrix}\n              />\n            </TabPanel>\n          </>\n        ) : (\n          FullController\n        )}\n        {shouldShowRemoveLayerButton ? (\n          <Button\n            onClick={handleLayerRemove}\n            fullWidth\n            variant=\"outlined\"\n            style={buttonStyles}\n            size=\"small\"\n          >\n            Remove Image Layer\n          </Button>\n        ) : null}\n      </StyledAccordionDetails>\n    </Accordion>\n  );\n}\n","module.exports = require(\"@material-ui/core/Tab\");","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nimport { VIEWER_PALETTE } from '../utils';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '70px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  button: {\n    padding: '3px',\n    width: '16px',\n  },\n  icon: {\n    width: '17px',\n    height: '17px',\n    stroke: theme.palette.action.selected,\n    'stroke-width': '1px',\n  },\n}));\n\nconst ColorPalette = ({ handleChange }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container} aria-label=\"color-swatch\">\n      {VIEWER_PALETTE.map(color => (\n        <IconButton\n          className={classes.button}\n          key={color}\n          onClick={() => handleChange(color)}\n        >\n          <LensIcon\n            fontSize=\"small\"\n            style={{ color: `rgb(${color})` }}\n            className={classes.icon}\n          />\n        </IconButton>\n      ))}\n    </div>\n  );\n};\n\nexport default ColorPalette;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu, MuiSpan } from '../shared-mui/components';\n\nimport ColorPalette from './ColorPalette';\n\nconst useStyles = makeStyles(() => ({\n  menuButton: {\n    backgroundColor: 'transparent',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\n/**\n * Dropdown for options for a channel on the three dots button.\n * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).\n * @prop {function} handleChannelRemove Callback for channel removal.\n * @prop {function} handleIQRUpdate Callback for IQR slider update.\n */\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, setOpen] = useState(false);\n\n  const classes = useStyles();\n\n  const handleColorSelect = (color) => {\n    handlePropertyChange('color', color);\n  };\n\n  const handleRemove = () => {\n    setOpen(false);\n    handleChannelRemove();\n  };\n\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<MoreVertIcon fontSize=\"small\" />}\n      buttonClassName={classes.menuButton}\n    >\n      <MenuItem dense disableGutters onClick={handleRemove}>\n        <MuiSpan>Remove</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters onClick={handleIQRUpdate}>\n        <MuiSpan>Use IQR</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters className={classes.colors}>\n        <ColorPalette handleChange={handleColorSelect} />\n      </MenuItem>\n    </PopperMenu>\n  );\n}\n\nexport default ChannelOptions;\n","import React from 'react';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Select from '@material-ui/core/Select';\nimport { useSelectStyles } from './styles';\n\n/**\n * Dropdown for selecting a channel.\n * @prop {function} handleChange Callback for each new selection.\n * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {number} selectionIndex Current numeric index of a selection.\n */\nexport function ChannelSelectionDropdown({\n  handleChange,\n  disabled,\n  channelOptions,\n  selectionIndex,\n}) {\n  const classes = useSelectStyles();\n  return (\n    <Select\n      classes={{ root: classes.selectRoot }}\n      native\n      value={selectionIndex}\n      onChange={e => handleChange(Number(e.target.value))}\n    >\n      {channelOptions.map((opt, i) => (\n        <option disabled={disabled} key={opt} value={i}>\n          {opt}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Checkbox for toggling on/off of a channel.\n * @prop {string} color Current color for this channel.\n * @prop {boolean} checked Whether or not this channel is \"on\".\n * @prop {boolean} disabled Whether or not the component is disabled.\n * @prop {function} toggle Callback for toggling on/off.\n */\nexport function ChannelVisibilityCheckbox({\n  color, checked, toggle, disabled,\n}) {\n  return (\n    <Checkbox\n      onChange={toggle}\n      checked={checked}\n      disabled={disabled}\n      style={{ color, '&$checked': { color } }}\n    />\n  );\n}\n","import React, { useCallback, useState, useEffect } from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport ChannelOptions from './ChannelOptions';\nimport { DOMAINS } from './constants';\nimport { getSourceFromLoader } from '../../utils';\nimport { getMultiSelectionStats } from './utils';\nimport {\n  ChannelSelectionDropdown,\n  ChannelVisibilityCheckbox,\n} from './shared-channel-controls';\n\n// Returns an rgb string for display, and changes the color (arr)\n// to use a grey for light theme + white color or if the colormap is on.\nexport const toRgbUIString = (on, arr, theme) => {\n  const color = on || (theme === 'light' && arr.every(i => i === 255))\n    ? [220, 220, 220]\n    : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) {\n    --maxNaiveDigits;\n  } // Wasted on \".\"\n  if (value < 1) {\n    --maxNaiveDigits;\n  } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n  const naive = Intl.NumberFormat('en-US', {\n    maximumSignificantDigits: maxNaiveDigits,\n    useGrouping: false,\n  }).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n\n/**\n * Slider for controlling current colormap.\n * @prop {string} color Current color for this channel.\n * @prop {arry} slider Current value of the slider.\n * @prop {function} handleChange Callback for each slider change.\n * @prop {array} domain Current max/min allowable slider values.\n */\nfunction ChannelSlider({\n  color,\n  slider = [0, 0],\n  handleChange,\n  domain = [0, 0],\n  dtype,\n  disabled,\n}) {\n  const [min, max] = domain;\n  const sliderCopy = slider.slice();\n  if (slider[0] < min) {\n    sliderCopy[0] = min;\n  }\n  if (slider[1] > max) {\n    sliderCopy[1] = max;\n  }\n  const handleChangeDebounced = useCallback(\n    debounce(handleChange, 3, { trailing: true }),\n    [handleChange],\n  );\n  const step = max - min < 500 && dtype === 'Float32' ? (max - min) / 500 : 1;\n  return (\n    <Slider\n      value={slider}\n      valueLabelFormat={abbreviateNumber}\n      onChange={(e, v) => handleChangeDebounced(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${color}-${slider}`}\n      min={min}\n      max={max}\n      step={step}\n      orientation=\"horizontal\"\n      style={{ color, marginTop: '7px' }}\n      disabled={disabled}\n    />\n  );\n}\n\n/**\n * Controller for the handling the colormapping sliders.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {array} slider Current slider range.\n * @prop {array} color Current color for this channel.\n * @prop {array} domain Current max/min for this channel.\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n */\nfunction RasterChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  isLoading,\n  use3d: newUse3d,\n}) {\n  const { dtype } = getSourceFromLoader(loader);\n  const [domain, setDomain] = useState(null);\n  const [domainType, setDomainType] = useState(null);\n  const [use3d, setUse3d] = useState(null);\n  const [selection, setSelection] = useState([\n    { ...channels[channelId].selection },\n  ]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n\n  useEffect(() => {\n    // Use mounted to prevent state updates/re-renders after the component has been unmounted.\n    // All state updates should happen within the mounted check.\n    let mounted = true;\n    if (dtype && loader && channels) {\n      const selections = [{ ...channels[channelId].selection }];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const has3dChanged = use3d !== newUse3d;\n      const hasSelectionChanged = !isEqual(selections, selection);\n      if (hasDomainChanged || hasSelectionChanged || has3dChanged) {\n        if (newDomainType === 'Full') {\n          domains = [DOMAINS[dtype]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(selections);\n            }\n            if (has3dChanged) {\n              setUse3d(newUse3d);\n            }\n          }\n        } else {\n          getMultiSelectionStats({\n            loader: loader.data,\n            selections,\n            use3d: newUse3d,\n          }).then((stats) => {\n            // eslint-disable-next-line prefer-destructuring\n            domains = stats.domains;\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(selections);\n              }\n              if (has3dChanged) {\n                setUse3d(newUse3d);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [\n    domainType,\n    channels,\n    channelId,\n    loader,\n    dtype,\n    newDomainType,\n    selection,\n    newUse3d,\n    use3d,\n  ]);\n  /* A valid selection is defined by an object where the keys are\n   *  the name of a dimension of the data, and the values are the\n   *  index of the image along that particular dimension.\n   *\n   *  Since we currently only support making a selection along one\n   *  addtional dimension (i.e. the dropdown just has channels or mz)\n   *  we have a helper function to create the selection.\n   *\n   *  e.g { channel: 2 } // channel dimension, third channel\n   */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"column\" m={1} justifyContent=\"center\">\n      <Grid container direction=\"row\" justifyContent=\"space-between\">\n        <Grid item xs={10}>\n          <ChannelSelectionDropdown\n            handleChange={v => handlePropertyChange('selection', createSelection(v))\n            }\n            selectionIndex={selectionIndex}\n            channelOptions={channelOptions}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={1} style={{ marginTop: '4px' }}>\n          <ChannelOptions\n            handlePropertyChange={handlePropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" justifyContent=\"space-between\">\n        <Grid item xs={2}>\n          <ChannelVisibilityCheckbox\n            color={rgbColor}\n            checked={visibility}\n            toggle={() => handlePropertyChange('visible', !visibility)}\n            disabled={isLoading}\n          />\n        </Grid>\n        <Grid item xs={9}>\n          <ChannelSlider\n            color={rgbColor}\n            slider={slider}\n            domain={domain || DOMAINS[dtype]}\n            dtype={dtype}\n            handleChange={v => handlePropertyChange('slider', v)}\n            disabled={isLoading}\n          />\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default RasterChannelController;\n","import React from 'react';\n\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Grid from '@material-ui/core/Grid';\n\nimport { ChannelSelectionDropdown, ChannelVisibilityCheckbox } from './shared-channel-controls';\n\n/**\n * Controller for the handling the bitmask channels.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).\n */\nfunction BitmaskChannelController({\n  visibility = false,\n  dimName,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  selectionIndex,\n  disableOptions = false,\n}) {\n  /* A valid selection is defined by an object where the keys are\n  *  the name of a dimension of the data, and the values are the\n  *  index of the image along that particular dimension.\n  *\n  *  Since we currently only support making a selection along one\n  *  addtional dimension (i.e. the dropdown just has channels or mz)\n  *  we have a helper function to create the selection.\n  *\n  *  e.g { channel: 2 } // channel dimension, third channel\n  */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"row\" justify=\"space-between\">\n      <Grid item xs={2}>\n        <ChannelVisibilityCheckbox\n          color={[220, 220, 220]}\n          checked={visibility}\n          toggle={() => handlePropertyChange('visible', !visibility)}\n        />\n      </Grid>\n      <Grid item xs={9}>\n        <ChannelSelectionDropdown\n          handleChange={v => handlePropertyChange('selection', createSelection(v))}\n          selectionIndex={selectionIndex}\n          disableOptions={disableOptions}\n          channelOptions={channelOptions}\n        />\n      </Grid>\n      <Grid item xs={1}>\n        <IconButton onClick={handleChannelRemove} style={{ padding: '6px 6px 6px 0px' }}>\n          <RemoveCircleIcon />\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default BitmaskChannelController;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu } from '../shared-mui/components';\n\nconst useStyles = makeStyles(() => ({\n  addButton: {\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontWeight: 400,\n  },\n}));\n\nfunction ImageAddIcon() {\n  return (\n    <>\n      <AddIcon />\n      Add Image Layer\n    </>\n  );\n}\n\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, setOpen] = useState(false);\n  const classes = useStyles();\n\n  const handleAdd = (imgData) => {\n    setOpen(prev => !prev);\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return (\n    <PopperMenu\n      open={open}\n      setOpen={setOpen}\n      buttonIcon={<ImageAddIcon />}\n      buttonClassName={classes.addButton}\n      placement=\"bottom-start\"\n    >\n      {imageOptions.map((imgData, i) => (\n        <MenuItem dense key={imgData.name} onClick={() => handleAdd(i)}>\n          <span>{imgData.name}</span>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nexport default ImageAddButton;\n","/* eslint-disable dot-notation */\nimport React, {\n  useEffect, useCallback, useRef, forwardRef,\n} from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TitleInfo from '../TitleInfo';\nimport RasterChannelController from './RasterChannelController';\nimport BitmaskChannelController from './BitmaskChannelController';\nimport VectorLayerController from './VectorLayerController';\nimport LayerController from './LayerController';\nimport ImageAddButton from './ImageAddButton';\nimport { useReady, useClosestVitessceContainerSize, useWindowDimensions } from '../hooks';\nimport { useCellsData, useMoleculesData, useRasterData } from '../data-hooks';\nimport {\n  useCoordination,\n  useLoaders,\n  useAuxiliaryCoordination,\n  useComponentLayout,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { initializeLayerChannels } from '../spatial/utils';\nimport { DEFAULT_RASTER_LAYER_PROPS } from '../spatial/constants';\n\nconst LAYER_CONTROLLER_DATA_TYPES = ['raster'];\n\n// LayerController is memoized to prevent updates from prop changes that\n// are caused by view state updates i.e zooming and panning within\n// the actual Spatial component.  Re-rendering this component is very\n// expensive so we have to be careful with props in this file in general.\nconst LayerControllerMemoized = React.memo(\n  forwardRef((props, ref) => {\n    const {\n      title,\n      removeGridComponent,\n      theme,\n      isReady,\n      moleculesLayer,\n      dataset,\n      setMoleculesLayer,\n      cellsLayer,\n      canShowCellVecmask,\n      setCellsLayer,\n      rasterLayers,\n      imageLayerLoaders,\n      imageLayerMeta,\n      rasterLayersCallbacks,\n      setRasterLayersCallbacks,\n      areLoadingRasterChannnels,\n      setAreLoadingRasterChannnels,\n      handleRasterLayerChange,\n      handleRasterLayerRemove,\n      disable3d,\n      globalDisable3d,\n      disableChannelsIfRgbDetected,\n      layerIs3DIndex,\n      setZoom,\n      setTargetX,\n      setTargetY,\n      setTargetZ,\n      setRotationX,\n      setRotationOrbit,\n      componentHeight,\n      componentWidth,\n      spatialLayout,\n      handleImageAdd,\n      enableLayerButtonsWithOneLayer,\n    } = props;\n    const shouldShowImageLayerButton = Boolean(\n      enableLayerButtonsWithOneLayer || imageLayerLoaders?.length > 1,\n    );\n    return (\n      <TitleInfo\n        title={title}\n        isScroll\n        removeGridComponent={removeGridComponent}\n        theme={theme}\n        isReady={isReady}\n      >\n        <div className=\"layer-controller-container\" ref={ref}>\n          {moleculesLayer && (\n            <VectorLayerController\n              key={`${dataset}-molecules`}\n              label=\"Molecules\"\n              layerType=\"molecules\"\n              layer={moleculesLayer}\n              handleLayerChange={setMoleculesLayer}\n            />\n          )}\n          {cellsLayer && canShowCellVecmask && (\n            <VectorLayerController\n              key={`${dataset}-cells`}\n              label=\"Cell Segmentations\"\n              layerType=\"cells\"\n              layer={cellsLayer}\n              handleLayerChange={setCellsLayer}\n            />\n          )}\n          {rasterLayers\n            && rasterLayers.map((layer, i) => {\n              const { index } = layer;\n              const loader = imageLayerLoaders[index];\n              const layerMeta = imageLayerMeta[index];\n              // Could also be bitmask at the moment.\n              const isRaster = !layerMeta?.metadata?.isBitmask;\n              const ChannelController = isRaster\n                ? RasterChannelController\n                : BitmaskChannelController;\n              // Set up the call back mechanism so that each layer manages\n              // callbacks/loading state for itself and its channels.\n              const setRasterLayerCallback = (cb) => {\n                const newRasterLayersCallbacks = [\n                  ...(rasterLayersCallbacks || []),\n                ];\n                newRasterLayersCallbacks[i] = cb;\n                setRasterLayersCallbacks(newRasterLayersCallbacks);\n              };\n              const areLayerChannelsLoading = (areLoadingRasterChannnels || [])[i] || [];\n              const setAreLayerChannelsLoading = (v) => {\n                const newAreLoadingRasterChannnels = [\n                  ...(areLoadingRasterChannnels || []),\n                ];\n                newAreLoadingRasterChannnels[i] = v;\n                setAreLoadingRasterChannnels(newAreLoadingRasterChannnels);\n              };\n              return loader && layerMeta ? (\n                <Grid\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={`${dataset}-raster-${index}-${i}`}\n                  item\n                  style={{ marginTop: '10px' }}\n                >\n                  <LayerController\n                    name={layerMeta.name}\n                    layer={layer}\n                    loader={loader}\n                    theme={theme}\n                    handleLayerChange={v => handleRasterLayerChange(v, i)}\n                    handleLayerRemove={() => handleRasterLayerRemove(i)}\n                    ChannelController={ChannelController}\n                    shouldShowTransparentColor={isRaster}\n                    shouldShowDomain={isRaster}\n                    shouldShowColormap={isRaster}\n                    // Disable 3D if given explicit instructions to do so\n                    // or if another layer is using 3D mode.\n                    disable3d={\n                      globalDisable3d\n                      || (disable3d || []).indexOf(layerMeta.name) >= 0\n                      || (typeof layerIs3DIndex === 'number'\n                        && layerIs3DIndex !== -1\n                        && layerIs3DIndex !== i)\n                    }\n                    disabled={\n                      typeof layerIs3DIndex === 'number'\n                      && layerIs3DIndex !== -1\n                      && layerIs3DIndex !== i\n                    }\n                    disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n                    rasterLayersCallbacks={rasterLayersCallbacks}\n                    setRasterLayerCallback={setRasterLayerCallback}\n                    setViewState={({\n                      zoom: newZoom,\n                      target,\n                      rotationX: newRotationX,\n                      rotationOrbit: newRotationOrbit,\n                    }) => {\n                      setZoom(newZoom);\n                      setTargetX(target[0]);\n                      setTargetY(target[1]);\n                      setTargetZ(target[2]);\n                      setRotationX(newRotationX);\n                      setRotationOrbit(newRotationOrbit);\n                    }}\n                    setAreLayerChannelsLoading={setAreLayerChannelsLoading}\n                    areLayerChannelsLoading={areLayerChannelsLoading}\n                    spatialHeight={(componentHeight * (spatialLayout ? spatialLayout.h : 1)) / 12}\n                    spatialWidth={(componentWidth * (spatialLayout ? spatialLayout.w : 1)) / 12}\n                    shouldShowRemoveLayerButton={shouldShowImageLayerButton}\n                  />\n                </Grid>\n              ) : null;\n            })}\n          {shouldShowImageLayerButton\n            ? (\n              <Grid item>\n                <ImageAddButton\n                  imageOptions={imageLayerMeta}\n                  handleImageAdd={handleImageAdd}\n                />\n              </Grid>\n            ) : null}\n        </div>\n      </TitleInfo>\n    );\n  }),\n);\n\n/**\n * A subscriber component for the spatial layer controller.\n * @param {object} props\n * @param {string} props.theme The current theme name.\n * @param {object} props.coordinationScopes The mapping from coordination types to coordination\n * scopes.\n * @param {function} props.removeGridComponent The callback function to pass to TitleInfo,\n * to call when the component has been removed from the grid.\n * @param {string} props.title The component title.\n * @param {Object} props.disable3d Which layers should have 3D disabled (from `raster.json` names).\n * @param {boolean} props.globalDisable3d Disable 3D for all layers. Overrides the `disable3d` prop.\n * @param {boolean} props.disableChannelsIfRgbDetected Disable channel controls if an\n * RGB image is detected i.e 3 channel 8 bit.\n * @param {boolean} props.enableLayerButtonsWithOneLayer If there is only one layer,\n * show the the layer add/remove buttons.\n */\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n    title = 'Spatial Layers',\n    disable3d,\n    globalDisable3d,\n    disableChannelsIfRgbDetected,\n    enableLayerButtonsWithOneLayer,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [\n    {\n      dataset,\n      spatialImageLayer: rasterLayers,\n      spatialSegmentationLayer: cellsLayer,\n      spatialPointLayer: moleculesLayer,\n    },\n    {\n      setSpatialImageLayer: setRasterLayers,\n      setSpatialSegmentationLayer: setCellsLayer,\n      setSpatialPointLayer: setMoleculesLayer,\n      setSpatialTargetX: setTargetX,\n      setSpatialTargetY: setTargetY,\n      setSpatialTargetZ: setTargetZ,\n      setSpatialRotationX: setRotationX,\n      setSpatialRotationOrbit: setRotationOrbit,\n      setSpatialZoom: setZoom,\n    },\n  ] = useCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n\n  const [\n    {\n      rasterLayersCallbacks,\n      areLoadingRasterChannnels,\n    },\n    {\n      setRasterLayersCallbacks,\n      setAreLoadingRasterChannnels,\n    },\n  ] = useAuxiliaryCoordination(\n    COMPONENT_COORDINATION_TYPES.layerController,\n    coordinationScopes,\n  );\n  // Spatial layout + window size is needed for the \"re-center\" button to work properly.\n  // Dimensions of the Spatial component can be inferred and used for resetting view state to\n  // a nice, centered view.\n  const [spatialLayout] = useComponentLayout('spatial', ['spatialImageLayer'], coordinationScopes);\n  const layerControllerRef = useRef();\n  const [componentWidth, componentHeight] = useClosestVitessceContainerSize(layerControllerRef);\n  const { height: windowHeight, width: windowWidth } = useWindowDimensions();\n\n  const [\n    isReady,\n    setItemIsReady,\n    setItemIsNotReady, // eslint-disable-line no-unused-vars\n    resetReadyItems,\n  ] = useReady(\n    LAYER_CONTROLLER_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => { }, false,\n    { setSpatialImageLayer: setRasterLayers },\n    { spatialImageLayer: rasterLayers },\n  );\n\n  useCellsData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialSegmentationLayer: setCellsLayer },\n    { spatialSegmentationLayer: cellsLayer },\n  );\n  useMoleculesData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n    { setSpatialPointLayer: setMoleculesLayer },\n    { spatialPointLayer: moleculesLayer },\n  );\n\n  // useCallback prevents new functions from propogating\n  // changes to the underlying component.\n  const handleImageAdd = useCallback(async (index) => {\n    const loader = imageLayerLoaders[index];\n    const newChannels = await initializeLayerChannels(\n      loader,\n      (rasterLayers[index] || {}).use3d,\n    );\n    const newLayer = {\n      index,\n      modelMatrix: imageLayerMeta[index]?.metadata?.transform?.matrix,\n      ...DEFAULT_RASTER_LAYER_PROPS,\n      channels: newChannels,\n      type: imageLayerMeta[index]?.metadata?.isBitmask ? 'bitmask' : 'raster',\n    };\n    const newLayers = [...rasterLayers, newLayer];\n    setRasterLayers(newLayers);\n  }, [imageLayerLoaders, imageLayerMeta, rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerChange = useCallback((newLayer, i) => {\n    const newLayers = [...rasterLayers];\n    newLayers[i] = newLayer;\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const handleRasterLayerRemove = useCallback((i) => {\n    const newLayers = [...rasterLayers];\n    newLayers.splice(i, 1);\n    setRasterLayers(newLayers);\n  }, [rasterLayers, setRasterLayers]);\n\n  const hasNoBitmask = (\n    imageLayerMeta.length ? imageLayerMeta : [{ metadata: { isBitmask: true } }]\n  ).every(l => !l?.metadata?.isBitmask);\n  // Only want to show vector cells controller if there is no bitmask\n  const canShowCellVecmask = hasNoBitmask;\n  const layerIs3DIndex = rasterLayers?.findIndex && rasterLayers.findIndex(layer => layer.use3d);\n  return (\n    <LayerControllerMemoized\n      ref={layerControllerRef}\n      title={title}\n      removeGridComponent={removeGridComponent}\n      theme={theme}\n      isReady={isReady}\n      moleculesLayer={moleculesLayer}\n      dataset={dataset}\n      setMoleculesLayer={setMoleculesLayer}\n      cellsLayer={cellsLayer}\n      canShowCellVecmask={canShowCellVecmask}\n      setCellsLayer={setCellsLayer}\n      rasterLayers={rasterLayers}\n      imageLayerLoaders={imageLayerLoaders}\n      imageLayerMeta={imageLayerMeta}\n      rasterLayersCallbacks={rasterLayersCallbacks}\n      setRasterLayersCallbacks={setRasterLayersCallbacks}\n      areLoadingRasterChannnels={areLoadingRasterChannnels}\n      setAreLoadingRasterChannnels={setAreLoadingRasterChannnels}\n      handleRasterLayerChange={handleRasterLayerChange}\n      handleRasterLayerRemove={handleRasterLayerRemove}\n      disable3d={disable3d}\n      globalDisable3d={globalDisable3d}\n      layerIs3DIndex={layerIs3DIndex}\n      disableChannelsIfRgbDetected={disableChannelsIfRgbDetected}\n      enableLayerButtonsWithOneLayer={enableLayerButtonsWithOneLayer}\n      setZoom={setZoom}\n      setTargetX={setTargetX}\n      setTargetY={setTargetY}\n      setTargetZ={setTargetZ}\n      setRotationX={setRotationX}\n      setRotationOrbit={setRotationOrbit}\n      // Fall back to window for height and width.\n      componentHeight={componentHeight || windowHeight}\n      componentWidth={componentWidth || windowWidth}\n      spatialLayout={spatialLayout}\n      handleImageAdd={handleImageAdd}\n    />\n  );\n}\n\nexport default LayerControllerSubscriber;\n","module.exports = require(\"@material-ui/icons/MoreVert\");","module.exports = require(\"@material-ui/icons/Lens\");","module.exports = require(\"@material-ui/core/AccordionSummary\");","module.exports = require(\"@material-ui/core/AccordionDetails\");","module.exports = require(\"@material-ui/icons/RemoveCircle\");","module.exports = require(\"@material-ui/core/Tabs\");","module.exports = require(\"@material-ui/core/Accordion\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/Visibility\");","module.exports = require(\"@material-ui/icons/VisibilityOff\");","module.exports = require(\"@material-ui/core/FormControl\");","export { default as LayerControllerSubscriber } from './LayerControllerSubscriber';\nexport { default as LayerController } from './LayerController';\nexport { default as VectorLayerController } from './VectorLayerController';\n"],"sourceRoot":""}